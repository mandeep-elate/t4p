(()=>{"use strict";var e={67389:(e,t,n)=>{n.d(t,{Z:()=>k});var s=n(1387),a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e._v(" Default Children "),t("Repeater",{attrs:{value:e.value||[],"default-new-value":e.defaultValue,control:e.repeaterOptions},on:{input:function(t){return e.updateDefaultElements(t)}},scopedSlots:e._u([{key:"default",fn:function({index:n,value:a}){return[t(s.Z,{staticClass:"mb-2",attrs:{value:a.slug,items:e.elementsAvailableForThisElementNestingType,hint:"Element that will be automatically added inside this current element","persistent-hint":"",clearable:""},on:{input:function(t){return e.updatePath(t,n,"slug")}}}),a.slug&&e.canHaveChildren(a.slug)?t("ElementStudioDefaultElements",{staticClass:"mb-2",attrs:{value:a.children,"parent-element-slug":a.slug,"allow-import":!1},on:{input:function(t){return e.updatePath(t,n,"children")}}}):e._e(),a.slug?t("ElementStudioDefaultProperties",{attrs:{value:a.defaultProperties||!1,"element-slug":a.slug},on:{input:function(t){return e.updatePath(t,n,"defaultProperties")}}}):e._e()]}}])}),e.allowImport?t("div",[t("br"),t("div",{staticClass:"mb-2"},[e._v(" Import all children of the currently active element ")]),t("NiceButton",{attrs:{disabled:!e.canImport},on:{click:e.importChildren}},[e._v(" Import Children ")])],1):e._e()],1)},i=[],o=n(70655),r=n(20144),l=n(14391),c=n(34680),d=n.n(c),u=n(64940),p=n(78021),h=n(43349),m=n(21069),g=n(23128),v=n(9950),f=n(87589),y=n(6184),b=n(55443);let P=class extends r.ZP{constructor(){super(...arguments),this.defaultValue={},this.repeaterOptions={options:{repeaterOptions:{defaultTitle:"Default Element",titleTemplate:"{slug}",buttonName:"Add new default element"}}}}beforeCreate(){this.$options.components.ElementStudioDefaultElements=n(67389).Z}updateDefaultElements(e){this.$emit("input",e)}canHaveChildren(e){if(!e)return!1;const t=u.PK.element(e),n=t.nestingRule.type;return!n.startsWith("final")}get canImport(){return!!u.kD.activeElement&&u.kD.activeElement.data.type===this.context.element().slug}importChildren(){if(!u.kD.activeElement)return;const e=t=>({slug:t.data.type,defaultProperties:t.data.properties,children:t.children.map(e)}),t=(0,g.Z)(u.kD.activeElement),n=t.children.map(e);this.updateDefaultElements(n)}get elementsAvailableForThisElementNestingType(){return Object.keys(u.PK.elements).filter((e=>{const t=u.PK.element(this.parentElementSlug),n=u.PK.element(e).nestingRule;return(0,v.V4)(n,t.nestingRule,t.slug)}))}updatePath(e,t,n){const s=(0,g.Z)(this.value)||{};s[t][n]=e,this.$emit("input",s)}};(0,o.gn)([(0,l.fI)()],P.prototype,"value",void 0),(0,o.gn)([(0,l.fI)()],P.prototype,"parentElementSlug",void 0),(0,o.gn)([(0,l.fI)({default:!0})],P.prototype,"allowImport",void 0),(0,o.gn)([(0,l.tB)("context")],P.prototype,"context",void 0),P=(0,o.gn)([(0,l.wA)({components:{NiceButton:b.Z,ElementStudioDefaultProperties:y.Z,TextInput:f.Z,Repeater:m.Z,Dropdown:h.Z,Accordion:p.Z,draggable:d()}})],P);const _=P,S=_;var C=n(1001),w=(0,C.Z)(S,a,i,!1,null,null,null);const k=w.exports},6184:(e,t,n)=>{n.d(t,{Z:()=>P});var s=n(37179),a=n(73385),i=n(75223),o=n(12570),r=n(55234),l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("h3",{staticClass:"mb-1"},[e._v("Default Properties")]),t(s.Z,{staticClass:"mr-2",attrs:{small:"",text:"",disabled:!e.canImport,outlined:""},on:{click:e.importDefaultProperties}},[e._v("import")]),e.value?t(s.Z,{attrs:{color:"red darken-1",text:"",small:"",outlined:""},on:{click:e.clearDefaultProperties}},[e._v("clear")]):e._e(),t("div",{staticClass:"element-studio-default-properties-instructions"},[e._v(" Click IMPORT to set the default properties to the properties of the currently active element. Active element must be a "),t("b",[e._v(e._s(e.elementSlug))]),e._v(". ")]),t("h5",[e._v("Current Default Properties")]),t("pre",{staticClass:"element-studio-default-properties-preview"},[e._v(e._s(e.value))]),t(o.Z,{attrs:{"max-width":"500"},model:{value:e.dialogOpen,callback:function(t){e.dialogOpen=t},expression:"dialogOpen"}},[t(a.Z,[t(i.EB,{staticClass:"headline"},[e._v(" Set Default Properties ")]),t(i.ZB,[e._v(" Set default properties for "+e._s(e.elementSlug)+" to:"),t("br"),t("br"),e._v(" "+e._s(e.defaultProperties)+" ")]),t(i.h7,[t(s.Z,{attrs:{color:"red darken-1",text:""},on:{click:e.cancel}},[e._v(" cancel ")]),t(r.Z),t(s.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.confirmDefaultProperties}},[e._v(" confirm ")])],1)],1)],1)],1)},c=[],d=n(70655),u=n(20144),p=n(14391),h=n(85450),m=n(23128);let g=class extends u.ZP{constructor(){super(...arguments),this.dialogOpen=!1,this.defaultProperties=this.value}get canImport(){return!!h.kD.activeElement&&h.kD.activeElement.data.type===this.elementSlug}cancel(){this.dialogOpen=!1}importDefaultProperties(){if(!h.kD.activeElement)return;if(h.kD.activeElement.data.type!==this.elementSlug)return;const e=(0,m.Z)(h.kD.activeElement.data.properties);e&&("settings"in e&&delete e.settings,"meta"in e&&delete e.meta),this.defaultProperties=e,this.dialogOpen=!0}confirmDefaultProperties(){this.dialogOpen=!1,this.$emit("input",this.defaultProperties)}clearDefaultProperties(){confirm("are you sure?")&&this.$emit("input",!1)}};(0,d.gn)([(0,p.fI)()],g.prototype,"value",void 0),(0,d.gn)([(0,p.fI)()],g.prototype,"elementSlug",void 0),g=(0,d.gn)([(0,p.wA)({components:{}})],g);const v=g,f=v;var y=n(1001),b=(0,y.Z)(f,l,c,!1,null,null,null);const P=b.exports},9289:(e,t,n)=>{n.d(t,{Z:()=>f});var s=n(37179),a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Dialog",{attrs:{value:e.open},on:{close:function(t){return e.$emit("close")},"click:outside":function(t){return e.$emit("close")},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("close")}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Save as Global Block ")]},proxy:!0},{key:"text",fn:function(){return[t("TextInput",{attrs:{size:"md",placeholder:"Global Block",autofocus:e.open},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveAsGlobalBlock.apply(null,arguments)}},model:{value:e.globalBlockName,callback:function(t){e.globalBlockName=t},expression:"globalBlockName"}})]},proxy:!0},{key:"actions",fn:function(){return[t(s.Z,{attrs:{text:""},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),t(s.Z,{attrs:{color:"blue",dark:"",disabled:!e.globalBlockName},on:{click:e.saveAsGlobalBlock}},[e._v(" Save ")])]},proxy:!0}])})},i=[],o=n(70655),r=n(87615),l=n(20144),c=n(14391),d=n(89137),u=n(87589);let p=class extends l.ZP{constructor(){super(...arguments),this.globalBlockName=""}async saveAsGlobalBlock(e){e.preventDefault(),this.globalBlockName&&(this.elementId&&await(0,r.AM)(this.elementId,this.globalBlockName),this.globalBlockName="",this.$emit("close"))}};(0,o.gn)([(0,c.fI)({default:!1})],p.prototype,"open",void 0),(0,o.gn)([(0,c.fI)({required:!0})],p.prototype,"elementId",void 0),p=(0,o.gn)([(0,c.wA)({components:{Dialog:d.Z,TextInput:u.Z}})],p);const h=p,m=h;var g=n(1001),v=(0,g.Z)(m,a,i,!1,null,null,null);const f=v.exports},62080:(e,t,n)=>{n.d(t,{Z:()=>A});var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"structure-node-children"},[e._l(e.nodes,(function(n){return[t("StructureNode",{key:n.id,attrs:{element:n,depth:e.depth}})]}))],2)},a=[],i=n(70655),o=n(20144),r=n(14391),l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{"structure-node":!0,"breakdance--currently-dragging":this.currentlyDragging},attrs:{"data-element-id":e.element.id}},[t("div",{staticClass:"structure-node-title-wrapper"},[t("div",{staticClass:"structure-node-title",class:e.activeClass,style:e.indentStyle,on:{click:e.activateElement}},[t("div",{staticClass:"structure-node-title-real"},[t("div",{staticClass:"structure-node-toggle-wrapper"},[e.element.children.length?t("Icon",{staticClass:"structure-node-action__icon",attrs:{icon:"CaretDownIcon",size:"10",rotate:e.shouldShowChildrenNodes?void 0:"270"},on:{click:function(t){return t.stopPropagation(),e.toggleChildren.apply(null,arguments)}}}):e._e()],1),t("div",{class:{"structure-node-title-real-real":!0,"structure-panel-editing-friendly-name":e.editingFriendlyName}},[t("ElementIcon",{staticClass:"structure-node-icon",attrs:{icon:e.baseElement.uiIcon,size:"12"}}),t("div",{staticClass:"element-title-text",attrs:{title:e.friendlyNameInputValue||e.elementName}},[e.editingFriendlyName?e._e():t("span",{staticClass:"element-title-name ellipsis-text",on:{dblclick:e.enableEditingFriendlyName}},[e._v(" "+e._s(e.friendlyNameInputValue||e.elementName)+" ")]),e.editingFriendlyName?t("input",{ref:"friendlyNameInputRef",staticClass:"element-custom-name-input",attrs:{size:e.friendlyNameInputValue,spellcheck:"false"},domProps:{value:e.friendlyNameInputValue},on:{input:function(t){return e.updateFriendlyName(t.target.value)},keyup:[function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"]))return null;e.showElementNameFallback=!1},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.disableEditing.apply(null,arguments)}],blur:e.disableEditing,mousedown:function(t){return t.stopPropagation(),e.noop.apply(null,arguments)},contextmenu:function(t){return t.stopPropagation(),e.noop.apply(null,arguments)}}}):e._e(),e.isDraftSection&&!e.editingFriendlyName?t("span",{staticClass:"element-title__meta"},[e._v(" (Draft) ")]):e._e(),e.isShowingIdsInStructurePanel&&!e.editingFriendlyName?t("span",{staticClass:"element-title__meta"},[e._v(" #"+e._s(e.element.id)+" ")]):e._e()]),e.editingFriendlyName?e._e():t("div",{staticClass:"structure-node-actions__wrapper"},[t("Icon",{staticClass:"structure-node-action__icon mr-2",attrs:{size:"12",icon:"BarsIcon",title:"Open menu"},on:{click:e.showContextMenu}}),t("Icon",{staticClass:"structure-node-action__icon mr-2",attrs:{icon:"DuplicateIcon",title:"Duplicate element"},on:{click:e.duplicate}}),t("Icon",{staticClass:"structure-node-action__icon mr-2",attrs:{size:"12",icon:"TrashIcon",title:"Delete element"},on:{click:e.remove}})],1)],1)])]),t("div",{staticClass:"nest-deeper",style:e.nestDeeperStyle,attrs:{"data-element-id":e.element.id}}),t("div",{staticClass:"nest-shallower",style:e.nestShallowerStyle,attrs:{"data-element-id":e.element.id}}),t("div",{staticClass:"top-half",attrs:{"data-element-id":e.element.id,"data-depth":e.depth}}),t("div",{staticClass:"bottom-half",attrs:{"data-element-id":e.element.id,"data-depth":e.depth}})]),e.shouldShowChildrenNodes?t("ChildStructureNodes",{attrs:{nodes:e.element.children,depth:e.depth+1}}):e._e()],1)},c=[],d=n(27361),u=n.n(d),p=n(85450),h=n(23128),m=n(58897),g=n(85283),v=n(78),f=n(95690),y=n(98992),b=n(94550),P=n(34676);const _=16;let S=class extends o.ZP{constructor(){super(...arguments),this.showElementNameFallback=!0,this.editingFriendlyName=!1}get shouldShowChildrenNodes(){return(0,y.sF)(this.element.id)}beforeCreate(){this.$options.components.ChildStructureNodes=n(62080).Z}activateElement(){p.kD.activateElement(this.element.id),(0,f.iN)("elementproperties")!==(0,f.iN)("structure")&&(0,f.oM)("elementproperties")}get baseElement(){return p.PK.element(this.element.data.type)}get activeClass(){return{"breakdance--active-element":p.kD.activeElementId===this.element.id}}get indentStyle(){const e=this.depth*_;return{marginLeft:`${e}px`,width:`calc(100% - 1px - ${e}px`}}get nestDeeperStyle(){const e=(this.depth+1)*_;return{left:`${e}px`}}get nestShallowerStyle(){const e=this.depth*_;return{width:`${e}px`}}get elementName(){return p.PK.element(this.element.data.type).name}get currentlyDragging(){return p.kD.currentlyDraggingCanvasElementId===this.element.id}get isShowingIdsInStructurePanel(){return p.kD.settings.showElementIdInStructurePanel}duplicate(){p.Hb.duplicateElementAndActivateIt(this.element.id)}showContextMenu(e){p.kD.setOnStructurePanelRightClickMenuState({elementId:this.element.id,position:{x:e.clientX,y:e.clientY}})}remove(){p.Hb.deleteElement({nodeId:this.element.id})}toggleChildren(){const e=(0,h.Z)(p.kD.structurePanelNodesExpandedState);e[this.element.id]=!this.shouldShowChildrenNodes,p.kD.setStructurePanelNodesExpandedState(e)}get isDraftSection(){return this.element.data.type===b.PZ&&u()(this.element.data.properties,"settings.advanced.draft")}get friendlyNameInputValue(){return void 0===this.element.data.properties?.meta?.friendlyName&&this.showElementNameFallback?(this.showElementNameFallback=!1,this.elementName):(this.editingFriendlyName&&(this.showElementNameFallback=!1),this.element.data.properties?.meta?.friendlyName&&this.element.data.properties?.meta?.friendlyName.trim())}enableEditingFriendlyName(){this.editingFriendlyName=!0,(0,P.n)((()=>{this.$refs.friendlyNameInputRef.focus(),this.$refs.friendlyNameInputRef.select()}))}updateFriendlyName(e){p.Hb.unthrottledPropertyChanged({elementId:this.element.id,path:"meta.friendlyName",meta:{snapshotLabel:`Updated friendly name for element "${this.elementName}"`},value:e?.trim()||void 0})}disableEditing(){this.editingFriendlyName=!1,this.showElementNameFallback=!0}noop(e){return e.stopPropagation(),{}}};(0,i.gn)([(0,r.fI)()],S.prototype,"element",void 0),(0,i.gn)([(0,r.fI)()],S.prototype,"depth",void 0),S=(0,i.gn)([(0,r.wA)({name:"StructureNode",components:{ElementIcon:v.Z,Icon:g.Z,StructureContextMenu:m.Z}})],S);const C=S,w=C;var k=n(1001),x=(0,k.Z)(w,l,c,!1,null,null,null);const I=x.exports;let D=class extends o.ZP{};(0,i.gn)([(0,r.fI)()],D.prototype,"nodes",void 0),(0,i.gn)([(0,r.fI)()],D.prototype,"depth",void 0),D=(0,i.gn)([(0,r.wA)({components:{StructureNode:I},name:"ChildStructureNodes"})],D);const E=D,Z=E;var T=(0,k.Z)(Z,s,a,!1,null,null,null);const A=T.exports},58897:(e,t,n)=>{n.d(t,{Z:()=>w});var s=n(84192),a=n(70248),i=n(61908),o=n(11193),r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("Dropdown",{attrs:{absolute:!0,"position-x":e.position.x,"position-y":e.position.y,transition:!1},scopedSlots:e._u([{key:"activator",fn:function(){return[e._t("default")]},proxy:!0}],null,!0),model:{value:e.shouldShow,callback:function(t){e.shouldShow=t},expression:"shouldShow"}},[t(a.Z,{attrs:{dense:""}},[t(i.Z,{attrs:{link:!0,disabled:!e.elementId},nativeOn:{click:function(t){return e.copyElement.apply(null,arguments)}}},[t(o.V9,[e._v("Copy")])],1),t(i.Z,{attrs:{link:!0,disabled:!e.canPasteElement},nativeOn:{click:function(t){return e.pasteElement.apply(null,arguments)}}},[t(o.V9,[e._v("Paste")])],1),t(i.Z,{attrs:{link:!0,disabled:!e.canPasteElementProperties},nativeOn:{click:function(t){return e.pasteElementProperties("design")}}},[t(o.V9,[e._v("Paste Design")])],1),t(i.Z,{attrs:{link:!0,disabled:!e.canPasteElementProperties},nativeOn:{click:function(t){return e.pasteElementProperties("settings")}}},[t(o.V9,[e._v("Paste Settings")])],1),t(s.Z),t(i.Z,{attrs:{link:!0,disabled:!e.elementId},nativeOn:{click:function(t){return e.deleteElement.apply(null,arguments)}}},[t(o.V9,[e._v("Delete")])],1),t(s.Z),t(i.Z,{attrs:{link:!0,disabled:!e.canSaveAsGlobalBlock},nativeOn:{click:function(t){return e.openSaveGlobalBlockDialog.apply(null,arguments)}}},[t(o.V9,{staticClass:"pointer-events-none"},[e._v("Save as Global Block")])],1)],1)],1),t("GlobalBlockDialog",{attrs:{open:e.saveGlobalBlockDialog,"element-id":e.element?.id},on:{close:e.closeGlobalBlockDialog}})],1)},l=[],c=n(70655),d=n(20144),u=n(14391),p=n(89028),h=n(85450),m=n(87615),g=n(9289),v=n(43349),f=n(31381),y=n(31737);let b=class extends d.ZP{constructor(){super(...arguments),this.saveGlobalBlockDialog=!1,this.clipboardDialog=!1,this.canPasteElement=!1,this.canPasteElementProperties=!1}get menuState(){return"closed"!==h.kD.onStructurePanelRightClickMenuState?h.kD.onStructurePanelRightClickMenuState:null}get position(){return this.menuState?.position||{x:0,y:0}}get elementId(){return this.menuState?.elementId}get element(){return(0,f.DY)(h.Hb.document.tree,this.elementId)}async onStateChange(){const{permission:e}=await(0,y.fn)();if(this.permission=e?.state,"prompt"===this.permission)return this.canPasteElement=!0,void(this.canPasteElementProperties=!0);this.canPasteElement=await(0,p.Ku)(this.menuState?.elementId?this.menuState.elementId:h.Hb.document.tree.root.id),this.canPasteElementProperties=!!this.menuState?.elementId&&await(0,p.us)(this.menuState.elementId)}copyElement(){this.elementId&&(0,p.NA)(this.elementId)}pasteElement(){"prompt"===this.permission&&(this.clipboardDialog=!0),this.elementId?(0,p.Wm)(this.elementId):(0,p.Wm)(h.Hb.document.tree.root.id)}pasteElementProperties(e){"prompt"===this.permission&&(this.clipboardDialog=!0),this.elementId&&(0,p.qb)(this.elementId,e)}deleteElement(){this.elementId&&h.Hb.deleteElement({nodeId:this.elementId})}openSaveGlobalBlockDialog(){this.elementId&&(this.saveGlobalBlockDialog=!0)}closeGlobalBlockDialog(){this.saveGlobalBlockDialog=!1,this.$emit("close")}get canSaveAsGlobalBlock(){return this.elementId&&(0,m.VQ)(this.elementId)}get shouldShow(){return"closed"!==h.kD.onStructurePanelRightClickMenuState&&!this.saveGlobalBlockDialog}set shouldShow(e){e||h.kD.setOnStructurePanelRightClickMenuState("closed")}};(0,c.gn)([(0,u.RL)("menuState")],b.prototype,"onStateChange",null),b=(0,c.gn)([(0,u.wA)({components:{GlobalBlockDialog:g.Z,Dropdown:v.Z}})],b);const P=b,_=P;var S=n(1001),C=(0,S.Z)(_,r,l,!1,null,null,null);const w=C.exports},45335:(e,t,n)=>{n.d(t,{EJ:()=>A,Fg:()=>N,JA:()=>R,LX:()=>S,Qm:()=>W,Wh:()=>O,gU:()=>P,hh:()=>_,ho:()=>C,nS:()=>$,rn:()=>L,w2:()=>Z,wi:()=>f,zX:()=>B});var s=n(27361),a=n.n(s),i=n(85450),o=n(96628),r=n(74959),l=n(88506),c=n(30902),d=n(45974),u=n(31381),p=n(94550),h=n(23128),m=n(65118),g=n(39664);const v={elements:[],unsplash_keywords:[]};function f(e,t){if(!e)return v;const n=(0,c.pipe)((0,l.Z)(e),(0,d.fold)((t=>(console.log("Error parsing JSON from AI:",t[0].msg),console.log(e),console.log(""),null)),(e=>e)));return n&&Array.isArray(n?.elements)?{...n,elements:n.elements.filter((e=>void 0!==e.index&&void 0!==e.content)).map((e=>({nodeId:t[e.index].nodeId,controlPath:t[e.index].controlPath,value:e.content})))}:v}let y=[];function b(e,t){return e.nodeId===t.nodeId&&e.controlPath===t.controlPath&&e.value===t.value}function P(e){const t=e.filter((e=>!y.some((t=>b(t,e)))));y=e,t.forEach((e=>{i.Hb.throttledPropertyChanged({elementId:e.nodeId,path:e.controlPath,value:e.value,meta:{snapshotLabel:"Update from Generative AI"}})}))}function _(e,t,n){e.filter((e=>{if(n){const t=(0,u.DY)(i.Hb.document.tree,e.nodeId);if(!t)return!1;const n=a()(t.data.properties,e.controlPath);return null===n||void 0===n||""===n}return!0})).forEach(((e,n)=>{const s=t[n];i.Hb.unthrottledPropertyChanged({elementId:e.nodeId,path:e.controlPath,value:{id:-1,type:"external_image",url:s.urls.regular,alt:s.alt_description||"",caption:s.description||""},meta:{snapshotLabel:"Update image from Generative AI"}})}))}function S(e,t=[]){const n=i.PK.element(e.data.type);if(n.settings&&n.settings.disableAI)return t;let s=[...t,...k(n.controls.contentSections,"content",e)];return e.children.forEach((e=>{s=S(e,s)})),s}function C(e,t=[]){let n=[...t,...w(i.PK.element(e.data.type).controls.contentSections,"content",e)];return e.children.forEach((e=>{n=C(e,n)})),n}function w(e,t,n,s=[]){const o=i.PK.element(n.data.type),r=s;return e.forEach((e=>{const s=`${t}.${e.slug}`;"wpmedia"===e.options.type&&r.push({nodeId:n.id,nodeName:o.name,controlPath:s,field:{description:D(e,s,n.data.type),label:e.label,value:a()(n.data.properties,s),type:e.options.type,locked:L(n,s)}}),w(e.children,s,n,r)})),r}function k(e,t,n,s=[]){const o=i.PK.element(n.data.type),r=s;return e.forEach((e=>{const s=`${t}.${e.slug}`;I(e)&&!x(e,t,n)&&r.push({nodeId:n.id,controlPath:s,nodeName:o.name,field:{description:D(e,s,n.data.type),label:e.label,value:a()(n.data.properties,s),type:e.options.type,locked:L(n,s)}}),"repeater"!==e.options.type&&k(e.children,s,n,r)})),r}function x(e,t,n){const s=`${t}.${e.slug}`,i=a()(n.data.properties,s,"");return""===i||null===i||void 0===i}function I(e){return["text","richtext","repeater"].includes(e.options.type)}function D(e,t,n){const s=i.PK.element(n).name;if("repeater"===e.options.type){const t=e.children.filter(I).map((e=>e.slug)),n=t.join(", ");return`${s} - An array of objects with the following keys: ${n}.`}return t.endsWith("button.text")?`${s} - Button`:s===e.label?s:`${s} - ${e.label}`}function E(e,t,n,s){const a=i.PK.element(t.data.type).name,o=(0,u.E)(e,t.id),l=(0,u.OA)(e,t.id),c=l?i.PK.element(l.data.type).name:"",d=[];if(l){const t=(0,u.E)(e,l.id),n=(0,r.Qc)(t+1);d.push(a),d.push("on"),d.push(n),d.push(c)}else if(t.data.type===p.PZ){const e=(0,r.Qc)(o+1);d.push(0===o?"Hero":e),d.push("section")}return d.push("on"),d.push(`"${n}"`),d.push(s.replace("breakdance_","")),d.join(" ")}function Z(e){const t=e.data?.properties?.meta?.friendlyName;if(t)return t;const n=i.PK.element(e.data.type).name;return`${n} #${e.id}`}function T(e){return e.data?.properties?.meta?.promptInfo}function A(e){const t=i.Hb.document.documentMeta,n=T(e);return n?.sectionDescription?n.sectionDescription:E(i.Hb.document.tree,e,t.titleLabel,t.postType)}function B(e){const t=T(e);return t?.qualifiers||""}function O(e){const t=T(e)?.temperature;return void 0!==t?t:1}function R(e,t){const n=i.PK.element(e.data.type).name;i.Hb.unthrottledPropertyChanged({elementId:e.id,path:"meta.promptInfo",meta:{snapshotLabel:`Updated prompt info for element "${n}"`},value:t})}function M(e,t){const n=i.PK.element(e.data.type).name,s=T(e)?.lockedFields||[],a=(0,h.Z)(s);a.includes(t)||a.push(t),i.Hb.unthrottledPropertyChanged({elementId:e.id,path:"meta.promptInfo.lockedFields",meta:{snapshotLabel:`Locked field "${t}" for element "${n}"`},value:a})}function F(e,t){const n=i.PK.element(e.data.type).name,s=T(e)?.lockedFields||[],a=(0,h.Z)(s),o=a.indexOf(t);o>-1&&a.splice(o,1),i.Hb.unthrottledPropertyChanged({elementId:e.id,path:"meta.promptInfo.lockedFields",meta:{snapshotLabel:`Unlocked field "${t}" for element "${n}"`},value:a})}function N(e,t){L(e,t)?F(e,t):M(e,t)}function L(e,t){const n=T(e)?.lockedFields||[];return n.includes(t)}function $(e){return T(e)?.lockedFields||[]}function W(e){const t="Failed to get a response from OpenAI API, please try again.",n=e.slice(1,-1).replace(/\\n/g,"").replace(/\\"/g,'"').trim(),s=(0,c.pipe)((0,m.Z)(n,o.Z4),(0,d.fold)((()=>null),(e=>e))),a=s?.error?.message||t;console.log(n),g.Z.log.errorMessage(a)}},76491:(e,t,n)=>{n.d(t,{I8:()=>_,Ig:()=>P,J4:()=>y,Tk:()=>m,ho:()=>g,m3:()=>v,n7:()=>b,y8:()=>f,yV:()=>S});var s=n(45974),a=n(32521),i=n(98851),o=n(96628),r=n(65669),l=n(88506),c=n(30902),d=n(85450),u=n(69137),p=n(19528),h=n.n(p);async function m(e,t="json"){return(0,i.D)({action:"breakdance_ai_request_completion",friendlyName:"AI Assistant",dataToPost:{messages:(0,r.J)(e),format:t},decoder:a.Z_,resultKey:"data"})}async function g(e,t="json",n){await(0,i.D)({action:"breakdance_ai_persist_messages",friendlyName:"AI Assistant - Persist Messages",dataToPost:{messages:(0,r.J)(e),format:t,temperature:n},decoder:a.dt({status:a.i0("ok")})})}function v(){const e=window.Breakdance.restUrl+"/ai/stream-completion?_wpnonce="+window.Breakdance.restNonce;return new EventSource(e)}function f(e){const t=(0,c.pipe)(e,l.Z,(0,s.fold)((()=>{}),(e=>e))),n=t?.choices[0].delta.content;return null!==n&&void 0!==n?n:""}function y(e){return e=e.replace("```json",""),e=e.replace(/^json/g,""),e=e.replace("```",""),e}function b(e){return e=e.replace('"index" 0','"index": 0'),e=e.replace('index" 0','"index": 0'),e=e.replace('"index 0','"index": 0'),h()(e)}async function P(e,t,n){const r=await(0,i.D)({action:"breakdance_ai_talk_to_unsplash",friendlyName:"Unsplash Assistant",dataToPost:{prompt:e.join(", "),limit:t,orientation:n},decoder:a.IX(o.pi),resultKey:"data"});return(0,c.pipe)(r,(0,s.fold)((()=>[]),(e=>e)))}async function _(){const e=await(0,i.D)({action:"breakdance_ai_get_settings",decoder:o.YF,resultKey:"data",suppressErrorLogging:!0});return(0,c.pipe)(e,(0,s.fold)((()=>!1),(e=>(u.n.ignore((()=>{d.cr.setAiSettings(e),d.cr.markCurrentAiSettingsAsUntouched()})),!0))))}async function S(){const e=d.cr.aiSettings,t=await(0,i.D)({action:"breakdance_ai_save_settings",dataToPost:{settings:(0,r.J)(e.prompt)},decoder:o.YF,resultKey:"data"});return(0,c.pipe)(t,(0,s.fold)((()=>!1),(e=>(u.n.ignore((()=>{d.cr.setAiSettings(e),d.cr.markCurrentAiSettingsAsUntouched()})),!0))))}},74959:(e,t,n)=>{n.d(t,{Qc:()=>d,ee:()=>o,r1:()=>l,wX:()=>r});var s=n(45974),a=n(30902),i=n(65669);function o(e){return e.map(((e,t)=>({index:t,type:e.field.description,content:"",locked:e.field.locked,maxLength:("string"===typeof e.field.value?e.field.value.length:0)+1})))}function r(e,t){const n=[{name:"Business Name",value:e.businessName??"Bizcorp"},{name:"Business Description",value:e.businessDescription??"Bizcorp provides products and services."},{name:"Section Description",value:t?.sectionDescription??""},{name:"Qualifiers",value:t?.qualifiers??e.qualifiers??""}];return n.reduce(((e,t)=>t.value?`${e}\n${t.name}: ${t.value}`:e),"")}function l(e,t,n){const o=(0,a.pipe)(e,i.J,(0,s.fold)((()=>null),(e=>e))),l=r(n,t);return[{role:"system",content:`\nYou are a helpful AI assistant. Your jobs is to help build a website for a business. You are going to create text content for a section on the website.\n      \n## Rules for the content:\nYou will be provided with a few pieces of information to help you generate content for the section.\nThe "section description" is a short description of the section, that will tell the type of content to generate and where it might be positioned on the page. Example: "Hero section on About Us page", "2nd section on Contact page", "3rd section on Home page".\nThe "qualifiers" is a short sentence that affects the writing style of the content. Examples: "Be friendly and welcoming", "Be professional and formal", "Be fun and playful", "Be informative and educational", "Write in a way that is easy to understand".\n\n## Rules for the JSON structure:\n- You will be provided a JSON structure of the section content.\n- You will respond back with the same JSON structure, but with the "content" key filled in.\n- You must not use newline characters.\n- The provided JSON must be nested in a key called "elements".\n- You can use the "type" key to determine what type of content to generate for the "content" key.\n- The "content" key MUST never be null or empty, you must always provide a value and be creative. Try to guess what content would be appropriate based on the "type" key.\n- The "content" key can be formatted as HTML only if the "type" key starts with "Rich Text".\n- If the "type" key starts with "Dual Heading", this means this heading can have words separated and styled differently. For example, "This is a *heading* with words *highligthed*.". Use the "secondary_style" (boolean) key to style the secondary words.\n- If the "type" key starts with "Simple Counter - Suffix", this means the "content" key is a suffix for a number. For example, "s", "ms", " guests", " years old", etc.\n- If the "type" key mentions "Array of objects", this means the "content" key is an array of objects. The objects must have all the keys mentioned in the "type" key.\n- If the "locked" key is true, remove this item from the array.\n- If a "maxLength" key is provided, the "content" key in the same object must not exceed the provided length.\n- Fill the "unsplash_keywords" key with keywords related to the content generated, max. of 3. These keywords will be used to find images on Unsplash.\n- Respond strictly with valid JSON, if you don't, great sadness will happen.\n- Write the response in ${t.locale}\n\nThe JSON must be compatible with the following TypeScript interface:\n\ninterface Response {\n  elements: Array<{\n    index: number;\n    type: string;\n    content: string|unknown[];\n  }>;\n  unsplash_keywords: string[];\n}\n`},{role:"user",content:l},{role:"user",content:o||""}]}const c=new Intl.PluralRules("en",{type:"ordinal"});function d(e){const t=c.select(e);switch(t){case"one":return`${e}st`;case"two":return`${e}nd`;case"few":return`${e}rd`;default:return`${e}th`}}},96628:(e,t,n)=>{n.d(t,{YF:()=>o,Z4:()=>l,pi:()=>r});var s=n(32521);const a=s.r$({icon:s.Z_,name:s.Z_,prompt:s.Z_}),i=s.dt({businessName:s.G0([s.Z_,s.lB]),businessDescription:s.G0([s.Z_,s.lB]),qualifiers:s.G0([s.Z_,s.lB]),presets:s.IX(a)}),o=s.dt({isApiKeySet:s.O7,isStreamingEnabled:s.O7,locale:s.Z_,model:s.Z_,prompt:i}),r=s.dt({id:s.Z_,alt_description:s.G0([s.Z_,s.lB]),description:s.G0([s.Z_,s.lB]),urls:s.r$({raw:s.Z_,full:s.Z_,regular:s.Z_,small:s.Z_,thumb:s.Z_})}),l=s.dt({error:s.r$({message:s.Z_,type:s.G0([s.Z_,s.lB]),param:s.G0([s.Z_,s.lB]),code:s.G0([s.Z_,s.pk])})})},5502:(e,t,n)=>{function s(e,t,n,s,i){function o(e,r){if(a(e)){const s={};for(const a in e){if(a===t)return e[a];if(n.includes(a))continue;const i=o(e[a],`${r?`${r}.`:""}${a}`);void 0!==i&&(s[a]=i)}return Object.keys(s).length?s:void 0}if(Array.isArray(e)){const t=[];if(e.forEach((e=>{t.push(o(e,`${r}[]`))})),0===t.filter((e=>void 0!==e)).length)return;return t.length?t:void 0}const l=r&&i?.some((e=>r.startsWith(e)));return t===s||l?e:void 0}return o(e,"")}function a(e){return"object"===typeof e&&null!==e&&!Array.isArray(e)}n.d(t,{A:()=>s,S:()=>a})},89028:(e,t,n)=>{n.d(t,{Ku:()=>$,us:()=>W,NA:()=>R,wp:()=>O,ij:()=>B,Wm:()=>F,HR:()=>N,qb:()=>L,gR:()=>A,uV:()=>D,l9:()=>T});var s=n(27361),a=n.n(s),i=n(31381),o=n(85450),r=n(45974),l=n(30902),c=n(9950),d=n(69137),u=n(23128),p=n(65118),h=n(65669),m=n(84274),g=n(565),v=n(72045),f=n(12721),y=n(31737),b=n(31549),P=n(75031),_=n(32521);const S=_.G0([P.NM,_.IX(P.NM)]),C=_.dt({controlSectionShapeHash:_.Z_,propertiesData:_.dt({propertiesData:_._4})}),w=_.r$({element:S,controlSectionPropertiesData:C});var k=n(39715),x=n(98949);const I=new f.hF;function D(){return{register(){I.on("copy",E),I.on("cut",E),I.on("paste",E)},unbind(){I.removeAll()}}}function E(e){const t=window.Breakdance.canvas.document,n=(0,y.SD)(t)||(0,y.SD)(document);n||(e.preventDefault(),"copy"===e.type&&o.kD.activeElementId?R(o.kD.activeElementId):"cut"===e.type&&o.kD.activeElementId?M(o.kD.activeElementId):"paste"===e.type&&F(o.kD.activeElementId,e))}async function Z(e){const{secure:t,permission:n}=await(0,y.fn)();return e&&!window.safari?"event":t?null===n||"denied"===n.state?"localstorage":"clipboard":"localstorage"}async function T(e){try{await navigator.clipboard.writeText(e),console.debug("Writing to clipboard")}catch(t){(0,y._G)(e),console.debug("Fallback: Writing to clipboard")}(0,b.r)("breakdance_clipboard",e)}async function A(e){const t=e?.clipboardData?.getData("text"),n=await Z(e);return console.debug(`Reading clipboard from ${n}`),"event"===n?t:"localstorage"===n?(0,b.z)("breakdance_clipboard"):await navigator.clipboard.readText()}async function B(e){const t=await A(e);if(!t)return null;const n=(0,p.Z)(t,w);return(0,l.pipe)(n,(0,r.fold)((()=>null),(e=>e??null)))}function O(e){const t=[];e.forEach((e=>{const n=(0,i.DY)(o.Hb.document.tree,e);n&&t.push((0,i.HC)(n))}));const n=(0,k.G)(t);(0,l.pipe)(n,h.J,(0,r.fold)((e=>console.error("Failed to copy element",...e.map((e=>e.toString())))),(e=>{T(e)})))}function R(e){const t=(0,i.DY)(o.Hb.document.tree,e);if(!t)return;const n=(0,i.HC)(t),s=(0,k.G)(n);(0,l.pipe)(s,h.J,(0,r.fold)((e=>console.error("Failed to copy element",...e.map((e=>e.toString())))),(e=>{T(e)})))}function M(e){R(e),o.Hb.deleteElement({nodeId:e})}async function F(e,t){if("success"!==o.PK.elementsLoadingState)return;const n=(await B(t))?.element;n&&(Array.isArray(n)?(0,x.AE)(n,"pasting"):N(e,n))}function N(e,t){const n=(0,c.Z)(o.Hb.document.tree,e,(0,c.kE)(t)),s=(0,v.Z)(),a=`Paste:${s}`;(0,l.pipe)(n,(0,r.fold)((()=>{}),(e=>{"TOP_LEVEL"===e?d.n.transaction((()=>{const e={nodeId:void 0};o.Hb.addElementMutation({elementSlug:(0,c.zV)(),parentNodeId:o.Hb.document.tree.root.id,index:!1,pointer:e}),void 0!==e.nodeId&&(o.Hb.pasteCopiedElementMutation({element:t,placeToAddId:e.nodeId,placeToAddIndex:0}),g.w.run.onCreatedElement({elementId:t.id,transactionKey:a}))}),`Paste copied ${(0,m.JC)(t.data.type)} into a new section`,a):d.n.transaction((()=>{const n={nodeId:void 0};o.Hb.pasteCopiedElementMutation({element:t,placeToAddId:e.place.id,placeToAddIndex:e.index||e.place.children.length,pointer:n}),n.nodeId&&g.w.run.onCreatedElement({elementId:n.nodeId,transactionKey:a})}),`Paste copied ${(0,m.JC)(t.data.type)}`,a)})))}async function L(e,t="design"){const n=(await B())?.element;if(Array.isArray(n))return;if(!n)return;const s=(0,i.DY)(o.Hb.document.tree,e);if(!s)return;const r=a()(n.data.properties,t,null);n.data.type===s.data.type&&o.Hb.throttledPropertyChanged({elementId:s.id,path:t,value:(0,u.Z)(r),meta:{snapshotLabel:`Paste properties of ${(0,m.JC)(n.data.type)} to ${(0,m.JC)(s.data.type)}`}})}async function $(e){if("success"!==o.PK.elementsLoadingState)return!1;const t=(await B())?.element;if(Array.isArray(t))return!0;if(!t)return!1;const n=(0,c.Z)(o.Hb.document.tree,e,(0,c.kE)(t));return(0,r.isRight)(n)}async function W(e){const t=(await B())?.element;if(Array.isArray(t))return!1;if(!t)return!1;const n=(0,i.DY)(o.Hb.document.tree,e);return t.data.type===n?.data.type}},39715:(e,t,n)=>{function s(e){return{element:e}}n.d(t,{G:()=>s})},31737:(e,t,n)=>{async function s(){try{return await navigator.permissions.query({name:"clipboard-read",allowWithoutGesture:!1})}catch(e){return null}}async function a(){const e=await s();return{secure:window.isSecureContext,permission:e}}function i(e){const t=document.createElement("textarea");let n;t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",t.classList.add("breakdance-offscreen-input"),document.body.appendChild(t),t.focus(),t.select();try{n=document.execCommand("copy")}catch(s){n=!1}return document.body.removeChild(t),n}function o(e){return"INPUT"===e?.nodeName}function r(e){const t=["button","checkbox","hidden","file","radio","image","range","reset","submit","number","email","time"];return o(e)&&e.type&&!t.includes(e.type)||"TEXTAREA"===e.nodeName||"true"===e.contentEditable}function l(e){const t=e?.defaultView?.getSelection(),n=t?.rangeCount?t.getRangeAt(0):null;return!!n&&!n.collapsed}function c(e){const t=e.activeElement;return t&&(o(t)||r(t)||l(e))}n.d(t,{SD:()=>c,_G:()=>i,fn:()=>a})},98949:(e,t,n)=>{n.d(t,{AE:()=>u,Hw:()=>h,f8:()=>p});var s=n(72045),a=n(69137),i=n(9950),o=n(64940),r=n(3735),l=n(48973),c=n(565),d=n(31549);const u=(e,t="inserting")=>{const n=(0,s.Z)(),d=`pasteElements:${n}`;a.n.transaction((()=>{e.forEach((e=>{const t=(0,i.Z)(o.Hb.document.tree,null,(0,i.kE)(e));(0,r.zG)(t,(0,l.g_)((()=>{}),(t=>{if("TOP_LEVEL"===t)return;const n={nodeId:void 0};o.Hb.pasteCopiedElementMutation({element:e,placeToAddId:t.place.id,placeToAddIndex:t.index||t.place.children.length,pointer:n}),n.nodeId&&c.w.run.onCreatedElement({elementId:n.nodeId,transactionKey:d})})))}))}),"inserting"===t?"Import from design library":"Paste Elements",d)};function p(){const e=(0,d.z)("breakdance_last_used_design_provider");return"string"===typeof e&&e}function h(e){(0,d.r)("breakdance_last_used_design_provider",e)}},11815:(e,t,n)=>{function s({namespace:e,phpClassName:t,uiIcon:n,tag:s,tagOptions:a,tagControlPath:i,name:o,className:r,category:l,badge:c,defaultProperties:d,defaultChildrenElements:u,designControls:p,contentControls:h,settingsControls:m,dependencies:g,settings:v,addPanelRules:f,actions:y,nestingRules:b,spacingBars:P,attributes:_,experimental:S,order:C,dynamicPropertyPaths:w,additionalClasses:k,projectManagement:x,propertyPathsToWhitelistInFlatProps:I,propertyPathsToSsrElementWhenValueChanges:D}){return`<?php\n\nnamespace ${e};\n\nuse function Breakdance\\Elements\\c;\nuse function Breakdance\\Elements\\PresetSections\\getPresetSection;\n\n\n\\Breakdance\\ElementStudio\\registerElementForEditing(\n    "${e}\\\\${t}",\n    \\Breakdance\\Util\\getdirectoryPathRelativeToPluginFolder(__DIR__)\n);\n\nclass ${t} extends \\Breakdance\\Elements\\Element\n{\n    static function uiIcon()\n    {\n        return '${n}';\n    }\n\n    static function tag()\n    {\n        return '${s}';\n    }\n\n    static function tagOptions()\n    {\n        return ${a};\n    }\n\n    static function tagControlPath()\n    {\n        return ${i};\n    }\n\n    static function name()\n    {\n        return '${o}';\n    }\n\n    static function className()\n    {\n        return '${r}';\n    }\n\n    static function category()\n    {\n        return '${l}';\n    }\n\n    static function badge()\n    {\n        return ${c};\n    }\n\n    static function slug()\n    {\n        return __CLASS__;\n    }\n\n    static function template()\n    {\n        return file_get_contents(__DIR__ . '/html.twig');\n    }\n\n    static function defaultCss()\n    {\n        return file_get_contents(__DIR__ . '/default.css');\n    }\n\n    static function defaultProperties()\n    {\n        return ${d};\n    }\n\n    static function defaultChildren()\n    {\n        return ${u};\n    }\n\n    static function cssTemplate()\n    {\n        $template = file_get_contents(__DIR__ . '/css.twig');\n        return $template;\n    }\n\n    static function designControls()\n    {\n        return ${p};\n    }\n\n    static function contentControls()\n    {\n        return ${h};\n    }\n\n    static function settingsControls()\n    {\n        return ${m};\n    }\n\n    static function dependencies()\n    {\n        return ${g};\n    }\n\n    static function settings()\n    {\n        return ${v};\n    }\n\n    static function addPanelRules()\n    {\n        return ${f};\n    }\n\n    static public function actions()\n    {\n        return ${y};\n    }\n\n    static function nestingRule()\n    {\n        return ${b};\n    }\n\n    static function spacingBars()\n    {\n        return ${P};\n    }\n\n    static function attributes()\n    {\n        return ${_};\n    }\n\n    static function experimental()\n    {\n        return ${S};\n    }\n\n    static function order()\n    {\n        return ${C};\n    }\n\n    static function dynamicPropertyPaths()\n    {\n        return ${w};\n    }\n\n    static function additionalClasses()\n    {\n        return ${k};\n    }\n\n    static function projectManagement()\n    {\n        return ${x};\n    }\n\n    static function propertyPathsToWhitelistInFlatProps()\n    {\n        return ${I};\n    }\n\n    static function propertyPathsToSsrElementWhenValueChanges()\n    {\n        return ${D};\n    }\n}\n`}n.d(t,{i:()=>s})},17231:(e,t,n)=>{function s(e,t,n,s){return`<?php\n\nnamespace ${n};\n\nuse function Breakdance\\Elements\\c;\nuse function Breakdance\\Elements\\PresetSections\\getPresetSection;\n\n\\Breakdance\\Elements\\PresetSections\\PresetSectionsController::getInstance()->register(\n    "${e}",\n    ${t},\n    true,\n    ${s}\n);\n\n`}n.d(t,{C:()=>s})},87615:(e,t,n)=>{n.d(t,{AM:()=>f,VQ:()=>_,db:()=>v,fv:()=>P,v_:()=>b});var s=n(98851),a=n(9665),i=n(45974),o=n(31381),r=n(85450),l=n(30902),c=n(94550),d=n(23128),u=n(9950),p=n(39664),h=n(65669),m=n(565),g=n(32521);async function v(){return await(0,s.D)({action:"breakdance_load_blocks",resultKey:"blocks",decoder:a.GF})}async function f(e,t){const n=(0,o.DY)(r.Hb.document.tree,e);if(!n)return;const s=y(n);r.kD.setElementUpdatingState({elementId:e,isUpdating:!0}),(0,l.pipe)(await b({tree:s,label:t,id:-1,editInBreakdanceLink:"",settings:!1}),(0,i.fold)((t=>{t.forEach((e=>p.Z.log.message(e.msg))),r.kD.setElementUpdatingState({elementId:e,isUpdating:!1})}),(t=>{const s=(0,o.E)(r.Hb.document.tree,n.id),a=(0,o.Lf)(r.Hb.document.tree,n.id);if(r.kD.setElementUpdatingState({elementId:e,isUpdating:!1}),!a)return;if(!(0,u.V4)((0,u.V9)(c.pQ),(0,u.V9)(a.data.type),a.data.type,"breakdance_block"))return;const i={nodeId:void 0};r.Hb.addElementMutation({elementSlug:c.pQ,parentNodeId:a.id,index:s,pointer:i}),i.nodeId&&(m.w.run.onCreatedElement({elementId:i.nodeId,transactionKey:void 0}),r.Hb.deleteElement({nodeId:e}),r.Hb.throttledPropertyChanged({elementId:i.nodeId,path:"content.content.block",value:t.id,meta:{snapshotLabel:"Replace element with a global block"}}),r.kD.activateElement(i.nodeId))})))}function y(e){const t=(0,o.vb)(),n=(0,o.Bc)(t,e),s=(0,u.xJ)(t,n,t.root.id,"breakdance_block");if(s)(0,o.Dv)(t,n.id,t.root.id,t.root.children.length,"breakdance_block");else{const e=(0,o.dS)(t,{type:c.zn,properties:r.PK.element(c.zn).defaultProperties?(0,d.Z)(r.PK.element(c.zn).defaultProperties):null});(0,o.Dv)(t,e.id,t.root.id,t.root.children.length,"breakdance_block"),(0,o.Dv)(t,n.id,e.id,e.children.length,"breakdance_block")}return(0,o.n$)(t)}async function b(e){return await(0,s.D)({friendlyName:"Saving Global Block to WordPress",action:"breakdance_save_global_block",dataToPost:{...e,settings:!!e.settings&&(0,h.J)(e.settings),tree:(0,h.J)(e.tree)},decoder:a.HH,resultKey:"block"})}async function P(e,t){return await(0,s.D)({friendlyName:"Saving Global Block Settings to WordPress",action:"breakdance_save_global_block_settings",dataToPost:{postId:e,settings:!!t&&(0,h.J)(t)},decoder:g._4})}function _(e){const t=(0,o.DY)(r.Hb.document.tree,e);if(!t)return!1;if(t.data.type===c.pQ)return!1;const n=(0,o.vb)(),s=(0,o.dS)(n,{type:c.zn,properties:null});return(0,o.Dv)(n,s.id,n.root.id,n.root.children.length,"breakdance_block"),!!(0,u.xJ)(n,t,s.id,"breakdance_block")||!!(0,u.xJ)(n,t,n.root.id,"breakdance_block")}},1073:(e,t,n)=>{n.d(t,{T:()=>h,_:()=>p});var s=n(98851),a=n(75031),i=n(30902),o=n(45974),r=n(51168),l=n(64940),c=n(32521),d=n(65669),u=n(69137);async function p(){const e=await(0,s.D)({action:"breakdance_load_global_settings",decoder:a.az});return(0,i.pipe)(e,(0,o.fold)((e=>((0,r.UE)(e.map((e=>({...e,customNotificationToShow:e.customNotificationToShow?"INTERNAL_SERVER_ERROR"===e.customNotificationToShow.type?{...e.customNotificationToShow,keepOpen:!0}:e.customNotificationToShow:void 0})))),!1)),(e=>(u.n.ignore((()=>{l.cr.setGlobalSettings(e.globalSettings),l.cr.markCurrentGlobalSettingsAsUntouched()})),!0))))}async function h(){return(0,i.pipe)(await(0,s.D)({friendlyName:"Saving global settings to WordPress",action:"breakdance_save_global_settings",dataToPost:{globalSettings:(0,d.J)(l.cr.globalSettings)},decoder:c._4}),(0,o.fold)((e=>((0,r.UE)(e),!1)),(()=>(u.n.ignore((()=>l.cr.markCurrentGlobalSettingsAsUntouched())),!0))))}},93709:(e,t,n)=>{function s(e=!1){const t=document.querySelector(".properties-panel-search-box-wrap input");if(t?.focus(),e){const e=document.querySelector(".properties-panel-search-box-wrap .properties-panel-search-settings-toggle");if(e){const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}}}function a(){const e=document.querySelector(".properties-panel-search-box-wrap .properties-panel-search-modified");if(e){const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}}n.d(t,{O:()=>s,p:()=>a})},18759:(e,t,n)=>{n.d(t,{MK:()=>l,Q:()=>d,WX:()=>c,co:()=>i,jv:()=>r,ln:()=>h,rg:()=>o,uz:()=>p,v:()=>u,y3:()=>m});var s=n(64940),a=n(23128);function i(e,t){return s.kD.panelState.accordionState.elementProperties[e]?.[t]}function o(e,t,n){const i=(0,a.Z)(s.kD.panelState);i.accordionState.elementProperties={...i.accordionState.elementProperties,[e]:{...i.accordionState.elementProperties[e],[t]:n}},s.kD.setPanelState(i)}function r(e,t){return s.kD.panelState.accordionState.selectors[e]?.[t]}function l(e,t,n){const i=(0,a.Z)(s.kD.panelState);i.accordionState.selectors={...i.accordionState.selectors,[e]:{...i.accordionState.selectors[e],[t]:n}},s.kD.setPanelState(i)}function c(e,t){return s.kD.panelState.accordionState.presets[e]?.[t]}function d(e,t,n){const i=(0,a.Z)(s.kD.panelState);i.accordionState.presets={...i.accordionState.presets,[e]:{...i.accordionState.presets[e],[t]:n}},s.kD.setPanelState(i)}function u(e,t){const n=(0,a.Z)(s.kD.panelState);n.accordionState.globalSettings={...n.accordionState.globalSettings,[e]:t},s.kD.setPanelState(n)}function p(e){return s.kD.panelState?.accordionState?.globalSettings[e]}function h(e,t){const n=(0,a.Z)(s.kD.panelState);n.accordionState.dynamicDataFieldAttributes={...n.accordionState.dynamicDataFieldAttributes,[e]:t},s.kD.setPanelState(n)}function m(e){return s.kD.panelState?.accordionState?.dynamicDataFieldAttributes[e]}},37982:(e,t,n)=>{n.d(t,{DQ:()=>b,Fr:()=>y,_S:()=>v,c3:()=>P,y8:()=>g,zF:()=>_});var s=n(45974),a=n(21516),i=n(98851),o=n(3735),r=n(48973),l=n(51168),c=n(64940),d=n(65669),u=n(32521),p=n(95690),h=n(69137),m=n(39664);function g(e){return/^-?[.]+[_a-zA-Z]+[_a-zA-Z0-9-]*$/.test(e)}function v(e){try{document.createDocumentFragment().querySelector(e)}catch{return!1}return!0}function f(e){if("class"===e.type){if(!g(e.name))return void m.Z.log.message(`${e.name} is not a valid CSS class name.`)}else if(!v(e.name))return void m.Z.log.message(`${e.name} is not a valid CSS selector.`);c.cr.cssSelectors.find((t=>t.name===e.name))?m.Z.log.message(`${e.name} is already present.`):h.n.transaction((()=>c.cr.setSelectors([...c.cr.cssSelectors,e])),"Add Selector")}function y(e){f(e),(0,p.O_)("selectors")||_()}function b(e){if(!v(e))return(0,s.left)([`"${e}" is not a valid CSS selector.`]);const t=!!g(e);return(0,s.right)({name:e,type:t?"class":"custom",properties:{}})}async function P(){const e=await(0,i.D)({action:"breakdance_load_selectors",decoder:a.Ng});return(0,o.zG)(e,(0,r.g_)((e=>((0,l.UE)(e.map((e=>({...e,customNotificationToShow:e.customNotificationToShow?"INTERNAL_SERVER_ERROR"===e.customNotificationToShow.type?{...e.customNotificationToShow,keepOpen:!0}:e.customNotificationToShow:void 0})))),!1)),(e=>(h.n.ignore((()=>{c.cr.setSelectors(e),c.cr.markCurrentSelectorsAsUntouched()})),!0))))}async function _(){return(0,o.zG)(await(0,i.D)({friendlyName:"Saving selectors to WordPress",action:"breakdance_save_selectors",dataToPost:{selectors:(0,d.J)(c.cr.cssSelectors)},decoder:u._4}),(0,r.g_)((e=>((0,l.UE)(e),!1)),(()=>(h.n.ignore((()=>c.cr.markCurrentSelectorsAsUntouched())),!0))))}},98992:(e,t,n)=>{n.d(t,{FM:()=>o,nx:()=>r,sF:()=>l,u3:()=>i});var s=n(31381),a=n(64940);function i(e,t){return(0,s.K1)(((e,n)=>(n[e.id]=t,n)),e.root,{})}function o(e,t){const n=(0,s.DY)(e,t);if(n)return(0,s.J9)(((e,t)=>(t[e.id]=!0,t)),e,n,{})}function r(e){return!1===a.kD.structurePanelNodesExpandedState[e]}function l(e){return void 0===a.kD.structurePanelNodesExpandedState[e]||!0===a.kD.structurePanelNodesExpandedState[e]}},32127:(e,t,n)=>{n.d(t,{Dl:()=>w,Ft:()=>A,Oc:()=>x,PX:()=>I,UH:()=>T,gn:()=>O,rI:()=>R,x2:()=>k});var s=n(8400),a=n.n(s),i=n(98851),o=n(47245),r=n(85450),l=n(67505),c=n(23128),d=n(69137),u=n(45974),p=n(30902),h=n(51168),m=n(25970),g=n(86592),v=n(13635),f=n(32521),y=n(65669),b=n(89381),P=n(63842),_=n(39664),S=n(565),C=n(13503);async function w(e){return await(0,i.D)({action:"breakdance_load_document",dataToPost:{id:e},decoder:o.Ux})}async function k(){return await(0,i.D)({action:"breakdance_load_document",decoder:o.d0})}function x(e,t){(0,p.pipe)(e,(0,u.fold)((e=>{r.kD.setInterfaceState("normal"),(0,h.UE)(e.map((e=>({...e,customNotificationToShow:e.customNotificationToShow?"INTERNAL_SERVER_ERROR"===e.customNotificationToShow.type?{...e.customNotificationToShow,keepOpen:!0}:e.customNotificationToShow:void 0}))))}),(async e=>{Z(),(0,l.jE)(e.plugins),D(e),t?.returnUrl&&r.Sr.setBackToAdminUrl(t.returnUrl),(0,g.Ui)(),(0,g.iZ)(),r.kD.selectBaseBreakpoint(),(0,b.w7)("globalSettings",t?.browseModeOpenUrl)})))}function I(e){(0,p.pipe)(e,(0,u.fold)((e=>{r.kD.setInterfaceState("normal"),(0,h.UE)(e.map((e=>({...e,customNotificationToShow:e.customNotificationToShow?"INTERNAL_SERVER_ERROR"===e.customNotificationToShow.type?{...e.customNotificationToShow,keepOpen:!0}:e.customNotificationToShow:void 0}))))}),(async e=>{if("errorType"in e)return r.kD.setInterfaceState("normal"),void r.PK.setInvalidPostData(e);Z(),(0,v.Ik)(),(0,l.jE)(e.plugins),E(e),(0,g.Ui)(),(0,g.iZ)(),await(0,m.Kd)(),r.kD.selectBaseBreakpoint(),r.kD.setInterfaceState("normal"),d.n.initialize()})))}function D(e){r.PK.setEnvironment(e.environment),r.PK.setElementsAndAppendRootElement(e.builderElements),r.PK.setElementsExternalAttrsDepsAndActions(e.elementsExternalAttrsDepsAndActions),r.PK.setElementCategories(e.builderElementCategories),r.PK.setPreferences(e.preferences),r.PK.setDynamicFields(e.dynamicFields),r.PK.setConditions(e.conditions),r.PK.setFonts(e.fonts),r.PK.setGlobalSettingsControlsAndTemplate(e.globalSettingsControlsAndTemplate),r.PK.setAvailableDocuments(e.availableDocuments),r.PK.setAvailableMediaSizes(e.availableMediaSizes),r.PK.setAvailablePermissions(e.availablePermissions),r.PK.setPermission(e.permission),r.PK.setSelectorControls(e.selectors.controls),r.PK.setClassTemplate(e.selectors.template),r.PK.setNeededUrls(e.neededData),r.PK.setPresetsForElements(e.elementPresets),r.PK.setBuiltinBreakpoints(e.builtinBreakpoints),r.PK.setTwigMacros(e.twigMacros),r.PK.setTwigMacrosHash(e.twigMacrosHash),r.PK.setAvailableWordpressPlugins(e.availableWordpressPlugins),r.PK.setDesignLibrary(e.designLibrary),r.PK.setSubscriptionMode(e.subscriptionMode),r.PK.setExperiments(e.experiments),r.PK.setAi(e.ai),d.n.ignore((()=>{r.cr.setGlobalSettings(e.globalSettings),r.cr.markCurrentGlobalSettingsAsUntouched(),r.cr.setSelectors(e.selectors.selectors),r.cr.markCurrentSelectorsAsUntouched(),r.cr.setPresets(e.elementPresets),r.cr.markCurrentPresetsAsUntouched()}))}function E(e){r.Hb.setDocument(e.document),r.PK.setDocumentSpecificNeededUrls(e.documentSpecificNeededUrls),r.PK.loadTemplatePreviewData(e.templatePreview),D(e)}function Z(){window.Breakdance.originalUrl=location.href,window.Breakdance.stores={configStore:r.PK,documentStore:r.Hb,uiStore:r.kD,globalStore:r.cr}}function T(e){const t=new URL(window.Breakdance.originalUrl);return t.searchParams.set("id",`${e}`),t.search=t.searchParams.toString(),t.href}async function A(e){return(0,i.D)({action:"breakdance_save_template_last_previewed_item",decoder:f.dt({success:f.i0(!0)}),dataToPost:{postId:r.Hb.document.documentMeta.id,item:(0,y.J)(e)}})}class B{setupHook(e){this.store=e,this.initialState=(0,c.Z)(this.store.state)}resetToInitialState(){const e=(0,c.Z)(this.initialState);this.store.replaceState(e)}}new B;async function O(){(0,p.pipe)(await(0,i.D)({action:"breakdance_load_builder_elements",resultKey:"elements",decoder:f.IX(P._t)}),(0,u.fold)((e=>{e.forEach((e=>_.Z.log.message(e.msg))),r.PK.setElementsLoadingState("failed"),r.kD.logError("Failed to load elements")}),(e=>{const t=a()(e,10);t.forEach(((e,n)=>{requestIdleCallback((()=>{r.PK.addNonExistentElementsNonReactively(e),(0,g.iZ)(e);const s=n===t.length-1;s&&(S.w.registerAllStoreActions(),r.PK.setElementsLoadingState("success"),(0,C.aL)((0,v.RY)()))}))}))})))}async function R(e){const t=r.kD.unsavedChangesPresent;if(t){const e=window.confirm("You have unsaved changes, are you sure you want to leave?");if(!e)return}const n=r.Hb.document.tree._lookupTable,s=Object.keys(n).map(Number);s.forEach((e=>S.w.run.onBeforeDeletingElement({elementId:e}))),S.w.resetAllCallbacks(),r.kD.setCanvasState("loading"),r.PK.setLeavingIframeOnPurpose(!0);const a=r.PK.elements,i=await w(e);I(i),r.kD.setUnsavedChangesPresent(!1),r.PK.setElementsMutation(a);const o=new URL(window.location);o.searchParams.set("id",`${e}`),window.history.replaceState({},"",o)}},60188:(e,t,n)=>{n(86702);var s=n(20144),a=n(31096),i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(a.Z,{class:e.classList},[t("Notifications"),e.isBrowseModeEnabled?[t("BrowseMode",{key:"browser"})]:[t("Builder",{key:"builder"})]],2)},o=[],r=n(70655),l=n(14391),c=n(85450),d=n(96326),u=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-builder"},[e.errorsPresent?t("UnrecoverableErrors"):"normal"===e.interfaceState?t("BuilderLayout"):"loading"===e.interfaceState?t("Loading"):e._e()],1)},p=[],h=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("AppLayout",{class:e.classList,scopedSlots:e._u([{key:"topbar",fn:function(){return[e.isPreviewMode?e._e():t("BuilderTopBar"),e.isPreviewMode?t("PreviewModeCloseButton"):e._e()]},proxy:!0},{key:"body",fn:function(){return[t("ClosingConfirmations"),t("DesignLibraryModal"),t("FirstTimeVisit"),t("SidebarPanels",{directives:[{name:"show",rawName:"v-show",value:!e.isPreviewMode,expression:"!isPreviewMode"}],attrs:{panelState:e.leftSidebarPanelState,position:"left"}}),t("IframeCanvas",{on:{loaded:e.onIframeLoaded}}),e.showTemplateDialog?t("TemplateDialog",{attrs:{"template-id":e.templateId,"template-name":e.templateName,templateIsFallback:e.isTemplateFallback,templatesPageUrl:e.templatesPageUrl}}):e._e(),e.showInvalidPostDialog?t("InvalidPostDialog"):e._e(),e.preferencesModalOpen?t("PreferencesModal",{attrs:{open:e.preferencesModalOpen},on:{"update:dialog":e.updatePreferencesModal}}):e._e(),e.keyboardShortcutsHelpModalOpen?t("KeyboardShortcutsHelpModal",{attrs:{open:e.keyboardShortcutsHelpModalOpen},on:{"update:dialog":e.updateKeyboardShortcutsHelpModal}}):e._e(),t("SidebarPanels",{directives:[{name:"show",rawName:"v-show",value:!e.isPreviewMode,expression:"!isPreviewMode"}],attrs:{panelState:e.rightSidebarPanelState,position:"right"}}),e.elementStudioOpen?t("div",{staticClass:"breakdance-app-far-right-area vscroll-wrap"},[t("ElementStudio")],1):e._e()]},proxy:!0}])})},m=[],g=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.iframeURL?t("IframeWrapper",{attrs:{"iframe-url":e.iframeURL,"iframe-preview-width":e.canvasPreviewWidth,"iframe-exited":e.iframeExited,"iframe-state":e.canvasState,"min-width":e.iframeMinWidth,"current-breakpoint":e.currentBreakpoint,"iframe-id":"iframe"},on:{previewWidthChange:e.handlePreviewWidthChange,previewWidthChangeWithAdjustmentBar:e.handlePreviewWidthChangeWithAdjustmentBar,iframeLoaded:e.mountCanvasInIframe,iframeUnloaded:e.setIframeAsExited,reloadWanted:e.reloadIframe,resetPreviewWidth:e.handleResetPreviewWidth}}):e._e()},v=[];const f='/* Copied from globals.scss, don\'t modify here directly */\n:root {\n  --white: #ffffff;\n  --black: #000000;\n\n  --blue50: #eff6ff;\n  --blue100: #dbeafe;\n  --blue200: #bfdbfe;\n  --blue300: #93c5fd;\n  --blue400: #60a5fa;\n  --blue500: #3b82f6;\n  --blue600: #2563eb;\n  --blue700: #1d4ed8;\n  --blue800: #1e40af;\n  --blue900: #1e3a8a;\n\n  --red600: #dc2626;\n\n  --bde-canvas-font-family: system-ui, -apple-system, "Segoe UI", Roboto,\n    Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";\n\n  --bde-app-font-family: "Avenir", Helvetica, Arial, sans-serif;\n}\n\n/* everything here should be prefixed with breakdance because\nthese styles are mixed with any fuckery from their theme */\n\n#breakdance_canvas {\n  position: relative;\n  /* note that .breakdance { position: relative { is loaded by default on the frontend,\n  therwise if the user uses absolute positioning, things could look different in the builder */\n  /* this is necessary cuz our outlines, titlebars, etc. are positioned relative to this element */\n}\n\n#breakdance_canvas.dragging {\n  cursor: grabbing;\n}\n\n#iframe {\n  margin: 4px;\n  border: 1px solid #eee;\n  background-color: white;\n  width: 100%;\n  padding: 2px;\n  font-family: var(--bde-canvas-font-family);\n  position: relative;\n}\n\n.breakdance-icon {\n  display: flex;\n  justify-content: center;\n}\n\n.breakdance-icon > svg {\n  fill: currentColor;\n  width: 100%;\n  height: 100%;\n}\n\n@-moz-document url-prefix() {\n  .breakdance-icon > svg {\n    width: auto;\n    height: auto;\n  }\n}\n\n.dragTaller {\n  height: 6px;\n  width: 6px;\n  border: 2px solid grey;\n  border-radius: 50%;\n  background-color: white;\n  z-index: 2000;\n}\n\n.drag-dot {\n  width: 11px;\n  height: 11px;\n  border-radius: 50%;\n  background-color: rgb(32, 43, 67);\n  cursor: move;\n  position: absolute;\n  z-index: 100000;\n  pointer-events: auto;\n}\n\n.drag-dots-wrapper {\n  position: absolute;\n  pointer-events: none;\n}\n\n.drag-dot-top-left {\n  top: -5px;\n  left: -5px;\n}\n\n.drag-dot-top-middle {\n  top: -5px;\n  left: calc(50% - 5px);\n}\n\n.drag-dot-top-right {\n  top: -5px;\n  left: calc(100% - 5px);\n}\n\n.drag-dot-bottom-left {\n  top: calc(100% - 5px);\n  left: -5px;\n}\n\n.drag-dot-bottom-middle {\n  top: calc(100% - 5px);\n  left: calc(50% - 5px);\n}\n\n.drag-dot-bottom-right {\n  top: calc(100% - 5px);\n  left: calc(100% - 5px);\n}\n\n.drag-dot-middle-left {\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.drag-dot-middle-right {\n  top: 50%;\n  transform: translate(50%, -50%);\n  right: 0;\n}\n\n.spacing-bar {\n  background-color: rgba(0, 0, 255, 0.2);\n  opacity: 0;\n  position: absolute;\n  transition: 0.3s ease-in-out opacity;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 10000;\n  min-height: 5px;\n}\n\n.spacing-bar:hover {\n  transition-delay: 0.2s;\n}\n\n.spacing-bar .spacing-bar-current-value {\n  font-family: monospace;\n  color: white;\n  font-size: 13px;\n  font-weight: 500;\n  background-color: #5555aa;\n  line-height: 1;\n  padding: 6px;\n  border-radius: 4px;\n  pointer-events: none;\n}\n\n.spacing-bar-inside-top {\n  min-height: 5px;\n  top: 0;\n  left: 0;\n  right: 0;\n}\n\n/* column drag */\n.drag-dots-left-width {\n  margin-right: 22px;\n}\n\n.drag-dots-column-widths-values {\n  display: flex;\n  flex-direction: row;\n  position: absolute;\n  left: -66px;\n  top: -8px;\n}\n\n.drag-dots-left-width,\n.drag-dots-right-width {\n  font-family: monospace;\n  color: white;\n  font-size: 13px;\n  font-weight: 500;\n  background-color: #5555aa;\n  line-height: 1;\n  padding: 6px;\n  border-radius: 4px;\n  width: 48px;\n}\n\n/* Node Chrome */\n\n.node-chrome,\n.node-titlebar-wrapper,\n.node-hover-controls {\n  transition: 0.3s opacity ease;\n}\n\n.node-chrome--hide-all,\n.node-chrome--hide-titlebar .node-titlebar-wrapper,\n.node-chrome--hide-hover .node-hover-controls {\n  opacity: 0;\n}\n\n/* Titlebars */\n\n.node-titlebar-wrapper {\n  position: absolute;\n  pointer-events: none;\n  direction: ltr;\n  z-index: 10000;\n  outline: 1px solid rgb(32, 43, 67);\n  user-select: none;\n}\n\n.node-titlebar {\n  pointer-events: auto;\n\n  display: flex;\n  align-items: center;\n  position: absolute;\n\n  bottom: 100%;\n  height: 28px;\n  padding: 0 10px;\n  border-radius: 4px 4px 0 0;\n\n  font-family: var(--bde-app-font-family);\n  font-size: 12px;\n  font-weight: 500;\n\n  letter-spacing: normal;\n  text-transform: none;\n\n  background-color: rgb(32, 43, 67);\n  color: white;\n  z-index: 1000000;\n\n  left: -1px;\n}\n\n.node-titlebar-is-draft-section {\n  background-color: rgb(122, 125, 133);\n}\n\n/*\n * Moving you mouse over the node titlebar or spacing bars\n * will trigger an erroneous mouseleave event on the element\n * you are dragging, when your mouse is not outside of it yet.\n */\n.dragging .spacing-bar,\n.dragging .node-titlebar {\n  pointer-events: none;\n}\n\n.node-titlebar-is-dragging,\n.breakdance--currently-dragging,\n.builder-element.breakdance--currently-dragging {\n  cursor: grabbing;\n}\n\n.breakdance--currently-dragging,\n.builder-element.breakdance--currently-dragging {\n  opacity: 0.5;\n}\n\n.node-titlebar-is-dragging {\n  /* color: rgb(32, 43, 67); */\n  background-color: rgb(167, 170, 177) !important;\n}\n\n.node-titlebar-wrapper-is-dragging {\n  outline: 1px solid rgb(167, 170, 177) !important;\n}\n\n.node-titlebar-wrapper .node-titlebar-button {\n  color: rgba(255, 255, 255, 0.85);\n  cursor: pointer;\n}\n\n.node-titlebar-button:hover {\n  color: rgba(255, 255, 255, 1);\n}\n\n.node-titlebar-title {\n  white-space: nowrap;\n  cursor: grab;\n  display: flex;\n  align-items: center;\n  letter-spacing: normal;\n}\n\n.node-titlebar-title .node-titlebar-button {\n  margin-right: 4px;\n  margin-left: 0px;\n}\n\n.node-titlebar-title .node-titlebar-button svg {\n  cursor: grab;\n}\n\n.node-titlebar-button-activate-parent {\n  margin-left: 6px;\n}\n\n.node-titlebar-button.node-titlebar-button-activate-parent > svg {\n  width: 10px;\n  height: 10px;\n}\n\n.node-titlebar-button {\n  margin-left: 9px;\n}\n\n.node-titlebar-button > svg {\n  width: 13px;\n  height: 13px;\n}\n\n.node-titlebar-margin-left {\n  margin-left: 20px;\n}\n\n/* Other */\n.breakdance-drag-placeholder-wrapper {\n  pointer-events: none;\n}\n\n.breakdance-drag-placeholder {\n  /* this won\'t work if something other than the window has position relative on it,\n  maybe we could mount the overlaid ui chrome inside the body, not in the canvas */\n\n  /* some months later\n  ... really? The above sounds like bullshit. I can put position relative\n  on all sorts of stuff and this works fine\n  so maybe we are already mounting the overlaid UI chrome in the right place?\n  */\n\n  position: absolute;\n  /* ---- */\n  background-color: var(--blue500);\n  z-index: 100001;\n  display: none;\n  border-radius: 2px;\n}\n\n.breakdance-drag-target-outline {\n  outline: 6px solid var(--blue300);\n  outline-offset: -6px;\n  z-index: 100000;\n  display: none;\n}\n\n.breakdance-children-pointer-events-none > * {\n  pointer-events: none;\n}\n\n/* global blocks */\n.breakdance-themeless-global-block {\n  cursor: default;\n}\n\n.breakdance-themeless-global-block::selection {\n  background-color: transparent;\n}\n\n.breakdance-themeless-global-block *::selection {\n  background-color: transparent;\n}\n\n.breakdance-foreign-documents-overlay {\n  font-family: var(--bde-canvas-font-family);\n  position: fixed;\n  z-index: 9999;\n  outline: 1px solid rgb(255 182 216);\n  outline-offset: -1px;\n  cursor: not-allowed;\n  background-color: rgba(0, 0, 0, 0.1);\n  display: none;\n}\n.breakdance-foreign-documents-overlay-titlebar-wrapper {\n  position: absolute;\n  top: 0;\n  left: 50%;\n}\n\n.breakdance-foreign-documents-overlay-titlebar {\n  position: relative;\n  left: -50%;\n  height: 28px;\n  padding: 0 10px;\n  font-family: var(--bde-canvas-font-family);\n  font-size: 12px;\n  font-weight: 500;\n  background-color: rgb(255 182 216);\n  border-radius: 0px 0px 4px 4px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  user-select: none;\n}\n\n.breakdance-foreign-documents-overlay-titlebar a {\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.breakdance-foreign-documents-overlay-titlebar a svg {\n  margin-left: 5px;\n  width: 14px;\n  height: 14px;\n}\n\n.breakdance-foreign-document-wrapper:hover\n  .breakdance-foreign-document-wrapper__overlay {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n/* node hover controls */\n.node-hover-controls {\n  position: absolute;\n  pointer-events: none;\n  z-index: 9999;\n}\n\n.node-hover-controls--outline {\n  outline: 1px solid rgb(177, 202, 255);\n}\n\n.node-hover-controls > div {\n  display: none;\n  z-index: 100000;\n}\n\n.node-hover-controls.node-hover-controls-show > div {\n  display: flex;\n}\n\n.node-hover-controls-button {\n  position: absolute;\n  pointer-events: auto;\n  flex-direction: column;\n\n  border-radius: 50%;\n\n  width: 40px;\n  height: 40px;\n\n  font-size: 20px;\n  font-weight: 700;\n  font-family: var(--bde-canvas-font-family);\n  background-color: rgb(32, 43, 67);\n  color: white;\n\n  align-items: center;\n  justify-content: center;\n\n  cursor: pointer;\n}\n\n.node-hover-controls-bottom-button {\n  top: calc(100% - 20px);\n  left: calc(50% - 20px);\n}\n\n.node-hover-controls-right-button {\n  top: 50%;\n  left: calc(100% - 48px);\n  transform: translateY(-50%);\n}\n\n.node-hover-controls-menu {\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n  font-family: var(--bde-canvas-font-family);\n  font-size: 13px;\n  font-weight: 500;\n  flex-direction: column;\n  background-color: white;\n  color: black;\n  display: none;\n  position: absolute;\n  top: calc(100% - 20px);\n  left: 50%;\n  transform: translateX(-50%);\n  width: 170px;\n  overflow: hidden;\n}\n\n.node-hover-controls-menu > div {\n  padding: 9px 12px;\n  text-align: center;\n}\n\n.node-hover-controls-menu > div:hover {\n  background-color: #fafafa;\n}\n\n.node-hover-controls-menu--open {\n  display: flex;\n}\n\n/* We do the outlining with JS to add some logic to it*/\n*:focus[contenteditable="true"] {\n  border: none;\n  outline: none;\n}\n\n.node-content-editable {\n  position: absolute;\n  pointer-events: none;\n  z-index: 1000;\n  outline: 1px solid var(--blue500);\n}\n\n/* EMPTY CONTAINER */\n\n.breakdance-empty-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  min-height: 200px;\n}\n\n.breakdance-empty-container__add-element {\n  font-family: var(--bde-canvas-font-family);\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  cursor: pointer;\n\n  user-select: none;\n\n  background-color: var(--blue50);\n  width: 42px;\n  height: 42px;\n  border-radius: 3px;\n  margin: 10px;\n}\n\n.breakdance-empty-container__add-element {\n  color: var(--blue500);\n}\n\n.breakdance-empty-container__add-element:hover {\n  background-color: var(--blue100);\n}\n\n.breakdance-empty-container__add-element--disabled,\n.breakdance-empty-container__add-element--disabled:hover {\n  cursor: not-allowed;\n  background: var(--grey-100);\n  color: var(--grey-300);\n}\n\n/* COLUMNS */\n\n.breakdance-empty-columns {\n  font-family: var(--bde-canvas-font-family);\n  box-sizing: border-box;\n  width: 100%;\n  overflow: hidden;\n  background-color: white;\n  border-radius: 5px;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1), 0 0 100px rgba(0, 0, 0, 0.1);\n  padding: 50px;\n}\n\n.breakdance-empty-columns-choices-heading {\n  font-weight: 500;\n  font-size: 16px;\n  text-align: center;\n  margin-bottom: 16px;\n  user-select: none;\n}\n\n.breakdance-empty-columns-choices {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.breakdance-empty-columns-choices-row {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: center;\n}\n\n.breakdance-empty-columns-column-icon-wrapper {\n  padding: 4px;\n  margin: 16px;\n  cursor: pointer;\n  border-radius: 3px;\n  transition: 0.3s ease-in-out filter;\n  filter: grayscale(90%);\n}\n\n.breakdance-empty-columns-column-icon-wrapper:hover {\n  filter: grayscale(0%);\n}\n\n.breakdance-empty-columns-column-icon {\n  width: 160px;\n  height: 90px;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n}\n\n.breakdance-empty-columns-column-icon-column {\n  margin: 4px;\n  width: 100%;\n  background-color: #bfdbfe;\n  border-radius: 3px;\n}\n\n.breakdance--empty-container:not(.breakdance--active-element) {\n  outline: 2px solid #eee;\n  outline-offset: -2px;\n}\n\n/* ELEMENT */\n\n.builder-element {\n  cursor: default;\n}\n\n/* right click menu. This is  duplicated in the RightClickMenu\n\nWe need it also here because this is used both in the canvas and the structure panel\n*/\n\n.breakdance-canvas-right-click-menu {\n  position: absolute;\n  z-index: 2147483647;\n  font-family: var(--bde-canvas-font-family);\n  background-color: var(--white);\n  box-shadow: 0px 5px 5px -3px rgb(0 0 0 / 20%),\n    0px 8px 10px 1px rgb(0 0 0 / 14%), 0px 3px 14px 2px rgb(0 0 0 / 12%);\n  min-width: 200px;\n  border-radius: 6px;\n  padding: 6px 0px;\n  user-select: none;\n  letter-spacing: normal;\n  text-transform: none;\n}\n\n.breakdance-canvas-right-click-menu-item {\n  font-size: 13px;\n  font-weight: 400;\n  font-size: 12px;\n  min-height: 33px;\n  padding: 0 18px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  cursor: pointer;\n  color: #333;\n}\n\n.breakdance-canvas-right-click-menu-item-shortcut {\n  margin-left: auto;\n  font-size: 12px;\n  color: var(--grey-400);\n}\n\n.breakdance-canvas-right-click-menu-divider {\n  height: 1px;\n  background-color: #ddd;\n  margin-top: 4px;\n  margin-bottom: 4px;\n}\n\n.breakdance-canvas-right-click-menu-item:hover:not(.breakdance-canvas-right-click-menu-item-disabled) {\n  background-color: #eee;\n}\n\n.breakdance-canvas-right-click-menu-item-disabled {\n  opacity: 0.5;\n  cursor: default !important;\n}\n\n/* Empty State */\n\n.breakdance-canvas-empty-element {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  padding: 30px;\n  text-align: center;\n  border: 2px dashed #c3c4c7;\n}\n\n.breakdance-canvas-empty-element__title {\n  font-size: 18px;\n  font-weight: normal;\n  color: #646970;\n  margin-bottom: 0;\n}\n\n/*** Warning ***/\n\n.bde-ssr-error {\n  background: rgb(254, 242, 242);\n  color: var(--red600);\n  padding: 12px;\n}\n\n/*** Loading ***/\n\n.breakdance-empty-ssr-message {\n  padding: 12px;\n  background: rgb(242, 242, 254);\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  color: black;\n  font-size: 13px;\n  font-weight: 500;\n  margin: 12px 0;\n}\n\n.breakdance-empty-ssr-message-error {\n  background: rgb(254, 242, 242);\n}\n\n.breakdance-empty-ssr-message small {\n  margin-top: 6px;\n  color: black;\n  font-size: 11px;\n  font-weight: 400;\n}\n\n.breakdance-element-is-updating:empty {\n  min-height: 80px;\n  max-width: 100%;\n  width: 400px;\n}\n\n.breakdance-element-is-updating {\n  opacity: 0.3;\n  background: repeating-linear-gradient(\n    45deg,\n    #eee 0px,\n    #eee 10px,\n    #d4d4d4 10px,\n    #d4d4d4 20px\n  );\n}\n\n.breakdance-node-titlebar-loading-spinner {\n  animation: breakdance-node-titlebar-loading-spinner 1s linear infinite;\n}\n\n@keyframes breakdance-node-titlebar-loading-spinner {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.breakdance-canvas-right-click-dropdown {\n  position: relative;\n}\n\n.breakdance-canvas-right-click-submenu {\n  position: absolute;\n  left: 100%;\n  top: -20px;\n  z-index: 100000;\n  pointer-events: none;\n  opacity: 0;\n  min-width: 100px;\n  padding-top: 20px;\n  transition: .3s opacity ease;\n}\n\n.breakdance-canvas-right-click-submenu__arrow {\n  margin-left: auto;\n}\n\n.breakdance-canvas-right-click-submenu__content {\n  position: static!important;\n  translate: 4px 0;\n  overflow: hidden;\n  min-width: auto;\n}\n\n.breakdance-canvas-right-click-dropdown:hover .breakdance-canvas-right-click-submenu {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n.breakdance-canvas-right-click-dropdown--disabled,\n.breakdance-canvas-right-click-dropdown--disabled:hover {\n  pointer-events: none;\n}\n\n@media (prefers-color-scheme: dark) {\n  .breakdance-canvas-right-click-menu {\n    background-color: #1f2229;\n  }\n\n  .breakdance-canvas-right-click-menu-item {\n    color: var(--white);\n  }\n\n  .breakdance-canvas-right-click-menu-item:hover:not(.breakdance-canvas-right-click-menu-item-disabled) {\n    background-color: #2c3038;\n  }\n\n  .breakdance-canvas-right-click-menu-divider {\n    background-color: #4d535e;\n  }\n}';var y=n(27361),b=n.n(y),P=n(23279),_=n.n(P),S=n(18076),C=n(25970),w=n(67505),k=n(71035);const x=1,I=3;function D(e,t,n,{enableContentEditableAndFocus:s,saveContentEditable:a}){const i=e=>{const o=[];return e.forEach((e=>{if(e.nodeType===I){const t=e.nodeValue;"%%CHILDREN%%"===t?.trim()?o.push(n()):t&&o.push(t)}else if(e.nodeType===x&&e instanceof Element){const n=e.attributes,r=e.nodeName,l={},c={},d={},u=[];let p,h;for(let t=0;t<n.length;t++){const i=n.item(t);if(i){const t=i.name;"class"===t?p=i.value:"style"===t?h=i.value:l[t]=i.value,"data-content-editable-property-path"===t&&(d.dblclick=s,d.blur=a,c.innerHTML=e.innerHTML)}}!c.innerHTML&&e.hasChildNodes()&&u.push(...i(e.childNodes)),o.push(t(r,{class:p,style:h,attrs:{...l},on:{...d},domProps:c},u))}})),o},o=new DOMParser,r=o.parseFromString(e,"text/html").body,l=(new XMLSerializer).serializeToString(r),c=l.replace(/<body.*?>/,"").replace("</body>",""),d=o.parseFromString("<root>"+c+"</root>","application/xhtml+xml");return i(d.documentElement.childNodes)}var E=n(98851),Z=n(32521),T=n(63842);Z.r$({globalSettingsCssFilePath:Z.Z_,globalSelectorsCssFilePath:Z.Z_,defaultCssForAllElementsFilePath:Z.Z_});const A=Z.r$({postCssFilePath:Z.Z_,postDefaultsCssFilePath:Z.Z_}),B=Z.dt({postsGeneratedCssFilePaths:Z.IM(Z.Z_,A)}),O=Z.jV([B,Z.dt({dependencies:T.D})]),R=Z.jV([Z.dt({html:Z.Z_}),O]);var M=n(85902),F=n(65669),N=n(31381);const L={};function $(e,t,n){let s=[];return async(...a)=>(L[n]&&clearTimeout(L[n]),L[n]=setTimeout((()=>{const t=e(...a);s.forEach((e=>e(t))),s=[],delete L[n]}),t),new Promise((e=>s.push(e))))}function W(e,t,n,s){const a=(0,N.Aq)(c.Hb.document.tree.root,[e]),i=a.length,o=a.findIndex((e=>e.id===n)),r=()=>(0,E.D)({action:"breakdance_server_side_render",overrideAjaxUrl:(0,M.j)(),dataToPost:{properties:(0,F.J)(t),parentProperties:(0,F.J)(s),elementSlug:e,triggeringDocument:c.Hb.document.documentMeta.id,totalMatchingElements:i,currentIndexInMatchingElements:o},decoder:R});return $(r,1e3,n)()}var V=n(30902),H=n(45974),U=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-empty-container",attrs:{id:"breakdance-empty-container"}},[t("div",{staticClass:"breakdance-empty-container__add-element",class:{"breakdance-empty-container__add-element--disabled":!e.canAddElement},on:{click:e.openAddPanel}},[t("Icon",{attrs:{icon:"PlusIcon",size:"22"}})],1)])},z=[],G=n(95690),K=n(85283);let j=class extends s.ZP{get canAddElement(){return c.kD.hasFullAccess}openAddPanel(e){e.preventDefault(),e.stopPropagation(),this.canAddElement&&((0,G.oM)("add"),c.kD.activateElement(this.id))}};(0,r.gn)([(0,l.fI)({default:null})],j.prototype,"id",void 0),j=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z}})],j);const q=j,X=q;var Y=n(1001),Q=(0,Y.Z)(X,U,z,!1,null,null,null);const J=Q.exports;var ee=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-empty-columns"},[t("div",{staticClass:"breakdance-empty-columns-choices-heading"},[e._v(" Choose a column structure ")]),t("div",{staticClass:"breakdance-empty-columns-choices"},[t("div",{staticClass:"breakdance-empty-columns-choices-row"},[t("div",{staticClass:"breakdance-empty-columns-column-icon-wrapper",on:{click:function(t){return e.addColumns(t,2)}}},[e._m(0)]),t("div",{staticClass:"breakdance-empty-columns-column-icon-wrapper",on:{click:function(t){return e.addColumns(t,3)}}},[e._m(1)]),t("div",{staticClass:"breakdance-empty-columns-column-icon-wrapper",on:{click:function(t){return e.addColumns(t,4)}}},[e._m(2)])]),t("div",{staticClass:"breakdance-empty-columns-choices-row"},[t("div",{staticClass:"breakdance-empty-columns-column-icon-wrapper",on:{click:function(t){return e.addColumns(t,2,[35,65])}}},[e._m(3)]),t("div",{staticClass:"breakdance-empty-columns-column-icon-wrapper",on:{click:function(t){return e.addColumns(t,2,[65,35])}}},[e._m(4)])])])])},te=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-empty-columns-column-icon"},[t("div",{staticClass:"breakdance-empty-columns-column-icon-column"}),t("div",{staticClass:"breakdance-empty-columns-column-icon-column"})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-empty-columns-column-icon"},[t("div",{staticClass:"breakdance-empty-columns-column-icon-column"}),t("div",{staticClass:"breakdance-empty-columns-column-icon-column"}),t("div",{staticClass:"breakdance-empty-columns-column-icon-column"})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-empty-columns-column-icon"},[t("div",{staticClass:"breakdance-empty-columns-column-icon-column"}),t("div",{staticClass:"breakdance-empty-columns-column-icon-column"}),t("div",{staticClass:"breakdance-empty-columns-column-icon-column"}),t("div",{staticClass:"breakdance-empty-columns-column-icon-column"})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-empty-columns-column-icon"},[t("div",{staticClass:"breakdance-empty-columns-column-icon-column",staticStyle:{width:"35%"}}),t("div",{staticClass:"breakdance-empty-columns-column-icon-column",staticStyle:{width:"65%"}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-empty-columns-column-icon"},[t("div",{staticClass:"breakdance-empty-columns-column-icon-column",staticStyle:{width:"65%"}}),t("div",{staticClass:"breakdance-empty-columns-column-icon-column",staticStyle:{width:"35%"}})])}],ne=n(36968),se=n.n(ne),ae=n(884),ie=n(94550),oe=n(69137),re=n(28684),le=n(38020);let ce=class extends s.ZP{addColumns(e,t,n){e.preventDefault(),e.stopPropagation();const s=[],a=n?n.map((e=>{const t=(0,le.v)(e);return se()({},ae.cp,{number:t,unit:"%",style:`${t}%`})})):[];for(let i=0;i<t;i++)s.push({id:i,data:{type:ie.Wz,properties:n?a[i]:{}},children:[]});oe.n.transaction((()=>{c.Hb.addMultipleNodes({nodes:s,parentId:this.id}),n||(0,re.t)(this.id)}),`Set amount of columns to ${t}`),(0,G.oM)("elementproperties")}};(0,r.gn)([(0,l.fI)()],ce.prototype,"id",void 0),ce=(0,r.gn)([(0,l.wA)({})],ce);const de=ce,ue=de;var pe=(0,Y.Z)(ue,ee,te,!1,null,null,null);const he=pe.exports;var me=n(86592),ge=n(565),ve=n(43195),fe=n(58172),ye=n(39664);const be=["jquery","wp-polyfill-js"];function Pe(){const e=window.Breakdance.canvas.document,t=e.querySelectorAll("script");for(const n of t){if(be.find((e=>n.id.toLowerCase().includes(e)||n.src.toLowerCase().includes(e))))continue;const t=_e(n);n.remove(),e.querySelector("body")?.appendChild(t)}}function _e(e){const t=document.createElement("script");return Array.from(e.attributes).forEach((e=>{t.setAttribute(e.name,e.value)})),e.src?t.src=e.src:t.innerHTML=e.innerHTML,t}var Se=n(12721);const Ce='\n<div class="breakdance-empty-ssr-message">\n    This element has no content.\n\n    <small>Hide this notice at <i>Preferences / UI Settings / Disable Notice For Empty SSR Elements</i></small>\n</div>',we='\n<div class="breakdance-empty-ssr-message breakdance-empty-ssr-message-error">\n    There was an error on the server when rendering this element.\n</div>',ke=(e,t)=>`\n<div class="breakdance-empty-ssr-message breakdance-empty-ssr-message-error">\n    The <strong>"${e}"</strong> element requires the plugins <em>"${t.join(", ")}"</em>. Please check that they are installed and activated from the Plugins page of the WP admin.\n</div>`;var xe,Ie=n(40684),De=n(13635),Ee=n(20210),Ze=n(9950),Te=n(25001),Ae=n(84274),Be=n(40681),Oe=n(92361),Re=n(17209),Me=n(23128),Fe=n(72045),Ne=n(35941),Le=n(16734),$e=n(54120);const We=_()(k.Z,500);let Ve=xe=class extends s.ZP{constructor(){super(...arguments),this.isActive=!1,this.isUpdating=!1,this.currentlyDragging=!1,this.lastModifiedPropertyPath=null,this.uniqueId=(0,Fe.Z)(),this.ssrInnerHtml=null,this.oldSsrParentProperties=(0,Me.Z)(this.ssrParentProperties),this.oldTwigProps=(0,Me.Z)(this.element.data.properties),this.dragMouseStartX=!1,this.dragMouseStartY=!1,this.easyEvent=new Se.hF,this.debouncedLoadDynamicData=_()(this.loadDynamicData,500,{leading:!0})}get isEmptyContainer(){const e=(0,Ze.V9)(this.element.data.type).type,t="popup"===e||"container"===e||"container-link"===e||"section"===e;return t&&0===this.element.children.length}get isEmptyColumns(){return this.element.data.type===ie.Cc&&0===this.element.children.length}get parentProps(){const e=this.baseElement.settings&&this.baseElement.settings.sharePropsWithSSRChildren,{design:t,...n}=this.element.data.properties||{};return(e?n:this.ssrParentProperties)||{}}__render(e){const t=this.rootTag;if(!this.shouldShow)return!1;if(this.isEmptyColumns)return e(t,{attrs:{...{...this.attributes},id:this.htmlId},on:{mousedown:this.activateAndMaybeStartDrag,dragstart:this.disableDefaultDrag,click:this.maybePreventDefault},class:this.classList},[e(he,{attrs:{id:this.element.id}})]);const n=(0,me.as)((0,me.as)(this.processedTemplate,{ssr:this.ssrValueOrMessage}),this.tags),s=this.isEmptyContainer?e(J,{attrs:{id:this.element.id}}):this.element.children.map((t=>e(xe,{key:t.id,attrs:{element:t,parentId:this.element.id,ssrParentProperties:this.parentProps}}))),a=this.contentEditablePropertyPath||null!==this.ssrValueOrMessage&&!this.ssrValueOrMessage.includes("%%CHILDREN%%"),i={};a&&(i.innerHTML=n);const o=a?[]:D(n,e,(()=>s),{enableContentEditableAndFocus:this.enableContentEditableAndFocus,saveContentEditable:this.saveContentEditable});return e(this.rootTag,{class:this.classList,attrs:{...this.attributes,id:this.htmlId},domProps:i,on:{mousedown:this.activateAndMaybeStartDrag,dragstart:this.disableDefaultDrag,click:this.maybePreventDefault,dblclick:this.handleDoubleClick,blur:this.contentEditablePropertyPath?this.saveContentEditable:()=>{}}},o)}render(e){return this.__render(e)}get processedTemplate(){if(!this.hasRequiredPluginsAndTheyAreAvailable&&this.baseElement.settings&&this.baseElement.settings.requiredPlugins)return ke(this.baseElement.name,this.baseElement.settings.requiredPlugins);const e=(0,me.yz)(this.baseElement.template,this.twigPropsAndPreset,(0,me.bb)(this.baseElement));return e?(0,me.as)(e,this.tags):""}get shouldSsr(){const e=this.processedTemplate.includes("%%SSR%%");if(!e)return!1;if(this.refreshSsr)return!0;if(null===this.lastModifiedPropertyPath)return!0;const t=this.baseElement.propertyPathsToSsrElementWhenValueChanges,n=!t;return!!n||t.some((e=>this.lastModifiedPropertyPath?.startsWith(e)))}get refreshSsr(){return!!c.kD.refreshSsrElementId&&c.kD.refreshSsrElementId===this.element.id}get hasRequiredPluginsAndTheyAreAvailable(){if(!this.baseElement.settings||!this.baseElement.settings.requiredPlugins)return!0;const e=this.baseElement.settings.requiredPlugins.filter((e=>c.PK.availableWordpressPlugins.includes(e)));return e.length===this.baseElement.settings.requiredPlugins.length}get ssrValueOrMessage(){return""===this.ssrInnerHtml?c.kD.settings.disableNoticeForEmptySSRElements?"":Ce:this.shouldSsr||this.ssrInnerHtml?this.isUpdating?this.ssrInnerHtml||"":this.ssrInnerHtml:null}get tags(){return{id:this.element.id,selector:this.elementSelector,uniqueSlug:this.uniqueClassName,postId:this.postId,elementName:this.baseElement.name}}async rerenderFromServeOnParentPropertyChange(){this.shouldSsr&&((0,Ne.v)(this.ssrParentProperties,this.oldSsrParentProperties)||(this.oldSsrParentProperties=(0,Me.Z)(this.ssrParentProperties),await this.maybeRerenderFromServer()))}async rerenderFromServerOnRefreshSsr(){this.refreshSsr&&(await this.maybeRerenderFromServer(),c.kD.setRefreshSsrElementId(null),this.runActionsAfterSsr())}get presets(){return c.cr.presets}async maybeRerenderFromServerOnPropertyChange(){await this.$nextTick(),this.shouldSsr?(0,Ne.v)(this.twigProps,this.oldTwigProps)||(this.oldTwigProps=this.twigProps,await this.maybeRerenderFromServer(),this.runActionsAfterSsr()):this.processedTemplate.includes("%%SSR%%")||(null!==this.ssrInnerHtml&&(this.ssrInnerHtml=null),this.updateSsrDependenciesAndStyles())}runActionsAfterSsr(){ge.w.run.onBeforeDeletingElement({elementId:this.element.id}),this.element._parentId&&ge.w.run.onAfterDeletedElement({deletedElementNodeType:this.element.data.type,parentIdOfDeletedElement:this.element._parentId,transactionKey:void 0}),ge.w.run.onMountedElement({elementId:this.element.id})}async maybeRerenderFromServer(){if(!this.shouldSsr)return;c.kD.setElementUpdatingState({elementId:this.element.id,isUpdating:!0});const e=(0,V.pipe)(await W(this.baseElement.slug,this.element.data.properties,this.element.id,this.parentProps),(0,H.fold)((e=>(e.forEach((e=>{ye.Z.log.message(e.msg)})),{html:we,postsGeneratedCssFilePaths:{},dependencies:{}})),(e=>e)));c.kD.setElementUpdatingState({elementId:this.element.id,isUpdating:!1}),this.ssrInnerHtml=e.html,this.updateSsrDependenciesAndStyles(e.dependencies,e.postsGeneratedCssFilePaths)}maybeRerunAllScriptsInCanvasDocumentBody(){const e=this.baseElement.settings&&this.baseElement.settings.dependsOnGlobalScripts;e&&Pe()}updateSsrDependenciesAndStyles(e,t){this.maybeRerunAllScriptsInCanvasDocumentBody(),e&&(0,k.Z)((0,De.RY)(),{dependencies:[e],addInlineScriptsAsUnique:!1,element:this.element}),(0,Ie.xg)((0,De.RY)(),this.element.id,t)}get shouldShow(){return(0,w.O)("elementShouldShow",!0,this.element.data.properties,{currentBreakpoint:c.kD.currentBreakpoint})}get breakpoints(){return c.PK.breakpoints}onBreakpointsChange(){this.generateElementsCSS()}onTwigPropsChange(){this.generateElementsCSS()}onPresetChange(){this.generateElementsCSS()}onCssTemplateChange(){this.generateElementsCSS()}onDefaultCssChange(){this.generateElementsCSS()}onInternalDependenciesChange(){if(this.baseElement.dependencies){const e=this.baseElement.dependencies.map((e=>({...e,inlineScripts:[]})));We((0,De.RY)(),{dependencies:e,tags:this.tags,element:this.element})}}get globalSettings(){return c.cr.globalSettings}refreshIfTypographyPresetsChange(){this.generateElementsCSS()}get elementChildrenCount(){return this.element.children.length}elementChildrenCountChanged(){this.generateElementsCSS()}generateElementsCSS(){(0,Ie.df)((0,De.RY)(),this.baseElement.slug,this.baseElement.defaultCss);const e=this.presetId?(0,$e.wV)(this.baseElement):this.baseElement.cssTemplate,t=(0,S.a)(this.twigProps,this.breakpoints,e,this.tags,this.baseElement.propertyPathsToWhitelistInFlatProps,this.elementChildrenCount,(0,me.g)(this.baseElement));(0,Ie.ts)((0,De.RY)(),this.element.id,t,this.uniqueId)}async mounted(){this.updateSsrDependenciesAndStyles(),await Promise.all([this.loadDependencies(),this.maybeRerenderFromServer()]),ge.w.run.onMountedElement({elementId:this.element.id})}destroyed(){const e=0===(0,N.KT)(c.Hb.document.tree.root,this.baseElement.slug);e&&(0,Ie.xU)((0,De.RY)(),this.baseElement.slug),(0,Ie.AC)((0,De.RY)(),this.element.id,this.uniqueId),(0,Ie.SR)((0,De.RY)(),this.element.id),this.element._parentId&&ge.w.run.onAfterDeletedElement({deletedElementNodeType:this.element.data.type,parentIdOfDeletedElement:this.element._parentId,transactionKey:`DocumentDeleteElement:ID:${this.element.id}`})}loadDependencies(){return(0,k.Z)((0,De.RY)(),{dependencies:[...this.baseElement.dependencies||[],...c.PK.elementsExternalAttrsDepsAndActions.dependencies||[]],element:this.element,tags:this.tags})}get elementSelector(){return`.breakdance .${this.uniqueClassName}`}get rootTag(){const e=this.baseElement.htmlTag.pathToControl?b()(this.element.data.properties,this.baseElement.htmlTag.pathToControl):this.element.data.properties?.settings?.advanced?.tag;return"string"===typeof e&&e||this.baseElement.htmlTag.default}get baseElement(){return c.PK.element(this.element.data.type)}get twigProps(){if((0,fe.Kn)(this.element.data.properties)&&0!==Object.entries(this.element.data.properties).length){const e=c.PK.dynamicDataCache.data,t=(0,C.Ko)(this.element.data.properties,e),n=t.filter((t=>!Object.keys(e).includes((0,C.Ev)(t))));n.length&&this.debouncedLoadDynamicData(n);const s=!!c.PK.previewedItem;return(0,fe.xV)(this.element.data.properties,(t=>(0,ve.ro)(t)?(0,ve.Ax)(t,e,s):t))}return{}}get designPropsAndPreset(){const e=(0,Me.Z)(this.twigProps?.design),t=(0,Me.Z)(this.preset?.design);return(0,$e.lb)(t,e)}get twigPropsAndPreset(){return{...this.twigProps,design:this.designPropsAndPreset}}get postId(){return c.Hb.document.documentMeta.id}get htmlId(){return(0,Ee.Cc)(this.element)}get uniqueClassName(){return(0,Ee.P0)(this.element,this.postId)}get baseClassName(){return(0,Ee.MO)(this.baseElement)}get presetId(){return this.element.data.properties?.meta?.preset}get preset(){return c.cr.presets.find((e=>e.id===this.presetId))}get classList(){const e=[this.uniqueClassName,"builder-element",this.baseClassName];this.isActive&&e.push("breakdance--active-element"),this.currentlyDragging&&e.push("breakdance--currently-dragging"),this.isEmptyContainer&&e.push("breakdance--empty-container");const t=this.element.data.properties?.settings?.advanced?.classes??!1;return t&&e.push(...t),this.baseElement.settings&&this.baseElement.settings.bypassPointerEvents&&e.push("breakdance-children-pointer-events-none"),this.isUpdating&&e.push("breakdance-element-is-updating"),this.presetId&&e.push(`bde-preset-${this.presetId}`),e.push(...this.additionalClasses),e}get additionalClasses(){return this.baseElement.additionalClasses?this.baseElement.additionalClasses.map((e=>{const t=(0,me.yz)(e.template,this.twigProps,(0,me.l0)(this.baseElement,e));if(t)return{name:e.name,include:t}})).filter(Te.$K).filter((e=>!!e.include)).map((e=>e.name)):[]}renderAttributeValue(e){return"template"in e?(0,me.yz)(e.template,this.twigProps,(0,me.H5)(this.baseElement,e)):"propertyPath"in e?String(b()(this.element.data.properties,e.propertyPath,"")):"rawValue"in e?e.rawValue:null}get attributes(){const e={},t=[...this.baseElement.attributes||[],...c.PK.elementsExternalAttrsDepsAndActions.attributes||[]];t.forEach((t=>{const n=this.renderAttributeValue(t);n&&(e[t.name]=(0,me.as)(n,this.tags))}));const n=this.element.data.properties?.settings?.advanced?.attributes??[];n.forEach((t=>{e[t.name]=t.value})),e["data-node-id"]=`${this.element.id}`;const s={};return Object.keys(e).forEach((t=>{"%%OUTPUTBLANKATTRIBUTE%%"===e[t]?.trim()?s[t]="":e[t]&&(s[t]=e[t])})),s}get contentEditablePropertyPath(){return this.attributes["data-content-editable-property-path"]}get isDragAndDropEnabled(){return c.kD.hasFullAccess}get isPreviewMode(){return c.kD.isPreviewMode}get lastModifiedTreeNodePropertyForWatcher(){return c.kD.lastModifiedElementProperty}handleLastModifiedTreeNodePropertyChange(e){e.elementId===this.element.id?this.lastModifiedPropertyPath=e.path:null!==this.lastModifiedPropertyPath&&(this.lastModifiedPropertyPath=null)}get currentlyDraggingForWatcher(){return c.kD.currentlyDraggingCanvasElementId===this.element.id}handleCurrentlyDraggingChange(e){this.currentlyDragging=e}get activeElementIdForWatcher(){return c.kD.activeElementId}handleActiveElementIdChange(e){this.isActive=e===this.element.id}get isElementUpdatingForWatcher(){return Boolean(c.kD.elementsThatAreUpdating[this.element.id])}handleLoadingElementIdChange(e){this.isUpdating!==e&&(this.isUpdating=e)}get behaviorModeEnabled(){const e=c.kD.builderBehaviorElementId;return!!e&&(0,N.SG)(c.Hb.document.tree,e,this.element.id)}activateElement(){this.behaviorModeEnabled||(c.kD.activateElement(this.element.id),(0,G.oM)("elementproperties"))}canDrag(e){if(!this.isDragAndDropEnabled)return!1;const t=e.target,n=["textarea","input","select"],s=t.tagName.toLowerCase();return!n.includes(s)&&!c.kD.elementWithContentEditable}disableDefaultDrag(e){e.preventDefault()}maybePreventDefault(e){const t=e.target,n=["a","button"],s=n.join(", "),a=n.some((e=>t.closest(e)));(t.matches(s)||a)&&e.preventDefault()}activateAndMaybeStartDrag(e){this.isPreviewMode||(e.stopPropagation(),this.activateElement(),this.canDrag(e)&&(this.behaviorModeEnabled||(this.dragMouseStartX=e.clientX,this.dragMouseStartY=e.clientY,this.easyEvent.on("mousemove",this.dragging),this.easyEvent.on("mouseup",this.removeDragListeners))))}removeDragListeners(){this.easyEvent.removeAll(),this.dragMouseStartX=!1,this.dragMouseStartY=!1}dragging(e){if(this.behaviorModeEnabled)return;if(!(0,Se.Pm)(e))return;if(!1===this.dragMouseStartX||!1===this.dragMouseStartY)return;const t=e.clientX,n=e.clientY;(Math.abs(t-this.dragMouseStartX)>3||Math.abs(n-this.dragMouseStartY)>3)&&(c.kD.setCanvasElementDraggedId(this.element.id),this.removeDragListeners())}handleDoubleClick(e){this.contentEditablePropertyPath?this.enableContentEditableAndFocus(e):this.element.data.type===ie.qu?(0,Le.of)("CMD_E"):this.element.data.type!==ie.Sn&&this.element.data.type!==ie.K1||document.dispatchEvent(new CustomEvent("open-media-dialog",{cancelable:!0}))}enableContentEditableAndFocus(e){const t=e.target;let n=null;if(n=t.dataset.contentEditablePropertyPath||t.dataset.nodeId?t:t.closest("[data-content-editable-property-path]"),!n)return;const s=n.dataset.contentEditablePropertyPath;if(s){const e=b()(this.twigProps,(0,ve.k2)(s)),t=!!e&&(0,ve.Tc)(e);if(t)return}const a="true"===n.getAttribute("contenteditable");a||(c.kD.setContentEditableElementId(this.element.id),n.setAttribute("contenteditable","true"),n.focus(),window.Breakdance.canvas.document.addEventListener("keydown",this.handleKeydownInsideContentEditable),n.addEventListener("paste",this.pasteWithoutFormatting))}saveContentEditable(e){const t=e.target;window.Breakdance.canvas.document.removeEventListener("keydown",this.handleKeydownInsideContentEditable),t.removeEventListener("paste",this.pasteWithoutFormatting),t.setAttribute("contenteditable","false"),c.kD.setContentEditableElementId(null);const n=t.dataset.contentEditablePropertyPath||this.contentEditablePropertyPath;if(!n)return;t.innerHTML=t.innerHTML.trim();const s=t.childNodes[t.childNodes.length-1];s&&"BR"===s.tagName&&s.remove();const a=document.createElement("textarea");a.innerHTML=t.innerHTML;const i=a.value,o=b()(this.element.data.properties,n);o!==i&&c.Hb.throttledPropertyChanged({elementId:this.element.id,path:n,value:i,meta:{snapshotLabel:Ae.AZ.forElementBasingOnChangedStorePropertyPath(this.baseElement,n,Be.P.CHANGE)}})}pasteWithoutFormatting(e){const t=e.clipboardData?.getData("text/plain");t&&(window.Breakdance.canvas.document.execCommand("insertHTML",!1,(0,Re.h)(t)),e.preventDefault())}handleKeydownInsideContentEditable(e){return"Space"===e.code?(e.preventDefault(),e.stopPropagation(),void window.Breakdance.canvas.document.execCommand("insertText",!1," ")):"Enter"===e.code?(window.Breakdance.canvas.document.execCommand("insertLineBreak"),void e.preventDefault()):"Escape"===e.code||(e.ctrlKey||e.metaKey)&&"s"===e.key?(e.preventDefault(),void this.saveContentEditable(e)):void 0}loadDynamicData(e){(0,C.y9)(e).then((e=>{c.PK.setNewDynamicDataCacheEntries(e)}))}};(0,r.gn)([(0,l.fI)()],Ve.prototype,"element",void 0),(0,r.gn)([(0,l.fI)()],Ve.prototype,"parentId",void 0),(0,r.gn)([(0,l.fI)()],Ve.prototype,"ssrParentProperties",void 0),(0,r.gn)([(0,l.RL)("ssrParentProperties",{deep:!0})],Ve.prototype,"rerenderFromServeOnParentPropertyChange",null),(0,r.gn)([(0,l.RL)("refreshSsr")],Ve.prototype,"rerenderFromServerOnRefreshSsr",null),(0,r.gn)([(0,l.RL)("twigProps")],Ve.prototype,"maybeRerenderFromServerOnPropertyChange",null),(0,r.gn)([(0,l.RL)("breakpoints",{deep:!0})],Ve.prototype,"onBreakpointsChange",null),(0,r.gn)([(0,l.RL)("twigProps",{deep:!0,immediate:!0})],Ve.prototype,"onTwigPropsChange",null),(0,r.gn)([(0,l.RL)("preset",{deep:!0,immediate:!0})],Ve.prototype,"onPresetChange",null),(0,r.gn)([(0,l.RL)("baseElement.cssTemplate")],Ve.prototype,"onCssTemplateChange",null),(0,r.gn)([(0,l.RL)("baseElement.defaultCss")],Ve.prototype,"onDefaultCssChange",null),(0,r.gn)([(0,l.RL)("baseElement.dependencies",{deep:!0})],Ve.prototype,"onInternalDependenciesChange",null),(0,r.gn)([(0,l.RL)(`globalSettings.${Oe.r.typographyPresets}`,{deep:!0})],Ve.prototype,"refreshIfTypographyPresetsChange",null),(0,r.gn)([(0,l.RL)("elementChildrenCount",{})],Ve.prototype,"elementChildrenCountChanged",null),(0,r.gn)([(0,l.RL)("lastModifiedTreeNodePropertyForWatcher",{immediate:!0})],Ve.prototype,"handleLastModifiedTreeNodePropertyChange",null),(0,r.gn)([(0,l.RL)("currentlyDraggingForWatcher",{immediate:!0})],Ve.prototype,"handleCurrentlyDraggingChange",null),(0,r.gn)([(0,l.RL)("activeElementIdForWatcher",{immediate:!0})],Ve.prototype,"handleActiveElementIdChange",null),(0,r.gn)([(0,l.RL)("isElementUpdatingForWatcher",{immediate:!0})],Ve.prototype,"handleLoadingElementIdChange",null),Ve=xe=(0,r.gn)([(0,l.wA)({})],Ve);const He=Ve,Ue=He;var ze,Ge,Ke=(0,Y.Z)(Ue,ze,Ge,!1,null,null,null);const je=Ke.exports;var qe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"node-chrome",class:e.hideClass},[t("div",{directives:[{name:"permission",rawName:"v-permission",value:"full",expression:"'full'"}]},[t("SpacingBars"),t("ColumnDragSizer")],1),t("NodeTitlebar"),t("NodeHoverControls"),t("NodeContentEditable")],1)},Xe=[],Ye=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"drag-dots-wrapper",style:e.dragDotsWrapperPositionStyle},[t("div",{staticClass:"drag-dot drag-dot-top-left",on:{mousedown:e.dragStart}}),t("div",{staticClass:"drag-dot drag-dot-top-middle",on:{mousedown:e.dragStart}}),t("div",{staticClass:"drag-dot drag-dot-top-right",on:{mousedown:e.dragStart}}),t("div",{staticClass:"drag-dot drag-dot-bottom-right",on:{mousedown:e.dragStart}}),t("div",{staticClass:"drag-dot drag-dot-bottom-middle",on:{mousedown:e.dragStart}}),t("div",{staticClass:"drag-dot drag-dot-bottom-left",on:{mousedown:e.dragStart}}),t("div",{staticClass:"drag-dot drag-dot-middle-left",on:{mousedown:e.dragStart}}),t("div",{staticClass:"drag-dot drag-dot-middle-right",on:{mousedown:e.dragStart}})])},Qe=[];function Je(e){return(t,n)=>{if(c.kD.activeElementId){const s=(e,t)=>e+t>=0?e+t:0;if("xProperty"in e&&e.xProperty){const a=e.xProperty.replace("%%CURRENTMEDIAQUERY%%",c.kD.currentBreakpoint.id),i=s(t.width,n.lastXChange);c.Hb.throttledPropertyChanged({elementId:c.kD.activeElementId,path:a,value:{number:i,unit:"px"},meta:{snapshotLabel:"Resize element"}})}if("yProperty"in e&&e.yProperty){const a=e.yProperty.replace("%%CURRENTMEDIAQUERY%%",c.kD.currentBreakpoint.id),i=s(t.height,n.lastYChange);c.Hb.throttledPropertyChanged({elementId:c.kD.activeElementId,path:a,value:{number:i,unit:"px"},meta:{snapshotLabel:"Resize element"}})}}}}var et=n(34676);const tt={xProperty:"design.size.width.%%CURRENTMEDIAQUERY%%"};let nt=class extends s.ZP{constructor(){super(...arguments),this.mouseDragInfo=!1,this.dragDotsWrapperPositionStyle={display:"none"},this.dragCallback=!1,this.unsubscribeFromStorePositionDotsWrapper=()=>{},this.easyEvent=new Se.hF}nextTickPositionDragDotsWrapper(){(0,et.n)((()=>this.positionDragDotsWrapper()))}beforeMount(){this.positionDragDotsWrapper(),this.unsubscribeFromStorePositionDotsWrapper=this.$store.subscribe(this.nextTickPositionDragDotsWrapper),window.addEventListener("resize",this.nextTickPositionDragDotsWrapper)}beforeDestroy(){this.unsubscribeFromStorePositionDotsWrapper(),window.removeEventListener("resize",this.nextTickPositionDragDotsWrapper)}dragStart(e){e.preventDefault(),e.stopPropagation(),this.mouseDragInfo={startX:e.clientX,startY:e.clientY,currentX:e.clientX,currentY:e.clientY,lastXChange:0,lastYChange:0,totalXChange:0,totalYChange:0},this.dragCallback=Je(tt),this.easyEvent.on("mousemove",this.dragging),this.easyEvent.on("mouseup",this.dragEnd)}dragging(e){if((0,Se.Pm)(e)){e.preventDefault(),e.stopPropagation();const t=(0,De.nX)();if(!t||!this.mouseDragInfo)return;this.mouseDragInfo={...this.mouseDragInfo,currentX:e.clientX,currentY:e.clientY,lastXChange:e.clientX-this.mouseDragInfo.currentX,lastYChange:e.clientY-this.mouseDragInfo.currentY,totalXChange:e.clientX-this.mouseDragInfo.startX,totalYChange:e.clientY-this.mouseDragInfo.startY},this.dragCallback&&this.dragCallback(t,this.mouseDragInfo),this.positionDragDotsWrapper()}}dragEnd(e){e.preventDefault(),e.stopPropagation(),this.easyEvent.removeAll(),this.mouseDragInfo=!1,this.dragCallback=!1}positionDragDotsWrapper(){c.kD.activeElementId||(this.dragDotsWrapperPositionStyle={display:"none"});const e=(0,De.nX)();if(!e)return;const{x:t,y:n,width:s,height:a}=e;this.dragDotsWrapperPositionStyle={position:"absolute",top:n.toString()+"px",left:t.toString()+"px",width:s.toString()+"px",height:a.toString()+"px"}}};nt=(0,r.gn)([(0,l.wA)({})],nt);const st=nt,at=st;var it=(0,Y.Z)(at,Ye,Qe,!1,null,null,null);const ot=it.exports;var rt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",e._l(e.bars,(function(n,s){return t("SpacingBar",{key:s,attrs:{bar:n,isDragging:e.isDragging,isActiveBar:e.clickedHandle===n.location},on:{mousedown:function(t){return e.dragStart(t,n.location)}}})})),1)},lt=[],ct=n(23493),dt=n.n(ct);let ut=class extends s.ZP{constructor(){super(...arguments),this.clickedHandle=!1,this.mouseDragInfo=!1,this.throttledDragging=dt()(this.dragging,60),this.unsubscribeFromStorePositionWrapper=()=>{},this.wrapperPositionStyle={display:"none"}}dragCallback(e,t,n){console.warn("To use DragMixin you must implement dragCallback()")}dragEndCallback(){}dragStartCallback(e){}dragStart(e,t){e.stopPropagation(),"string"===typeof t?(c.kD.setDragMixinDragging(!0),this.clickedHandle=t,this.mouseDragInfo={startX:e.clientX,startY:e.clientY,currentX:e.clientX,currentY:e.clientY,lastXChange:0,lastYChange:0,totalXChange:0,totalYChange:0},window.Breakdance.canvas.document.addEventListener("mousemove",this.throttledDragging),window.Breakdance.canvas.document.addEventListener("mouseup",this.dragEnd),this.dragStartCallback(t)):console.warn("To use drag mixin you must specify a handle parameter (string) as the second param of your mousedown=dragStart, i.e. mousedown=dragStart($event, 'myhandle')")}dragging(e){e.preventDefault(),e.stopPropagation(),requestAnimationFrame((()=>this._draggingFunc(e)))}_draggingFunc(e){const t=(0,De.nX)();t&&this.mouseDragInfo&&(this.mouseDragInfo={...this.mouseDragInfo,currentX:e.clientX,currentY:e.clientY,lastXChange:e.clientX-this.mouseDragInfo.currentX,lastYChange:e.clientY-this.mouseDragInfo.currentY,totalXChange:e.clientX-this.mouseDragInfo.startX,totalYChange:e.clientY-this.mouseDragInfo.startY},this.clickedHandle&&this.dragCallback(t,this.mouseDragInfo,this.clickedHandle),this.positionWrapper(),(0,De.a7)())}dragEnd(e){e.preventDefault(),e.stopPropagation(),window.Breakdance.canvas.document.removeEventListener("mousemove",this.throttledDragging),window.Breakdance.canvas.document.removeEventListener("mouseup",this.dragEnd),this.mouseDragInfo=!1,this.clickedHandle=!1,c.kD.setDragMixinDragging(!1),this.dragEndCallback(),(0,De.a7)()}get isDragging(){return!!this.mouseDragInfo}nextTickPositionsWrapper(){(0,et.n)(this.positionWrapper)}beforeMount(){this.positionWrapper(),this.unsubscribeFromStorePositionWrapper=this.$store.subscribe(this.nextTickPositionsWrapper),window.addEventListener("resize",this.nextTickPositionsWrapper)}beforeDestroy(){this.unsubscribeFromStorePositionWrapper(),window.removeEventListener("resize",this.nextTickPositionsWrapper)}positionWrapper(){if(!c.kD.activeElementId)return void(this.wrapperPositionStyle={display:"none"});const e=(0,De.nX)();if(!e)return;const{x:t,y:n,width:s,height:a}=e;this.wrapperPositionStyle={position:"absolute",top:`${n}px`,left:`${t}px`,width:`${s}px`,height:`${a}px`}}};ut=(0,r.gn)([l.wA],ut);var pt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"spacing-bar",class:e.classList,style:e.style,on:{mousedown:function(t){return e.$emit("mousedown",t)},mouseover:function(t){e.isHovering=!0},mouseleave:function(t){e.isHovering=!1}}},[t("div",{staticClass:"spacing-bar-current-value"},[e._v(e._s(e.value)+"px")])])},ht=[];function mt(e,t){const n=gt(e,t);return n||0}function gt(e,t){if(!c.kD.activeElement)return!1;const n=vt(e,c.kD.currentBreakpoint.id);let s=parseInt(b()(c.kD.activeElement,`data.properties.${n}.number`));s||(s=0);let a=b()(c.kD.activeElement,`data.properties.${n}.unit`);if(a||(a="px"),"px"!==a&&0!==s){const e=(0,De.lx)(c.kD.activeElement);if(!e)return!1;const n=parseInt(e.getPropertyValue(t));return n}return s}function vt(e,t){return e.replace("%%BREAKPOINT%%",t)}var ft=n(64940);let yt=class extends s.ZP{constructor(){super(...arguments),this.isHovering=!1,this.resizeObserver=new ResizeObserver(this.onActiveElementResize),this.activeElementPositionAndSize=null,this.valueAtMomentOfElementPositionAndSizeCalculation=null}get value(){return mt(this.bar.affectedPropertyPath,this.bar.cssProperty)}get activeElement(){return ft.kD.activeElement}updateActiveElementPositionWhenItsPresent(){const e=this.activeElement;if(e){const t=(0,De.dq)(e);if(t)return this.activeElementPositionAndSize=(0,De.o7)(t)||null,void(this.valueAtMomentOfElementPositionAndSizeCalculation=this.value)}this.activeElementPositionAndSize=null,this.valueAtMomentOfElementPositionAndSizeCalculation=null}mounted(){this.intervalHandle=setInterval((()=>{(0,et.n)(this.updateActiveElementPositionWhenItsPresent)}),50)}handleActiveElementChange(){this.updateActiveElementPositionWhenItsPresent(),this.resizeObserver.disconnect();const e=this.activeElement;if(e){const t=(0,De.dq)(e);t&&(this.resizeObserver.observe(t,{box:"border-box"}),t.parentElement&&this.resizeObserver.observe(t.parentElement,{box:"border-box"}))}}onActiveElementResize(){this.updateActiveElementPositionWhenItsPresent()}get classList(){return[`spacing-bar-${this.bar.location}`]}get style(){return this.isDragging&&this.isActiveBar||this.isHovering&&!this.isDragging?{...this.barStyle,opacity:1}:this.barStyle}get barStyle(){const e=this.activeElementPositionAndSize;if(!e)return{};const t=this.valueAtMomentOfElementPositionAndSizeCalculation||this.value,{width:n,height:s,y:a,x:i}=e,o=t>5?t:5;switch(this.bar.location){case"inside-top":return{width:`${n}px`,height:`${o}px`,top:`${a}px`,left:`${i}px`,cursor:"row-resize"};case"outside-top":return{width:`${n}px`,height:`${o}px`,top:`${-o+a}px`,left:`${i}px`,cursor:"row-resize"};case"inside-bottom":return{width:`${n}px`,height:`${o}px`,top:a+s-o+"px",left:`${i}px`,cursor:"row-resize"};case"outside-bottom":return{width:`${n}px`,height:`${o}px`,top:`${a+s}px`,left:`${i}px`,cursor:"row-resize"};case"inside-left":return{width:`${o}px`,top:`${a}px`,height:`${s}px`,left:`${i}px`,cursor:"col-resize"};case"outside-left":return{width:`${o}px`,top:`${a}px`,height:`${s}px`,left:i-o+"px",cursor:"col-resize"};case"inside-right":return{width:`${o}px`,top:`${a}px`,height:`${s}px`,left:i+n-o+"px",cursor:"col-resize"};case"outside-right":return{width:`${o}px`,top:`${a}px`,height:`${s}px`,left:`${i+n}px`,cursor:"col-resize"};default:return{}}}beforeDestroy(){this.resizeObserver.disconnect(),this.intervalHandle&&clearInterval(this.intervalHandle)}};(0,r.gn)([(0,l.fI)()],yt.prototype,"bar",void 0),(0,r.gn)([(0,l.fI)()],yt.prototype,"isDragging",void 0),(0,r.gn)([(0,l.fI)()],yt.prototype,"isActiveBar",void 0),(0,r.gn)([(0,l.RL)("activeElement",{immediate:!0})],yt.prototype,"handleActiveElementChange",null),yt=(0,r.gn)([(0,l.wA)({})],yt);const bt=yt,Pt=bt;var _t=(0,Y.Z)(Pt,pt,ht,!1,null,null,null);const St=_t.exports;let Ct=class extends((0,l.Wr)(ut)){constructor(){super(...arguments),this.originalValue=!1}get bars(){return this.activeElementSpacingBars?this.activeElementSpacingBars:[]}get activeElementSpacingBars(){return!!c.kD.activeElement&&(!(0,$e.CO)(c.kD.activeElement.id)&&c.PK.element(c.kD.activeElement.data.type).spacingBars)}dragCallback(e,t,n){const s=this.bars.filter((e=>e.location===n)).pop();if(!c.kD.activeElementId||!s)return;let a=0,i=gt(s.affectedPropertyPath,s.cssProperty);switch(i||(i=0),this.originalValue||(this.originalValue=i),n){case"inside-top":case"inside-bottom":case"outside-top":case"outside-bottom":a=this.originalValue+t.totalYChange;break;case"inside-left":case"inside-right":case"outside-left":case"outside-right":a=this.originalValue+t.totalXChange;break}a<0&&(a=0);const o=vt(s.affectedPropertyPath,c.kD.currentBreakpoint.id);c.Hb.throttledPropertyChanged({elementId:c.kD.activeElementId,path:o,value:{number:a,unit:"px",style:`${a}px`},meta:{snapshotLabel:Ae.AZ.forElementByTreeNodeId(c.kD.activeElementId,o,Be.P.CHANGE)}})}dragEndCallback(){this.originalValue=!1}};Ct=(0,r.gn)([(0,l.wA)({components:{SpacingBar:St}})],Ct);const wt=Ct,kt=wt;var xt=(0,Y.Z)(kt,rt,lt,!1,null,null,null);const It=xt.exports;var Dt=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.shouldShow?t("div",{staticClass:"drag-dots-wrapper",style:e.wrapperPositionStyle},[e.isNotFarLeftColumn?t("div",{staticClass:"drag-dot drag-dot-middle-left",on:{mousedown:function(t){return e.dragStart(t,"left")}}},[e.resizedWidths&&"left"in e.resizedWidths?t("div",{staticClass:"drag-dots-column-widths-values"},[t("div",{staticClass:"drag-dots-left-width"},[e._v(" "+e._s(e.resizedWidths.left.siblingWidth)+"% ")]),t("div",{staticClass:"drag-dots-right-width"},[e._v(" "+e._s(e.resizedWidths.left.resizedWidth)+"% ")])]):e._e()]):e._e(),e.isNotFarRightColumn?t("div",{staticClass:"drag-dot drag-dot-middle-right",on:{mousedown:function(t){return e.dragStart(t,"right")}}},[e.resizedWidths&&"right"in e.resizedWidths?t("div",{staticClass:"drag-dots-column-widths-values"},[t("div",{staticClass:"drag-dots-left-width"},[e._v(" "+e._s(e.resizedWidths.right.resizedWidth)+"% ")]),t("div",{staticClass:"drag-dots-right-width"},[e._v(" "+e._s(e.resizedWidths.right.siblingWidth)+"% ")])]):e._e()]):e._e()]):e._e()},Et=[];function Zt(e){const t=At(e),n=Bt(e);if(!t||!n)return!1;const s=(0,le.v)(t/n*100);return s||!1}function Tt(e,t,n){const s=n,a=Bt(e);if(!s||!a)return!1;const i=(s+t)/a*100;return(0,le.v)(i)}function At(e){const t=(0,De.Sv)(e);return!!t&&t.width}function Bt(e){const t=(0,N.Lf)(c.Hb.document.tree,e.id);if(t){const e=(0,De.Sv)(t);if(e)return e.width}return!1}function Ot(e){const t=(0,De.lx)(e);if(!t)return!1;const n=parseInt(t.getPropertyValue("padding-left")),s=parseInt(t.getPropertyValue("padding-right"));if(Number.isNaN(n)||Number.isNaN(s))return!1;const a=Bt(e);if(!a)return!1;const i=(n+s)/a*100;return Math.ceil(i)}var Rt=n(92277);const Mt=20;function Ft(e,t,n,s){const a="right"===s?t+1:t-1,i=e.children[a],o=e.children[t];if(!o||!i)return!1;if(t<0||a<0)return!1;const r=Ot(o),l=Ot(i);let c=Mt;!1!==r&&!1!==l&&(c=Math.max(r,l));let d=100-(0,ae.IQ)(o)-(0,ae.IQ)(i),u=100-d-n;return n<c&&(n=c,u=100-d-n),u<c&&(u=c,n=100-d-u),d>100-2*c&&(n=(100-d)/2,u=(100-d)/2),n=(0,le.v)(n),u=(0,le.v)(u),d=(0,le.v)(d),n+u+d!==100&&(u=100-d-n,u=(0,le.v)(u)),(0,Rt.l)(o.id,n),(0,Rt.l)(i.id,u),(0,ae.wr)(e),{resizedWidth:n,siblingWidth:u}}var Nt=n(57088);let Lt=class extends((0,l.Wr)(ut)){constructor(){super(...arguments),this.resizedWidths=!1,this.widthOnDragStart=!1}get columnsAreNotResizeableAtBaseBreakpoint(){if(!this.activeColumn)return!1;const e=(0,ae.fy)(this.activeColumn);if(!e)return!1;const t="design.layout.stack_vertically",n="design.layout.fifty_percent",s=b()(e.data.properties,t,!1),a=b()(e.data.properties,n,!1);return s===Nt.Wp||a===Nt.Wp}get shouldShow(){return c.kD.currentBreakpoint.id===Nt.Wp&&this.activeColumn&&!this.columnsAreNotResizeableAtBaseBreakpoint}dragStartCallback(){oe.n.startTransaction()}dragCallback(e,t,n){if(!this.activeColumn||"left"!==n&&"right"!==n)return;const s=(0,N.E)(c.Hb.document.tree,this.activeColumn.id),a=(0,N.Lf)(c.Hb.document.tree,this.activeColumn.id);if(!1===s||!1===a)return;let i=0;if(this.widthOnDragStart||(this.widthOnDragStart=At(this.activeColumn)),!this.widthOnDragStart)return;i="right"===n?t.totalXChange:-1*t.totalXChange;const o=Tt(this.activeColumn,i,this.widthOnDragStart);if(!o)return;const r=Ft(a,s,o,n);r&&(this.resizedWidths={[n]:{resizedWidth:Number(r.resizedWidth.toFixed(2)),siblingWidth:Number(r.siblingWidth.toFixed(2))}})}dragEndCallback(){this.resizedWidths=!1,this.widthOnDragStart=!1,oe.n.endTransaction("Resizing column")}get isNotFarLeftColumn(){if(!this.activeColumn)return!1;const e=(0,N.E)(c.Hb.document.tree,this.activeColumn.id);return!1!==e&&0!==e}get isNotFarRightColumn(){if(!this.activeColumn)return!1;const e=(0,N.E)(c.Hb.document.tree,this.activeColumn.id),t=(0,N.Lf)(c.Hb.document.tree,this.activeColumn.id);return!1!==e&&!1!==t&&e!==t.children.length-1}get activeColumn(){return!!(0,ae.cG)(c.kD.activeElement)&&c.kD.activeElement}get columnWidthInPercent(){return!!this.activeColumn&&Zt(this.activeColumn)}};Lt=(0,r.gn)([(0,l.wA)({})],Lt);const $t=Lt,Wt=$t;var Vt=(0,Y.Z)(Wt,Dt,Et,!1,null,null,null);const Ht=Vt.exports;var Ut=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{"node-titlebar-wrapper":!0,"node-titlebar-wrapper-is-dragging":e.isDragging},style:e.wrapperPositionStyle},[t("div",{staticClass:"node-titlebar",class:e.titlebarClasses,style:e.titlebarPositionStyle,on:{contextmenu:e.openContextMenu}},[e.isDragAndDropEnabled?t("OnCanvasDragHandle",{attrs:{node:e.node}},[t("span",{staticClass:"node-titlebar-title",attrs:{title:"Drag element"}},[t("span",{staticClass:"node-titlebar-button"},[t("Icon",{attrs:{icon:"MaximizeIcon",size:"10"}})],1),t("span",[e._v(" "+e._s(e.elementTitle)+" ")]),e.isDraftSection?t("span",{staticStyle:{"margin-left":"4px"}},[e._v(" (Draft) ")]):e._e()])]):[e._v(e._s(e.elementTitle))],e.hasParent?t("span",{staticClass:"node-titlebar-button node-titlebar-button-activate-parent",attrs:{title:"Select parent"},on:{click:e.activateParent}},[t("Icon",{attrs:{icon:"ChevronDownIcon",rotate:"180",size:"10"}})],1):e._e(),e.hasSSr?t("span",{directives:[{name:"permission",rawName:"v-permission",value:"full",expression:"'full'"}],class:{"node-titlebar-button":!0,"node-titlebar-margin-left":!0,"breakdance-node-titlebar-loading-spinner":e.isElementUpdating},attrs:{title:"Refresh element"},on:{click:e.refreshSsr}},[t("Icon",{attrs:{icon:"RotateIcon",size:"13"}})],1):e._e(),t("span",{directives:[{name:"permission",rawName:"v-permission",value:"full",expression:"'full'"}],class:{"node-titlebar-button":!0,"node-titlebar-margin-left":!e.hasSSr},attrs:{title:"Duplicate"},on:{click:e.duplicate}},[t("Icon",{attrs:{icon:"DuplicateIcon",size:"13"}})],1),t("span",{directives:[{name:"permission",rawName:"v-permission",value:"full",expression:"'full'"}],staticClass:"node-titlebar-button",attrs:{title:"Remove"},on:{click:e.remove}},[t("Icon",{attrs:{icon:"TrashIcon",size:"12"}})],1)],2)])},zt=[],Gt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{on:{mousedown:function(t){return t.stopPropagation(),e.updateCurrentlyDraggingElementId.apply(null,arguments)}}},[e._t("default")],2)},Kt=[],jt=n(7824),qt=n(53809);let Xt=class extends l.w3{constructor(){super(...arguments),this.lastSubmittedDrag=!1,this.easyEvent=new Se.hF}get nestingPermissions(){return(0,Ze.kE)(this.node)}get canvasElementDraggedId(){return c.kD.currentlyDraggingCanvasElementId}watchCanvasElementDraggedId(){this.dragStart()}updateCurrentlyDraggingElementId(){c.kD.setCanvasElementDraggedId(this.node.id)}dragStart(){if(!c.kD.hasFullAccess||!this.canvasElementDraggedId)return;this.easyEvent.on("mousemove",this.dragging),this.easyEvent.on("mouseup",this.dragEnd);const e=(0,N.Lf)(c.Hb.document.tree,this.node.id);e&&this.setCanvasDragPlaceholderPosition({nodeIndex:-1,position:"before",parentId:e.id,onlyShowTargetOutline:!0}),(0,De.a7)()}setCanvasDragPlaceholderPosition(e){c.kD.setCanvasDragPlaceholderPosition(e)}dragging(e){if((0,Se.Pm)(e)){e.preventDefault(),e.stopPropagation();const t=e.clientX,n=e.clientY,s=(0,jt.Qf)(t,n);if(void 0===s)return;const a=(0,N.DY)(c.Hb.document.tree,s);if(void 0===a)return;const i=(0,Ze.PN)(c.Hb.document.tree,a,this.nestingPermissions);if(!i)return;const o=i.id;if(s===this.node.id||(0,N.K1)(((e,t)=>(t||(t=e.children.find((e=>s===e.id))),t)),this.node,void 0))this.setCanvasDragPlaceholderPosition({nodeIndex:-1,position:"before",parentId:o,onlyShowTargetOutline:!0}),this.setDropPosition(!1);else if(s===o)this.handleDragWhenMouseIsOverTheDropTargetButNotOverAChildElementOfTheDropTarget(t,n,s,this.node.id,i);else if(i.children.find((e=>s===e.id)))this.handleDragWhenMouseIsOverAChildOfTheDropTarget(t,n,s,this.node.id,i);else if((0,N.K1)(((e,t)=>(t||(t=e.children.find((e=>s===e.id))),t)),i,void 0)){const e=(0,jt.dD)(t,n).reduce(((e,t)=>e||i.children.find((e=>e.id===t))),void 0);e&&this.handleDragWhenMouseIsOverAChildOfTheDropTarget(t,n,e.id,this.node.id,i)}}}dragEnd(e){e.preventDefault(),e.stopPropagation(),this.easyEvent.removeAll(),this.lastSubmittedDrag&&c.Hb.moveElement(this.lastSubmittedDrag),this.setCanvasDragPlaceholderPosition(null),this.lastSubmittedDrag=!1,c.kD.endCanvasElementDrag(),(0,De.a7)()}handleDragWhenMouseIsOverAChildOfTheDropTarget(e,t,n,s,a,i=!1){const o=(0,jt.qE)(a),r="before"===(0,jt.dv)(e,t,n,o)?"before":"after",l=a.children.map((e=>e.id)).filter((e=>e!==s)),c=a.children.map((e=>e.id)).findIndex((e=>e===n));let d=l.findIndex((e=>e===n));"after"===r&&d++,!0===i?(this.setPlaceholder({dropTargetId:a.id,dragPlaceholderIndex:c,beforeOrAfter:r}),this.setDropPosition(!1)):(this.setPlaceholder({dropTargetId:a.id,dragPlaceholderIndex:c,beforeOrAfter:r}),this.setDropPosition({draggedElementId:s,droppedOnElementId:a.id,index:d}))}handleDragWhenMouseIsOverTheDropTargetButNotOverAChildElementOfTheDropTarget(e,t,n,s,a){if(0===a.children.length)this.setPlaceholder({dropTargetId:a.id,dragPlaceholderIndex:0,beforeOrAfter:"after"}),this.setDropPosition({draggedElementId:s,droppedOnElementId:a.id,index:0});else{const n=a.children.map(((e,t)=>({positionAndSize:(0,De.Sv)(e,"absolute"),index:t,id:e.id}))).filter((e=>e.positionAndSize)).map((e=>({min:{x:e.positionAndSize.x,y:e.positionAndSize.y},max:{x:e.positionAndSize.x+e.positionAndSize.width,y:e.positionAndSize.y+e.positionAndSize.height},nodeIndex:e.index,id:e.id}))).map((n=>({...n,distance:(0,qt.T)(n,{x:e,y:t})}))),i=n.reduce(((e,t)=>e.distance<t.distance?e:t)),o=(i.min.x+i.max.x)/2,r=(i.min.y+i.max.y)/2,l=o>e?"left":"right",c=r>t?"above":"below",d=(0,jt.qE)(a);let u;if(u="vertical"===d?"above"===c?"before":"after":"left"===l?"before":"after",i.id===s)return this.setPlaceholder({dropTargetId:a.id,dragPlaceholderIndex:i.nodeIndex,beforeOrAfter:u}),void this.setDropPosition(!1);const p=a.children.map((e=>e.id)).filter((e=>e!==s));let h=p.findIndex((e=>e===i.id));"after"===u&&h++,this.setPlaceholder({dropTargetId:a.id,dragPlaceholderIndex:i.nodeIndex,beforeOrAfter:u}),this.setDropPosition({draggedElementId:s,droppedOnElementId:a.id,index:h})}}setPlaceholder(e){(0,Ze.xJ)(c.Hb.document.tree,this.node,e.dropTargetId)&&this.movePlaceholder(e.dropTargetId,e.dragPlaceholderIndex,e.beforeOrAfter)}setDropPosition(e){!1!==e?(0,Ze.xJ)(c.Hb.document.tree,this.node,e.droppedOnElementId)&&(this.lastSubmittedDrag=e):this.lastSubmittedDrag=!1}movePlaceholder(e,t,n){let s=!1;const a=(0,N.DY)(c.Hb.document.tree,e);if(a){const e=a.children[t],i=a.children[t-1],o=a.children[t+1];e&&e.id===this.node.id&&(s=!0),i&&i.id===this.node.id&&"before"===n&&(s=!0),o&&o.id===this.node.id&&"after"===n&&(s=!0)}if(c.kD.canvasDragPlaceholderPosition){const s=()=>t===c.kD.canvasDragPlaceholderPosition.nodeIndex+1,a=()=>t===c.kD.canvasDragPlaceholderPosition.nodeIndex-1;if(c.kD.canvasDragPlaceholderPosition.parentId===e){if(s()&&"after"===c.kD.canvasDragPlaceholderPosition.position&&"before"===n)return;if(a()&&"before"===c.kD.canvasDragPlaceholderPosition.position&&"after"===n)return}}this.setCanvasDragPlaceholderPosition({parentId:e,nodeIndex:t,position:n,onlyShowTargetOutline:s})}};(0,r.gn)([(0,l.fI)()],Xt.prototype,"node",void 0),(0,r.gn)([(0,l.RL)("canvasElementDraggedId")],Xt.prototype,"watchCanvasElementDraggedId",null),Xt=(0,r.gn)([l.wA],Xt);const Yt=Xt,Qt=Yt;var Jt=(0,Y.Z)(Qt,Gt,Kt,!1,null,null,null);const en=Jt.exports;function tn(e,t){const{x:n,y:s}=(0,De.eq)(),a=document.getElementById("iframe"),i=window.Breakdance.canvas.document.querySelector(".breakdance-canvas-right-click-menu");if(!i||!a)return;const{width:o,height:r}=a.getBoundingClientRect(),{menuWidth:l,menuHeight:c}=nn(i),d=e+l+15>o?e-n-l:e-n,u=t+c+15>r?t-s-c:t-s;return{x:d,y:u}}function nn(e){e.style.display="block";const{width:t,height:n}=e.getBoundingClientRect();return{menuWidth:t,menuHeight:n}}var sn=n(55735);let an=class extends l.w3{constructor(){super(...arguments),this.refreshRate=500,this.unsubscribeFromStorePositionWrapper=()=>{},this.titlebarPositionStyle={},this.wrapperPositionStyle={display:"none"},this.elementTitle=""}nextTickPositionsWrapper(){(0,et.n)(this.calculateStylesAndTitle)}openContextMenu(e){e.stopPropagation(),e.preventDefault();const t=tn(e.clientX,e.clientY);c.kD.activeElementId&&t&&c.kD.setOnCanvasRightClickMenuState({elementId:c.kD.activeElementId,position:t})}mounted(){this.calculateStylesAndTitle(),this.unsubscribeFromStorePositionWrapper=this.$store.subscribe(this.nextTickPositionsWrapper),window.addEventListener("resize",this.nextTickPositionsWrapper),this.interval=setInterval(this.nextTickPositionsWrapper,this.refreshRate),Le.uq.register(sn.r.SHIFT_ESC,(()=>{this.activateParent()}))}beforeDestroy(){this.unsubscribeFromStorePositionWrapper(),window.removeEventListener("resize",this.nextTickPositionsWrapper),clearInterval(this.interval),Le.uq.unbind(sn.r.SHIFT_ESC)}get isDraftSection(){if(!c.kD.activeElement)return!1;if(c.kD.activeElement.data.type!==ie.PZ)return!1;const e=b()(c.kD.activeElement.data.properties,"settings.advanced.draft");return!!e}get isDragAndDropEnabled(){return c.kD.hasFullAccess}get isElementUpdating(){return!!c.kD.activeElementId&&!!c.kD.elementsThatAreUpdating[c.kD.activeElementId]}calculateStylesAndTitle(){!c.kD.elementWithContentEditable&&c.kD.activeElement?(this.elementTitle=c.PK.element(c.kD.activeElement.data.type).name,this.wrapperPositionStyle=(0,De.Qi)((0,De.dq)(c.kD.activeElement)),this.titlebarPositionStyle=(0,De.A3)(c.kD.activeElement)):this.wrapperPositionStyle={display:"none"}}get titlebarClasses(){return{"node-titlebar-is-dragging":this.isDragging,"node-titlebar-is-draft-section":this.isDraftSection}}get isDragging(){return c.kD.currentlyDraggingCanvasElementId===c.kD.activeElementId}duplicate(){c.kD.activeElementId&&c.Hb.duplicateElementAndActivateIt(c.kD.activeElementId)}remove(){null!==c.kD.activeElementId&&c.Hb.deleteElement({nodeId:c.kD.activeElementId})}refreshSsr(){c.kD.setRefreshSsrElementId(c.kD.activeElementId)}get hasSSr(){const e=c.kD.activeElement&&c.PK.element(c.kD.activeElement.data.type);return e?e.template.includes("%%SSR%%"):""}get hasParent(){return this.parentElement&&"root"!==this.parentElement.data.type}get node(){return c.kD.activeElement||!1}activateParent(){this.parentElement&&c.kD.activateElement(this.parentElement.id)}get parentElement(){if(!c.kD.activeElement)return!1;const e=(0,N.Lf)(c.Hb.document.tree,c.kD.activeElement.id);return e||!1}};an=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,OnCanvasDragHandle:en}})],an);const on=an,rn=on;var ln=(0,Y.Z)(rn,Ut,zt,!1,null,null,null);const cn=ln.exports;var dn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"node-hover-controls",class:e.wrapperClassList,style:e.wrapperPositionStyle})},un=[];let pn=class extends l.w3{constructor(){super(...arguments),this.refreshRate=500,this.shouldShowControls=!1,this.unsubscribeFromStorePositionWrapper=()=>{},this.throttledNextTickPositionWrapper=dt()((()=>(0,et.n)((()=>this.positionWrapper()))),100),this.disableMouseHoverOnMouseLeaveCanvas=()=>{setTimeout((()=>c.kD.setLastHoveredOnCanvasElementId(null)),110)},this.throttledShowHoverControlsOnMouseMoveCanvas=dt()(this.showHoverControlsOnMouseMoveCanvas,100),this.wrapperPositionStyle={display:"none"}}beforeMount(){this.positionWrapper(),this.unsubscribeFromStorePositionWrapper=this.$store.subscribe(this.throttledNextTickPositionWrapper),window.addEventListener("resize",this.throttledNextTickPositionWrapper)}mounted(){const e=window.Breakdance.canvas.document.getElementById("breakdance_canvas");e&&(e.addEventListener("mousemove",this.throttledShowHoverControlsOnMouseMoveCanvas),e.addEventListener("mouseleave",this.disableMouseHoverOnMouseLeaveCanvas),this.interval=setInterval(this.throttledNextTickPositionWrapper,this.refreshRate))}beforeDestroy(){const e=window.Breakdance.canvas.document.getElementById("breakdance_canvas");this.unsubscribeFromStorePositionWrapper(),window.removeEventListener("resize",this.throttledNextTickPositionWrapper),e?.removeEventListener("mousemove",this.throttledShowHoverControlsOnMouseMoveCanvas),clearInterval(this.interval)}get wrapperClassList(){return{"node-hover-controls-show":this.shouldShowControls&&this.isNotDragging,"node-hover-controls--outline":this.isNotDragging}}get isNotDragging(){return!c.kD.isCanvasElementBeingDragged&&!c.kD.isDragMixinDragging}get element(){if(!c.kD.lastHoveredOnCanvasElementId||c.kD.elementWithContentEditable)return!1;const e=(0,N.DY)(c.Hb.document.tree,c.kD.lastHoveredOnCanvasElementId);return e||!1}setHoveredNode(e,t){const n=(0,jt.Qf)(e,t);if(void 0!==n){const e=(0,N.DY)(c.Hb.document.tree,n);e&&c.kD.setLastHoveredOnCanvasElementId(e.id)}}showHoverControlsOnMouseMoveCanvas(e){const{clientX:t,clientY:n}=e;if(this.setHoveredNode(t,n),!1===this.element)return;const s=(0,De.Sv)(this.element,"absolute");if(!s)return;const{x:a,y:i,width:o,height:r}=s;this.shouldShowControls=t>a+o-48&&t<a+o&&n>i&&n<i+r}positionWrapper(){!c.kD.elementWithContentEditable&&this.element?this.wrapperPositionStyle=(0,De.Qi)((0,De.dq)(this.element)):this.wrapperPositionStyle={display:"none"}}};pn=(0,r.gn)([(0,l.wA)({})],pn);const hn=pn,mn=hn;var gn=(0,Y.Z)(mn,dn,un,!1,null,null,null);const vn=gn.exports;var fn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"node-content-editable",style:e.wrapperStyle})},yn=[];let bn=class extends l.w3{constructor(){super(...arguments),this.unsubscribeFromStorePositionWrapper=()=>{},this.wrapperStyle={display:"none"},this.lastModifiedDomElement=null}mounted(){this.calculateWrapperStyles(),this.unsubscribeFromStorePositionWrapper=this.$store.subscribe(this.calculateWrapperStyles),window.addEventListener("resize",this.calculateWrapperStyles)}beforeDestroy(){this.unsubscribeFromStorePositionWrapper(),window.removeEventListener("resize",this.calculateWrapperStyles)}get domElement(){if(!c.kD.elementWithContentEditable)return null;const e=(0,N.DY)(c.Hb.document.tree,c.kD.elementWithContentEditable);if(!e)return null;const t=(0,De.dq)(e);if("true"===t?.contentEditable)return this.lastModifiedDomElement=t,t;const n=t?.querySelector('[contenteditable="true"]');return n?(this.lastModifiedDomElement=n,n):null}calculateWrapperStyles(){(0,et.n)((()=>{!this.domElement&&this.lastModifiedDomElement&&(this.lastModifiedDomElement.removeEventListener("input",this.calculateWrapperStyles),this.lastModifiedDomElement=null),this.wrapperStyle=(0,De.Qi)(this.domElement),this.domElement&&this.domElement.addEventListener("input",this.calculateWrapperStyles)}))}};bn=(0,r.gn)([(0,l.wA)({})],bn);const Pn=bn,_n=Pn;var Sn=(0,Y.Z)(_n,fn,yn,!1,null,null,null);const Cn=Sn.exports;let wn=class extends s.ZP{constructor(){super(...arguments),this.hideTitleBar=!1,this.hideHoverControls=!1}get element(){return ft.kD.activeElement||!1}get hoveredElement(){return!!ft.kD.lastHoveredOnCanvasElementId&&(0,N.DY)(ft.Hb.document.tree,ft.kD.lastHoveredOnCanvasElementId)}get hideClass(){let e=null;return this.hideTitleBar&&this.hideHoverControls?e="all":this.hideHoverControls?e="hover":this.hideTitleBar&&(e="titlebar"),e?`node-chrome--hide-${e}`:null}onElementSelected(){this.observer?.disconnect(),this.element&&(this.observer=this.observePositionChange(this.element,(e=>{this.hideTitleBar=(0,De.p1)(e)})))}onHoveredElementSelected(){this.hoverObserver?.disconnect(),this.hoveredElement&&(this.hoverObserver=this.observePositionChange(this.hoveredElement,(e=>{this.hideHoverControls=(0,De.p1)(e)})))}beforeDestroy(){this.destroyObserver()}observePositionChange(e,t){if(!e)return;const n=(0,De.dq)(e);if(!n)return;const s=e=>{e.forEach((e=>{const n=e.target;t(n)}))},a=new MutationObserver(s),i={attributes:!0,attributeFilter:["class"]};return a.observe(n,i),a}destroyObserver(){this.observer?.disconnect(),this.hoverObserver?.disconnect()}};(0,r.gn)([(0,l.RL)("element")],wn.prototype,"onElementSelected",null),(0,r.gn)([(0,l.RL)("hoveredElement")],wn.prototype,"onHoveredElementSelected",null),wn=(0,r.gn)([(0,l.wA)({components:{NodeContentEditable:Cn,DragDots:ot,SpacingBars:It,ColumnDragSizer:Ht,NodeTitlebar:cn,NodeHoverControls:vn}})],wn);const kn=wn,xn=kn;var In=(0,Y.Z)(xn,qe,Xe,!1,null,null,null);const Dn=In.exports;var En=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("DragPlaceholder"),t("RightClickMenu",{directives:[{name:"permission",rawName:"v-permission",value:"full",expression:"'full'"}]})],1)},Zn=[],Tn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-drag-placeholder-wrapper"},[t("div",{staticClass:"breakdance-drag-placeholder",style:e.dragPlaceholderPositionStyle}),t("div",{staticClass:"breakdance-drag-target-outline",style:e.dragTargetOutlineStyle})])},An=[];let Bn=class extends s.ZP{get canvasDragPlaceholderPosition(){return c.kD.canvasDragPlaceholderPosition}get parentNode(){if(!this.canvasDragPlaceholderPosition)return!1;const e=(0,N.DY)(c.Hb.document.tree,this.canvasDragPlaceholderPosition.parentId);return e||!1}get stackingStyle(){return this.canvasDragPlaceholderPosition&&this.parentNode?(0,jt.qE)(this.parentNode):{}}get dragPlaceholderPositionStyle(){if(!this.canvasDragPlaceholderPosition||!0===this.canvasDragPlaceholderPosition.onlyShowTargetOutline)return{};const e=(0,N.DY)(c.Hb.document.tree,this.canvasDragPlaceholderPosition.parentId);if(!e)return{};const t=8,n=`${t}px`;if(0===e.children.length){const s=e.id===N.uB?(0,De.j3)():(0,De.Sv)(e);if(!s)return{};let{x:a,y:i,width:o,height:r}=s;return o-40>100&&(a+=20,o-=40),{display:"block",top:i+r/2-t/2+"px",left:`${a}px`,width:`${o}px`,height:n}}{const s=e.children[this.canvasDragPlaceholderPosition.nodeIndex],a=(0,De.Sv)(s),i=(0,jt.qE)(e);if(!a)return{};const{x:o,y:r,width:l,height:c}=a;if("vertical"===i){if("before"===this.canvasDragPlaceholderPosition.position)return{display:"block",top:r-(t/2-1)+"px",left:`${o}px`,width:`${l}px`,height:n};if("after"===this.canvasDragPlaceholderPosition.position)return{display:"block",top:c+r-(t/2+1)+"px",left:`${o}px`,width:`${l}px`,height:n}}else if("horizontal"===i){if("before"===this.canvasDragPlaceholderPosition.position)return{display:"block",top:`${r}px`,left:o-t/2+"px",height:`${c}px`,width:n};if("after"===this.canvasDragPlaceholderPosition.position)return{display:"block",left:l+o-t/2+"px",top:`${r}px`,height:`${c}px`,width:n}}}return{}}get dragTargetOutlineStyle(){if(!this.parentNode)return{};const e=this.parentNode.id===N.uB&&0===c.Hb.document.tree.root.children.length?(0,De.j3)():(0,De.Sv)(this.parentNode);if(!e)return{};const{x:t,y:n,width:s,height:a}=e;return{display:"block",position:"absolute",top:`${n}px`,left:`${t}px`,width:`${s}px`,height:`${a}px`}}};Bn=(0,r.gn)([(0,l.wA)({components:{}})],Bn);const On=Bn,Rn=On;var Mn=(0,Y.Z)(Rn,Tn,An,!1,null,null,null);const Fn=Mn.exports;var Nn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.shouldShow,expression:"shouldShow"}],staticClass:"breakdance-canvas-right-click-menu",style:e.wrapperPositionStyle},[t("RightClickMenuItem",{attrs:{disabled:!e.elementIdPresent,shortcut:[" C","Ctrl C"]},on:{click:e.copyElement}},[e._v(" Copy ")]),t("RightClickMenuItem",{attrs:{disabled:!e.canPasteElement,shortcut:[" V","Ctrl V"]},on:{click:e.pasteElement}},[e._v(" Paste ")]),t("RightClickMenuItem",{attrs:{disabled:!e.canPasteElementProperties},on:{click:function(t){return e.pasteElementProperties("design")}}},[e._v(" Paste Design ")]),t("RightClickMenuItem",{attrs:{disabled:!e.canPasteElementProperties},on:{click:function(t){return e.pasteElementProperties("settings")}}},[e._v(" Paste Settings ")]),t("RightClickWrapMenu"),t("div",{staticClass:"breakdance-canvas-right-click-menu-divider"}),t("RightClickMenuItem",{attrs:{disabled:!e.elementIdPresent,shortcut:["","Del"]},on:{click:e.deleteElement}},[e._v(" Delete ")]),t("div",{staticClass:"breakdance-canvas-right-click-menu-divider"}),t("RightClickMenuItem",{attrs:{disabled:!e.canSaveAsGlobalBlock},on:{click:e.openSaveGlobalBlockDialog}},[e._v(" Save as Global Block ")]),t("RightClickMenuItem",{attrs:{disabled:!e.canSaveAsPreset},on:{click:e.openSavePresetDialog}},[e._v(" Create Design Preset ")])],1),t("GlobalBlockDialog",{attrs:{open:e.saveGlobalBlockDialog,"element-id":e.elementIdToSaveAsGlobalBlock},on:{close:e.closeGlobalBlockDialog}}),t("PresetDialog",{attrs:{open:e.savePresetDialog,"element-id":e.elementIdToSaveAsPreset},on:{close:e.closePresetDialog}}),t("ClipboardDialog",{model:{value:e.clipboardDialog,callback:function(t){e.clipboardDialog=t},expression:"clipboardDialog"}})],1)},Ln=[],$n=n(89028),Wn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{"breakdance-canvas-right-click-menu-item":!0,"breakdance-canvas-right-click-menu-item-disabled":e.disabled},on:{click:function(t){e.disabled||e.$emit("click",t)}}},[e._t("default"),e.shortcut?t("div",{staticClass:"breakdance-canvas-right-click-menu-item-shortcut"},[e._v(" "+e._s(e.isMac?e.shortcut[0]:e.shortcut[1])+" ")]):e._e()],2)},Vn=[];function Hn(){return"undefined"!==typeof navigator.userAgentData&&null!=navigator.userAgentData?navigator.userAgentData.platform:"undefined"!==typeof navigator.platform?"undefined"!==typeof navigator.userAgent&&/android/.test(navigator.userAgent.toLowerCase())?"android":navigator.platform:"unknown"}let Un=class extends s.ZP{get isMac(){const e=Hn().toLowerCase();return/mac/.test(e)}};(0,r.gn)([(0,l.fI)({default:!1})],Un.prototype,"disabled",void 0),(0,r.gn)([(0,l.fI)({default:""})],Un.prototype,"shortcut",void 0),(0,r.gn)([(0,l.fI)({default:()=>[]})],Un.prototype,"subItems",void 0),Un=(0,r.gn)([(0,l.wA)({components:{}})],Un);const zn=Un,Gn=zn;var Kn=(0,Y.Z)(Gn,Wn,Vn,!1,null,null,null);const jn=Kn.exports;var qn=n(87615),Xn=n(9289),Yn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Dialog",{attrs:{value:e.value,width:500,closeable:!0},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Enable Paste")]},proxy:!0},{key:"text",fn:function(){return[t("p",[e._v(" To paste using the Edit menu, "),e.status&&!e.status.secure?[e._v(" your website needs to be served with HTTPS. ")]:e.status&&!e.permissionGranted?[e._v(" please allow access to your clipboard. ")]:e._e()],2),t("p",[e._v("Alternatively, you can use your keyboard shortcuts:")]),t("ul",{staticClass:"clipboard-dialog-shortcuts"},[t("li",{staticClass:"clipboard-dialog-shortcut"},[t("span",{staticClass:"clipboard-dialog-shortcut__key"},[e._v(e._s(e.metaKey)+" C")]),t("span",{staticClass:"clipboard-dialog-shortcut__label"},[e._v("copy")])]),t("li",{staticClass:"clipboard-dialog-shortcut"},[t("span",{staticClass:"clipboard-dialog-shortcut__key"},[e._v(e._s(e.metaKey)+" X")]),t("span",{staticClass:"clipboard-dialog-shortcut__label"},[e._v("cut")])]),t("li",{staticClass:"clipboard-dialog-shortcut"},[t("span",{staticClass:"clipboard-dialog-shortcut__key"},[e._v(e._s(e.metaKey)+" V")]),t("span",{staticClass:"clipboard-dialog-shortcut__label"},[e._v("paste")])])])]},proxy:!0}])})},Qn=[],Jn=n(89137),es=n(31737);let ts=class extends s.ZP{constructor(){super(...arguments),this.status=null}async onChange(){this.status=await(0,es.fn)(),this.status?.permission&&(this.status.permission.onchange=()=>{this.$emit("input",!1)})}get permissionGranted(){return"granted"===this.status?.permission?.state}get metaKey(){return this.isAppleDevice?"":"Ctrl + "}get isAppleDevice(){return/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)}close(){this.$emit("input",!1)}};(0,r.gn)([(0,l.fI)()],ts.prototype,"value",void 0),(0,r.gn)([(0,l.RL)("value",{immediate:!0})],ts.prototype,"onChange",null),ts=(0,r.gn)([(0,l.wA)({components:{Dialog:Jn.Z}})],ts);const ns=ts,ss=ns;var as=(0,Y.Z)(ss,Yn,Qn,!1,null,null,null);const is=as.exports;var os=n(37179),rs=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Dialog",{attrs:{value:e.open},on:{close:function(t){return e.$emit("close")},"click:outside":function(t){return e.$emit("close")},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("close")}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Create Design Preset ")]},proxy:!0},{key:"text",fn:function(){return[t("TextInput",{ref:"input",attrs:{size:"md",placeholder:"Preset Name",autofocus:e.open},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save.apply(null,arguments)}},model:{value:e.presetName,callback:function(t){e.presetName=t},expression:"presetName"}})]},proxy:!0},{key:"actions",fn:function(){return[t(os.Z,{attrs:{text:""},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),t(os.Z,{attrs:{color:"blue",dark:"",disabled:!e.presetName},on:{click:e.save}},[e._v(" Save ")])]},proxy:!0}])})},ls=[],cs=n(87589),ds=n(91669);let us=class extends s.ZP{constructor(){super(...arguments),this.presetName=null}get isPresetsOverridesEnabled(){return c.PK.isExperimentEnabled("design-presets-overrides")}get element(){return this.elementId?(0,N.DY)(c.Hb.document.tree,this.elementId):null}onOpenChange(){this.open&&(this.presetName=this.getDefaultName(),this.$nextTick((()=>this.focusAndSelectInput())))}getDefaultName(){if(!this.element)return"";const e=this.element.data.type,t=c.PK.element(e).name;return`${t} ${(0,ds.z)()}`}focusAndSelectInput(){const e=this.$refs.input,t=e.$el.querySelector("input");t?.focus(),t?.select()}async save(e){if(e.preventDefault(),!this.presetName||!this.elementId||!this.element)return;const t=this.element.data.type,n=(0,$e.Lr)(this.presetName,t,this.element.data.properties.design);(0,$e.xk)(n),(0,$e.I8)(n.id,this.elementId),this.presetName="",this.$emit("close")}};(0,r.gn)([(0,l.fI)({required:!0})],us.prototype,"elementId",void 0),(0,r.gn)([(0,l.fI)({default:!1})],us.prototype,"open",void 0),(0,r.gn)([(0,l.RL)("open")],us.prototype,"onOpenChange",null),us=(0,r.gn)([(0,l.wA)({components:{Dialog:Jn.Z,TextInput:cs.Z}})],us);const ps=us,hs=ps;var ms=(0,Y.Z)(hs,rs,ls,!1,null,null,null);const gs=ms.exports;var vs=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-canvas-right-click-dropdown",class:{"breakdance-canvas-right-click-dropdown--disabled":!e.canWrap}},[t("RightClickMenuItem",{attrs:{disabled:!e.canWrap}},[e._v(" Wrap In "),t("Icon",{staticClass:"breakdance-canvas-right-click-submenu__arrow",attrs:{icon:"ChevronRightIcon",size:10}})],1),t("div",{staticClass:"breakdance-canvas-right-click-submenu"},[t("div",{staticClass:"breakdance-canvas-right-click-submenu__content breakdance-canvas-right-click-menu"},e._l(e.wrapItems,(function(n){return t("RightClickMenuItem",{key:n.label,on:{click:function(t){return e.wrapIn(n)}}},[e._v(" "+e._s(n.label)+" ")])})),1)])],1)},fs=[];let ys=class extends l.w3{constructor(){super(...arguments),this.wrapItems=[{label:"Div",elementSlug:"EssentialElements\\Div"},{label:"Link",elementSlug:"EssentialElements\\WrapperLink"}]}get element(){return ft.kD.activeElement}get canWrap(){if(!this.element)return!1;const e=ft.PK.element(this.element.data.type),t=e.nestingRule.type;return!["section","root","popup","final-that-is-allowed-inside-root"].includes(t)}wrapIn({elementSlug:e}){this.element&&(ft.Hb.wrapElement({wrapperElementSlug:e,elementId:this.element.id}),ft.kD.setOnCanvasRightClickMenuState("closed"))}};ys=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,RightClickMenuItem:jn}})],ys);const bs=ys,Ps=bs;var _s=(0,Y.Z)(Ps,vs,fs,!1,null,"03bb77a4",null);const Ss=_s.exports;let Cs=class extends s.ZP{constructor(){super(...arguments),this.clipboardDialog=!1,this.canPasteElement=!1,this.canPasteElementProperties=!1,this.elementIdToSaveAsGlobalBlock=null,this.saveGlobalBlockDialog=!1,this.elementIdToSaveAsPreset=null,this.savePresetDialog=!1}async mounted(){window.Breakdance.canvas.document.addEventListener("contextmenu",this.handleRightClickInCanvas),window.Breakdance.canvas.document.addEventListener("click",this.closeRightClickMenuIfClickHappensOutsideRightClickMenu,{capture:!0}),window.addEventListener("click",this.closeRightClickMenuIfClickHappensOutsideRightClickMenu,{capture:!0})}beforeDestroy(){window.Breakdance.canvas.document.removeEventListener("contextmenu",this.handleRightClickInCanvas),window.Breakdance.canvas.document.removeEventListener("click",this.closeRightClickMenuIfClickHappensOutsideRightClickMenu,{capture:!0}),window.removeEventListener("click",this.closeRightClickMenuIfClickHappensOutsideRightClickMenu,{capture:!0})}get menuState(){return"closed"!==c.kD.onCanvasRightClickMenuState?c.kD.onCanvasRightClickMenuState:null}get shouldShow(){return"closed"!==c.kD.onCanvasRightClickMenuState&&!this.saveGlobalBlockDialog}handleRightClickInCanvas(e){e.preventDefault();const t=(0,jt.Qf)(e.clientX,e.clientY),n=tn(e.clientX,e.clientY);n&&c.kD.setOnCanvasRightClickMenuState({elementId:t,position:n})}closeRightClickMenuIfClickHappensOutsideRightClickMenu(e){if(this.saveGlobalBlockDialog)return;const t=e.target.closest(".breakdance-canvas-right-click-menu");t||c.kD.setOnCanvasRightClickMenuState("closed")}get wrapperPositionStyle(){return this.menuState?{left:`${this.menuState.position.x}px`,top:`${this.menuState.position.y}px`}:{}}get elementIdPresent(){return this.menuState?.elementId}async onStateChange(){const{permission:e}=await(0,es.fn)();if(this.permission=e?.state,"prompt"===this.permission)return this.canPasteElement=!0,void(this.canPasteElementProperties=!0);this.canPasteElement=await(0,$n.Ku)(this.menuState?.elementId?this.menuState.elementId:c.Hb.document.tree.root.id),this.canPasteElementProperties=!!this.menuState?.elementId&&await(0,$n.us)(this.menuState.elementId)}copyElement(){this.menuState?.elementId&&(0,$n.NA)(this.menuState.elementId),c.kD.setOnCanvasRightClickMenuState("closed")}pasteElement(){"prompt"===this.permission&&(this.clipboardDialog=!0),this.menuState?.elementId?(0,$n.Wm)(this.menuState.elementId):(0,$n.Wm)(c.Hb.document.tree.root.id),c.kD.setOnCanvasRightClickMenuState("closed")}pasteElementProperties(e){"prompt"===this.permission&&(this.clipboardDialog=!0),this.menuState?.elementId&&(0,$n.qb)(this.menuState.elementId,e),c.kD.setOnCanvasRightClickMenuState("closed")}deleteElement(){this.menuState?.elementId&&(c.Hb.deleteElement({nodeId:this.menuState?.elementId}),c.kD.setOnCanvasRightClickMenuState("closed"))}openSaveGlobalBlockDialog(){this.menuState?.elementId&&(this.elementIdToSaveAsGlobalBlock=this.menuState.elementId,this.saveGlobalBlockDialog=!0)}closeGlobalBlockDialog(){this.saveGlobalBlockDialog=!1,this.elementIdToSaveAsGlobalBlock=null,c.kD.setOnCanvasRightClickMenuState("closed")}get canSaveAsGlobalBlock(){return this.menuState?.elementId&&(0,qn.VQ)(this.menuState.elementId)}openSavePresetDialog(){this.menuState?.elementId&&(this.elementIdToSaveAsPreset=this.menuState.elementId,this.savePresetDialog=!0)}closePresetDialog(){this.savePresetDialog=!1,this.elementIdToSaveAsPreset=null,c.kD.setOnCanvasRightClickMenuState("closed")}get canSaveAsPreset(){return!(0,$e.CO)(this.menuState?.elementId)}};(0,r.gn)([(0,l.RL)("menuState")],Cs.prototype,"onStateChange",null),Cs=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,PresetDialog:gs,ClipboardDialog:is,GlobalBlockDialog:Xn.Z,RightClickMenuItem:jn,RightClickWrapMenu:Ss}})],Cs);const ws=Cs,ks=ws;var xs=(0,Y.Z)(ks,Nn,Ln,!1,null,null,null);const Is=xs.exports;let Ds=class extends s.ZP{};Ds=(0,r.gn)([(0,l.wA)({components:{DragPlaceholder:Fn,RightClickMenu:Is}})],Ds);const Es=Ds,Zs=Es;var Ts=(0,Y.Z)(Zs,En,Zn,!1,null,null,null);const As=Ts.exports;var Bs=n(13503);let Os=class extends s.ZP{render(){const e=arguments[0],t=()=>0===this.rootElement.children.length?e(J):this.rootElement.children.map((t=>e(je,{key:t.id,attrs:{parentId:this.rootElement.id,element:t}})));return e("div",{key:this.canvasKey,class:this.classList,attrs:{id:"breakdance_canvas"},style:this.style},[t(),!this.isPreviewMode&&e(Dn),!this.isPreviewMode&&e(As)])}mounted(){c.kD.setCanvasState("normal")}get canvasKey(){return c.kD.canvasKey}get isPreviewMode(){return c.kD.isPreviewMode}get classList(){return{breakdance:!0,canvas:!0,dragging:c.kD.isCanvasElementBeingDragged||c.kD.isAddElementBeingDragged}}get rootElement(){return c.Hb.document.tree.root}get globalSettings(){return c.cr.globalSettings}get selectors(){return c.cr.cssSelectors}get presets(){return c.cr.presets}get style(){const e=c.kD.canvasPreviewWidth.previewSize.width,t=c.kD.canvasPreviewWidth.previewSize.height;return{width:e?`${e}px`:void 0,height:t?`${t}px`:void 0,margin:e||t?"0 auto":void 0}}onGlobalSettingsChanged(){(0,Bs.TK)((0,De.RY)())}onSelectorsChanged(){(0,Bs.Bs)((0,De.RY)())}onPresetsChanged(){(0,Bs.aL)((0,De.RY)())}};(0,r.gn)([(0,l.RL)("globalSettings",{deep:!0,immediate:!0})],Os.prototype,"onGlobalSettingsChanged",null),(0,r.gn)([(0,l.RL)("selectors",{deep:!0,immediate:!0})],Os.prototype,"onSelectorsChanged",null),(0,r.gn)([(0,l.RL)("presets",{deep:!0,immediate:!0})],Os.prototype,"onPresetsChanged",null),Os=(0,r.gn)([(0,l.wA)({components:{EmptyContainer:J,BuilderElement:je,NodeChrome:Dn,CanvasChrome:As}})],Os);const Rs=Os,Ms=Rs;var Fs,Ns,Ls=(0,Y.Z)(Ms,Fs,Ns,!1,null,null,null);const $s=Ls.exports;var Ws=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:e.classes,style:e.style},[t("Icon",{staticClass:"breakdance-preview-width-adjustment-handle align-center",attrs:{icon:"EllipsisStrokeVerticalIcon",size:"6",heightAuto:!0},on:{mousedown:e.dragStart,dblclick:e.resetPreviewWidth}}),e.isDragging||e.currentPreviewWidthIsSetByUser?t("div",{staticClass:"breakdance-px-amount"},[e._v(" "+e._s(e.pxAmount)+" "),t("Icon",{staticClass:"px-amount-reset-icon",attrs:{icon:"CloseCircleIcon",size:"11"},on:{click:e.resetPreviewWidth}})],1):e._e()],1)},Vs=[];let Hs=class extends s.ZP{constructor(){super(...arguments),this.mouseXChange=0,this.lastMouseX=0,this.isDragging=!1,this.easyEvent=new Se.hF}get currentPreviewWidthIsSetByUser(){return"100%"===this.currentBreakpoint.defaultPreviewWidth?"100%"!==this.previewWidth.width:this.previewWidth.width!==this.currentBreakpoint.defaultPreviewWidth}get style(){return{left:`${this.iframeWrapperPosition.x+this.iframeWrapperPosition.width}px`,height:`${this.iframeWrapperPosition.height}px`}}get pxAmount(){return"100%"===this.previewWidth.width?"100%":`${this.previewWidth.width}px`}get alreadyAtMaximumWidth(){return"100%"===this.previewWidth.width||this.previewWidth.width>=this.previewWidth.availableCanvasSize.width}dragStart(e){e.preventDefault(),e.stopPropagation(),this.easyEvent.on("mousemove",this.dragging),this.easyEvent.on("mouseup",this.dragEnd),this.lastMouseX=e.clientX,this.iframe&&(this.iframe.style.pointerEvents="none"),this.mainWrapper&&(this.mainWrapper.style.cursor="col-resize")}dragging(e){(0,Se.Pm)(e)||(this.isDragging=!0,e.preventDefault(),e.stopPropagation(),this.mouseXChange=e.clientX-this.lastMouseX,this.adjustPreviewWidth(2*this.mouseXChange),this.lastMouseX=e.clientX)}dragEnd(e){e.preventDefault(),e.stopPropagation(),this.easyEvent.removeAll(),this.iframe&&(this.iframe.style.pointerEvents="auto"),this.mainWrapper&&(this.mainWrapper.style.cursor="auto"),this.isDragging=!1}adjustPreviewWidth(e){let t;const n=this.previewWidth.width;if(this.alreadyAtMaximumWidth&&e>0&&(e=0),"100%"===this.previewWidth.width){if(!this.iframe)return void console.warn("iframe element is missing");t=this.iframe.offsetWidth-e}else t=this.previewWidth.width+e;"100%"!==n&&t>n&&t>this.previewWidth.availableCanvasSize.width&&(t=this.previewWidth.availableCanvasSize.width),this.$emit("previewWidthChangeWithAdjustmentBar",t)}resetPreviewWidth(){this.$emit("resetPreviewWidth")}get classes(){return{"breakdance-preview-width-bar":!0,"breakdance-preview-width-bar-is-dragging":this.isDragging}}};(0,r.gn)([(0,l.fI)()],Hs.prototype,"iframeWrapperPosition",void 0),(0,r.gn)([(0,l.fI)()],Hs.prototype,"previewWidth",void 0),(0,r.gn)([(0,l.fI)()],Hs.prototype,"currentBreakpoint",void 0),(0,r.gn)([(0,l.fI)()],Hs.prototype,"mainWrapper",void 0),(0,r.gn)([(0,l.fI)()],Hs.prototype,"iframe",void 0),Hs=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z}})],Hs);const Us=Hs,zs=Us;var Gs=(0,Y.Z)(zs,Ws,Vs,!1,null,null,null);const Ks=Gs.exports;var js=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(os.Z,e._g({class:e.classList,attrs:{elevation:"0",loading:e.loading,height:"37",minWidth:e.minWidth,outlined:"","data-test-id":e.testId}},e.$listeners),[e._t("default")],2)},qs=[];let Xs=class extends s.ZP{get classList(){return{"breakdance-toolbar-button":!0,"breakdance-toolbar-button--active":this.active}}};(0,r.gn)([(0,l.fI)({default:!1})],Xs.prototype,"loading",void 0),(0,r.gn)([(0,l.fI)({default:!1})],Xs.prototype,"active",void 0),(0,r.gn)([(0,l.fI)({default:"auto"})],Xs.prototype,"minWidth",void 0),(0,r.gn)([(0,l.fI)()],Xs.prototype,"testId",void 0),Xs=(0,r.gn)([(0,l.wA)({components:{}})],Xs);const Ys=Xs,Qs=Ys;var Js=(0,Y.Z)(Qs,js,qs,!1,null,null,null);const ea=Js.exports;var ta=n(49026),na=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.showOverlay?t("div",{staticClass:"breakdance-foreign-documents-overlay",style:e.overlayStyles,on:{mouseleave:e.handleOverlayMouseLeave}},[t("div",{staticClass:"breakdance-foreign-documents-overlay-titlebar-wrapper"},[t("div",{staticClass:"breakdance-foreign-documents-overlay-titlebar"},[t("a",{attrs:{href:e.foreignDocumentBuilderUrl},on:{click:e.openBuilderUrl}},[e._v(" Edit "+e._s(e.foreignDocumentTitle)+" "),t("Icon",{attrs:{icon:"EditIcon"}})],1)])])]):e._e()},sa=[];const aa=e=>`${e}px`;var ia;(function(e){e["breakdance_header"]="header",e["breakdance_footer"]="footer"})(ia||(ia={}));let oa=class extends s.ZP{constructor(){super(...arguments),this.hoveredForeignDocumentDomElement=null,this.hoveredForeignDocumentDomElementCoords=null,this.isScrolling=!1,this.isScrollingCleanupTimerId=null,this.throttledHandleIframeScroll=dt()(this.handleIframeScroll,120),this.throttledHandleWatchedElementMouseMove=dt()(this.handleWatchedElementMouseMove,60)}get showOverlay(){return c.kD.hasFullAccess}get foreignDocumentBuilderUrl(){return this.hoveredForeignDocumentDomElement?.dataset.breakdanceForeignDocumentBuilderUrl}get foreignDocumentTypeLabel(){const e=this.hoveredForeignDocumentDomElement?.dataset.breakdanceForeignDocumentType;return e?ia[e]??"":""}get foreignDocumentTitle(){const e=this.hoveredForeignDocumentDomElement?.dataset.breakdanceForeignDocumentTitle;return e||"Unknown Document"}get overlayStyles(){if(!this.isThereHoveredElementAndItsCoords())return;const{top:e,left:t,height:n,width:s}=this.hoveredForeignDocumentDomElementCoords;return{display:"flex",top:aa(e),left:aa(t),height:aa(n),width:aa(s)}}mounted(){this.addEventListenersToIframeDocument(),this.addEventListenersToWatchedElements()}beforeDestroy(){this.removeEventListenersFromIframeDocument(),this.removeEventListenersFromWatchedElements()}addEventListenersToIframeDocument(){this.iframeDocument.addEventListener("scroll",this.throttledHandleIframeScroll)}removeEventListenersFromIframeDocument(){this.iframeDocument.removeEventListener("scroll",this.throttledHandleIframeScroll)}addEventListenersToWatchedElements(){this.elementsToWatch.forEach((e=>{e.addEventListener("mousemove",this.throttledHandleWatchedElementMouseMove),e.addEventListener("mouseleave",this.handleWatchedElementMouseLeave)}))}removeEventListenersFromWatchedElements(){this.elementsToWatch.forEach((e=>{e.removeEventListener("mousemove",this.throttledHandleWatchedElementMouseMove),e.removeEventListener("mouseleave",this.handleWatchedElementMouseLeave)}))}isThereHoveredElementAndItsCoords(){return null!==this.hoveredForeignDocumentDomElement&&null!==this.hoveredForeignDocumentDomElementCoords}setHoveredForeignDocumentDomElement(e){this.hoveredForeignDocumentDomElement=e,this.hoveredForeignDocumentDomElementCoords=this.getCoords()}getCoords(){const e=this.hoveredForeignDocumentDomElement;if(1===e?.childElementCount){const t=e.firstElementChild;return t.getBoundingClientRect()}return e?.getBoundingClientRect()??null}setIsScrolling(e){e?(this.hoveredForeignDocumentDomElement=null,this.hoveredForeignDocumentDomElementCoords=null,this.removeEventListenersFromWatchedElements()):this.addEventListenersToWatchedElements(),this.isScrolling=e}handleIframeScroll(){this.setIsScrolling(!0),this.isScrollingCleanupTimerId&&clearTimeout(this.isScrollingCleanupTimerId),this.isScrollingCleanupTimerId=setTimeout((()=>this.setIsScrolling(!1)),120)}handleOverlayMouseLeave(){this.setHoveredForeignDocumentDomElement(null)}handleWatchedElementMouseMove(e){e.currentTarget&&this.setHoveredForeignDocumentDomElement(e.currentTarget)}handleWatchedElementMouseLeave(e){this.$el.contains(e.relatedTarget)?null!==this.hoveredForeignDocumentDomElement&&(this.hoveredForeignDocumentDomElementCoords=this.getCoords()):this.setHoveredForeignDocumentDomElement(null)}openBuilderUrl(){const e=this.foreignDocumentBuilderUrl;e&&this.$emit("openDocument",{builderUrl:e,title:this.foreignDocumentTitle})}};(0,r.gn)([(0,l.fI)()],oa.prototype,"canvasElement",void 0),(0,r.gn)([(0,l.fI)()],oa.prototype,"iframeDocument",void 0),(0,r.gn)([(0,l.fI)()],oa.prototype,"elementsToWatch",void 0),oa=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z}})],oa);const ra=oa,la=ra;var ca=(0,Y.Z)(la,na,sa,!1,null,null,null);const da=ca.exports;var ua=n(713),pa=n(75051),ha=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"mainWrapper",staticClass:"breakdance-iframe-main-wrapper",style:e.mainWrapperStyle,attrs:{id:"canvas-area"}},[t("PreviewWidthAdjustmentHandle",{attrs:{"iframe-wrapper-position":e.iframeWrapperPosition,"preview-width":e.iframePreviewWidth,"current-breakpoint":e.currentBreakpoint,iframe:e.iframe,"main-wrapper":e.mainWrapper},on:{resetPreviewWidth:()=>this.$emit("resetPreviewWidth"),previewWidthChangeWithAdjustmentBar:e=>this.$emit("previewWidthChangeWithAdjustmentBar",e)}}),e.iframeExited?t("div",{staticClass:"iframe-reloaded-warning-block"},[e._v(" Something navigated you away from the page you are editing. "),t("StandardButton",{staticClass:"mt-4",attrs:{minWidth:"80"},on:{click:e.handleReloadWanted}},[e._v(" Continue Editing ")])],1):t("div",{ref:"iframeWrapper",staticClass:"breakdance-iframe-inner-wrapper",style:e.iframeWrapperStyles,attrs:{id:"iframe-wrapper"}},[e.iframeIsLoading?t("Loading",{attrs:{absolute:""}}):e._e(),t("iframe",{key:e.iframeUrl,ref:"iframe",staticClass:"breakdance-iframe",style:e.iframeStyle,attrs:{id:e.iframeId,name:e.iframeId,src:e.iframeUrl},on:{load:e.handleIframeLoaded}})],1)],1)},ma=[];const ga=8;let va=class extends s.ZP{constructor(){super(...arguments),this.iframeWrapperPosition={x:0,y:0,width:0,height:0}}get canvasPadding(){return this.isPreviewMode?0:ga}get mainWrapperStyle(){return{padding:`${this.canvasPadding}px`}}get iframeWrapperStyles(){return{width:"100%"===this.iframePreviewWidth.width?"100%":`${this.iframePreviewWidth.width}px`,overflow:"SCALED_TO_FIT"===ft.kD.settings.scaleToFit?"hidden":"auto"}}get iframeStyle(){const e=e=>{const t=Math.min(1,this.iframePreviewWidth.availableCanvasSize.width/e);return{width:`${e}px`,transform:`scale(${t})`,height:this.iframePreviewWidth.availableCanvasSize.height*(1/t)+"px"}};return"ACTUAL_SIZE"===ft.kD.settings.scaleToFit?"100%"===this.iframePreviewWidth.width?{width:"100%",minWidth:`${this.minWidth}px`}:{width:`${this.iframePreviewWidth.width}px`}:"100%"===this.iframePreviewWidth.width?this.iframePreviewWidth.availableCanvasSize.width<this.minWidth?e(this.minWidth):{width:"100%",minWidth:`${this.minWidth}px`}:e(this.iframePreviewWidth.width)}get iframeIsLoading(){return"loading"===this.iframeState}get isPreviewMode(){return ft.kD.isPreviewMode}handleIframeLoaded(){this.iframe?.contentWindow&&(this.iframe.contentWindow.onunload=()=>{this.$emit("iframeUnloaded")}),this.$emit("iframeLoaded",this.iframe)}handleReloadWanted(){this.$emit("reloadWanted")}mounted(){this.mainWrapper?new ResizeObserver(this.setAvailableCanvasSize).observe(this.mainWrapper):ft.kD.logError("No canvas element."),this.iframeWrapper?new ResizeObserver(this.setIframeWrapperPosition).observe(this.iframeWrapper):ft.kD.logError("No iframe wrapper element."),this.setAvailableCanvasSize()}setAvailableCanvasSize(){if(this.mainWrapper){const e=this.mainWrapper.getBoundingClientRect(),t={...this.iframePreviewWidth,availableCanvasSize:{width:e.width-2*this.canvasPadding,height:e.height-2*this.canvasPadding}};this.$emit("previewWidthChange",t)}this.setIframeWrapperPosition()}setIframeWrapperPosition(){if(this.iframeWrapper){const e=this.iframeWrapper.getBoundingClientRect();this.iframeWrapperPosition={x:e.x,y:e.y,width:e.width,height:e.height}}}};(0,r.gn)([(0,l.fI)()],va.prototype,"iframeState",void 0),(0,r.gn)([(0,l.fI)()],va.prototype,"iframePreviewWidth",void 0),(0,r.gn)([(0,l.fI)()],va.prototype,"iframeUrl",void 0),(0,r.gn)([(0,l.fI)()],va.prototype,"iframeId",void 0),(0,r.gn)([(0,l.fI)()],va.prototype,"minWidth",void 0),(0,r.gn)([(0,l.fI)()],va.prototype,"iframeExited",void 0),(0,r.gn)([(0,l.fI)()],va.prototype,"currentBreakpoint",void 0),(0,r.gn)([(0,l.Rl)()],va.prototype,"mainWrapper",void 0),(0,r.gn)([(0,l.Rl)()],va.prototype,"iframeWrapper",void 0),(0,r.gn)([(0,l.Rl)()],va.prototype,"iframe",void 0),va=(0,r.gn)([(0,l.wA)({components:{StandardButton:ea,Loading:pa.Z,PreviewWidthAdjustmentHandle:Ks}})],va);const fa=va,ya=fa;var ba=(0,Y.Z)(ya,ha,ma,!1,null,null,null);const Pa=ba.exports;let _a=class extends s.ZP{constructor(){super(...arguments),this.iframeExited=!1,this.foreignDocumentsOverlayVueApp=null,this.canvasApp=null}handlePreviewWidthChange(e){c.kD.changePreviewWidthMutation(e)}handlePreviewWidthChangeWithAdjustmentBar(e){c.kD.changePreviewWidthWithAdjustmentBar(e)}handleResetPreviewWidth(){c.kD.selectBaseBreakpoint()}setIframeAsExited(){c.PK.leavingIframeOnPurpose?c.PK.setLeavingIframeOnPurpose(!1):this.iframeExited=!0}reloadIframe(){this.iframeExited=!1,setTimeout((()=>{window.frames["iframe"].location.reload()}),0)}get iframeMinWidth(){return(0,Nt.GV)(c.cr)}get canvasPreviewWidth(){return c.kD.canvasPreviewWidth}get canvasState(){return c.kD.canvasState}get currentBreakpoint(){return c.kD.currentBreakpoint}get iframeURL(){if(c.PK.documentSpecificNeededUrls&&-1!==c.Hb.document.documentMeta.id){const e=new URL(c.PK.documentSpecificNeededUrls.iframeUrl);return e.searchParams.append("breakdance_iframe","true"),e.searchParams.append("breakdance_open_document",`${c.Hb.document.documentMeta.id}`),e.toString()}return null}mountForeignDocumentsOverlayVueAppInIframe(e,t){const n=e.createElement("div");n.classList.add("breakdance-foreign-documents-overlay-mountpoint"),e.body.appendChild(n),this.foreignDocumentsOverlayVueApp=new s.ZP({el:n,store:c.ZP,vuetify:ta.Z,render(n){return n(da,{props:{elementsToWatch:e.querySelectorAll("[data-breakdance-foreign-document]"),canvasElement:t,iframeDocument:e},on:{openDocument:e=>{confirm(`Edit ${e.title}?`)&&window.open(e.builderUrl,"_top")}}})}})}mountCanvasInIframe(e){if(!e.contentDocument)throw"Unable to mount canvas in iframe because its document is missing";(0,De.hm)(e.contentDocument),(0,Le.B6)(document,window.Breakdance.canvas.document),ge.w.registerAllStoreActions();const t=window.Breakdance.canvas.document.querySelector("#breakdance-canvas-wrapper");this.canvasApp=new s.ZP({store:c.ZP,vuetify:ta.Z,render:e=>e($s)}).$mount(t),this.mountForeignDocumentsOverlayVueAppInIframe(window.Breakdance.canvas.document,this.canvasApp.$el),(0,De.sy)().appendChild((0,ua.ok)(document,f,"iframe-styles")),this.unbindClickEventOnInnerIframeLinks(),this.$emit("loaded")}unbindClickEventOnInnerIframeLinks(){const e=[...window.Breakdance.canvas.document.querySelectorAll("a:not([force-allow-clicks])")],t=[...window.Breakdance.canvas.document.querySelectorAll("#breakdance_canvas a")],n=e.filter((e=>!t.includes(e)));n.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault()}))}))}destroyed(){this.canvasApp&&this.canvasApp.$destroy(),this.foreignDocumentsOverlayVueApp&&this.foreignDocumentsOverlayVueApp.$destroy()}};_a=(0,r.gn)([(0,l.wA)({components:{IframeWrapper:Pa,Loading:pa.Z,Canvas:$s,ForeignDocumentsOverlay:da,PreviewWidthAdjustmentHandle:Ks,StandardButton:ea}})],_a);const Sa=_a,Ca=Sa;var wa=(0,Y.Z)(Ca,g,v,!1,null,null,null);const ka=wa.exports;var xa=n(55234),Ia=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("TopBar",[t("AddButton",{directives:[{name:"permission",rawName:"v-permission",value:"full",expression:"'full'"}]}),t("TopBarSection",{attrs:{"border-right":!0}},[t("IconButton",{staticClass:"open-properties-toolbar-button",attrs:{active:e.isElementPropertiesOpen,icon:"EditIcon",size:"18"},on:{click:e.toggleElementProperties}})],1),t(xa.Z,{directives:[{name:"permission",rawName:"v-permission",value:"full",expression:"'full'"}]}),t("DocumentChooser"),t("PreviewContentChooserDialog"),t("TopBarSection",{attrs:{borderRight:!0}},[t("BreakpointsSelection",{model:{value:e.currentBreakpoint,callback:function(t){e.currentBreakpoint=t},expression:"currentBreakpoint"}})],1),t("TopBarSection",[t("PreviewSize")],1),t(xa.Z),e.shouldShowUpgradeToProButton?[t("TopBarSection",[t("UpgradeToPro")],1)]:e._e(),e.isAiEnabled?t("TopBarSection",{attrs:{borderLeft:!0}},[t("IconButton",{staticClass:"open-ai-assistant-button",attrs:{active:e.isAiPanelOpen,icon:"SparklesIcon",size:"18"},on:{click:e.toggleAiPanel}})],1):e._e(),t("UndoRedo"),t("TopBarSection",{staticClass:"top-bar-settings-and-structure-section",attrs:{"border-left":!0}},[t("IconButton",{staticClass:"open-structure-toolbar-button",attrs:{active:e.isStructurePanelOpen,icon:"LayersIcon",size:"18"},on:{click:e.toggleStructurePanel}}),t("SettingsDropdown"),t("IconButton",{staticClass:"open-preview-toolbar-button",attrs:{active:e.isPreviewMode,icon:"PlayIcon",size:"18"},on:{click:e.togglePreviewMode}})],1),t("TopBarSection",{attrs:{borderLeft:!0}},[t("Save")],1),t("Exit")],2)},Da=[],Ea=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("StandardButton",{staticStyle:{"margin-left":"3px","margin-right":"3px"},attrs:{loading:e.saveInProgress,minWidth:"80",testId:"main-save-button"},on:{click:e.save}},[e._v(" Save ")])},Za=[],Ta=n(51168);async function Aa(){return(0,V.pipe)(await(0,E.D)({friendlyName:"Saving to WordPress",action:"breakdance_save",dataToPost:{id:c.Hb.document.documentMeta.id,tree:(0,F.J)((0,N.n$)(c.Hb.document.tree)),globalSettings:(0,F.J)(c.cr.globalSettings),classes:(0,F.J)(c.cr.cssSelectors),presets:(0,F.J)(c.cr.presets),ai:(0,F.J)(c.cr.aiSettings.prompt)},decoder:Z._4}),(0,H.fold)((e=>((0,Ta.UE)(e),(0,H.left)(e))),(e=>(c.kD.setUnsavedChangesPresent(!1),oe.n.ignore((()=>{c.cr.markCurrentGlobalSettingsAsUntouched(),c.cr.markCurrentSelectorsAsUntouched(),c.cr.markCurrentPresetsAsUntouched(),c.cr.markCurrentAiSettingsAsUntouched()})),(0,H.right)(e)))))}var Ba=n(7892);let Oa=class extends s.ZP{constructor(){super(...arguments),this.saveInProgress=!1,this.unsubscribe=null}get unsavedChangesPresent(){return c.kD.unsavedChangesPresent}async save(){document.dispatchEvent(new Event("breakdanceSaveButtonClicked")),this.saveInProgress=!0,await Aa(),this.saveInProgress=!1}mounted(){Le.uq.unbind(sn.r.CMD_S),Le.uq.register(sn.r.CMD_S,this.save),this.unsubscribe=this.$store.subscribe((e=>{oe.n.shouldMutationBeIgnored(e)||c.kD.setUnsavedChangesPresent(!0)})),this.warnIfUnsavedFunction=(0,Ba.$)((()=>c.kD.unsavedChangesPresent))}beforeDestroy(){Le.uq.unbind(sn.r.CMD_S),this.unsubscribe&&this.unsubscribe(),(0,Ba.e)(this.warnIfUnsavedFunction)}};Oa=(0,r.gn)([(0,l.wA)({components:{StandardButton:ea}})],Oa);const Ra=Oa,Ma=Ra;var Fa=(0,Y.Z)(Ma,Ea,Za,!1,null,null,null);const Na=Fa.exports;var La=n(70248),$a=n(61908),Wa=n(11193),Va=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Dropdown",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t("IconButton",e._g({staticStyle:{"margin-right":"0"},attrs:{active:!e.isBase,icon:e.getDeviceIcon(e.currentBreakpoint.id),rotate:e.getDeviceIconRotation(e.currentBreakpoint.id),size:"18"}},n))]}}])},[t(La.Z,e._l(e.breakpoints,(function(n){return t($a.Z,{key:n.id,class:e.activeClass(n.id),attrs:{"two-line":"",dense:""},on:{click:function(t){return e.changeBreakpoint(n)}}},[t("div",{staticClass:"device-icon-wrapper"},[t("Icon",{attrs:{icon:e.getDeviceIcon(n.id),rotate:e.getDeviceIconRotation(n.id),size:"18"}})],1),t(Wa.km,{staticClass:"ml-4"},[t(Wa.V9,[e._v(e._s(n.label))]),t(Wa.oZ,["Desktop"===n.label?[e._v(" All device widths ")]:e._e(),n.maxWidth&&!n.minWidth?[e._v(" "+e._s(n.maxWidth)+"px and below ")]:e._e(),!n.maxWidth&&n.minWidth?[e._v(" "+e._s(n.minWidth)+"px and above ")]:e._e(),n.maxWidth&&n.minWidth?[e._v(" Between "+e._s(n.minWidth)+"px and "+e._s(n.maxWidth)+"px ")]:e._e()],2)],1)],1)})),1)],1)},Ha=[],Ua=n(8619),za=n(43349);let Ga=class extends s.ZP{getDeviceIcon(e){return Nt.b8[e]?.icon||Nt.nR}getDeviceIconRotation(e){return Nt.b8[e]?.rotate}get isBase(){return this.currentBreakpoint.id===Nt.Wp}get breakpoints(){return c.PK.breakpoints}get currentBreakpoint(){return this.value}activeClass(e){return this.currentBreakpoint.id===e&&"breakpoint-active"}changeBreakpoint(e){this.$emit("input",e)}onBreakpointsChanged(){this.breakpoints.find((e=>e.id===this.currentBreakpoint.id))||c.kD.selectBaseBreakpoint()}};(0,r.gn)([(0,l.fI)()],Ga.prototype,"value",void 0),(0,r.gn)([(0,l.RL)("breakpoints",{deep:!0,immediate:!0})],Ga.prototype,"onBreakpointsChanged",null),Ga=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,Dropdown:za.Z,IconButton:Ua.Z}})],Ga);const Ka=Ga,ja=Ka;var qa=(0,Y.Z)(ja,Va,Ha,!1,null,null,null);const Xa=qa.exports;var Ya=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("TopBarSection",{staticClass:"undo-redo-top-bar-section",attrs:{"border-left":!0}},[t("IconButton",{attrs:{disabled:!e.canUndo,icon:"UndoIcon",size:"18"},on:{click:e.undo}}),t("IconButton",{attrs:{disabled:!e.canRedo,icon:"RedoIcon",size:"18"},on:{click:e.redo}})],1)},Qa=[],Ja=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:e.classList},[e._t("default")],2)},ei=[];let ti=class extends s.ZP{get classList(){const e=["topbar-section"];return this.borderLeft&&e.push("topbar-section-bl"),this.borderRight&&e.push("topbar-section-br"),e}};(0,r.gn)([(0,l.fI)({default:!1})],ti.prototype,"borderLeft",void 0),(0,r.gn)([(0,l.fI)({default:!1})],ti.prototype,"borderRight",void 0),ti=(0,r.gn)([(0,l.wA)({components:{}})],ti);const ni=ti,si=ni;var ai=(0,Y.Z)(si,Ja,ei,!1,null,null,null);const ii=ai.exports;let oi=class extends s.ZP{mounted(){Le.uq.register(sn.r.CMD_Z,this.undo),Le.uq.register(sn.r.CMD_SHIFT_Z,this.redo)}get canUndo(){return c.GD.canUndo}get canRedo(){return c.GD.canRedo}undo(){this.canUndo&&oe.n.undo()}redo(){this.canRedo&&oe.n.redo()}beforeDestroy(){Le.uq.unbind(sn.r.CMD_Z),Le.uq.unbind(sn.r.CMD_SHIFT_Z)}};oi=(0,r.gn)([(0,l.wA)({components:{IconButton:Ua.Z,TopBarSection:ii}})],oi);const ri=oi,li=ri;var ci=(0,Y.Z)(li,Ya,Qa,!1,null,null,null);const di=ci.exports;var ui=n(73385),pi=n(77859),hi=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.previews?t("div",[t("TopBarSection",{attrs:{"border-right":!0}},[t("Dropdown",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t("div",e._g({staticClass:"document-chooser",class:{"document-chooser-zero-case":e.nothingToPreview}},n),[t("PreviewChooserText",{attrs:{"preview-item":e.currentPreviewedItem,"nothing-to-preview":e.nothingToPreview}}),t("div",{staticClass:"document-chooser-dropdown-icon"},[t("Icon",{attrs:{size:"11",icon:"CaretDownIcon"}})],1)],1)]}}],null,!1,675434436),model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[e.settingsOpen?t("PreviewChooserSettings",{on:{back:function(t){e.settingsOpen=!1}}}):t(ui.Z,{staticClass:"vscroll-scroll vscroll-wrap",attrs:{width:"450",height:e.nothingToPreview?void 0:350,loading:e.isLoading}},[e.nothingToPreview?e._e():t("div",{staticClass:"preview-content-chooser-dialog-search-form-wrapper"},[t(pi.Z,{staticClass:"preview-content-chooser-dialog-search-box breakdance-dense-input",attrs:{value:e.search,label:"Search...",clearable:"",solo:"",flat:"",dense:"","full-width":"","single-line":"","background-color":"var(--gray150)",autofocus:""},on:{input:e.handleSearch}}),e.isGlobalBlock?t("IconButton",{staticStyle:{"margin-right":"-5px"},attrs:{icon:"GearIcon",small:!0},on:{click:e.toggleSettings}}):e._e()],1),t(La.Z,{staticClass:"vscroll-scroll",attrs:{dense:""}},[e._l(e.previews,(function(n,s){return t("PreviewChooserItem",{key:s,attrs:{item:n,selected:n.url===e.currentPreviewedItem?.url},on:{select:e.setPreviewedItem}})})),e.nothingToPreview?t("PreviewChooserNoResults"):0===e.previews.length?t("div",{staticClass:"previewable-items-zero-case align-center text-center"},[t("h4",[e._v("No results apply to this template")])]):e._e()],2)],1)],1)],1)],1):e._e()},mi=[],gi=n(23777);async function vi({id:e,search:t=""}){return(0,E.D)({action:"breakdance_get_template_previewable_items_with_search",dataToPost:{search:t,id:e},decoder:gi.NC,resultKey:"data"})}var fi=n(32127),yi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"document-chooser-text"},[e.previewItem?[t("h2",[e._v("Previewing "+e._s(e.previewItem.type))]),t("span",{staticClass:"ellipsis-text"},[e.previewItem.label?[e._v(" "+e._s(e.previewItem.label)+" ")]:e.previewItem.id?[e._v(" ID "+e._s(e.previewItem.id)+" ")]:[e._v("(no title)")]],2)]:e.nothingToPreview?[t("h2",[e._v("Nothing to Preview")]),t("span",{staticClass:"ellipsis-text"},[e._v(" No match found ")])]:[t("h2",[e._v("Previewing")]),t("span",{staticClass:"ellipsis-text"},[e._v(" choose ")])]],2)},bi=[];let Pi=class extends l.w3{};(0,r.gn)([(0,l.fI)()],Pi.prototype,"previewItem",void 0),(0,r.gn)([(0,l.fI)()],Pi.prototype,"nothingToPreview",void 0),Pi=(0,r.gn)([l.wA],Pi);const _i=Pi,Si=_i;var Ci=(0,Y.Z)(Si,yi,bi,!1,null,"cf98ae16",null);const wi=Ci.exports;var ki=n(75223),xi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(ui.Z,{staticClass:"vscroll-scroll vscroll-wrap preview-chooser-settings",attrs:{width:"350"}},[t(ki.EB,{staticClass:"preview-chooser-settings-header"},[t("IconButton",{staticStyle:{"margin-left":"-9px"},attrs:{icon:"ArrowLeftIcon",small:!0,size:14},on:{click:function(t){return e.$emit("back")}}}),t("h4",{staticClass:"preview-chooser-settings__title"},[e._v("Settings")])],1),t("div",[t(ki.ZB,[t("h6",{staticClass:"preview-chooser-settings__subtitle"},[e._v("Preview")]),t("div",{staticClass:"my-3"},[t("span",{staticClass:"breakdance-control-wrapper-control-label"},[e._v(" ACF Flexible Content ")]),t("DropdownInput",{attrs:{value:e.blockSettings.preview.acfFlexibleField,placeholder:"Select a field to preview",autocomplete:!0,"dropdown-options":e.dropdownOptions,clearable:!0},on:{input:e.setFlexibleField}})],1),t("div",{staticClass:"my-3"},[t("span",{staticClass:"breakdance-control-wrapper-control-label"},[e._v(" Row Index ")]),t("NumberInput",{attrs:{value:e.blockSettings.preview.acfFlexibleFieldRow},on:{input:e.setRowIndex}})],1)])],1)],1)},Ii=[],Di=n(48727),Ei=n(46429);let Zi=class extends l.w3{constructor(){super(...arguments),this.dropdownOptions={populate:{path:"",text:"",value:"",fetchDataAction:"breakdance_fetch_flexible_content_fields",fetchContextPath:"",refetchPaths:[]}}}get postId(){return ft.Hb.document.documentMeta.id}get blockSettings(){const e=ft.Hb.document.documentMeta.blockSettings;return e||{preview:{acfFlexibleField:"",acfFlexibleFieldRow:void 0}}}async saveSettings(){await(0,qn.fv)(this.postId,this.blockSettings),ft.PK.flushDynamicDataCache()}setFlexibleField(e){const t=(0,Me.Z)(ft.Hb.document.documentMeta);se()(t,"blockSettings.preview.acfFlexibleField",e),oe.n.ignore((()=>{ft.Hb.setDocumentMeta(t),this.saveSettings()}))}setRowIndex(e){const t=(0,Me.Z)(ft.Hb.document.documentMeta);se()(t,"blockSettings.preview.acfFlexibleFieldRow",e),oe.n.ignore((()=>{ft.Hb.setDocumentMeta(t),this.saveSettings()}))}};Zi=(0,r.gn)([(0,l.wA)({components:{TextInput:cs.Z,IconButton:Ua.Z,NumberInput:Ei.Z,DropdownInput:Di.Z}})],Zi);const Ti=Zi,Ai=Ti;var Bi=(0,Y.Z)(Ai,xi,Ii,!1,null,null,null);const Oi=Bi.exports;var Ri=function(){var e=this;e._self._c,e._self._setupProxy;return e._m(0)},Mi=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"previewable-items-zero-case previewable-items-zero-case-error"},[t("h4",[e._v("Nothing To Preview")]),t("p",[e._v("Your template settings don't match any content. You can:")]),t("ul",[t("li",[e._v("Edit the template anyway - this is not an error.")]),t("li",[e._v(" Update your template settings in the WP admin at "),t("b",[e._v("Breakdance > Templates > Edit Template")])]),t("li",[e._v("Add some content to your site that matches the template settings.")])])])}];let Fi=class extends l.w3{};Fi=(0,r.gn)([(0,l.wA)({})],Fi);const Ni=Fi,Li=Ni;var $i=(0,Y.Z)(Li,Ri,Mi,!1,null,"7c7cb6d2",null);const Wi=$i.exports;var Vi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t($a.Z,{class:{"document-chooser-item-selected":e.selected},attrs:{link:""},on:{click:function(t){return e.$emit("select",e.item)}}},[t(Wa.V9,{staticClass:"previewable-item-list-item"},[t("div",{staticClass:"previewable-item-label previewable-item-label-stop-text-from-overflowing"},[e._v(" "+e._s(e.item.label||e.item.url)+" ")]),t("div",{staticClass:"previewable-item-type"},[e._v(e._s(e.item.type))])])],1)},Hi=[];let Ui=class extends l.w3{};(0,r.gn)([(0,l.fI)()],Ui.prototype,"item",void 0),(0,r.gn)([(0,l.fI)()],Ui.prototype,"selected",void 0),Ui=(0,r.gn)([l.wA],Ui);const zi=Ui,Gi=zi;var Ki=(0,Y.Z)(Gi,Vi,Hi,!1,null,"02fdc782",null);const ji=Ki.exports;let qi=class extends s.ZP{constructor(){super(...arguments),this.open=!1,this.search="",this.isLoading=!1,this.settingsOpen=!1,this.debouncedSearchContentInWp=_()(this.searchContentInWp,300)}get previews(){return c.PK.templatePreview&&c.PK.templatePreview.previewableItems}get currentPreviewedItem(){return c.PK.previewedItem}get nothingToPreview(){return(!this.previews||!this.previews.length)&&!this.search&&!this.isLoading}get isGlobalBlock(){return"breakdance_block"===c.Hb.document.documentMeta.postType}async setPreviewedItem(e){this.open=!1,c.kD.setLastModifiedElementProperty({elementId:null,path:null}),c.PK.setPreviewedItem(e),c.PK.flushDynamicDataCache(),await(0,C.Kd)(),(0,fi.Ft)(e)}async handleSearch(e){this.search=e,this.isLoading=!0,this.debouncedSearchContentInWp()}async searchContentInWp(){this.isLoading=!0,(0,V.pipe)(await vi({search:this.search,id:c.Hb.document.documentMeta.id}),(0,H.fold)((e=>{this.isLoading=!1,e.forEach((e=>ye.Z.log.message(e.msg)))}),(e=>{c.PK.setTemplatePreview({...c.PK.templatePreview,previewableItems:e}),this.isLoading=!1})))}toggleSettings(){this.settingsOpen=!this.settingsOpen}};qi=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,Dropdown:za.Z,IconButton:Ua.Z,TopBarSection:ii,PreviewChooserText:wi,PreviewChooserItem:ji,PreviewChooserSettings:Oi,PreviewChooserNoResults:Wi}})],qi);const Xi=qi,Yi=Xi;var Qi=(0,Y.Z)(Yi,hi,mi,!1,null,null,null);const Ji=Qi.exports;var eo=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("TopBarSection",{staticClass:"document-chooser-section",attrs:{borderLeft:!0,borderRight:!0}},[t("Dropdown",{attrs:{"offset-y":"","close-on-content-click":!1,"close-on-click":!e.createOpen},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t("div",e._g({staticClass:"document-chooser"},n),[t("div",{staticClass:"document-chooser-text"},[t("h2",[e._v("Editing "+e._s(e.currentDocument.documentMeta.typeLabel))]),-1!==e.currentDocument.documentMeta.id?t("span",{staticClass:"ellipsis-text"},[e._v(" "+e._s(e.currentDocument.documentMeta.titleLabel||`ID: ${e.currentDocument.documentMeta.id}`)+" ")]):t("span",{staticClass:"ellipsis-text"},[e._v(" choose a document to edit ")])]),t("div",{staticClass:"document-chooser-dropdown-icon"},[t("Icon",{attrs:{size:"11",icon:"CaretDownIcon"}})],1)])]}}]),model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(ui.Z,{staticClass:"vscroll-scroll vscroll-wrap",attrs:{width:"450",height:"350",loading:e.isLoading}},[t("div",{staticClass:"document-chooser-search"},[t("div",{staticClass:"document-chooser-search__input"},[t(pi.Z,{staticClass:"preview-content-chooser-dialog-search-box breakdance-dense-input",attrs:{value:e.search,label:"Search...",clearable:"",solo:"",flat:"",dense:"","full-width":"","single-line":"","background-color":"var(--gray150)",autofocus:e.open},on:{input:e.handleSearch,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchContentInWp.apply(null,arguments)}}}),t("Icon",{staticClass:"document-chooser-search__create",attrs:{size:"13",icon:"PlusIcon"},on:{click:function(t){e.createOpen=!0}}})],1)]),t("DocumentChooserFilters",{attrs:{"sort-by":e.sortBy,"post-type":e.postType},on:{"update:sort-by":function(t){e.sortBy=t},"update:post-type":function(t){e.postType=t}}}),t(La.Z,{ref:"scrollable",staticClass:"vscroll-scroll",attrs:{dense:""}},[e._l(e.availableDocuments,(function(n){return t("DocumentChooserItem",{key:n.id,attrs:{item:n,highlight:e.postToShowFirstId===n.id},on:{click:function(t){e.open=!1},update:e.updateTitleInPlace}})})),0===e.availableDocuments.length?t("div",{staticClass:"previewable-items-zero-case-search"},[t("svg",{staticClass:"previewable-items-zero-case-icon",attrs:{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"}},[t("path",{attrs:{d:"M46.875 71.875a25 25 0 1 0 50 0 25 25 0 1 0-50 0ZM81.25 62.5 62.5 81.25M62.5 62.5l18.75 18.75","stroke-width":"6.250005"}}),t("path",{attrs:{d:"M34.375 84.375h-25a6.25 6.25 0 0 1-6.25-6.25V9.375a6.25 6.25 0 0 1 6.25-6.25h44.288a6.25 6.25 0 0 1 4.416 1.83L70.046 16.92a6.25 6.25 0 0 1 1.829 4.417v13.037","stroke-width":"6.250005"}})])]),t("h5",[e._v("No items found")]),t("p",[e._v("Try adjusting your search to find what you are looking for.")])]):e._e()],2)],1)],1),t("DocumentChooserCreateDialog",{attrs:{open:e.createOpen},on:{close:function(t){e.createOpen=!1},created:e.afterCreation}})],1)},to=[],no=n(38537);async function so({search:e="",postType:t="",sortBy:n=""}){return(0,E.D)({action:"breakdance_get_available_documents_with_search",dataToPost:{search:e,postType:t,sortBy:n},decoder:no.gu,resultKey:"data"})}var ao=n(61033),io=n(55443),oo=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Dialog",{staticClass:"document-chooser-create",attrs:{value:e.open},on:{close:function(t){return e.$emit("close")},"click:outside":function(t){return e.$emit("close")},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("close")}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Create Post")]},proxy:!0},{key:"text",fn:function(){return[t("div",{staticClass:"document-chooser-create-fields"},[t("TextInput",{staticClass:"flex-grow-1 flex-shrink-1",attrs:{placeholder:"Post Title",autofocus:e.autofocus},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.create.apply(null,arguments)}},model:{value:e.postTitle,callback:function(t){e.postTitle=t},expression:"postTitle"}}),t("DropdownInput",{staticClass:"flex-grow-1 flex-shrink-1",attrs:{placeholder:"Post Type",autocomplete:!0,"dropdown-options":e.dropdownOptions},model:{value:e.postType,callback:function(t){e.postType=t},expression:"postType"}})],1)]},proxy:!0},{key:"actions",fn:function(){return[t(os.Z,{attrs:{text:""},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),t(os.Z,{attrs:{color:"blue",dark:"",loading:e.loading},on:{click:e.create}},[e._v(" Save ")])]},proxy:!0}])})},ro=[],lo=n(3735),co=n(48973);let uo=class extends l.w3{constructor(){super(...arguments),this.autofocus=!1,this.postTitle="",this.postType="",this.loading=!1,this.dropdownOptions={populate:{path:"",text:"",value:"",fetchDataAction:"breakdance_get_editable_post_types",fetchContextPath:"",refetchPaths:[]}}}onOpenChange(){this.open?(this.postTitle="",this.postType="",setTimeout((()=>{this.autofocus=!0}),100)):this.autofocus=!1}async create(){if(!this.postTitle||!this.postType)return;this.loading=!0;const e=(0,lo.zG)(await(0,E.D)({action:"breakdance_insert_post",friendlyName:"Insert Post",dataToPost:{postTitle:this.postTitle,postType:this.postType},decoder:Z.dt({postId:Z.pk})}),(0,co.g_)((()=>{}),(e=>e)));this.loading=!1,this.$emit("close"),this.$emit("created",{postId:e?.postId,postTitle:this.postTitle,postType:this.postType})}};(0,r.gn)([(0,l.fI)()],uo.prototype,"open",void 0),(0,r.gn)([(0,l.RL)("open")],uo.prototype,"onOpenChange",null),uo=(0,r.gn)([(0,l.wA)({components:{TextInput:cs.Z,Dialog:Jn.Z,DropdownInput:Di.Z}})],uo);const po=uo,ho=po;var mo=(0,Y.Z)(ho,oo,ro,!1,null,null,null);const go=mo.exports;var vo=function(){var e=this,t=e._self._c;e._self._setupProxy;return t($a.Z,{class:{"document-chooser-item-selected":e.item.id===e.currentDocument.documentMeta.id,"document-chooser-item-highlighted":e.highlight},attrs:{link:"",href:e.documentUrl},on:{click:e.replaceCurrentBuilderPage}},[t(Wa.V9,{staticClass:"previewable-item-list-item"},[t("div",{staticClass:"previewable-item-label previewable-item-label-stop-text-from-overflowing"},[e._v(" "+e._s(e.item.titleLabel||`ID: ${e.item.id}`)+" ")]),e.isBreakdanceTemplate?t("span",{staticClass:"previewable-item-action",on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.isGlobalBlockTemplate?e.editGlobalBlock():e.editTemplate()}}},[e._v(" "+e._s(e.loadingData?"Loading...":"Edit Settings")+" ")]):e._e(),t("div",{staticClass:"previewable-item-type"},[e._v(e._s(e.item.typeLabel))])]),e.modalData&&e.isGlobalBlockTemplate?t("EditGlobalBlockModal",{attrs:{value:e.modalData.data,mode:e.modalData.type,globalBlocks:[]},on:{input:function(t){return e.$emit("update",t)},close:function(t){e.modalData=!1}}}):e.modalData?t("EditTemplateModal",{attrs:{value:e.modalData.data,templatesManagementData:e.templatesManagementData,postType:e.item.postType,templateParents:e.templateParentsWithoutTrashed,templates:e.templatesByStatus,mode:e.modalData.type,skipWarning:!0,canDisable:!0},on:{input:function(t){return e.$emit("update",t)},close:function(t){e.modalData=!1}}}):e._e()],1)},fo=[],yo=n(58162),bo=n(67132),Po=n(51258);let _o=class extends l.w3{constructor(){super(...arguments),this.templates=[],this.globalBlocks=[],this.modalData=!1,this.loadingData=!1,this.templatesManagementData={conditions:[],dynamicFields:[],templateTypeCategories:[],popupTriggers:null}}get currentDocument(){return c.Hb.document}get templateParentsWithoutTrashed(){return[]}get templatesByStatus(){return[]}get documentUrl(){return(0,fi.UH)(this.item.id)}get isBreakdanceTemplate(){return this.item.postType.startsWith("breakdance_")}get currentTemplate(){return this.templates.find((e=>e.id===this.item.id))}get currentGlobalBlock(){return this.globalBlocks.find((e=>e.id===this.item.id))}get isGlobalBlockTemplate(){return"breakdance_block"===this.item.postType}async editGlobalBlock(){this.loadingData=!0,await this.loadGlobalBlocks(),this.currentGlobalBlock?(this.modalData={type:"edit",data:this.currentGlobalBlock},this.loadingData=!1):ye.Z.log.message("Couldn't load Global Blocks data")}async editTemplate(){this.loadingData=!0,await this.loadTemplates(),this.currentTemplate?(this.modalData={type:"edit",data:this.currentTemplate},this.loadingData=!1):ye.Z.log.message("Couldn't load templates data")}async loadGlobalBlocks(){(0,lo.zG)(await(0,bo.kt)(),(0,co.g_)((()=>{ye.Z.log.message("Couldn't load Global Blocks data")}),(e=>{this.globalBlocks=e})))}async loadTemplates(){const e=this.item.postType;(0,lo.zG)(await(0,bo.rf)(e),(0,co.g_)((()=>{ye.Z.log.message("Couldn't load templates data")}),(e=>{this.templates=e.templates,this.templatesManagementData=e.templatesManagementData,c.PK.setDynamicFields(e.templatesManagementData.dynamicFields),c.PK.setConditions(e.templatesManagementData.conditions),c.PK.setEnvironment(e.environment)})))}async replaceCurrentBuilderPage(e){e.ctrlKey||e.metaKey||"builder"===window.Breakdance.initialMode&&(e.preventDefault(),this.$emit("click"),(0,fi.rI)(this.item.id))}};(0,r.gn)([(0,l.fI)()],_o.prototype,"item",void 0),(0,r.gn)([(0,l.fI)({default:!1})],_o.prototype,"highlight",void 0),_o=(0,r.gn)([(0,l.wA)({components:{EditGlobalBlockModal:Po.Z,EditTemplateModal:yo.Z,Icon:K.Z}})],_o);const So=_o,Co=So;var wo=(0,Y.Z)(Co,vo,fo,!1,null,"4c05de8a",null);const ko=wo.exports;var xo=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"document-chooser-filters",class:{"document-chooser-filters--with-sort":e.sortBy}},[t("DropdownInput",{attrs:{"dropdown-options":e.postTypeOptions,size:"small",placeholder:"Post Type",value:e.postType,clearable:!0},on:{input:function(t){return e.$emit("update:post-type",t)}}}),t("DropdownInput",{attrs:{items:e.sortItems,size:"small",placeholder:"Sort By",value:e.sortBy,clearable:!0},on:{input:function(t){return e.$emit("update:sort-by",t)}}})],1)},Io=[];let Do=class extends l.w3{constructor(){super(...arguments),this.sortItems=[{text:"Last edited: Newest first",value:"modified_desc"},{text:"Last edited: Oldest first",value:"modified_asc"},{text:"Created: Newest first",value:"created_desc"},{text:"Created: Oldest first",value:"created_asc"}],this.postTypeOptions={populate:{path:"",text:"",value:"",fetchDataAction:"breakdance_get_editable_post_types",fetchContextPath:"",refetchPaths:[]}}}};(0,r.gn)([(0,l.fI)()],Do.prototype,"sortBy",void 0),(0,r.gn)([(0,l.fI)()],Do.prototype,"postType",void 0),Do=(0,r.gn)([(0,l.wA)({components:{DropdownInput:Di.Z}})],Do);const Eo=Do,Zo=Eo;var To=(0,Y.Z)(Zo,xo,Io,!1,null,null,null);const Ao=To.exports;let Bo=class extends s.ZP{constructor(){super(...arguments),this.search="",this.open=!1,this.createOpen=!1,this.isLoading=!1,this.postToShowFirstId=null,this.sortBy="",this.postType="",this.debouncedSearchContentInWp=_()(this.searchContentInWp,200)}onOpenChange(){this.postToShowFirstId=null}onSortChange(){this.searchContentInWp()}onPostTypeChange(){this.searchContentInWp()}get unsavedChangesPresent(){return c.kD.unsavedChangesPresent}get availableDocuments(){const e=[...c.PK.availableDocuments];return null===this.postToShowFirstId?e:e.sort(((e,t)=>e.id===this.postToShowFirstId?-1:t.id===this.postToShowFirstId?1:0))}get currentDocument(){return c.Hb.document}handleSearch(e){this.postToShowFirstId=null,this.search=e,this.debouncedSearchContentInWp()}async searchContentInWp(){this.isLoading=!0,(0,V.pipe)(await so({search:this.search,postType:this.postType,sortBy:this.sortBy}),(0,H.fold)((e=>{this.isLoading=!1,e.forEach((e=>ye.Z.log.message(e.msg)))}),(e=>{c.PK.setAvailableDocuments(e),this.isLoading=!1}))),this.scrollToTop()}afterCreation(e){this.search="",this.postToShowFirstId=e.postId,this.postType&&this.postType!==e.postType?this.postType="":this.searchContentInWp()}scrollToTop(){const e=this.$refs.scrollable;this.$nextTick((()=>{e.$el.scrollTop=0}))}updateTitleInPlace(e){const t=this.availableDocuments.findIndex((t=>t.id===e.id)),n=this.availableDocuments[t];if(-1===t)return;const s=(0,Me.Z)(this.availableDocuments);s[t]={...n,titleLabel:e.title||e.label||""},c.PK.setAvailableDocuments(s)}};(0,r.gn)([(0,l.RL)("open")],Bo.prototype,"onOpenChange",null),(0,r.gn)([(0,l.RL)("sortBy")],Bo.prototype,"onSortChange",null),(0,r.gn)([(0,l.RL)("postType")],Bo.prototype,"onPostTypeChange",null),Bo=(0,r.gn)([(0,l.wA)({components:{DocumentChooserFilters:Ao,NiceButton:io.Z,DropdownInput:Di.Z,TextInput:cs.Z,Dialog:Jn.Z,Icon:K.Z,Dropdown:za.Z,SearchInput:ao.Z,TopBarSection:ii,DocumentChooserItem:ko,DocumentChooserCreateDialog:go}})],Bo);const Oo=Bo,Ro=Oo;var Mo=(0,Y.Z)(Ro,eo,to,!1,null,null,null);const Fo=Mo.exports;var No=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Dropdown",{staticClass:"open-settings-toolbar-button",attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t("IconButton",e._g({attrs:{active:e.anySettingsPanelsOpen,testId:"open-settings-menu",size:"18",icon:"EllipsisStrokeIcon"}},n))]}}])},[t(La.Z,[t($a.Z,{attrs:{dense:""},on:{click:e.openGlobalSettingsPanel}},[t(Wa.V9,{attrs:{"data-test-id":"toggle-global-settings"}},[e._v(" Global Settings ")])],1),t($a.Z,{attrs:{dense:""},on:{click:e.openSelectorsPanel}},[t(Wa.V9,{attrs:{"data-test-id":"toggle-site-classes-selectors"}},[e._v(" Selectors ")])],1),t($a.Z,{attrs:{dense:""},on:{click:e.openPresetsPanel}},[t(Wa.V9,{attrs:{"data-test-id":"toggle-site-presets"}},[e._v(" Design Presets ")])],1),t($a.Z,{attrs:{dense:""},on:{click:e.openHistoryAndRevisionsPanel}},[t(Wa.V9,[e._v(" History ")])],1),t($a.Z,{staticClass:"breakdance-menu-open-preferences",attrs:{dense:""},on:{click:e.openPreferencesModal}},[t(Wa.V9,{attrs:{"data-test-id":"breakdance-menu-open-preferences"}},[e._v(" Preferences ")])],1),t($a.Z,{directives:[{name:"permission",rawName:"v-permission",value:"full",expression:"'full'"}],attrs:{"data-test-id":"toggle-element-studio",dense:"",disabled:"success"!==e.elementsLoadingState},on:{click:e.toggleElementStudio}},[t(Wa.V9,{attrs:{"data-test-id":"breakdance-menu-open-element-studio"}},[t("div",{staticClass:"d-flex align-center"},[e._v("Element Studio")])])],1)],1)],1)},Lo=[];let $o=class extends s.ZP{openPreferencesModal(){c.kD.setPreferencesModalOpen(!0)}toggleElementStudio(){c.kD.toggleElementStudio()}openGlobalSettingsPanel(){(0,G.oM)("globalSettings")}openSelectorsPanel(){c.kD.setActiveSelectorName(null),(0,G.oM)("selectors")}openPresetsPanel(){c.kD.setActivePresetId(null),(0,G.oM)("presets")}get elementsLoadingState(){return c.PK.elementsLoadingState}get anySettingsPanelsOpen(){return(0,G.O_)("selectors")||(0,G.O_)("history")||(0,G.O_)("globalSettings")||c.kD.panelState.elementStudioOpen||c.kD.panelState.preferencesModalOpen}openHistoryAndRevisionsPanel(){(0,G.oM)("history")}};$o=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,StandardButton:ea,Dropdown:za.Z,IconButton:Ua.Z}})],$o);const Wo=$o,Vo=Wo;var Ho=(0,Y.Z)(Vo,No,Lo,!1,null,null,null);const Uo=Ho.exports;var zo=n(59760),Go=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.backToAdmin||e.backToFrontend?t("TopBarSection",{attrs:{borderLeft:!0}},[t("Dropdown",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t("IconButton",e._g({attrs:{icon:"CloseIcon",size:"18"}},n))]}}],null,!1,865007243)},[t(La.Z,[e.backToFrontend?t($a.Z,{attrs:{dense:"",href:e.backToFrontend}},[t("div",{staticClass:"breakdance-menu-icon-wrapper"},[t("Icon",{attrs:{icon:"BrowserIcon"}})],1),t(Wa.km,{staticClass:"ml-4"},[t(Wa.V9,[e._v("Exit to Frontend")])],1)],1):e._e(),t($a.Z,{attrs:{dense:"",href:e.backToAdmin}},[t("div",{staticClass:"breakdance-menu-icon-wrapper"},[t("Icon",{attrs:{icon:"WordPressIcon"}})],1),t(Wa.km,{staticClass:"ml-4"},[t(Wa.V9,[e._v("Exit to WordPress")])],1)],1)],1)],1)],1):e._e()},Ko=[];let jo=class extends s.ZP{get backToAdmin(){return ft.PK.documentSpecificNeededUrls?ft.PK.documentSpecificNeededUrls.backToWordPressUrl:""}get backToFrontend(){return(0,M.j)()}};jo=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,Dropdown:za.Z,IconButton:Ua.Z,TopBarSection:ii}})],jo);const qo=jo,Xo=qo;var Yo=(0,Y.Z)(Xo,Go,Ko,!1,null,null,null);const Qo=Yo.exports;var Jo=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("TopBarSection",{attrs:{borderRight:!0}},[t("StandardButton",{staticClass:"open-elements-toolbar-button",attrs:{active:e.isAddSectionOpen,size:"22",testId:"open-elements-toolbar-button"},on:{click:e.toggleAdd}},[e._v(" Add ")])],1)},er=[];let tr=class extends s.ZP{mounted(){c.kD.hasFullAccess&&Le.uq.register(sn.r.CMD_A,this.toggleAdd)}toggleAdd(){(0,G._y)("add")}get isAddSectionOpen(){return(0,G.O_)("add")}beforeDestroy(){Le.uq.unbind(sn.r.CMD_A)}};tr=(0,r.gn)([(0,l.wA)({components:{StandardButton:ea,TopBarSection:ii}})],tr);const nr=tr,sr=nr;var ar=(0,Y.Z)(sr,Jo,er,!1,null,null,null);const ir=ar.exports;var or=n(78549),rr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(or.Z,{staticClass:"pa-0 breakdance-topbar d-flex flex-row",attrs:{short:"",color:"var(--white)",height:"auto",width:"100%",flat:""}},[e._t("default")],2)},lr=[];let cr=class extends s.ZP{};cr=(0,r.gn)([l.wA],cr);const dr=cr,ur=dr;var pr=(0,Y.Z)(ur,rr,lr,!1,null,null,null);const hr=pr.exports;var mr=n(12570),gr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("NiceButton",{attrs:{"right-icon":"StarsIcon",size:"18",color:"flat"},on:{click:e.toggleDialog}},[e._v("Try Breakdance Pro")]),t(mr.Z,{attrs:{"max-width":"1120"},model:{value:e.dialogOpen,callback:function(t){e.dialogOpen=t},expression:"dialogOpen"}},[t("div",{staticClass:"upgrade-to-pro-modal-content"},[t("iframe",{attrs:{src:"https://breakdance.com/upgrade-iframe/"}})])])],1)},vr=[],fr=n(47431);let yr=class extends s.ZP{constructor(){super(...arguments),this.dialogOpen=!1}toggleDialog(){this.dialogOpen=!this.dialogOpen,(0,fr.K)("Upgrade To Pro Modal Toggled",{open:this.dialogOpen})}};yr=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,NiceButton:io.Z}})],yr);const br=yr,Pr=br;var _r=(0,Y.Z)(Pr,gr,vr,!1,null,null,null);const Sr=_r.exports;var Cr=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.isGlobalBlock?t("Dropdown",{attrs:{"offset-y":"","max-width":300,"close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t("NiceButton",e._g({staticClass:"preview-size-button",attrs:{size:"small"}},n),[e.width&&e.height?[e._v(" "+e._s(e.width)+"x"+e._s(e.height))]:[e._v("Preview Size")]],2)]}}],null,!1,2481745986)},[t("div",{staticClass:"preview-size-content"},[t("h4",{staticClass:"preview-size__title"},[e._v("Constrain Preview Size")]),t("div",{staticClass:"preview-size__description mb-2"},[e._v(" Set the width and height to view this Global Block at the desired size. ")]),t("div",{staticClass:"preview-size-inputs"},[t("UnitInput",{attrs:{type:"text",placeholder:"Width",value:e.width,"unit-options":{types:["px"],defaultType:"px"}},on:{input:e.changeWidth}}),e._v(" x "),t("UnitInput",{attrs:{type:"text",placeholder:"Height",value:e.height,"unit-options":{types:["px"],defaultType:"px"}},on:{input:e.changeHeight}})],1)])]):e._e()},wr=[],kr=n(35120);let xr=class extends s.ZP{get isGlobalBlock(){return"breakdance_block"===c.Hb.document.documentMeta.postType}get canvasPreviewWidth(){return c.kD.canvasPreviewWidth}get width(){return c.kD.canvasPreviewWidth.previewSize.width||void 0}get height(){return c.kD.canvasPreviewWidth.previewSize.height||void 0}changeWidth(e){const t=`${e?.number||0}`;c.kD.changePreviewWidthMutation({...this.canvasPreviewWidth,previewSize:{...this.canvasPreviewWidth.previewSize,width:parseFloat(t)}})}changeHeight(e){const t=`${e?.number||0}`;c.kD.changePreviewWidthMutation({...this.canvasPreviewWidth,previewSize:{...this.canvasPreviewWidth.previewSize,height:parseFloat(t)}})}};xr=(0,r.gn)([(0,l.wA)({components:{UnitInput:kr.Z,NumberInput:Ei.Z,NiceButton:io.Z,TextInput:cs.Z,Dropdown:za.Z}})],xr);const Ir=xr,Dr=Ir;var Er=(0,Y.Z)(Dr,Cr,wr,!1,null,null,null);const Zr=Er.exports;let Tr=class extends s.ZP{get shouldShowUpgradeToProButton(){return"free"===c.PK.subscriptionMode}get isPreviewMode(){return c.kD.isPreviewMode}togglePreviewMode(){c.kD.togglePreviewMode()}toggleElementProperties(){(0,G._y)("elementproperties")}get isElementPropertiesOpen(){return(0,G.O_)("elementproperties")}toggleStructurePanel(){(0,G._y)("structure")}get isStructurePanelOpen(){return(0,G.O_)("structure")}get isAiEnabled(){return c.PK.ai?.enabled}get isAiPanelOpen(){return(0,G.O_)("ai")}toggleAiPanel(){(0,G._y)("ai")}get activeElementId(){return c.kD.activeElementId}get currentBreakpoint(){return c.kD.currentBreakpoint}set currentBreakpoint(e){c.kD.changeBreakpoint(e)}mounted(){Le.uq.register(sn.r.CMD_SHIFT_S,(()=>(0,zo.b0)("SCALED_TO_FIT"!==c.kD.settings.scaleToFit)))}beforeDestroy(){Le.uq.unbind(sn.r.CMD_SHIFT_S)}};Tr=(0,r.gn)([(0,l.wA)({components:{PreviewSize:Zr,TopBar:hr,Exit:Qo,AddButton:ir,TopBarSection:ii,SettingsDropdown:Uo,BreakpointsSelection:Xa,Save:Na,UndoRedo:di,PreviewContentChooserDialog:Ji,DocumentChooser:Fo,IconButton:Ua.Z,UpgradeToPro:Sr}})],Tr);const Ar=Tr,Br=Ar;var Or=(0,Y.Z)(Br,Ia,Da,!1,null,null,null);const Rr=Or.exports;var Mr=n(56275),Fr=n(53333),Nr=n(77671),Lr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(mr.Z,{attrs:{"content-class":"preferences-modal-dialog",value:e.open,"max-width":"780",persistent:""},on:{input:function(t){return e.$emit("update:dialog",!1)},"click:outside":e.handleClickOutside}},[t(ui.Z,{staticClass:"d-flex flex-column",attrs:{height:"100%"}},[!0===e.saveInProgress?[t("div",{staticClass:"flex-grow-1 d-flex justify-center align-center mt-auto mb-auto"},[t(Mr.Z,{attrs:{size:100,indeterminate:"",color:"var(--gray300)"}})],1)]:[t("div",{staticClass:"flex-grow-1 d-flex flex-row",staticStyle:{overflow:"auto"}},[t("div",{staticClass:"preferences-tab-area"},[t("h2",{staticClass:"preferences-modal-title-text"},[e._v("Preferences")]),t(Nr.Z,{staticClass:"breakdance-tabs",attrs:{vertical:""},on:{change:e.handleChangeTab},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(Fr.Z,{staticClass:"breakdance-tabs__tab"},[t("Icon",{staticClass:"ml-1 mr-3",attrs:{icon:"SlidersIcon",size:"16"}}),e._v(" UI Settings ")],1),t(Fr.Z,{staticClass:"breakdance-tabs__tab"},[t("Icon",{staticClass:"ml-1 mr-3",attrs:{icon:"FontIcon",size:"16"}}),e._v(" Custom Fonts ")],1),t(Fr.Z,{staticClass:"breakdance-tabs__tab"},[t("Icon",{staticClass:"ml-1 mr-3",attrs:{size:"16",icon:"BreakpointsIcon"}}),e._v(" Breakpoints ")],1)],1)],1),t("button",{staticClass:"preferences-close-button",on:{click:e.handleClickOutside}},[t("Icon",{attrs:{size:"20",icon:"CloseIcon"}})],1),t("div",{staticClass:"flex-grow-1 preferences-content-area"},[e.currentTab===e.fontFamiliesTab?t("CustomFontFamilies",{ref:"customFontFamiliesPanel",attrs:{value:e.customFontFamilies},on:{input:e.updateCustomFontFamilies}}):e._e(),e.currentTab===e.customBreakpointsTab?t("CustomBreakpointsPanel",{ref:"customBreakpointsPanel",attrs:{value:e.customBreakpoints},on:{input:e.updateBreakpoints}}):e._e(),e.currentTab===e.uiSettingsTab?t("CustomUiSettings"):e._e()],1)])]],2)],1)],1)},$r=[],Wr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("PreferencesPanel",{attrs:{save:{text:"Save Breakpoints",function:e.applyChanges,inProgress:!1,disabled:!e.unsavedChangesPresent}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Breakpoints")]},proxy:!0},{key:"content",fn:function(){return[t("EditBreakpoints",{attrs:{value:e.internalValue},on:{input:e.breakpointsEdited}})]},proxy:!0}])})},Vr=[],Hr=n(18446),Ur=n.n(Hr),zr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e._l(e.value,(function(n){return t("EditBreakpoint",{key:n.id,attrs:{value:n,isEditing:n.id===e.editingBreakpointId},on:{input:e.updateOrAddBreakpoint,delete:function(t){return e.deleteBreakpoint(n.id)},edit:e.edit}})})),!e.showAddForm&&e.value.length>0?t(os.Z,{attrs:{outlined:""},on:{click:e.openAddBreakpointForm}},[e._v(" Add Breakpoint ")]):e._e(),t("div",[e.showAddForm?[t("div",{staticClass:"add-breakpoint-form-content-wrapper"},[t("div",{staticClass:"add-breakpoint-heading-box"},[t("h4",{staticClass:"add-breakpoint-heading"},[e._v("Add New Breakpoint")]),t("IconButton",{staticClass:"add-breakpoint-close-button",attrs:{icon:"CloseIcon",size:"18"},on:{click:e.toggleAddBreakpointForm}})],1),t("TextInput",{attrs:{placeholder:"Breakpoint name, ie. iPhone X or tablet",size:"md","validation-function-name":"validateNoQuotes"},model:{value:e.newBreakpointLabel,callback:function(t){e.newBreakpointLabel=t},expression:"newBreakpointLabel"}}),t(os.Z,{attrs:{disabled:!e.newBreakpointLabel,text:""},on:{click:e.addBreakpoint}},[t("Icon",{staticClass:"mr-2",attrs:{icon:"PlusIcon"}}),e._v(" Add ")],1)],1)]:e._e(),e.showAddForm||0!=e.value.length?e._e():t("EmptyStatePreferences",[t("p",[e._v("Add your first breakpoint by clicking the button below.")]),t(os.Z,{attrs:{outlined:""},on:{click:e.openAddBreakpointForm}},[e._v(" Add Breakpoint ")])],1)],2)],2)},Gr=[],Kr=n(82202),jr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{ref:"form",staticClass:"mx-n2 pa-2 py-3 breakpoint-edit"},[t("h3",{staticClass:"font-weight-medium breakpoint-title text-capitalize mb-2"},[e._v(" "+e._s(e.value.label)+" ")]),t("div",{staticClass:"d-flex align-center justify-space-between"},[t("div",{staticClass:"media-query-box"},[e.isEditing?t("div",{staticClass:"media-query-box-items"},[t("div",{staticClass:"media-query-input-wrapper"},[t("div",{staticClass:"d-flex flex-column"},[t("label",{staticClass:"breakdance-text-input__label"},[e._v("Maximum width (px)")]),t("NumberInput",{model:{value:e.internalValue.maxWidth,callback:function(t){e.$set(e.internalValue,"maxWidth",t)},expression:"internalValue.maxWidth"}})],1)]),t("div",{staticClass:"media-query-input-wrapper"},[t("div",{staticClass:"d-flex flex-column"},[t("label",{staticClass:"breakdance-text-input__label"},[e._v("Minimum width (px)")]),t("NumberInput",{model:{value:e.internalValue.minWidth,callback:function(t){e.$set(e.internalValue,"minWidth",t)},expression:"internalValue.minWidth"}})],1)]),t("div",{staticClass:"media-query-input-wrapper"},[t("div",{staticClass:"d-flex flex-column"},[t("label",{staticClass:"media-query-box-label"},[e._v("Default Preview Width")]),t("DropdownInput",{staticClass:"breakdance-dense-select breakdance-dense-select--md",attrs:{label:"Default Preview Width",value:"100%"===e.internalValue.defaultPreviewWidth?"100%":"custom",items:["100%","custom"],dense:"",solo:"",flat:"",filled:"",clearable:""},on:{input:e.setDefaultPreviewWidth}})],1)]),t("div",{staticClass:"media-query-input-wrapper"},["100%"!==e.internalValue.defaultPreviewWidth?[t("div",{staticClass:"d-flex flex-column"},[t("label",{staticClass:"breakdance-text-input__label"},[e._v("Custom width (px)")]),t("NumberInput",{model:{value:e.internalValue.defaultPreviewWidth,callback:function(t){e.$set(e.internalValue,"defaultPreviewWidth",t)},expression:"internalValue.defaultPreviewWidth"}})],1)]:e._e()],2),t("div",{staticClass:"d-flex justify-end align-center"},[t(os.Z,{staticClass:"mr-3",attrs:{text:"",color:"red darken-1"},on:{click:e.cancel}},[e._v("Cancel")]),t("NiceButton",{attrs:{disabled:!e.internalValue.maxWidth&&!e.internalValue.minWidth},on:{click:e.save}},[e._v("Save")])],1)]):t("div",{on:{click:e.enableEditing}},[this.mediaQueryString?[t("div",{staticClass:"media-query-string"},[e._v(e._s(this.mediaQueryString))])]:[t(Kr.Z,{staticClass:"mt-4",attrs:{dense:"",text:"",color:"orange"}},[e._v(" Click to set min and max widths. ")])]],2)]),e.isEditing?e._e():t("div",{staticClass:"breakpoint-edit__actions"},[t("IconButton",{staticClass:"mr-1",attrs:{icon:"EditIcon",size:"18"},on:{click:e.enableEditing}}),t("IconButton",{attrs:{icon:"TrashIcon",size:"18"},on:{click:function(t){t.stopPropagation(),e.deleteDialog=!0}}})],1)])]),t("ConfirmDialog",{attrs:{show:e.deleteDialog,type:"error","action-text":"Delete","discard-text":"Cancel","save-is-enabled":!0,"discard-is-enabled":!0},on:{discard:function(t){e.deleteDialog=!1},save:e.deleteBreakpoint},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Delete breakpoint?")]},proxy:!0},{key:"text",fn:function(){return[e._v("{If you delete the "+e._s(e.value.label||`${e.value.defaultPreviewWidth}px`)+" breakpoint, you will lose all design changes it applies.")]},proxy:!0}])})],1)},qr=[],Xr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(mr.Z,{attrs:{value:e.show,persistent:"",width:400},on:{"click:outside":function(t){return e.$emit("click:outside")}}},[t(ui.Z,{staticClass:"breakdance-dialog"},[e.type?t("div",{staticClass:"card-alert"},[t(Kr.Z,{staticClass:"card-alert__icon",attrs:{type:e.type}})],1):e._e(),t(ki.EB,{staticClass:"breakdance-dialog-title"},[e._t("title")],2),t(ki.ZB,{staticClass:"breakdance-dialog-contents"},[e._t("text")],2),t(ki.h7,{staticClass:"breakdance-dialog-actions"},[e.hasCancel?t(os.Z,{on:{click:()=>this.$emit("cancel")}},[e._v(e._s(e.cancelText)+" ")]):e._e(),e.hasDiscard?t(os.Z,{attrs:{disabled:!e.discardIsEnabled,loading:e.discardIsInProgress},on:{click:()=>this.$emit("discard")}},[e._v(e._s(e.discardText)+" ")]):e._e(),t(os.Z,{attrs:{color:e.type,dark:"",disabled:!e.saveIsEnabled,loading:e.saveIsInProgress},on:{click:()=>this.$emit("save")}},[e._v(e._s(e.actionText)+" ")])],1)],1)],1)},Yr=[];let Qr=class extends s.ZP{};(0,r.gn)([(0,l.fI)()],Qr.prototype,"show",void 0),(0,r.gn)([(0,l.fI)({default:"info"})],Qr.prototype,"type",void 0),(0,r.gn)([(0,l.fI)({default:!1})],Qr.prototype,"hasCancel",void 0),(0,r.gn)([(0,l.fI)({default:"Cancel"})],Qr.prototype,"cancelText",void 0),(0,r.gn)([(0,l.fI)()],Qr.prototype,"saveIsEnabled",void 0),(0,r.gn)([(0,l.fI)()],Qr.prototype,"saveIsInProgress",void 0),(0,r.gn)([(0,l.fI)({default:!0})],Qr.prototype,"hasDiscard",void 0),(0,r.gn)([(0,l.fI)()],Qr.prototype,"discardIsEnabled",void 0),(0,r.gn)([(0,l.fI)()],Qr.prototype,"discardIsInProgress",void 0),(0,r.gn)([(0,l.fI)({default:"Save"})],Qr.prototype,"actionText",void 0),(0,r.gn)([(0,l.fI)({default:"Discard"})],Qr.prototype,"discardText",void 0),Qr=(0,r.gn)([(0,l.wA)({components:{}})],Qr);const Jr=Qr,el=Jr;var tl=(0,Y.Z)(el,Xr,Yr,!1,null,null,null);const nl=tl.exports;let sl=class extends s.ZP{constructor(){super(...arguments),this.deleteDialog=!1,this.internalValue=(0,Me.Z)(this.value)}setDefaultPreviewWidth(e){const t=this.internalValue.maxWidth??this.internalValue.minWidth??250;this.internalValue.defaultPreviewWidth="100%"===e?"100%":t}enableEditing(){this.$emit("edit",this.value.id)}get breakpoints(){return c.PK.breakpoints}get previewWidthUnit(){return"px"}deleteBreakpoint(){this.$emit("delete"),this.deleteDialog=!1}get mediaQueryString(){const e=this.internalValue.minWidth||void 0,t=this.internalValue.maxWidth||void 0;return(0,Nt.Mc)(e,t)}cancel(){this.internalValue=(0,Me.Z)(this.value),this.$emit("edit","")}save(){const e=(0,Me.Z)(this.internalValue);(0,V.pipe)((0,Nt.cb)(e),(0,H.fold)((e=>{e.forEach((e=>ye.Z.log.message(e.msg)))}),(e=>{this.$emit("input",e),this.$emit("edit","")})))}};(0,r.gn)([(0,l.fI)()],sl.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],sl.prototype,"isEditing",void 0),sl=(0,r.gn)([(0,l.wA)({components:{IconButton:Ua.Z,TextInput:cs.Z,NumberInput:Ei.Z,DropdownInput:Di.Z,NiceButton:io.Z,ConfirmDialog:nl},directives:{focus:{inserted:function(e){e.focus()}}}})],sl);const al=sl,il=al;var ol=(0,Y.Z)(il,jr,qr,!1,null,null,null);const rl=ol.exports;var ll=function(){var e=this,t=e._self._c;return t("div",{staticClass:"preferences-empty-state"},[e._t("default")],2)},cl=[],dl={},ul=(0,Y.Z)(dl,ll,cl,!1,null,null,null);const pl=ul.exports;let hl=class extends s.ZP{constructor(){super(...arguments),this.editingBreakpointId="",this.showAddForm=!1,this.newBreakpointLabel=""}edit(e){this.editingBreakpointId=e,this.showAddForm=!1}openAddBreakpointForm(){this.showAddForm=!0,this.editingBreakpointId=""}toggleAddBreakpointForm(){this.showAddForm=!this.showAddForm}addBreakpoint(){if(!this.newBreakpointLabel)return;const e=this.newBreakpointLabel.toLowerCase().replace(/[- ]/g,"_"),t=`custom_breakpoint_${e}`;this.updateOrAddBreakpoint({id:t,label:this.newBreakpointLabel,minWidth:void 0,maxWidth:void 0,defaultPreviewWidth:"100%"})}deleteBreakpoint(e){const t=(0,Me.Z)(this.value),n=t.findIndex((t=>t.id===e));t.splice(n,1),this.$emit("input",t)}updateOrAddBreakpoint(e){const t=(0,Nt.lx)(this.value,e);this.$emit("input",t),!0===this.showAddForm&&(this.showAddForm=!1),this.newBreakpointLabel=""}};(0,r.gn)([(0,l.fI)()],hl.prototype,"value",void 0),hl=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,EditBreakpoint:rl,EmptyStatePreferences:pl,TextInput:cs.Z,IconButton:Ua.Z}})],hl);const ml=hl,gl=ml;var vl=(0,Y.Z)(gl,zr,Gr,!1,null,null,null);const fl=vl.exports;var yl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"preferences-panel-topbar"},[t("div",{staticClass:"preferences-panel-heading"},[e._t("title")],2),e._t("aftertitle"),t(xa.Z)],2),t("div",{staticClass:"preferences-panel-content-area"},[e._t("content")],2),t("div",{staticClass:"preferences-bottom-panel"},[e.hideSaveButton?e._e():t(os.Z,{attrs:{loading:e.save.inProgress,disabled:e.save.disabled,color:"blue",dark:""},on:{click:e.save.function}},[e._v(e._s(e.save.text)+" ")])],1)])},bl=[];let Pl=class extends s.ZP{};(0,r.gn)([(0,l.fI)()],Pl.prototype,"save",void 0),(0,r.gn)([(0,l.fI)({default:!1})],Pl.prototype,"hideSaveButton",void 0),Pl=(0,r.gn)([(0,l.wA)({})],Pl);const _l=Pl,Sl=_l;var Cl=(0,Y.Z)(Sl,yl,bl,!1,null,null,null);const wl=Cl.exports;let kl=class extends s.ZP{constructor(){super(...arguments),this.internalValue=(0,Me.Z)(this.value)}get unsavedChangesPresent(){return!Ur()((0,Me.Z)(this.internalValue),(0,Me.Z)(this.value))}applyChanges(){this.$emit("input",this.internalValue)}breakpointsEdited(e){this.internalValue=e}};(0,r.gn)([(0,l.fI)()],kl.prototype,"value",void 0),kl=(0,r.gn)([(0,l.wA)({components:{EditBreakpoints:fl,PreferencesPanel:wl}})],kl);const xl=kl,Il=xl;var Dl=(0,Y.Z)(Il,Wr,Vr,!1,null,null,null);const El=Dl.exports;var Zl=n(56904),Tl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("PreferencesPanel",{attrs:{save:{text:"Save Fonts",function:e.applyChanges,inProgress:e.saveInProgress,disabled:!e.unsavedChangesPresent||e.isFreeMode}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Custom Fonts")]},proxy:!0},{key:"content",fn:function(){return[t("ProOnlyAlertBox",{staticClass:"mb-5",attrs:{options:{content:"Managing custom fonts is only available in Breakdance Pro",feature:"custom-fonts"}}}),e._l(e.internalValue,(function(n,s){return t("FontFamily",{key:n.family,attrs:{value:n,isOpen:s===e.openedFontIndex},on:{open:function(t){return e.openFont(t?s:-1)},delete:function(t){return e.deleteFontFamily(s)},input:function(t){return e.updateFontFamily(t,s)}}})})),e.internalValue.length?[t("div",{staticClass:"mt-12"})]:e._e(),t("h4",{staticClass:"mb-4 font-weight-medium"},[e._v("Add Font")]),e.showAddForm||0!=e.internalValue.length?e._e():t("EmptyStatePreferences",[t("p",[e._v(" Add a font family to Breakdance's font family dropdowns, and optionally upload associated .woff/.woff2 files. ")]),t(os.Z,{attrs:{outlined:"",disabled:e.isFreeMode},on:{click:e.toggleAddForm}},[e._v(" Add Font ")])],1),e.showAddForm?t("div",[t(Zl.Z,{ref:"form",on:{submit:function(t){return t.preventDefault(),e.saveNewFontFamily.apply(null,arguments)}},model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[t("div",{staticClass:"add-font-family-form-content-wrapper"},[t("div",{staticClass:"add-font-heading-box"},[t("h4",{staticClass:"add-font-heading"},[e._v("Add New Font")]),t("IconButton",{staticClass:"add-font-cloe-button",attrs:{icon:"CloseIcon",size:"18"},on:{click:e.toggleAddForm}})],1),t("TextInput",{attrs:{placeholder:"Custom font name, ie. Helvetica",outlined:"",dense:"",solo:"",flat:"","single-line":"",size:"md","validation-function-name":"validateAlphanumericHyphenUnderscore"},model:{value:e.fontFamily,callback:function(t){e.fontFamily=t},expression:"fontFamily"}}),t(os.Z,{attrs:{disabled:!e.fontFamily||!0!==e.validFontFamily,type:"submit",text:""}},[t("Icon",{staticClass:"mr-2",attrs:{icon:"PlusIcon"}}),e._v(" Add ")],1)],1)])],1):e._e(),e.internalValue.length>0&&!e.showAddForm?t(os.Z,{attrs:{outlined:"",disabled:e.isFreeMode},on:{click:e.toggleAddForm}},[e._v(" Add Font ")]):e._e(),t("h4",{staticClass:"my-4 font-weight-medium mt-12"},[e._v("Use Fonts In External CSS")]),e.showCssForm||0!=e.internalValue.length?e._e():t("EmptyStatePreferences",[t("p",[e._v("Use hosted fonts from providers like Adobe Fonts.")]),t(os.Z,{attrs:{outlined:"",disabled:e.isFreeMode},on:{click:e.toggleCssForm}},[e._v(" Add External CSS ")])],1),e.showCssForm?t("div",[t(Zl.Z,{ref:"cssForm",on:{submit:function(t){return t.preventDefault(),e.saveCssUrl.apply(null,arguments)}},model:{value:e.validCssForm,callback:function(t){e.validCssForm=t},expression:"validCssForm"}},[t("div",{staticClass:"add-font-family-form-content-wrapper mb-4"},[t("div",{staticClass:"add-font-heading-box"},[t("h4",{staticClass:"add-font-heading"},[e._v("CSS URL")]),t("IconButton",{staticClass:"add-font-cloe-button",attrs:{icon:"CloseIcon",size:"18"},on:{click:e.toggleCssForm}})],1),t("TextInput",{attrs:{rules:[e=>!!e||"Please enter a value",t=>e.isValidUrl(t)||"Please enter a valid URL"],placeholder:"URL to CSS file containing Font Face definitions",outlined:"",dense:"",solo:"",flat:"","single-line":"",size:"md"},model:{value:e.cssUrl,callback:function(t){e.cssUrl=t},expression:"cssUrl"}}),t(os.Z,{attrs:{disabled:e.saveInProgress,type:"submit",text:""}},[t("Icon",{staticClass:"mr-2",attrs:{icon:"PlusIcon"}}),e._v(" Add ")],1)],1)])],1):e._e(),e.internalValue.length>0&&!e.showCssForm?t(os.Z,{attrs:{outlined:"",disabled:e.isFreeMode},on:{click:e.toggleCssForm}},[e._v(" Add CSS URL ")]):e._e()]},proxy:!0}])})},Al=[],Bl=n(88667);async function Ol(e){return await(0,E.D)({action:"breakdance_save_font_file",dataToPost:{file:e},decoder:Bl.zM})}async function Rl(e){return await(0,E.D)({action:"breakdance_get_font_families_from_css_file",dataToPost:{cssUrl:e},decoder:Bl.lU})}async function Ml(e){return await(0,E.D)({action:"breakdance_save_font_families",dataToPost:{customFontFamilies:(0,F.J)(e)},decoder:Bl.lU})}const Fl=e=>{const t=(0,Me.Z)(ft.PK.fonts),n=t.findIndex((t=>t.slug===e.slug));-1===n?t.unshift(e):t[n]=e,ft.PK.setFonts(t)},Nl=e=>{const t=(0,Me.Z)(ft.PK.fonts),n=t.findIndex((t=>t.slug===e));n>-1&&t.splice(n,1),ft.PK.setFonts(t)};var Ll=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"custom-font-family"},[t("div",{staticClass:"custom-font-family-titlebar",on:{click:e.toggleFaces}},[t("div",{staticClass:"custom-font-family-title"},[e._v(" "+e._s(e.value.family)+" ")]),t(os.Z,{attrs:{icon:""},on:{click:function(t){return t.stopPropagation(),e.deleteFontFamily.apply(null,arguments)}}},[t("Icon",{attrs:{icon:"TrashIcon"}})],1)],1),e.isOpen?t("div",{staticClass:"custom-font-family-edit"},[e.value.hasExternalCssUrl?e._e():t("div",[t("FontFaces",{attrs:{value:e.value.faces},on:{input:e.editFontFamily}}),t("TextField",{attrs:{placeholder:"CSS Fallback String (separate font families with commas)",value:e.value.fallbackString,size:"md"},on:{input:e.editFallbackString}}),e.fallbackStringHasBeenEdited?[t(Kr.Z,{staticClass:"mt-4",attrs:{dense:"",border:"left",text:"",type:"warning"}},[e._v(" Changes to the CSS fallback string will take effect after "),t("strong",[e._v("saving and refreshing")]),e._v(". ")])]:e._e()],2),e.value.hasExternalCssUrl?t("div",[t("span",{staticStyle:{"font-size":"var(--text-sm)","font-weight":"500"}},[e._v("Sourced from "+e._s(e.value.cssUrl))]),t("TextField",{staticClass:"mt-4",attrs:{placeholder:"CSS Fallback String (separate font families with commas)",value:e.value.fallbackString,size:"md"},on:{input:e.editFallbackString}})],1):e._e()]):e._e()])},$l=[],Wl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"custom-font-family-font-faces"},[e._l(e.value,(function(n,s){return t("UpdateFontFace",{key:n.id,attrs:{value:n,existingFontFaces:e.existingFontFaces(s)},on:{input:function(t){return e.updateFontFace(t,s)},delete:function(t){return e.deleteFontFace(s)}}})})),t("FontFileUpload",{on:{save:e.newFontFileSuccessfullyUploaded}})],2)},Vl=[],Hl=n(9207),Ul=n(42564),zl=n(25135),Gl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"custom-font-family-font-face"},[t(Zl.Z,{ref:"form",model:{value:e.isFontFaceUnique,callback:function(t){e.isFontFaceUnique=t},expression:"isFontFaceUnique"}},[t("div",{staticClass:"custom-font-family-font-face-titlebar"},[t("div",{staticClass:"custom-font-family-font-face-titlebar-title"},e._l(e.value.files,(function(n){return t("div",{key:n.fileUrl,staticClass:"mr-3"},[e._v(" "+e._s(n.fileName)+" ")])})),0),t(os.Z,{attrs:{icon:""},on:{click:e.deleteFontFace}},[t("Icon",{attrs:{icon:"TrashIcon"}})],1)],1),t("div",{staticClass:"custom-font-family-font-face-controls"},[t("div",{staticClass:"custom-font-family-font-face-controls-control"},[t(zl.Z,{staticClass:"mr-4",attrs:{dense:"",outlined:"",value:e.value.weight,items:e.weights,rules:[e.validateWeight],label:"Font Weight"},on:{input:e.updateWeight}})],1),t("div",{staticClass:"custom-font-family-font-face-controls-control"},[t(Ul.Z,{staticClass:"pt-0 mt-0 mr-4",attrs:{value:e.value.style,rules:[e.validateStyle],row:"",dense:""},on:{change:e.updateStyle}},[t(Hl.Z,{attrs:{label:"Normal",value:"normal"}}),t(Hl.Z,{attrs:{label:"Italic",value:"italic"}})],1)],1)])])],1)},Kl=[];const jl=[{text:"100 (Thin)",value:100},{text:"200 (Extra Light)",value:200},{text:"300 (Light)",value:300},{text:"400 (Normal)",value:400},{text:"500 (Medium)",value:500},{text:"600 (Semi Bold)",value:600},{text:"700 (Bold)",value:700},{text:"800 (Extra Bold)",value:800},{text:"900 (Black)",value:900}];let ql=class extends s.ZP{constructor(){super(...arguments),this.isFontFaceUnique=!0}validateWeight(e){return e?!this.existingFontFaces.find((t=>t.weight===e&&t.style===this.value.style))?.files.find((e=>this.valueFormats.includes(e.format)))||"This font weight already exists with this style, and format":"A weight is required"}validateStyle(e){return!this.existingFontFaces.find((t=>t.weight===this.value.weight&&t.style===e))?.files.find((e=>this.valueFormats.includes(e.format)))||"This font style already exists with this weight, and format"}get valueFormats(){return this.value.files.map((e=>e.format))}revalidateOnValueChange(){this.form.validate()}updateWeight(e){const t={...this.value,weight:e};this.$emit("input",t)}updateStyle(e){const t={...this.value,style:e};this.$emit("input",t)}deleteFontFace(){this.$emit("delete")}get weights(){return jl}get currentWeight(){return jl.find((e=>e.value===this.value.weight))}};(0,r.gn)([(0,l.Rl)()],ql.prototype,"form",void 0),(0,r.gn)([(0,l.fI)()],ql.prototype,"value",void 0),(0,r.gn)([(0,l.fI)({default:[]})],ql.prototype,"existingFontFaces",void 0),(0,r.gn)([(0,l.RL)("value")],ql.prototype,"revalidateOnValueChange",null),ql=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z}})],ql);const Xl=ql,Yl=Xl;var Ql=(0,Y.Z)(Yl,Gl,Kl,!1,null,null,null);const Jl=Ql.exports;var ec=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-font-file-uploader"},[t("FileUpload",{attrs:{height:"150px",accept:".woff,.woff2",saveInProgress:e.saveInProgress},on:{input:e.handleFiles}},[e._v(" drag .woff or .woff2 files or "),t("span",{staticClass:"breakdance-font-file-uploader-choose-link"},[e._v("browse...")])])],1)},tc=[],nc=n(30895);let sc=class extends s.ZP{constructor(){super(...arguments),this.saveInProgress=!1}handleFiles(e){Array.from(e).forEach((e=>{const t=new FileReader;t.onloadend=async t=>{if(!t?.target)return;const n=new Uint8Array(t.target.result).subarray(0,4);let s="";n.forEach((e=>s+=e.toString(16)));const a=e.name.split(".").pop(),i="774f4646"===s&&"woff"===a,o="774f4632"===s&&"woff2"===a;i||o?(this.saveInProgress=!0,(0,V.pipe)(await Ol(e),(0,H.fold)((e=>{(0,Ta.UE)(e)}),(e=>{this.$emit("save",{fileUrl:e.fileUrl,format:i?"woff":"woff2",fileName:e.fileName})}))),this.saveInProgress=!1):ye.Z.log.message('Only  ".woff" and ".woff2" files are supported')},t.readAsArrayBuffer(e)}))}};sc=(0,r.gn)([(0,l.wA)({components:{FileUpload:nc.Z}})],sc);const ac=sc,ic=ac;var oc=(0,Y.Z)(ic,ec,tc,!1,null,null,null);const rc=oc.exports;let lc=class extends s.ZP{newFontFileSuccessfullyUploaded(e){const t=dc(e),n=[...this.value,t];this.$emit("input",n)}updateFontFace(e,t){const n=[...this.value],s=e.files.map((e=>e.format)),a=n.findIndex((t=>t.weight===e.weight&&t.style===e.style&&!t.files.find((e=>s.includes(e.format)))));-1===a?n[t]=e:(n[a].files=[...n[a].files,...e.files],n.splice(t,1)),this.$emit("input",n)}deleteFontFace(e){const t=[...this.value];t.splice(e,1),this.$emit("input",t)}existingFontFaces(e){return this.value.filter(((t,n)=>n!==e))}};(0,r.gn)([(0,l.fI)()],lc.prototype,"value",void 0),lc=(0,r.gn)([(0,l.wA)({components:{FontFileUpload:rc,UpdateFontFace:Jl}})],lc);const cc=lc;function dc(e){return{id:(0,Fe.Z)(),files:[e],style:"normal",weight:0}}const uc=cc;var pc=(0,Y.Z)(uc,Wl,Vl,!1,null,null,null);const hc=pc.exports;let mc=class extends s.ZP{constructor(){super(...arguments),this.fallbackStringHasBeenEdited=!1}toggleFaces(){this.$emit("open",!this.isOpen)}deleteFontFamily(){this.$emit("delete")}editFallbackString(e){this.fallbackStringHasBeenEdited=!0,this.$emit("input",{...this.value,fallbackString:e})}editFontFamily(e){this.$emit("input",{...this.value,faces:e})}editCssUrl(e){this.$emit("input",{...this.value,cssUrl:e})}};(0,r.gn)([(0,l.fI)()],mc.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],mc.prototype,"isOpen",void 0),mc=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,FontFaces:hc,TextField:cs.Z}})],mc);const gc=mc,vc=gc;var fc=(0,Y.Z)(vc,Ll,$l,!1,null,null,null);const yc=fc.exports;var bc=n(13997),Pc=n(2028),_c=n(52107);let Sc=class extends s.ZP{constructor(){super(...arguments),this.internalValue=(0,Me.Z)(this.value),this.fontFamily="",this.cssUrl="",this.validForm=!0,this.validCssForm=!0,this.saveInProgress=!1,this.openedFontIndex=-1,this.showAddForm=!1,this.showCssForm=!1}get unsavedChangesPresent(){return!Ur()((0,Me.Z)(this.internalValue),(0,Me.Z)(this.value))}get validFontFamily(){return(0,bc.q3)(this.fontFamily)}toggleAddForm(){this.showAddForm=!this.showAddForm}toggleCssForm(){this.showCssForm=!this.showCssForm}async applyChanges(){this.saveInProgress=!0,(0,V.pipe)(await Ml(this.internalValue),(0,H.fold)((e=>{(0,Ta.UE)(e)}),(e=>{e.forEach((e=>{const t=this.internalValue.findIndex((t=>t.id===e.fontId));this.internalValue[t].cssUrl=e.cssUrl,this.internalValue[t].cssName=e.fontRegistrationData.cssName,Fl(e.fontRegistrationData)})),this.$emit("input",this.internalValue)}))),this.saveInProgress=!1}openFont(e){this.isFreeMode||(this.openedFontIndex=e)}updateFontFamily(e,t){const n=(0,Me.Z)(this.internalValue);n[t]=e,this.internalValue=n}deleteFontFamily(e){if(this.isFreeMode)return;const t=(0,Me.Z)(this.internalValue);t.splice(e,1),Nl(this.internalValue[e].id),this.internalValue=t}saveNewFontFamily(){this.form.validate()&&this.fontFamily&&(this.internalValue.push({id:"custom_font_"+this.fontFamily.toLowerCase().replace(/ /g,"_"),family:this.fontFamily,fallbackString:"",cssUrl:"",hasExternalCssUrl:!1,cssName:this.fontFamily,faces:[]}),this.openedFontIndex=this.internalValue.length-1,this.fontFamily="",this.form.reset(),this.showAddForm=!1)}async saveCssUrl(){this.cssForm.validate()&&this.cssUrl&&(this.saveInProgress=!0,(0,V.pipe)(await Rl(this.cssUrl),(0,H.fold)((e=>{(0,Ta.UE)(e)}),(e=>{e.forEach((e=>{const t=this.internalValue.findIndex((t=>t.id===e.fontId))>-1;t||this.internalValue.unshift({id:e.fontId,family:e.fontRegistrationData.label,fallbackString:e.fontRegistrationData.fallbackString,cssUrl:e.cssUrl,hasExternalCssUrl:!0,cssName:e.fontRegistrationData.cssName,faces:[]})}))}))),this.saveInProgress=!1,this.cssUrl="",this.showCssForm=!1)}isValidUrl(e){let t;try{t=new URL(e)}catch(n){return!1}return"http:"===t.protocol||"https:"===t.protocol}get isFreeMode(){return"free"===ft.PK.subscriptionMode}};(0,r.gn)([(0,l.Rl)()],Sc.prototype,"form",void 0),(0,r.gn)([(0,l.Rl)()],Sc.prototype,"cssForm",void 0),(0,r.gn)([(0,l.fI)()],Sc.prototype,"value",void 0),Sc=(0,r.gn)([(0,l.wA)({components:{ProOnlyAlertBox:_c.Z,AlertBox:Pc.Z,FontFamily:yc,PreferencesPanel:wl,EmptyStatePreferences:pl,Icon:K.Z,TextInput:cs.Z,IconButton:Ua.Z}})],Sc);const Cc=Sc,wc=Cc;var kc=(0,Y.Z)(wc,Tl,Al,!1,null,null,null);const xc=kc.exports;var Ic=n(76660),Dc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("PreferencesPanel",{attrs:{"hide-save-button":!0},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("UI Settings")]},proxy:!0},{key:"content",fn:function(){return[t("h4",{staticClass:"mb-4 font-weight-medium"},[e._v("Settings")]),t("div",{staticClass:"ui-setting"},[t(Ic.Z,{attrs:{"input-value":e.autoScrollEnabled,inset:"",label:"Auto-scroll to active element"},on:{change:e.setAutoScrollEnabled}})],1),t("div",{staticClass:"ui-setting"},[t(Ic.Z,{attrs:{"input-value":e.isScaledToFit,label:"Scale content to fit the screen (zoom)",inset:""},on:{change:e.setScaleToFit}})],1),t("div",{staticClass:"ui-setting"},[t(Ic.Z,{attrs:{"input-value":e.isDarkMode,label:"Dark Mode",inset:""},on:{change:e.toggleTheme}})],1),e.displayShowExperimentalElementsSetting?t("div",{staticClass:"ui-setting"},[t(Ic.Z,{attrs:{"input-value":e.showExperimentalElements,label:"Show Experimental Elements",inset:""},on:{change:e.setShowExperimentalElements}})],1):e._e(),t("div",{staticClass:"ui-setting"},[t(Ic.Z,{attrs:{"input-value":e.disableNoticeForEmptySSRElements,label:"Disable Message For Empty SSR Elements",inset:""},on:{change:e.setDisableNoticeForEmptySSRElements}})],1),t("div",{staticClass:"ui-setting"},[t(Ic.Z,{attrs:{"input-value":e.isShowingIdsInStructurePanel,label:"Show elements ID in the Structure Panel",inset:""},on:{change:e.setIsShowingIdsInStructurePanel}})],1),t("div",{staticClass:"ui-setting"},[t(Ic.Z,{attrs:{"input-value":e.disableCodeMirrorLineWrapping,label:"Disable Code Editor Line Wrapping",inset:""},on:{change:e.setDisableCodeMirrorLineWrapping}})],1),t("div",{staticClass:"ui-setting"},[t(Ic.Z,{attrs:{"input-value":e.isTinyMcePreferredForRichText,label:"Prefer TinyMCE For Rich Text",inset:""},on:{change:e.setIsTinyMcePreferredForRichText}})],1),t("div",{staticClass:"ui-setting"},[t(Ic.Z,{attrs:{"input-value":e.includeCustomBreakpointsInBreakpointsDropdown,label:"Include Custom Breakpoints in Breakpoint Dropdowns",inset:""},on:{change:e.setIncludeCustomBreakpointsInBreakpointsDropdown}})],1),e.includeCustomBreakpointsInBreakpointsDropdown?[t("AlertBox",{staticClass:"mb-5",attrs:{options:{style:"info",content:"<a target='_blank' href='https://breakdance.com/documentation/settings/preferences/custom-breakpoints/breakpoint-dropdown-limitations/'>Limitations May Apply</a>"}}})]:e._e(),t("div",{staticClass:"mt-4"},[t("h4",{staticClass:"mb-4 font-weight-medium"},[e._v("Panel Positions")]),e._l(e.panelsState,(function(n,s){return[t("div",{key:s,staticClass:"d-flex align-center justify-space-between mb-3 panel-positions"},[t("div",{staticClass:"ui-panel-title"},[e._v(e._s(n.label))]),t("ButtonBarInput",{attrs:{value:n.value,items:e.panelPositionsAsItems,options:{mandatory:!0}},on:{input:function(t){return e.setPanelPosition(n.id,t)}}})],1)]})),t("div",{staticClass:"d-flex align-center justify-space-between mb-3 panel-positions"},[t("div",{staticClass:"ui-panel-title"},[e._v("Popout Position")]),t("ButtonBarInput",{attrs:{value:e.popoutPosition,items:e.popoutPositionItems,options:{mandatory:!0}},on:{input:e.setPopoutPosition}})],1),t("div",{staticClass:"d-flex justify-end mt-4"},[t("NiceButton",{attrs:{disabled:e.arePanelPositionsDefault},on:{click:e.resetUiPanelPositionsToDefault}},[e._v("Reset to defaults")])],1)],2)]},proxy:!0}])})},Ec=[],Zc=n(18947),Tc=n(66383),Ac=n(6613),Bc=n(31549),Oc=n(82436);let Rc=class extends s.ZP{constructor(){super(...arguments),this.panelsState=this.getPanelsInitialState()}getPanelsInitialState(){const e=[{id:"add",label:"Add"},{id:"elementproperties",label:"Element Properties"},{id:"selectors",label:"Selectors"},{id:"globalSettings",label:"Global Settings"},{id:"structure",label:"Structure"},{id:"history",label:"History & Revisions"}];return e.map((e=>({...e,value:(0,G.pL)(e.id)})))}setPanelPosition(e,t){const n=this.panelsState.findIndex((t=>t.id===e));this.panelsState[n].value=t,(0,G.hy)(e,t),(0,G.ug)(),(0,G.oM)(e)}resetUiPanelPositionsToDefault(){(0,G.qH)(),this.panelsState=this.getPanelsInitialState()}get arePanelPositionsDefault(){return Ur()(G.c$,this.panelsState.reduce(((e,t)=>(e[t.id]=t.value,e)),{}))}get panelPositionsAsItems(){return["left","right"].map((e=>({text:e,value:e})))}get popoutPositionItems(){return[{text:"Stacked",value:"STACKED"},{text:"Stacked (First Visible)",value:"STACKED_FIRST_VISIBLE"},{text:"Side By Side",value:"SIDE_BY_SIDE"}]}get displayShowExperimentalElementsSetting(){return(0,Oc.y)()}get isDarkMode(){return"dark"===ft.kD.settings.theme}get isScaledToFit(){return"SCALED_TO_FIT"===ft.kD.settings.scaleToFit}get includeCustomBreakpointsInBreakpointsDropdown(){return ft.kD.settings.includeCustomBreakpointsInBreakpointsDropdown}get isShowingIdsInStructurePanel(){return ft.kD.settings.showElementIdInStructurePanel}get isTinyMcePreferredForRichText(){return ft.kD.settings.isTinyMcePreferredForRichText}setScaleToFit(e){this.setUiSettings((0,zo.b0)(e))}toggleTheme(){const e=(0,Me.Z)(ft.kD.settings);e.theme=this.isDarkMode?"light":"dark",this.setUiSettings(e)}setDisableNoticeForEmptySSRElements(e){const t=(0,Me.Z)(ft.kD.settings);t.disableNoticeForEmptySSRElements=e,this.setUiSettings(t)}get disableNoticeForEmptySSRElements(){return ft.kD.settings.disableNoticeForEmptySSRElements}get showExperimentalElements(){return ft.kD.settings.showExperimentalElements}setShowExperimentalElements(e){const t=(0,Me.Z)(ft.kD.settings);t.showExperimentalElements=e,this.setUiSettings(t)}setIsShowingIdsInStructurePanel(e){const t=(0,Me.Z)(ft.kD.settings);t.showElementIdInStructurePanel=e,this.setUiSettings(t)}setIncludeCustomBreakpointsInBreakpointsDropdown(e){const t=(0,Me.Z)(ft.kD.settings);t.includeCustomBreakpointsInBreakpointsDropdown=e,this.setUiSettings(t)}get disableCodeMirrorLineWrapping(){return ft.kD.settings.disableCodeMirrorLineWrapping}setDisableCodeMirrorLineWrapping(e){const t=(0,Me.Z)(ft.kD.settings);t.disableCodeMirrorLineWrapping=e,this.setUiSettings(t)}setIsTinyMcePreferredForRichText(e){const t=(0,Me.Z)(ft.kD.settings);t.isTinyMcePreferredForRichText=e,this.setUiSettings(t)}get autoScrollEnabled(){return ft.kD.settings.autoScrollEnabled}get popoutPosition(){return ft.kD.settings.popoutPosition}setAutoScrollEnabled(e){const t=(0,Me.Z)(ft.kD.settings);t.autoScrollEnabled=e,this.setUiSettings(t)}setPopoutPosition(e){const t=(0,Me.Z)(ft.kD.settings);t.popoutPosition=e,this.setUiSettings(t)}setUiSettings(e){const t=(0,Ac.g)({...zo.OC,...e});t&&(0,Bc.r)(zo.rZ,t),ft.kD.setSettings(e)}};Rc=(0,r.gn)([(0,l.wA)({components:{NiceButton:io.Z,PreferencesPanel:wl,ButtonBarInput:Zc.Z,ToggleInput:Tc.Z,AlertBox:Pc.Z}})],Rc);const Mc=Rc,Fc=Mc;var Nc=(0,Y.Z)(Fc,Dc,Ec,!1,null,null,null);const Lc=Nc.exports;let $c=class extends s.ZP{constructor(){super(...arguments),this.tab=0,this.currentTab=0,this.uiSettingsTab=0,this.fontFamiliesTab=1,this.customBreakpointsTab=2,this.saveInProgress=!1,this.hasUnsavedChanges=!1}get preferences(){return c.PK.preferences}get customBreakpoints(){return this.preferences.customBreakpoints}get customFontFamilies(){return c.PK.preferences.customFonts}updateBreakpoints(e){const t=(0,Me.Z)(this.preferences);t.customBreakpoints=e,this.save(t)}updateCustomFontFamilies(e){const t=(0,Me.Z)(this.preferences);t.customFonts=e,this.save(t)}handleClickOutside(){if(this.checkForUnsavedChanges(),!this.hasUnsavedChanges)return this.$emit("update:dialog",!1);const e=confirm("Exit without saving?");return e?this.$emit("update:dialog",!1):this}async handleChangeTab(){if(this.checkForUnsavedChanges(),this.hasUnsavedChanges){const e=confirm("Exit without saving?");if(!e)return await this.$nextTick(),this.tab=this.currentTab,!0}return this.currentTab=this.tab,!1}async save(e){this.saveInProgress=!0,(0,V.pipe)(await Ta.HR("preferences",e),(0,H.fold)((e=>{(0,Ta.UE)(e)}),(()=>{c.PK.setPreferences(e)}))),this.saveInProgress=!1,this.checkForUnsavedChanges()}checkForUnsavedChanges(){return this.currentTab===this.fontFamiliesTab?(this.hasUnsavedChanges=this.customFontFamiliesPanel.unsavedChangesPresent,this.hasUnsavedChanges):this.currentTab===this.customBreakpointsTab?(this.hasUnsavedChanges=this.customBreakpointsPanel.unsavedChangesPresent,this.hasUnsavedChanges):this.hasUnsavedChanges=!1}};(0,r.gn)([(0,l.fI)()],$c.prototype,"open",void 0),(0,r.gn)([(0,l.Rl)()],$c.prototype,"customFontFamiliesPanel",void 0),(0,r.gn)([(0,l.Rl)()],$c.prototype,"customBreakpointsPanel",void 0),$c=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,CustomUiSettings:Lc,CustomFontFamilies:xc,CustomBreakpointsPanel:El,Loading:pa.Z}})],$c);const Wc=$c,Vc=Wc;var Hc=(0,Y.Z)(Vc,Lr,$r,!1,null,null,null);const Uc=Hc.exports;var zc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(mr.Z,{attrs:{"content-class":"keyboard-shortcuts-help-modal",value:e.open,"max-width":"850"},on:{input:function(t){return e.$emit("update:dialog",!1)}}},[t(ui.Z,{staticClass:"d-flex flex-column",attrs:{height:"100%"}},[t(ki.ZB,[t("table",{staticClass:"styled-table"},[t("thead",[t("tr",[t("th",[e._v("Shortcut")]),t("th",[e._v("Description")])])]),t("tbody",[t("tr",[t("td",[e._v(e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_A)))]),t("td",[e._v("Open add elements panel")])]),t("tr",[t("td",[e._v(e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_B)))]),t("td",[e._v("Open design sets modal")])]),t("tr",[t("td",[e._v(e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_S)))]),t("td",[e._v("Save")])]),t("tr",[t("td",[e._v(e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_Z)))]),t("td",[e._v("Undo")])]),t("tr",[t("td",[e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_SHIFT_Z))+" ")]),t("td",[e._v("Redo")])]),t("tr",[t("td",[e._v(e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_C)))]),t("td",[e._v("Copy the active element")])]),t("tr",[t("td",[e._v(e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_V)))]),t("td",[e._v("Paste copied element")])]),t("tr",[t("td",[e._v(e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_D)))]),t("td",[e._v("Duplicate the active element")])]),t("tr",[t("td",[e._v(e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.ESC)))]),t("td",[e._v("De-activate the active element "),t("b",[e._v("or")]),e._v(" close modal")])]),t("tr",[t("td",[e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.SHIFT_ESC))+" ")]),t("td",[e._v("Go to the parent of the active element")])]),t("tr",[t("td",[e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.BACKSPACE))),t("br"),e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.DELETE))+" ")]),t("td",[e._v("Delete active element")])]),t("tr",[t("td",[e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_OPTION_R))+" ")]),t("td",[e._v("Cycle to the next breakpoint")])]),t("tr",[t("td",[e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_SHIFT_SLASH))),t("br"),e._v(e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_QUESTION))+" ")]),t("td",[e._v("Show keyboard shortcuts help modal")])]),t("tr",[t("td",[e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_SHIFT_S))+" ")]),t("td",[e._v('Switch between "scale to fit" and "actual size" content')])]),t("tr",[t("td",[e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_E))+" ")]),t("td",[e._v(" Open the rich text editor modal. Only when the Rich Text element is selected ")])]),t("tr",[t("td",[e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.C_S_S))+" ")]),t("td",[e._v(" Open the active element's Advanced  Custom CSS and focus it. ")])]),t("tr",[t("td",[e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.C_L_A))+" ")]),t("td",[e._v(" Open the active element's Advanced  Classes autocomplete and focus it. ")])]),t("tr",[t("td",[e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.F))+" ")]),t("td",[e._v("Focus the properties search box.")])]),t("tr",[t("td",[e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.SHIFT_F))+" ")]),t("td",[e._v(" Focus the properties search box and toggle the option to search advanced settings (element properties panel only). ")])]),t("tr",[t("td",[e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.CMD_I))+" ")]),t("td",[e._v(" Toggle the modified option in the properties search box. ")])]),t("tr",[t("td",[e._v(" "+e._s(e.getKeyboardShortcutValue(e.keyboardShortcuts.OPTION_P))+" ")]),t("td",[e._v("Toggle the preview mode.")])])])])])],1)],1)],1)},Gc=[];let Kc=class extends s.ZP{get keyboardShortcuts(){return sn.r}getKeyboardShortcutValue(e){const t=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);let n=e?e[0]:"";return t||2!=e.length||(n=e[1]),n.toUpperCase().split("+").join(" + ")}};(0,r.gn)([(0,l.fI)()],Kc.prototype,"open",void 0),Kc=(0,r.gn)([(0,l.wA)({components:{}})],Kc);const jc=Kc,qc=jc;var Xc=(0,Y.Z)(qc,zc,Gc,!1,null,null,null);const Yc=Xc.exports;var Qc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio",style:e.styles},[t("ElementStudioWidthAdjustmentBar",{on:{change:e.adjustWidth}}),t("div",{staticClass:"element-studio-wrapper",attrs:{"data-test-id":"element-studio-wrapper"}},[e.activeItemType&&"element"!==e.activeItemType?e._e():t("ElementStudioElements",{attrs:{value:e.data,width:e.width},on:{input:e.updateData,width:e.updateWidth,active:e.updateActiveItemType}}),e.activeItemType&&"macro"!==e.activeItemType?e._e():t("ElementStudioMacros",{attrs:{value:e.data},on:{input:e.updateData,active:e.updateActiveItemType}}),e.activeItemType&&"preset"!==e.activeItemType?e._e():t("ElementStudioPresets",{attrs:{value:e.data},on:{input:e.updateData,active:e.updateActiveItemType}}),e.activeItemType?e._e():t("div",{staticClass:"d-flex flex-column align-center justify-center pa-6"},[t("h4",[e._v("Element Studio is for developers and is provided as-is.")]),e._m(0)])],1)],1)},Jc=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[t("small",[e._v(" No support is provided. Please read the "),t("a",{attrs:{href:"https://breakdance.com/documentation/developers/element-studio/",target:"_blank"}},[e._v("documentation")]),e._v(" before use. ")])])}],ed=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ElementStudioWidthAdjustmentBarAdjustmentHandle",{staticClass:"element-studio-width-adjustment-bar",attrs:{"on-dragging":e.dragging}})},td=[],nd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",e._g(e._b({staticClass:"breakdance-element-studio-adjustment-handle",on:{mousedown:e.dragStart}},"div",e.$attrs,!1),e.$listeners),[e._t("default")],2)},sd=[];let ad=class extends s.ZP{constructor(){super(...arguments),this.lastMouseX=0}draggingFunc(e){e.preventDefault(),this.onDragging(e,this.lastMouseX),this.lastMouseX=e.clientX}dragStart(e){e.preventDefault(),e.stopPropagation(),document.addEventListener("mousemove",this.draggingFunc),document.addEventListener("mouseup",this.dragEnd),this.lastMouseX=e.clientX,document.getElementById("iframe").style.pointerEvents="none"}dragEnd(e){e.preventDefault(),document.removeEventListener("mousemove",this.draggingFunc),document.removeEventListener("mouseup",this.dragEnd),document.getElementById("iframe").style.pointerEvents="auto"}};(0,r.gn)([(0,l.fI)()],ad.prototype,"onDragging",void 0),ad=(0,r.gn)([(0,l.wA)({})],ad);const id=ad,od=id;var rd=(0,Y.Z)(od,nd,sd,!1,null,null,null);const ld=rd.exports;let cd=class extends s.ZP{dragging(e,t){this.$emit("change",-1*(e.clientX-t))}};cd=(0,r.gn)([(0,l.wA)({components:{ElementStudioWidthAdjustmentBarAdjustmentHandle:ld}})],cd);const dd=cd,ud=dd;var pd=(0,Y.Z)(ud,ed,td,!1,null,null,null);const hd=pd.exports;var md=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{"element-studio-wrapper":e.currentlyEditingElement}},[t("ElementStudioTopbar",{attrs:{"save-locations":e.value.saveLocations,"items-slug":e.elementsSlug,value:e.currentlyEditingElement,itemType:"element","item-name":e.currentlyEditingElement?e.currentlyEditingElement.element.name:"",hasUnsavedChanges:e.hasUnsavedChanges,saveInProgress:e.saveInProgress},on:{open:e.openElement,switchMode:e.switchMode,delete:e.deleteElement,saveOverride:e.saveOverride,saveAs:e.saveAs,saveNew:e.saveNewItem,discardChanges:e.discardChanges,reset:e.resetCurrentlyEditingElement}}),e.currentlyEditingElement?t("div",{staticClass:"element-studio-content"},["split-vertical"===e.mode?[t("div",{staticClass:"panel-50 panel-50-top-panel vscroll-scroll"},[t("ElementStudioTabsAndPanels",{attrs:{available:e.value,element:e.currentlyEditingElement.element},on:{input:e.updateElement,update:e.updateData}})],1),t("div",{staticClass:"panel-50 vscroll-scroll"},[t("ElementStudioTabsAndPanels",{attrs:{available:e.value,element:e.currentlyEditingElement.element,type:"secondary"},on:{input:e.updateElement,update:e.updateData}})],1)]:"split-horizontal"===e.mode?[t("div",{staticClass:"d-flex flex-row",staticStyle:{height:"100%"}},[t("div",{staticClass:"panel-50-h panel-50-h-first-panel vscroll-scroll"},[t("ElementStudioTabsAndPanels",{attrs:{available:e.value,element:e.currentlyEditingElement.element},on:{input:e.updateElement,update:e.updateData}})],1),t("div",{staticClass:"panel-50-h vscroll-scroll"},[t("ElementStudioTabsAndPanels",{attrs:{available:e.value,element:e.currentlyEditingElement.element,type:"secondary"},on:{input:e.updateElement,update:e.updateData}})],1)])]:[t("div",{staticClass:"panel-100 vscroll-scroll"},[t("ElementStudioTabsAndPanels",{attrs:{available:e.value,element:e.currentlyEditingElement.element},on:{input:e.updateElement,update:e.updateData}})],1)]],2):e._e()],1)},gd=[],vd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-top-bar d-flex"},[e.showNewItemDialog?t("ElementStudioSaveNewDialog",{attrs:{"save-locations":e.saveLocations,"item-type":e.itemType},on:{input:e.saveNewItem,close:function(t){e.showNewItemDialog=!1}}}):e._e(),t("div",{staticClass:"d-flex ml-4"},[e.value?e._e():[t("Dropdown",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:s}){return[t(os.Z,e._g(e._b({attrs:{text:"",disabled:0===e.itemsSlug.length,"data-test-id":"element-studio-open-element"}},"v-btn",s,!1),n),[t("Icon",{staticClass:"mr-2",attrs:{icon:"OpenFolderIcon",size:"18"}}),e._v(" Open "+e._s(e.itemType)+" ")],1)]}}],null,!1,4260211493)},[t(La.Z,{staticStyle:{"max-height":"500px",overflow:"auto"}},[t(pi.Z,{staticClass:"breakdance-element-studio-searchbar",staticStyle:{padding:"12px 16px","margin-bottom":"24px"},attrs:{label:`Search ${e.itemType}s`,flat:"",autofocus:""},model:{value:e.availableItemsSearch,callback:function(t){e.availableItemsSearch=t},expression:"availableItemsSearch"}}),e._l(e.availableItemsBySearch,(function(n,s){return t($a.Z,{key:s,attrs:{dense:""},on:{click:function(t){return e.openItem(n)}}},[t(Wa.V9,[e._v(" "+e._s(n)+" ")])],1)}))],2)],1),t(os.Z,{staticClass:"ml-2",attrs:{text:"","data-test-id":"element-studio-new-element-button"},on:{click:e.handleNewItem}},[t("Icon",{staticClass:"mr-2",attrs:{icon:"AddFileIcon"}}),e._v(" New "+e._s(e.itemType)+" ")],1)],e.value?[t("div",{staticClass:"d-flex align-center flex-wrap"},[t("div",{staticClass:"mr-2 element-studio-element-name"},[e._v(" "+e._s(e.itemName)+" ")]),t("Dropdown",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:s}){return[t("div",[e.value.directoryPath&&e.canSaveOrIsAdvancedUser?t("NiceButton",e._b({staticClass:"ma-2",attrs:{loading:e.saveInProgress,"data-test-id":"element-studio-save-button",title:"Save element","left-icon":"SaveIcon"},on:{contextmenu:function(e){return e.preventDefault(),n.click.apply(null,arguments)},click:function(t){e.saveOverwrite(!1)}}},"NiceButton",s,!1),[e._v(" Save ")]):!e.value.directoryPath||e.value.onlyForAdvancedUsers?t("NiceButton",e._g(e._b({staticClass:"ma-2",attrs:{loading:e.saveInProgress,"data-test-id":"element-studio-save-button",title:"Save element","left-icon":"SaveIcon"},on:{contextmenu:function(e){return e.preventDefault(),n.click.apply(null,arguments)}}},"NiceButton",s,!1),n),[e._v(" Save ")]):e._e()],1)]}}],null,!1,3543840629)},[t(La.Z,[e.value.directoryPath?[e.showAdvancedFeatures?t($a.Z,{attrs:{dense:""},on:{click:function(t){return e.saveOverwrite(!0)}}},[t(Wa.V9,[t("h3",[e._v("Save & Bypass Psalm...")])])],1):e.canSaveOrIsAdvancedUser?t($a.Z,{attrs:{dense:""},on:{click:function(t){return e.saveOverwrite(!0)}}},[t(Wa.V9,[t("h3",[e._v("Save")])])],1):e._e()]:e._e(),t($a.Z,{attrs:{dense:""}},[t(Wa.V9,[e.availableSaveLocations.length?t("h3",[e._v("Save A Copy In:")]):t("div",[e._v(" Enable saving elements by "),t("a",{attrs:{href:"https://github.com/soflyy/breakdance-custom-elements/",target:"_blank"}},[e._v("adding a save location.")])])])],1),e._l(e.availableSaveLocations,(function(n,s){return[t($a.Z,{key:s,attrs:{dense:""},on:{click:function(t){return e.saveAs(n)}}},[t(Wa.V9,[e._v(" "+e._s(n.label)+"  ")])],1)]}))],2)],1),e.canDeleteElement?t(mr.Z,{attrs:{"max-width":"360"},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:s}){return[t("NiceButton",e._g(e._b({staticClass:"mr-2",attrs:{elevation:"0","data-test-id":"element-studio-delete-button",title:"Delete element","left-icon":"TrashIcon"}},"NiceButton",s,!1),n),[e._v(" Delete ")])]}}],null,!1,2278590123),model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[t(ui.Z,[t(ki.EB,{staticClass:"subtitle-1"},[e._v(' Delete "'+e._s(e.itemName)+'" '+e._s(e.itemType)+"? ")]),t(ki.ZB,[e._v("This action cannot be undone.")]),t(ki.h7,[t(xa.Z),t(os.Z,{attrs:{text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v(" Cancel ")]),t(os.Z,{attrs:{color:"red darken-1",text:""},on:{click:e.deleteItem}},[e._v(" Delete ")])],1)],1)],1):e._e(),t(os.Z,{attrs:{icon:"","data-test-id":"element-studio-close-element",title:`Close ${e.itemType}`},on:{click:e.closeItem}},[t("Icon",{attrs:{icon:"CloseSquareIcon"}})],1)],1)]:e._e()],2),t(xa.Z),e.value?t(os.Z,{staticClass:"mr-1 element-studio-switch-mode",attrs:{icon:"",title:"Switch mode","data-test-id":"element-studio-topbar-switch-mode"},on:{click:e.switchMode}},[t("Icon",{attrs:{icon:"TableColumnIcon",size:"18"}})],1):e._e(),t(os.Z,{staticClass:"mr-4 element-studio-close-panel",attrs:{icon:"",title:"Close Element Studio Panel"},on:{click:e.closePanel}},[t("Icon",{attrs:{icon:"CloseCircleIcon",size:"18"}})],1),t(mr.Z,{attrs:{value:e.closeItemOrPanelDialog,persistent:"","max-width":"400"}},[t(ui.Z,[t(ki.EB,{staticClass:"headline"},[e._v(" You have unsaved changes ")]),t(ki.ZB,[e._v(" Please save your changes before closing this "+e._s(e.itemType)+", or discard your changes. ")]),t(ki.h7,[t(xa.Z),t(os.Z,{attrs:{color:"red darken-1",text:""},on:{click:e.discardChanges}},[e._v(" Discard my changes ")]),t(os.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.closeItemOrPanelDialog=!1}}},[e._v(" I'll save them ")])],1)],1)],1)],1)},fd=[],yd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(mr.Z,{attrs:{value:!0,"max-width":"400",persistent:""}},[t(ui.Z,[t(ki.EB,{staticClass:"headline"},[e._v(" Create new "+e._s(e.itemType)+" ")]),t(ki.ZB,{staticClass:"pb-1"},[t("div",[e._v("Please enter the "+e._s(e.itemType)+"'s name.")])]),t(ki.ZB,[t(pi.Z,{attrs:{rules:[e.nameIsValid],label:"Name"},model:{value:e.newItemName,callback:function(t){e.newItemName=t},expression:"newItemName"}}),e.saveLocations.length?t(Ul.Z,{attrs:{mandatory:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" Select a saving location ")]},proxy:!0}]),model:{value:e.newItemSaveLocation,callback:function(t){e.newItemSaveLocation=t},expression:"newItemSaveLocation"}},[e._l(e.saveLocations,(function(n){return[e.showSaveLocation(n)?t(Hl.Z,{key:n.directoryPath,attrs:{label:n.label,value:n}}):e._e()]}))],2):[t("b",[e._v("Error: no registered saving locations. Using the "),t("a",{attrs:{href:"https://github.com/soflyy/breakdance-custom-elements"}},[e._v("Breakdance Custom Elements")]),e._v(" plugin will automatically register a saving location.")])]],2),t(ki.h7,[t(xa.Z),t(os.Z,{attrs:{color:"green darken-1",text:""},on:{click:e.closeNewItemDialog}},[e._v(" Cancel ")]),t(os.Z,{attrs:{color:"blue darken-1",text:"",disabled:!0!==e.nameIsValid(e.newItemName)||!e.newItemSaveLocation},on:{click:e.saveNewItem}},[e._v(" Create ")])],1)],1)],1)},bd=[],Pd=n(91362);let _d=class extends s.ZP{constructor(){super(...arguments),this.newItemDialog=!1,this.newItemName="",this.newItemSaveLocation=!1}nameIsValid(e){return(0,Pd.nQ)(e)}get showAdvancedFeatures(){return(0,Oc.y)()||ft.PK.isElementStudioPowerUser}showSaveLocation(e){return e.type===this.itemType&&(!e.onlyForAdvancedUsers||this.showAdvancedFeatures)}saveNewItem(){this.$emit("input",{...this.newItemSaveLocation,name:this.newItemName}),this.closeNewItemDialog()}closeNewItemDialog(){this.newItemDialog=!1,this.newItemName="",this.newItemSaveLocation=!1,this.$emit("close")}};(0,r.gn)([(0,l.fI)()],_d.prototype,"saveLocations",void 0),(0,r.gn)([(0,l.fI)()],_d.prototype,"itemType",void 0),_d=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z}})],_d);const Sd=_d,Cd=Sd;var wd=(0,Y.Z)(Cd,yd,bd,!1,null,null,null);const kd=wd.exports;let xd=class extends s.ZP{constructor(){super(...arguments),this.deleteDialog=!1,this.availableItemsSearch="",this.closeItemOrPanelDialog=!1,this.showNewItemDialog=!1}mounted(){document.addEventListener("breakdanceSaveButtonClicked",this.mainAppSaveButtonClicked),this.warnIfUnsavedFunction=(0,Ba.$)((()=>this.hasUnsavedChanges))}destroyed(){document.removeEventListener("breakdanceSaveButtonClicked",this.mainAppSaveButtonClicked)}beforeDestroy(){(0,Ba.e)(this.warnIfUnsavedFunction)}handleNewItem(){this.showNewItemDialog=!0}get availableSaveLocations(){return this.saveLocations.filter((e=>this.showSaveLocation(e)))}get availableItemsBySearch(){return this.itemsSlug.filter((e=>e.toLowerCase().includes(this.availableItemsSearch.toLowerCase().replace(/ /g,""))))}get canDeleteElement(){return!!this.value&&this.availableSaveLocations.find((e=>this.value&&this.value.directoryPath&&this.value.directoryPath.startsWith(e.directoryPath)))}discardChanges(){"panel"===this.closeItemOrPanelDialog&&c.kD.toggleElementStudio(),this.closeItemOrPanelDialog=!1,this.$emit("discardChanges")}mainAppSaveButtonClicked(){this.hasUnsavedChanges&&confirm(`Also save your Element Studio ${this.itemType}?`)&&this.saveOverwrite(!1)}openItem(e){this.availableItemsSearch="",this.$emit("open",e)}closeItem(){this.hasUnsavedChanges?this.closeItemOrPanelDialog="item":this.$emit("reset")}closePanel(){this.hasUnsavedChanges?this.closeItemOrPanelDialog="panel":c.kD.toggleElementStudio()}saveNewItem(e){this.$emit("saveNew",e)}saveAs(e){this.$emit("saveAs",e)}saveOverwrite(e){this.value&&this.value.directoryPath&&this.canSaveOrIsAdvancedUser&&this.$emit("saveOverride",e)}showSaveLocation(e){return e.type===this.itemType&&(!e.onlyForAdvancedUsers||this.showAdvancedFeatures)}get showAdvancedFeatures(){return(0,Oc.y)()||c.PK.isElementStudioPowerUser}get canSaveOrIsAdvancedUser(){return this.value&&(!this.value.onlyForAdvancedUsers||this.showAdvancedFeatures)}deleteItem(){this.deleteDialog=!1,this.$emit("delete")}switchMode(){this.$emit("switchMode")}};(0,r.gn)([(0,l.fI)()],xd.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],xd.prototype,"saveLocations",void 0),(0,r.gn)([(0,l.fI)()],xd.prototype,"hasUnsavedChanges",void 0),(0,r.gn)([(0,l.fI)()],xd.prototype,"itemType",void 0),(0,r.gn)([(0,l.fI)()],xd.prototype,"itemName",void 0),(0,r.gn)([(0,l.fI)()],xd.prototype,"saveInProgress",void 0),(0,r.gn)([(0,l.fI)()],xd.prototype,"itemsSlug",void 0),xd=(0,r.gn)([(0,l.wA)({components:{ElementStudioSaveNewDialog:kd,NiceButton:io.Z,Icon:K.Z,Dropdown:za.Z}})],xd);const Id=xd,Dd=Id;var Ed=(0,Y.Z)(Dd,vd,fd,!1,null,null,null);const Zd=Ed.exports;var Td=n(1387),Ad=n(46072),Bd=n(197),Od=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-tabs-panel d-flex flex-column",staticStyle:{height:"100%"}},[e.showNewMacroDialog?t("ElementStudioSaveNewDialog",{attrs:{"save-locations":e.available.saveLocations,"item-type":"macro"},on:{input:e.saveNewMacro,close:function(t){e.showNewMacroDialog=!1}}}):e._e(),t("Dropdown",{attrs:{value:!!e.contextMenu,absolute:!0,"position-x":e.contextMenu.x,"position-y":e.contextMenu.y,transition:!1},on:{input:function(t){e.contextMenu=!1}},scopedSlots:e._u([{key:"activator",fn:function(){return[e._t("default")]},proxy:!0}],null,!0)},[t(La.Z,{attrs:{dense:""}},[t($a.Z,{attrs:{link:!0},nativeOn:{click:function(t){return e.handleCreateMacro.apply(null,arguments)}}},[t(Wa.V9,[e._v("Make into a macro")])],1)],1)],1),t("div",{staticClass:"element-studio-tabs"},[t(Nr.Z,{attrs:{value:e.tab},on:{change:e.updateTab}},[t(Fr.Z,{attrs:{href:"#content",title:"Content","data-test-id":"element-studio-content-tab"}},[t("Icon",{attrs:{icon:"PenIcon",size:"16"}})],1),t(Fr.Z,{attrs:{href:"#design",title:"Design","data-test-id":"element-studio-design-tab"}},[t("Icon",{attrs:{icon:"PaletteIcon",size:"16"}})],1),t(Fr.Z,{attrs:{href:"#html",title:"HTML","data-test-id":"element-studio-html-tab"}},[t("Icon",{attrs:{icon:"CodeIcon",size:"16"}})],1),t(Fr.Z,{attrs:{href:"#css",title:"CSS","data-test-id":"element-studio-css-tab"}},[t("Icon",{attrs:{icon:"Css3Icon",size:"16"}})],1),t(Fr.Z,{attrs:{href:"#defaultCss",title:"Default CSS","data-test-id":"element-studio-default-css-tab"}},[t("Icon",{attrs:{icon:"CssIcon",size:"16"}})],1),e.nestingRuleTypeIsContainer?t(Fr.Z,{attrs:{href:"#default-elements",title:"Default Elements","data-test-id":"element-studio-default-elements"}},[t("Icon",{attrs:{icon:"BoxIcon",size:"16"}})],1):e._e(),t(Fr.Z,{attrs:{href:"#attributes",title:"HTML Attributes","data-test-id":"element-studio-attributes"}},[t("Icon",{attrs:{icon:"AttributesIcon",size:"16"}})],1),t(Fr.Z,{attrs:{href:"#prop-paths",title:"Property Paths","data-test-id":"element-studio-property-paths"}},[t("Icon",{attrs:{icon:"SlidersSimpleIcon",size:"16"}})],1),t(Fr.Z,{attrs:{href:"#dependencies",title:"Dependencies","data-test-id":"element-studio-dependencies-tab"}},[t("Icon",{attrs:{icon:"DownloadFileIcon",size:"16"}})],1),t(Fr.Z,{attrs:{href:"#actions",title:"Actions","data-test-id":"element-studio-actions-tab"}},[t("Icon",{attrs:{icon:"ActionsIcon",size:"16"}})],1),t(Fr.Z,{attrs:{href:"#settings",title:"Settings","data-test-id":"element-studio-settings-tab"}},[t("Icon",{attrs:{icon:"CogsIcon",size:"16"}})],1)],1)],1),t("div",{staticClass:"element-studio-tabs-items vscroll-scroll"},["settings"===e.tab?t("div",[t($a.Z,{attrs:{"two-line":""}},[t(Wa.km,[t(Wa.V9,{staticClass:"font-weight-bold"},[e._v("Slug")]),t(Wa.oZ,[e._v(" "+e._s(e.element.slug))])],1)],1),t("div",{staticClass:"px-4 pt-2"},[t("div",{staticClass:"d-flex align-center"},[t(pi.Z,{attrs:{label:"Name",value:e.element.name,"data-test-id":"element-studio-name-input",rules:[e.isValidItemName]},on:{input:e.updateElementName}}),e.nameHasChanged?t(os.Z,{staticClass:"ml-3",attrs:{outlined:"",small:""},on:{click:e.updateSlug}},[e._v(" Update slug ")]):e._e()],1),t(pi.Z,{staticClass:"mb-4",attrs:{label:"Class Name",placeholder:"the_best_class",value:e.element.className||"","data-test-id":"element-studio-classname-input","persistent-hint":"",hint:"Updating the Class Name will make the previous class obsolete. You'll need to update your CSS",rules:[e.htmlClassNameRule]},on:{input:e.updateClassName}}),t(zl.Z,{attrs:{items:e.elementCategories,label:"Category",value:e.cleanElement.category},on:{input:function(t){return e.updateElementValue("category",t)}}}),t("div",{staticClass:"breakdance-element-studio-element-badges"},[t(Td.Z,{attrs:{clearable:"",items:e.badgeColors,value:!!e.cleanElement.badge&&e.cleanElement.badge.backgroundColor,label:"Badge Background"},on:{input:function(t){return e.updateElementValue("badge.backgroundColor",t)}}}),t(Td.Z,{attrs:{clearable:"",items:e.badgeColors,value:!!e.cleanElement.badge&&e.cleanElement.badge.textColor,label:"Badge Text"},on:{input:function(t){return e.updateElementValue("badge.textColor",t)}}}),t(pi.Z,{attrs:{label:"Badge Label",value:!!e.cleanElement.badge&&e.cleanElement.badge.label},on:{input:function(t){return e.updateElementValue("badge.label",t)}}}),t(os.Z,{attrs:{outlined:"",small:""},on:{click:function(t){return e.updateElementValue("badge",!1)}}},[e._v("clear badge")])],1),t("h3",[e._v("HTML Tag options")]),t("div",{staticClass:"breakdance-element-studio__html-tags"},[t(Td.Z,{attrs:{label:"Default Tag",value:e.cleanElement.htmlTag.default,hint:"Tag of the root element",clearable:"",items:e.defaultTag},on:{input:function(t){return e.updateElementValue("htmlTag.default",t)}}}),t(Td.Z,{attrs:{label:"Tag Options",value:e.cleanElement.htmlTag.options,items:e.htmlTags,multiple:!0,clearable:""},on:{input:function(t){return e.updateElementValue("htmlTag.options",t)}}}),t(Td.Z,{attrs:{label:"Get the Tag from a Control's path",value:e.cleanElement.htmlTag.pathToControl||"",items:e.pathsToAllControls,hint:"This will disable the 'Settings -> Html -> Tag' control",clearable:""},on:{input:function(t){return e.updateElementValue("htmlTag.pathToControl",t)}}})],1),t("h3",[e._v("UI Icon")]),t("div",{staticClass:"mb-5 d-flex align-center"},[e.showAdvancedFeatures?[t("ToggleInput",{attrs:{value:e.useLocalIcon},on:{input:e.updateUseLocalIcon}}),t("span",{staticClass:"mr-4"},[e._v("Local")])]:e._e(),t("div",{staticClass:"d-flex align-center"},[t("ElementIcon",{staticClass:"mr-2",attrs:{icon:e.cleanElement.uiIcon||"SquareIcon",size:"16"}}),e.useLocalIcon&&e.showAdvancedFeatures?t("ElementStudioIconsAutocomplete",{attrs:{value:e.cleanElement.uiIcon||"SquareIcon"},on:{input:e.updateUiIcon}}):t(pi.Z,{attrs:{label:"SVG code for icon",value:e.cleanElement.uiIcon,"data-test-id":"element-studio-ui-icon-input"},on:{input:e.updateUiIcon}})],1)],2),t(pi.Z,{attrs:{label:"UI Order (number)",value:e.cleanElement.order},on:{input:e.updateUiOrder}}),t("h3",[e._v("Nesting rules")]),t(Td.Z,{attrs:{items:e.containerRestrictedElements,label:"Element to be a direct child of",hint:"This element will only be allowed as a direct child of the selected elements","persistent-hint":"",value:e.cleanElement.nestingRule.restrictedToBeADirectChildOf,multiple:""},on:{input:function(t){e.updateElementValue("nestingRule.restrictedToBeADirectChildOf",Array.isArray(t)&&0===t.length?void 0:t)}}}),t(Td.Z,{staticClass:"mt-4",attrs:{items:e.elementsThisElementIsAllowedToBeInsideOf,label:"Element to be a descendant of",hint:"This element will only be allowed inside the selected elements","persistent-hint":"",value:e.cleanElement.nestingRule.restrictedToBeADescendantOf,multiple:""},on:{input:function(t){e.updateElementValue("nestingRule.restrictedToBeADescendantOf",Array.isArray(t)&&0===t.length?void 0:t)}}}),t(Td.Z,{staticClass:"mt-4",attrs:{items:e.allElementSlugs,label:"Disallow if others are present",hint:"This element will not be allowed on a page if one of the following elements is already present on the page","persistent-hint":"",value:e.cleanElement.nestingRule.notAllowedWhenNodeTypeIsPresentInTree,multiple:""},on:{input:function(t){e.updateElementValue("nestingRule.notAllowedWhenNodeTypeIsPresentInTree",Array.isArray(t)&&0===t.length?void 0:t)}}}),t("h3",[e._v("Misc options")]),t(zl.Z,{attrs:{items:e.elementType,label:"Element Type",value:e.cleanElement.nestingRule.type,hint:"Only change to create complex elements","persistent-hint":""},on:{input:function(t){return e.updateElementValue("nestingRule.type",t)}}}),t(Bd.Z,{staticClass:"mt-3",attrs:{label:"Required plugins",items:e.requiredPluginItems,"hide-details":"",value:e.cleanElement.settings?e.cleanElement.settings.requiredPlugins:[],multiple:!0},on:{input:function(t){return e.updateElementValue("settings.requiredPlugins",t&&t.length?t:void 0)}}}),t(Ad.Z,{attrs:{label:"Is Pro Only","input-value":e.cleanElement.settings&&e.cleanElement.settings.proOnly,"hide-details":""},on:{change:function(t){return e.updateElementValue("settings.proOnly",!!t)}}}),t(Ad.Z,{attrs:{label:"Element depends on global scripts to work","input-value":e.cleanElement.settings&&e.cleanElement.settings.dependsOnGlobalScripts,"hide-details":""},on:{change:function(t){return e.updateElementValue("settings.dependsOnGlobalScripts",!!t)}}}),t(Ad.Z,{attrs:{label:"Experimental Element?","input-value":e.cleanElement.experimental,"hide-details":""},on:{change:function(t){return e.updateElementValue("experimental",!!t)}}}),t(Ad.Z,{attrs:{label:"Bypass Pointer Events",hint:"Use this if clicking on the element doesn't active it, but instead clicks something inside of it","persistent-hint":"","input-value":e.cleanElement.settings&&e.cleanElement.settings.bypassPointerEvents},on:{change:function(t){return e.updateElementValue("settings.bypassPointerEvents",!!t)}}}),t(Ad.Z,{attrs:{label:"Disable AI",hint:"Use this if you want to disable the AI for this element","persistent-hint":"","input-value":e.cleanElement.settings&&e.cleanElement.settings.disableAI},on:{change:function(t){return e.updateElementValue("settings.disableAI",!!t)}}}),t(Ad.Z,{attrs:{label:"Share props with SSR children",hint:"Use this if you need to access the properties data from this element in a child SSR element.","persistent-hint":"","input-value":e.cleanElement.settings&&e.cleanElement.settings.sharePropsWithSSRChildren},on:{change:function(t){return e.updateElementValue("settings.shareStateWithChildSSR",!!t)}}}),t("div",{staticClass:"pt-4"},[t("h3",[e._v("Add panel rules")]),t(Ad.Z,{attrs:{label:"Always hide element from the Add Panel","input-value":e.cleanElement.addPanelRules&&e.cleanElement.addPanelRules.alwaysHide,"hide-details":""},on:{change:function(t){return e.updateElementValue("addPanelRules.alwaysHide",!!t)}}}),e.cleanElement.addPanelRules&&e.cleanElement.addPanelRules.alwaysHide?e._e():[t(Bd.Z,{attrs:{label:"Allowed post type",items:["breakdance_template"],"hide-details":"",value:e.cleanElement.addPanelRules?e.cleanElement.addPanelRules.allowedPostTypes:[],multiple:!0},on:{input:function(t){return e.updateElementValue("addPanelRules.allowedPostTypes",t&&t.length?t:void 0)}}})]],2),t("ElementStudioDefaultProperties",{staticClass:"my-8",attrs:{elementSlug:e.cleanElement.slug,value:e.cleanElement.defaultProperties},on:{input:function(t){return e.updateElementValue("defaultProperties",t)}}})],1)],1):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:"design"===e.tab,expression:"tab === 'design'"}]},[t("ElementStudioControls",{attrs:{value:e.cleanElement.controls,section:"design"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"content"===e.tab,expression:"tab === 'content'"}]},[t("ElementStudioControls",{attrs:{value:e.cleanElement.controls,section:"content"}})],1),"html"===e.tab?t("div",[t("CodeInput",{attrs:{value:e.cleanElement.template,tags:e.tags,"twig-variables":e.pathsToAllControls,language:"html"},on:{input:function(t){return e.updateElementValue("template",t||"")}}})],1):e._e(),"css"===e.tab?t("div",[t("CodeInput",{attrs:{value:e.cleanElement.cssTemplate,tags:e.tags,"twig-variables":e.pathsToAllControls,language:"css"},on:{input:function(t){return e.updateElementValue("cssTemplate",t||"")}}})],1):e._e(),"defaultCss"===e.tab?t("div",[t("div",{staticClass:"px-4 py-2"},[e._v(" Element's class: "),t("span",{staticClass:"font-weight-bold mr-2"},[e._v(e._s(e.elementClass))]),t("CopyButton",{attrs:{"value-to-copy":".breakdance "+e.elementClass}})],1),t("CodeInput",{attrs:{value:e.cleanElement.defaultCss,language:"css"},on:{input:function(t){return e.updateElementValue("defaultCss",t||"")}}})],1):e._e(),e.nestingRuleTypeIsContainer?t("div",{directives:[{name:"show",rawName:"v-show",value:"default-elements"===e.tab,expression:"tab === 'default-elements'"}],staticClass:"studio-default-elements-panel"},[t("ElementStudioDefaultElements",{attrs:{value:e.cleanElement.defaultChildren,"parent-element-slug":e.cleanElement.slug},on:{input:function(t){return e.updateElementValue("defaultChildren",t||"")}}})],1):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:"attributes"===e.tab,expression:"tab === 'attributes'"}],staticClass:"studio-dependencies-panel"},[e._v(" Attributes are added to the container of the element "),t("ElementStudioAttributes",{attrs:{value:e.cleanElement.attributes},on:{input:function(t){return e.updateElementValue("attributes",t)}}}),t("br"),e._v(" Classes are added to the container of the element "),t("ElementStudioAdditionalClasses",{attrs:{value:e.cleanElement.additionalClasses||[]},on:{input:function(t){return e.updateElementValue("additionalClasses",t)}}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"prop-paths"===e.tab,expression:"tab === 'prop-paths'"}]},[t("ElementStudioManagePropertyPaths",{attrs:{value:e.cleanElement}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"dependencies"===e.tab,expression:"tab === 'dependencies'"}],staticClass:"studio-dependencies-panel"},[t("ElementStudioDependencies",{attrs:{value:e.cleanElement.dependencies}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"actions"===e.tab,expression:"tab === 'actions'"}]},[t("ElementStudioAction",{attrs:{"action-key":"onPropertyChange",value:e.cleanElement.actions,"accordion-state":e.actionsAccordionState},on:{toggle:e.toggleActionAccordion},scopedSlots:e._u([{key:"action-description",fn:function(){return[e._v(" Runs after one of this element's property changes (a value in a control) ")]},proxy:!0},{key:"dependency-description-title",fn:function(){return[e._v(" Based on the "),t("b",[e._v("control's path")]),e._v(". ")]},proxy:!0},{key:"dependency-description",fn:function(){return[t("code",[e._v("design.background.color")]),e._v(": action will only run for that path. "),t("code",[e._v("design.background.*")]),e._v(": action will run for any control below 'background' ")]},proxy:!0}])}),t("ElementStudioAction",{attrs:{"action-key":"onMovedElement",value:e.cleanElement.actions,"accordion-state":e.actionsAccordionState},on:{toggle:e.toggleActionAccordion},scopedSlots:e._u([{key:"action-description",fn:function(){return[e._v(" Runs after this element is moved in the canvas ")]},proxy:!0},{key:"dependency-description-title",fn:function(){return[e._v(" Based on the "),t("b",[e._v("element's and moved-on element's type ")]),e._v(". ")]},proxy:!0},{key:"dependency-description",fn:function(){return[t("code",[e._v("EssentialElements\\Text")]),e._v(": action will only run if element being moved is of that type, "),t("b",[e._v("OR")]),e._v(" if the element was moved onto an element with that type. ")]},proxy:!0}])}),t("ElementStudioAction",{attrs:{"action-key":"onAfterDeletedElement",value:e.cleanElement.actions,"accordion-state":e.actionsAccordionState},on:{toggle:e.toggleActionAccordion},scopedSlots:e._u([{key:"action-description",fn:function(){return[e._v(" Runs AFTER this element was deleted "),t("br")]},proxy:!0},{key:"dependency-description-title",fn:function(){return[e._v(" Based on the "),t("b",[e._v("deleted element's parent type")]),e._v(". ")]},proxy:!0},{key:"dependency-description",fn:function(){return[t("code",[e._v("EssentialElements\\Section")]),e._v(": action will only run if the deleted element was inside a Section element. ")]},proxy:!0}])}),t("ElementStudioAction",{attrs:{"action-key":"onBeforeDeletingElement",value:e.cleanElement.actions,"accordion-state":e.actionsAccordionState,"with-dependencies":!1},on:{toggle:e.toggleActionAccordion},scopedSlots:e._u([{key:"action-description",fn:function(){return[e._v(" Runs BEFORE this element is deleted ")]},proxy:!0}])}),t("ElementStudioAction",{attrs:{"action-key":"onMountedElement",value:e.cleanElement.actions,"accordion-state":e.actionsAccordionState,"with-dependencies":!1},on:{toggle:e.toggleActionAccordion},scopedSlots:e._u([{key:"action-description",fn:function(){return[e._v(" Runs after this element renders in the canvas ")]},proxy:!0}])}),t("ElementStudioAction",{attrs:{"action-key":"onCreatedElement",value:e.cleanElement.actions,"accordion-state":e.actionsAccordionState,"with-dependencies":!1},on:{toggle:e.toggleActionAccordion},scopedSlots:e._u([{key:"action-description",fn:function(){return[e._v(" Runs after adding this element to the canvas for the first time ")]},proxy:!0}])}),t("ElementStudioAction",{attrs:{"action-key":"onActivatedElement",value:e.cleanElement.actions,"accordion-state":e.actionsAccordionState,"with-dependencies":!1},on:{toggle:e.toggleActionAccordion},scopedSlots:e._u([{key:"action-description",fn:function(){return[e._v(" Runs after the element is activated (selected) ")]},proxy:!0}])})],1)])],1)},Rd=[],Md=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("draggable",{attrs:{value:e.value[this.sectionName]},on:{input:e.handleDrag}},e._l(e.value[this.sectionName],(function(n,s){return t("ControlSectionOrControl",{key:n.slug,attrs:{value:n,index:s,path:`${e.sectionName}[${s}]`,parentPath:e.sectionName,twigParentPath:e.section}})})),1),t("div",{staticClass:"text-center py-4"},[t(os.Z,{attrs:{tile:"",text:"","data-test-id":"element-studio-add-control-section"},on:{click:e.addSection}},[e._v(" Add Control Section ")]),t(os.Z,{attrs:{tile:"",text:""},on:{click:e.addPreset}},[e._v(" Add Preset ")]),e.canPaste?t(os.Z,{attrs:{tile:"",text:""},on:{click:e.handlePaste}},[e._v(" Paste ")]):e._e()],1)],1)},Fd=[],Nd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.showNewPresetDialog?t("ElementStudioSaveNewDialog",{attrs:{"item-type":"preset","save-locations":e.elementStudioData.saveLocations},on:{input:e.saveNewPreset,close:function(t){e.showNewPresetDialog=!1}}}):e._e(),t("div",{class:e.classList},[t("Accordion",{attrs:{expanded:e.accordionState[e.index],disableToggle:e.isPresetSection},on:{toggle:function(t){return e.toggleAccordion(e.index)}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"d-flex flex-row justify-space-between align-center",attrs:{"data-test-id":"element-studio-control-accordion"}},["section"!==e.value.options.type||e.isPresetSection?t("Dropdown",{attrs:{"offset-y":"","close-on-content-click":!1,"max-height":"450"},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:s}){return[t(os.Z,e._g(e._b({staticClass:"mr-2",attrs:{color:"black",small:"",icon:"",title:"Open Twig Code Helper"}},"v-btn",s,!1),n),[t("Icon",{attrs:{icon:"BracketsIcon"}})],1)]}}],null,!1,1714806599),model:{value:e.codeHelpOpen,callback:function(t){e.codeHelpOpen=t},expression:"codeHelpOpen"}},[t(ui.Z,{staticClass:"element-studio-poppy-card",staticStyle:{width:"400px",height:"300px"}},[t("TwigCodeHelper",{key:e.keyToRerenderCodeHelp,attrs:{control:e.value,twigParentPath:e.twigParentPath,inRepeater:e.isParentARepeater},on:{close:function(t){e.codeHelpOpen=!1}}})],1)],1):e._e(),t("input",{staticClass:"element-studio-control-label-input",attrs:{placeholder:"Label"},domProps:{value:e.value.label},on:{click:function(e){e.stopPropagation()},focusout:e.updateLabelAndSlugOnFocusOut}}),e.isPresetSection?t(Td.Z,{staticClass:"element-studio-control-type-dropdown mr-2",attrs:{value:e.presetSectionSlug,items:e.availablePresetSections,dense:"","hide-details":"","data-test-id":"element-studio-control-type-dropdown"},on:{input:e.updatePresetSectionSlug}}):e._e(),"section"!==e.value.options.type?t(Td.Z,{staticClass:"element-studio-control-type-dropdown mr-2",attrs:{value:e.value.options.type,items:e.controlTypes,dense:"","hide-details":"","data-test-id":"element-studio-control-type-dropdown"},on:{input:e.updateControlType}}):e._e(),e.isSection?e._e():t("Dropdown",{attrs:{"offset-y":"","close-on-content-click":!1,"max-height":"450"},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:s}){return[t(os.Z,e._g(e._b({attrs:{color:"black",small:"",icon:"",title:"Open options","data-test-id":"element-studio-control-open-options"}},"v-btn",s,!1),n),[t("Icon",{attrs:{icon:"SlidersIcon",size:"12"}})],1)]}}],null,!1,1074570844)},[t(ui.Z,{staticClass:"element-studio-poppy-card",attrs:{"data-test-id":"element-studio-control-options-card"}},[t(Ad.Z,{staticClass:"mb-3 mt-2",attrs:{label:"Make this control's value available in all breakpoints","input-value":!!e.shouldControlValueBeAddedInAllBreakpoints,"hide-details":""},on:{change:e.updatePropertyPathsToWhitelistInFlatProps}}),e.autofocusSupported?t(Ic.Z,{attrs:{label:"Autofocus",value:e.value.options.autofocus},on:{change:function(t){return e.updateOptions(t,"autofocus")}}}):e._e(),e.hasSsr?t(Ad.Z,{staticClass:"mb-3 mt-2",attrs:{label:"Make the element SSR when this control's value changes","input-value":!!e.shouldControlValueCauseSsr,"hide-details":""},on:{change:e.updatePropertyPathsToSsrElementWhenValueChanges}}):e._e(),"alert_box"===e.value.options.type||"pro_only_alert_box"===e.value.options.type?[t("ElementStudioAlertBoxOptions",{attrs:{value:e.value.options.alertBoxOptions},on:{input:function(t){return e.updateOptions(t,"alertBoxOptions")}}})]:e._e(),"date_picker"===e.value.options.type?[t("h3",{staticClass:"mb-3"},[e._v("Date picker options")]),t("DropdownInput",{attrs:{value:e.value.options.datePickerOptions?Object.keys(e.value.options.datePickerOptions)[0]:"",items:e.datePickerOptions,clearable:""},on:{input:function(t){return e.updateOptions({[t]:t},"datePickerOptions")}}})]:e._e(),"multiselect"===e.value.options.type||"dropdown"===e.value.options.type||"button_bar"===e.value.options.type?[t("ElementStudioDropdownOptions",{attrs:{path:e.path,control:e.value,value:e.value.options.dropdownOptions},on:{input:function(t){return e.updateOptions(t,"dropdownOptions")},updateDropdownItems:e.updateDropdownItems,updateDropdownItem:e.updateDropdownItem}})]:e._e(),"button_bar"===e.value.options.type?[t(Ic.Z,{attrs:{label:"Big Button Bar",value:e.value.options.buttonBarOptions&&"big"===e.value.options.buttonBarOptions.size&&"default"===e.value.options.buttonBarOptions.layout,"hide-details":""},on:{change:e.updateButtonBarOptionsSize}}),t(Ic.Z,{attrs:{label:"Multiline Bar",value:e.value.options.buttonBarOptions&&"multiline"===e.value.options.buttonBarOptions.layout&&"small"===e.value.options.buttonBarOptions.size,"hide-details":""},on:{change:e.updateButtonBarOptionsLayout}})]:e._e(),"trigger_action_button"===e.value.options.type?[t("h3",{staticClass:"mb-3"},[e._v("Trigger action button options")]),t("TextInput",{staticClass:"mr-3 d-inline-block",attrs:{label:"Button Text",value:e.value.options.triggerActionsButtonOptions&&e.value.options.triggerActionsButtonOptions.text},on:{input:function(t){return e.updateOptions({...e.value.options.triggerActionsButtonOptions,text:t||""},"triggerActionsButtonOptions")}}}),t("ElementStudioIconsAutocomplete",{staticClass:"d-inline-block",attrs:{value:e.value.options.triggerActionsButtonOptions&&e.value.options.triggerActionsButtonOptions.icon},on:{input:function(t){return e.updateOptions({...e.value.options.triggerActionsButtonOptions,icon:t},"triggerActionsButtonOptions")}}})]:e._e(),e.isRepeater?[t("ElementStudioRepeaterOptions",{attrs:{control:e.value,value:e.value.options.repeaterOptions},on:{input:function(t){return e.updateOptions(t,"repeaterOptions")}}})]:e._e(),"unit"===e.value.options.type?[t("ElementStudioUnitOptions",{attrs:{value:e.value.options.unitOptions},on:{input:function(t){return e.updateOptions(t,"unitOptions")}}})]:e._e(),"wpmedia"===e.value.options.type?[t("ElementStudioMediaOptions",{attrs:{value:e.value.options.mediaOptions},on:{input:function(t){return e.updateOptions(t,"mediaOptions")}}})]:e._e(),"video"===e.value.options.type?[t("ElementStudioVideoOptions",{attrs:{value:e.value.options.videoOptions},on:{input:function(t){return e.updateOptions(t,"videoOptions")}}})]:e._e(),"unit"===e.value.options.type||"number"===e.value.options.type||"slider"===e.value.options.type?[t("ElementStudioRangeOptions",{attrs:{value:e.value.options.rangeOptions},on:{input:function(t){return e.updateOptions(t,"rangeOptions")}}})]:e._e(),"shadow"===e.value.options.type?[e._v(" Shadow Type "),t(zl.Z,{staticClass:"pt-3",attrs:{dense:"",items:e.shadowTypes,value:e.value.options.shadowOptions&&e.value.options.shadowOptions.type||"box"},on:{input:e.updateShadowType}})]:e._e(),"breakpoint_dropdown"===e.value.options.type?[t("ElementStudioBreakpointOptions",{attrs:{value:e.value.options.breakpointOptions},on:{input:function(t){return e.updateOptions(t,"breakpointOptions")}}})]:e._e(),"text"===e.value.options.type?[t("h3",{staticClass:"mb-2"},[e._v("Text")]),t(Ic.Z,{attrs:{label:"Multiline",value:e.value.options.textOptions&&e.value.options.textOptions.multiline,"hide-details":""},on:{change:e.updateTextOptionsMultiline}}),t("h3",{staticClass:"mb-2"},[e._v("Text Format")]),t("DropdownInput",{attrs:{value:e.value.options.textOptions&&e.value.options.textOptions.format,items:[{text:"HTML",value:"html"},{text:"Plain Text",value:"plain"}]},on:{input:e.updateTextOptionsFormat}})]:e._e(),"focus_point"===e.value.options.type?[t("ElementStudioFocusPointOptions",{attrs:{value:e.value.options.focusPointOptions,control:e.value},on:{input:function(t){return e.updateOptions(t,"focusPointOptions")}}})]:e._e(),"media_size_dropdown"===e.value.options.type?[t("ElementStudioMediaSizeOptions",{attrs:{value:e.value.options.mediaSizeOptions,control:e.value},on:{input:function(t){return e.updateOptions(t,"mediaSizeOptions")}}})]:e._e(),"post_chooser"===e.value.options.type?[t("ElementStudioPostChooserOptions",{attrs:{value:e.value.options.postChooserOptions,control:e.value},on:{input:function(t){return e.updateOptions(t,"postChooserOptions")}}})]:e._e(),"icon"===e.value.options.type?[t("ElementStudioIconOptions",{attrs:{value:e.value.options.iconOptions},on:{input:function(t){return e.updateOptions(t,"iconOptions")}}})]:e._e(),"color"===e.value.options.type?[t("h3",{staticClass:"mb-2"},[e._v("Color Type")]),t("DropdownInput",{attrs:{value:e.value.options.colorOptions&&e.value.options.colorOptions.type||"solidOnly",items:[{text:"Solid Only",value:"solidOnly"},{text:"Solid and Gradient",value:"solidAndGradient"},{text:"Gradient Only",value:"gradientOnly"}]},on:{input:e.updateColorType}})]:e._e(),e.isSection?e._e():[t("h3",[e._v("Dynamic Property")]),t(Ad.Z,{staticClass:"mb-3 mt-2",attrs:{label:"Enable dynamic property","input-value":!!e.dynamicPropertyPath,"hide-details":""},on:{change:e.updateDynamicPropertyPaths}}),e.dynamicPropertyPath?[t(Ad.Z,{staticClass:"mb-3 mt-2",attrs:{label:"Make dynamic data Pro only","input-value":e.dynamicPropertyPath&&e.dynamicPropertyPath.proOnly,"hide-details":""},on:{change:function(t){return e.updateDynamicPropertyPaths(!0,e.dynamicPropertyPath?e.dynamicPropertyPath.accepts:void 0,t)}}}),t("h4",{staticClass:"mb-1"},[e._v("Dynamic Property Type")]),t("DropdownInput",{attrs:{items:e.dynamicPathAcceptsItems,value:e.dynamicPropertyPath.accepts},on:{input:function(t){return e.updateDynamicPropertyPaths(!0,t)}}})]:e._e()],"add_registered_children"===e.value.options.type?[t("h3",[e._v("Registered Children options: add extra elements")]),e.availableDescendantElements.length?t("div",{staticClass:"d-flex align-center"},[t(Td.Z,{staticClass:"element-studio-control-type-dropdown mr-4 mt-2",attrs:{items:e.availableDescendantElements,value:e.value.options.addRegisteredChildrenOptions&&e.value.options.addRegisteredChildrenOptions.addExtraElementsBySlug,dense:"","hide-details":"","data-test-id":"element-studio-control-type-dropdown",multiple:""},on:{input:e.updateAddExtraElementsBySlug}}),t("IconButton",{attrs:{icon:"TrashIcon"},on:{click:function(t){return e.updateAddExtraElementsBySlug([])}}})],1):t("div",[e._v(" No available extra elements. ")])]:e._e(),"code"===e.value.options.type?[t("h3",[e._v("Code input options")]),t("DropdownInput",{staticClass:"pt-3",attrs:{items:e.codeTypes,value:e.value.options.codeOptions&&e.value.options.codeOptions.language},on:{input:e.updateCodeType}})]:e._e(),"text"===e.value.options.type||"richtext"===e.value.options.type?[t("ElementStudioVariableOptions",{attrs:{path:e.path,control:e.value,value:e.value.options.variableOptions},on:{input:function(t){return e.updateOptions(t,"variableOptions")},updateVariableItems:e.updateVariableItems,updateVariableItem:e.updateVariableItem}})]:e._e(),t("h3",[e._v("Misc Options")]),e.isInContentTab?[t(Ad.Z,{attrs:{label:"See content editable code","hide-details":""},model:{value:e.showContentEditableCode,callback:function(t){e.showContentEditableCode=t},expression:"showContentEditableCode"}}),e.showContentEditableCode?[t("Copyable",{staticClass:"element-studio-inline-helper-code",attrs:{shouldCopy:!1}},[e._v(" "+e._s(e.contentEditableHelperCode)+" ")])]:e._e()]:e._e(),t("div",[e.isInContentTab?e._e():[t("div",{staticClass:"d-flex flex-row"},[t(Ad.Z,{attrs:{disabled:e.canHaveMediaQueries,label:"Enable Media Queries","input-value":e.value.enableMediaQueries,"hide-details":""},on:{change:function(t){return e.updateControlBoolean(t,"enableMediaQueries")}}})],1)],t("div",{staticClass:"d-flex flex-row"},[t(Ad.Z,{attrs:{label:"Enable Hover","input-value":e.value.enableHover,"hide-details":""},on:{change:function(t){return e.updateControlBoolean(t,"enableHover")}}})],1),t("h3",[e._v("Layout")]),t("DropdownInput",{staticClass:"pt-3",attrs:{items:e.controlLayouts,value:e.value.options.layout},on:{input:e.updateControlLayout}}),"text"===e.value.options.type||"dropdown"===e.value.options.type||"multiselect"===e.value.options.type?[t("h3",[e._v("Placeholder")]),t("TextInput",{attrs:{value:e.value.options.placeholder},on:{input:e.updatePlaceholder}})]:e._e(),t("h3",[e._v("Keywords")]),t("TextInput",{attrs:{value:e.keywordsValue},on:{input:e.updateKeywords}}),t("h3",[e._v("Slug")]),t("input",{staticClass:"breakdance-white-gray-outlined-input breakdance-simple-input breakdance-simple-input--text breakdance-simple-input--base",attrs:{placeholder:"Slug"},domProps:{value:e.value.slug},on:{click:function(e){e.stopPropagation()},focusout:e.updateSlugOnFocusOut}}),t("ElementStudioConditionInput",{attrs:{value:e.value.options.condition},on:{input:e.updateConditions}}),t("ElementStudioHideControlInput",{attrs:{value:e.value.options.hideForElements},on:{input:e.updateHideForElements,remove:e.deleteHideForElements}})],2)],2)],1),e.isSection?t("Dropdown",{attrs:{"offset-y":"","close-on-content-click":!1,"max-height":"450"},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:s}){return[t(os.Z,e._g(e._b({attrs:{color:"black",small:"",icon:"",title:"Open options","data-test-id":"element-studio-control-open-options"}},"v-btn",s,!1),n),[t("Icon",{attrs:{icon:"SlidersIcon",size:"12"}})],1)]}}],null,!1,1074570844)},[t(ui.Z,{staticClass:"element-studio-poppy-card",attrs:{"data-test-id":"element-studio-control-options-card"}},[e.isPresetSection?e._e():t(Ad.Z,{staticClass:"mb-3 mt-2",attrs:{label:"Make all control values in this section available in all breakpoints","input-value":!!e.shouldControlValueBeAddedInAllBreakpoints,"hide-details":""},on:{change:e.updatePropertyPathsToWhitelistInFlatProps}}),e.hasSsr?t(Ad.Z,{staticClass:"mb-3 mt-2",attrs:{label:"Make the element SSR when any child control value changes","input-value":!!e.shouldControlValueCauseSsr,"hide-details":""},on:{change:e.updatePropertyPathsToSsrElementWhenValueChanges}}):e._e(),t("h3",[e._v("Section Layout")]),t(zl.Z,{staticClass:"pt-3",attrs:{dense:"",items:e.sectionLayouts,value:e.value.options.sectionOptions&&e.value.options.sectionOptions.type},on:{input:e.updateSectionLayoutType}}),t("h3",[e._v("Slug")]),t("input",{staticClass:"breakdance-white-gray-outlined-input breakdance-simple-input breakdance-simple-input--text breakdance-simple-input--base",attrs:{placeholder:"Slug"},domProps:{value:e.value.slug},on:{click:function(e){e.stopPropagation()},focusout:e.updateSlugOnFocusOut}}),t("ElementStudioConditionInput",{attrs:{value:e.value.options.condition},on:{input:e.updateConditions}}),t("ElementStudioHideControlInput",{attrs:{value:e.value.options.hideForElements},on:{input:e.updateHideForElements,remove:e.deleteHideForElements}}),e.spacingBarPresetSlug?[t(Ad.Z,{staticClass:"mb-3 mt-2",attrs:{label:"Enable spacing bars","input-value":e.isSpacingBarEnabled(),"hide-details":""},on:{change:e.updateSpacingBar}})]:e._e()],2)],1):e._e(),t(xa.Z),t("Dropdown",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t(os.Z,e._g({staticClass:"mr-1",attrs:{color:"black",icon:"",small:""}},n),[t("Icon",{attrs:{icon:"EllipsisIcon",size:"18"}})],1)]}}])},[t(La.Z,[t($a.Z,{attrs:{dense:""},on:{click:e.copy}},[t(Wa.V9,[e._v("Copy")])],1),e.canPaste?t($a.Z,{attrs:{dense:""},on:{click:e.handlePaste}},[t(Wa.V9,[e._v("Paste As Child")])],1):e._e(),e.canReplace?t($a.Z,{attrs:{dense:""},on:{click:e.handleReplace}},[t(Wa.V9,[e._v("Replace")])],1):e._e(),e.isSection?t($a.Z,{attrs:{dense:""},on:{click:e.handleMakePreset}},[t(Wa.V9,[e._v("Make into a Preset")])],1):e._e()],1)],1),t(os.Z,{staticClass:"mr-3",attrs:{color:"black",icon:"",small:""},on:{click:function(t){return t.stopPropagation(),e.deleteControl.apply(null,arguments)}}},[t("Icon",{attrs:{icon:"TrashIcon",size:"12"}})],1)],1)]},proxy:!0},{key:"content",fn:function(){return[t("draggable",{attrs:{value:e.value.children},on:{input:e.handleDrag}},e._l(e.value.children,(function(n,s){return t("ControlSectionOrControl",{key:n.slug,attrs:{value:n,path:`${e.path}.children[${s}]`,index:s,parentPath:e.path,twigParentPath:`${e.twigParentPath}${e.isParentARepeater?`[${s}]`:""}.${e.value.slug}`,parentControl:e.value}})})),1),e.controlAcceptsChildren?t(os.Z,{staticClass:"mt-2",attrs:{tile:"",text:"","data-test-id":"element-studio-add-control"},on:{click:e.addControl}},[e._v(" Add Control ")]):e._e(),e.controlAcceptsChildren?t(os.Z,{staticClass:"mt-2",attrs:{tile:"",text:"","data-test-id":"element-studio-add-preset"},on:{click:e.addPreset}},[e._v(" Add Preset ")]):e._e()]},proxy:!0}])})],1)],1)},Ld=[],$d=n(89754),Wd=n(34680),Vd=n.n(Wd),Hd=n(78021),Ud=n(21069),zd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"d-flex"},[t(pi.Z,e._b({staticClass:"breakdance-dense-input",attrs:{value:e.value,rules:e.rules,clearable:e.clearable,solo:"",flat:"",dense:"","full-width":"","single-line":"","background-color":"var(--gray150)","data-test-id":e.testId},on:{input:e.edit,blur:function(t){return e.$emit("blur",t)}}},"v-text-field",e.inputOptions,!1))],1)},Gd=[];let Kd=class extends s.ZP{get isNumber(){return"number"===this.inputOptions?.type}edit(e){this.isNumber&&e?this.$emit("input",parseFloat(e)):this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],Kd.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],Kd.prototype,"inputOptions",void 0),(0,r.gn)([(0,l.fI)()],Kd.prototype,"rules",void 0),(0,r.gn)([(0,l.fI)()],Kd.prototype,"testId",void 0),(0,r.gn)([(0,l.fI)({default:!0})],Kd.prototype,"clearable",void 0),Kd=(0,r.gn)([l.wA],Kd);const jd=Kd,qd=jd;var Xd=(0,Y.Z)(qd,zd,Gd,!1,null,null,null);const Yd=Xd.exports;var Qd=n(69790),Jd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-element-studio-twig-code-helper"},[e.codeForControl?t("Copyable",{on:{onCopy:e.close}},[e._v(e._s(e.codeForControl))]):[e._v("No code help available for "),t("code",[e._v(e._s(e.control.options.type))]),e._v(" control type")]],2)},eu=[],tu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-element-studio-copyable"},[t("textarea",{ref:"input",attrs:{readonly:""},domProps:{value:e.textToCopy}}),e.shouldCopy?t(os.Z,{attrs:{small:""},on:{click:e.copy}},[e._v("Copy")]):e._e()],1)},nu=[];let su=class extends s.ZP{mounted(){this.shouldCopy&&(0,et.n)((()=>{this.$refs.input.select(),document.execCommand("copy")}))}get textToCopy(){return this.$slots?.default[0]?.text||""}copy(){this.$refs.input.select(),document.execCommand("copy"),this.$emit("onCopy")}};(0,r.gn)([(0,l.fI)({default:!0})],su.prototype,"shouldCopy",void 0),su=(0,r.gn)([(0,l.wA)({})],su);const au=su,iu=au;var ou=(0,Y.Z)(iu,tu,nu,!1,null,null,null);const ru=ou.exports,lu=({twigPath:e})=>"{{ "+e+" }}",cu=({twigPath:e})=>`{% if ${e} %}\ntoggle is on\n{% else %}\ntoggle is off\n{% endif %}`,du=({control:e,twigPath:t})=>e.options.items?e.options.items.map(((e,n)=>{const s=n?"elseif":"if";return`{% ${s} ${t} == '${e.value}' %}\n  CSS or HTML here\n`})).join("")+"\n{% endif %}":"no items yo",uu=({control:e,twigPath:t})=>e.options.items?e.options.items.map(((e,n)=>{const s=n?"elseif":"if";return`{% ${s} '${e.value}' in ${t} %}\n  CSS or HTML here\n`})).join("")+"\n{% endif %}":"no items yo",pu=({control:e,twigPath:t})=>{const n="text"===e?.options?.shadowOptions?.type,s=n?"text-shadow":"box-shadow";return`${s}: {{ ${t}.style }};`},hu=({twigPath:e})=>`\n<style>\n/* put this in your default CSS */\n.some-class-to-wrap-the-icon-svg { /* prefix with element classname, i.e. .element-classname .some-class-to-wrap-the-icon */\n    display: flex;\n    font-size: 24px;\n}\n\n.some-class-to-wrap-the-icon-svg > svg { /* also, prefix with element classname */\n    font-size: inherit;\n    width: 1em;\n    height: 1em;\n    stroke-width: 0;\n    stroke: currentColor;\n    fill: currentColor;\n}\n\n/* put this in your twig CSS */\n%%SELECTOR%% .some-class-to-wrap-the-icon-svg {\n    color: #ff0000;\n    font-size: 30px;\n}\n</style>\n<div class="some-class-to-wrap-the-icon-svg">\n{{ ${e}.svgCode }}\n</div>\n`,mu=({twigPath:e})=>`\n    {% for item in ${e} %}\n        <div>\n            repeated\n        </div>\n    {% endfor %}\n    `,gu=({twigPath:e})=>`\n  /* could be used for transforms */\n  transform-origin: {{ ${e}.x }}% {{ ${e}.y }}%;\n\n  /* or positioning a background */\n  background-position: {{ ${e}.x }}% {{ ${e}.y }}%;\n  `,vu=["layout_basic_flex","layout","borders","background","css","size","grid",...ie.Cn],fu=({control:e,twigPath:t})=>{const n=e.options.sectionOptions?.preset?.slug?.replace("EssentialElements\\","");return n?vu.includes(n)?`{{ macros.${n}(${t}) }}`:"effects"===n?`\n    {{ macros.effects(${t}, '%%SELECTOR%%') }}\n    {{ macros.effectsHover(${t}, '%%SELECTOR%%:hover') }}\n    `:"effects_no_hover"===n?`{{ macros.effects(${t}, '%%SELECTOR%%') }}`:"filter"===n?`{{ macros.filters(${t}) }}`:"typography"===n||"typography_with_nothing"===n||"typography_with_align"===n||"typography_with_effects"===n||"typography_with_effects_and_align"===n?`{{ macros.typography(${t}, globalSettings) }}`:"simpleLayout"===n?`{{ macros.simpleLayout(${t}, breakpoint) }}`:"fancy_background"===n?`\n      {{ macros.fancyBackgroundHtml(${t}) }}\n      {{ macros.fancyBackgroundCss('%%SELECTOR%%', ${t}, breakpoint) }}\n    `:"typography_with_hoverable_color"===n||"typography_with_align_with_hoverable_color"===n||"typography_with_effects_with_hoverable_color_and_effects"===n||"typography_with_effects_and_align_with_hoverable_color_and_effects"===n?`\n    %%SELECTOR%% {\n      {{ macros.typography(${t}, globalSettings) }}\n    }\n\n    %%SELECTOR%%:hover {\n      {{ macros.typographyWithHoverableColorAndEffects(${t}) }}\n    }\n    `:"typography_with_hoverable_everything"===n||"typography_with_align_with_hoverable_everything"===n||"typography_with_effects_with_hoverable_everything"===n||"typography_with_effects_and_align_with_hoverable_everything"===n?`\n    %%SELECTOR%% {\n      {{ macros.typography(${t}, globalSettings) }}\n    }\n\n    %%SELECTOR%%:hover {\n      {{ macros.typographyWithHoverableEverything(${t}) }}\n    }\n    `:"AtomV1ButtonContent"===n?`\n    \x3c!-- In order to set default styles for your buttons, use the following macros: --\x3e\n    \x3c!-- You can overwrite these settings using design options  --\x3e\n\n    \x3c!-- Button (Primary) --\x3e\n    {{ macros.atomV1ButtonHtml(${t}, 'my-button-custom-class', path.to.button_design_preset_section, '${t}.text') }}\n\n    \x3c!-- Button (Secondary) --\x3e\n    {{ macros.atomV1ButtonHtml(${t}, 'my-button-custom-class', path.to.button_design_preset_section, 'secondary', '${t}.text') }}\n\n    \x3c!-- Button (Custom) --\x3e\n    {{ macros.atomV1ButtonHtml(${t}, 'my-button-custom-class', path.to.button_design_preset_section, 'custom', '${t}.text') }}\n\n    \x3c!-- Button (Text) --\x3e\n    {{ macros.atomV1ButtonHtml(${t}, 'my-button-custom-class', path.to.button_design_preset_section, 'text', '${t}.text') }}\n\n    \x3c!-- Form Button (Submit) --\x3e\n    {{ macros.atomV1ButtonHtmlManual('Submit', false, '%%SELECTOR%% .my-button-custom-class', path.to.button_design_preset_section, 'primary/secondary/custom/text', 'custom-button-id', true, '${t}.text') }}\n\n    \x3c!-- SSR Button --\x3e\n    echo /Breakdance/Elements/AtomV1Button/render($propertiesData['content']['button'], 'my-button-custom-class', $propertiesData['design']['button'], 'primary/secondary/custom/text');\n\n    \x3c!-- SSR Form Button --\x3e\n    echo /Breakdance/Elements/AtomV1Button/renderFormButton($propertiesData['content']['submit_button']['text'], 'my-button-custom-class', $propertiesData['design']['form_button'], 'primary/secondary/custom/text', 'custom-button-id');\n\n\n`:"AtomV1ButtonDesign"===n?`\n      {{ macros.atomV1ButtonCss(${t}, 'my-button-custom-class', '%%SELECTOR%%', breakpoint, globalSettings) }}\n    `:"AtomV1CustomButtonDesign"===n?`\n\n      {{ macros.atomV1ButtonButton(${t}, '%%SELECTOR%% .my-button-custom-class', 'primary/secondary/custom', breakpoint, globalSettings) }}\n\n\n    `:"AtomV1IconDesignWithHover"===n?`\n    HTML:\n    {{ macros.atomV1IconHtml('my-icon-class', path.to.icon, path.to.rotate (number between 1 and 360) or false, path.to.link (link control) or false, ${t}) }}\n\n    CSS:\n    {{ macros.atomV1IconCss(${t}, 'my-icon-class', '%%SELECTOR%%', true) }}`:"AtomV1IconDesign"===n?`\n    HTML:\n    {{ macros.atomV1IconHtml('my-icon-class', path.to.icon, path.to.rotate (number between 1 and 360) or false, path.to.link (link control) or false, ${t}) }}\n\n    CSS:\n    {{ macros.atomV1IconCss(${t}, 'my-icon-class', '%%SELECTOR%%') }}`:"AtomV1FormDesign"===n?`{{ macros.atomV1FormCss(${t}, '%%SELECTOR%%') }}`:"tabs_design"===n?`{{ macros.atomV1TabsCss('%%SELECTOR%%', ${t}, breakpoint, globalSettings) }}`:"WooGlobalStylerOverride"===n?`{{ macros.wooGlobalStyler(${t}, '%%SELECTOR%%', breakpoint, globalSettings) }}`:"pagination"===n?`{{ macros.pagination(${t}, '%%SELECTOR%%', listSelector, activeSelector, dotsSelector) }}`:"wooPresetInputsDesign"===n||"wooPresetInputsDesignNoSelect2"===n?`\n    %%SELECTOR%% {\n      {{ macros.wooPresetInputsDesign(${t}) }}\n    }`:"wooProductsListElements"===n?`\n    {{ macros.wooPresetProductsListElementsDesign('%%SELECTOR%%', ${t}) }}\n    `:"wooProductsListLayout"===n?`\n    {{ macros.wooPresetProductsListLayoutDesign('%%SELECTOR%%', ${t}) }}\n    `:"wooProductWrapperDesign"===n?`\n    {{ macros.wooPresetProductWrapperDesign('%%SELECTOR%%', ${t}) }}\n    `:["lightbox_design","lightbox_single_design"].includes(n)?`{{ macros.atomV1LightboxCss(${t}) }}`:"AtomV1SwiperSettings"===n?`\nHTML:\n\n<div class="breakdance-swiper-wrapper" data-swiper-id="%%ID%%">\n  <div class="swiper">\n    <div class="swiper-wrapper">\n      %%CHILDREN%%\n    </div>\n  </div>\n  \n  {{ macros.AtomV1SwiperPaginationAndArrowsHtml(design.slider) }}\n</div>\n\n----\n\nCSS:\n{{ macros.AtomV1SwiperCss(${t}, '%%SELECTOR%%', globalSettings, isBaseBreakpoint) }}\n`:"borders_without_shadows"===n?`\n    {{ macros.borders_without_shadows(${t}) }}\n    `:`no code help for preset section type of ${n}`:"undefined preset type"},yu={trigger_action_button:void 0,border_complex:({twigPath:e})=>`{{ macros.border_complex(${e}) }}`,border_radius:({twigPath:e})=>`{{ macros.border_radius(${e}) }}`,breakpoint_dropdown:({twigPath:e})=>`\n    {% if breakpoint == ${e} %}\n    %%SELECTOR%% {\n        /** some css that will apply to the selected breakpoint */\n    }\n    {% endif %}\n    `,button_bar:du,dropdown:du,code:lu,color:({control:e,twigPath:t})=>"solidAndGradient"===e.options.colorOptions?.type?`\n        /* Background Color */\n        {{ macros.backgroundColor(${t}) }}\n        \n        /* Or */\n        \n        /* Text Color */\n        {{ macros.textColor(${t}) }}\n        \n        /* Or */\n        \n        /* Border Color */\n        {{ macros.borderColor(${t}) }}\n      `:`background-color: {{ ${t} }}`,gradient:({twigPath:e})=>`background-image: {{ ${e}.style }}`,shadow:pu,icon:hu,number:lu,repeater:mu,inline_repeater:mu,richtext:lu,toggle:cu,spacing_complex:({twigPath:e})=>`{{ macros.spacing_complex(${e}, 'margin') }}`,text:lu,url:lu,unit:({twigPath:e})=>`font-size: {{ ${e}.style }};`,wpmedia:({control:e,twigPath:t})=>e.options?.mediaOptions?.multiple?`\n      {% for item in ${t} %}\n        {{ macros.getMedia(item, content.content.size, content.content.lazyLoad) }}\n      {% endfor %}\n      `:`\n      This macro might return an img, video, or iframe tag, depending on the media type.\n      {{ macros.getMedia(${t}, content.content.size, content.content.lazyLoad) }}\n      \n      Or you can render only images\n      {{ macros.image(${t}, content.content.size, alt, lazyLoad) }}\n    `,video:({twigPath:e})=>`\n      {{ macros.video(${e}) }}\n    `,focus_point:gu,section:fu,multiselect:uu,condition:void 0,font_family:void 0,class:void 0,global_colors:void 0,global_block_chooser:void 0,typography:void 0,custom_typography:void 0,typography_preset:void 0,message:void 0,post_chooser:void 0,element_screenshot:void 0,slider:void 0,add_registered_children:void 0,builder_behavior:void 0,alert_box:void 0,pro_only_alert_box:void 0,date_picker:({twigPath:e})=>`{{ ${e} }}`,time_picker:({twigPath:e})=>`{{ ${e} }}`,api_key_input:void 0,link:({twigPath:e})=>`\n     {{ macros.linkStart(${e}) }}\n         Link Text\n     {{ macros.linkEnd() }}\n    `,media_size_dropdown:({twigPath:e})=>`{{ ${e} }}`,wp_query:()=>"Use this control in your SSR.php file. For example:\n    \\Breakdance\\WpQueryControl\\getWpQueryArgumentsFromWpQueryControlProperties($propertiesData['content']['wp_query']['query']);",conditional_form_field:void 0},bu=(e,t)=>{let n="";if(Array.isArray(e))n=e.reduce(((e,t)=>{const n=t.reduce(((e,{path:t,value:n})=>e?`${e} and ${t} == "${n}"`:`${t} == "${n}"`),"");return e?`${e} or (${n})`:`(${n})`}),"");else{const{path:t,value:s}=e;n=`${t} == "${s}"`}return`\n      {% if ${n} %}\n      ${t}\n      TODO - examples of not equals, is one of, is set, is not set\n      {% elseif %}\n      ...\n      {% else %}\n      ...\n      {% endif %}\n      `};var Pu=n(70802);let _u=class extends s.ZP{get twigPath(){return this.inRepeater?`item.${this.control.slug}`:`${this.twigParentPath}.${this.control.slug}`}get codeForControl(){const e=yu[this.control.options.type],t=this.control.options.sectionOptions?.preset?.codeHelp?.replace("%%TWIG_PATH%%",this.twigPath);let n=t||e&&e({control:this.control,twigPath:this.twigPath});if(!n)return!1;if(this.control.options.condition&&(n=bu(this.control.options.condition,n)),this.control.enableHover){const e=n.replace(new RegExp(this.twigPath,"g"),(0,Pu.sg)(this.twigPath));n+="\n\n.some-selector:hover {\n"+e+"\n}\n"}return n}close(){this.$emit("close")}};(0,r.gn)([(0,l.fI)()],_u.prototype,"control",void 0),(0,r.gn)([(0,l.fI)()],_u.prototype,"twigParentPath",void 0),(0,r.gn)([(0,l.fI)()],_u.prototype,"inRepeater",void 0),_u=(0,r.gn)([(0,l.wA)({components:{Copyable:ru}})],_u);const Su=_u,Cu=Su;var wu=(0,Y.Z)(Cu,Jd,eu,!1,null,null,null);const ku=wu.exports;var xu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("h3",[e._v(e._s(e.label))]),t("Repeater",{attrs:{value:this.internalValue,control:{options:{repeaterOptions:{defaultNewValue:[e.getBlankCondition()],titleTemplate:"OR",buttonName:"Add new OR condition",forceDontProcessDefaultNewValueWhenAddingItemsHack:!0}}}},on:{input:e.emit},scopedSlots:e._u([{key:"default",fn:function({index:n}){return[t("Repeater",{attrs:{value:e.internalValue[n],control:{options:{repeaterOptions:{defaultNewValue:e.getBlankCondition(),forceDontProcessDefaultNewValueWhenAddingItemsHack:!0,titleTemplate:`(AND) ${e.title} for '{path}'`,buttonName:`Add new (AND) ${e.title}`}}}},on:{input:function(t){return e.updateOrCondition(t,n)}},scopedSlots:e._u([{key:"default",fn:function({index:s,value:a}){return[t("div",{staticClass:"element-studio-condition-input"},[a?t("div",{staticClass:"element-studio-condition-input-row"},[a.external?t("span",[e._v(" External conditions can't be edited ")]):e._e(),t(Bd.Z,{attrs:{label:"Path",items:e.paths,value:a.path,disabled:a.external},on:{input:function(t){return e.updatePath(t,n,s)}}}),t(zl.Z,{attrs:{label:"Operand","no-data-text":"No data. Select a path first",value:a.operand,items:e.getOperands(a),disabled:a.external},on:{input:function(t){return e.updateOperand(t,n,s)}}}),"is set"!==a.operand&&"is not set"!==a.operand?["is one of"!==a.operand&&"is none of"!==a.operand?[t(Bd.Z,{attrs:{label:"Value",items:e.getPossibleValues(a),value:a.value,disabled:a.external},on:{input:function(t){return e.updateValue(t,n,s)}}})]:[t(Bd.Z,{attrs:{multiple:"",label:"Values",items:e.getPossibleValues(a),value:e.hasMultipleValues(a),disabled:a.external},on:{input:function(t){return e.updateValue(t,n,s)}}})]]:e._e()],2):e._e()])]}}],null,!0)})]}}])})],1)},Iu=[];let Du=class extends s.ZP{mounted(){this.value&&!Array.isArray(this.value)&&this.emit([[this.value]])}getBlankCondition(){return{path:"",operand:"equals",value:""}}getOperands(e){const t=e.path;if(!t)return[];const n=this.getControl(t);let s=["equals","not equals","is one of","is none of","is set","is not set","contains","does not contain"];return"multiselect"===n?.options.type&&(s=["includes"]),"toggle"===n?.options.type&&(s=["is set","is not set"]),s.map((e=>({text:e,value:e})))}hasMultipleValues(e){return Array.isArray(e.value)?e.value:[]}get internalValue(){return this.value?Array.isArray(this.value)?this.value:[[this.value]]:[]}get paths(){const e=this.context.getPathsToAllControls().filter((e=>!e.includes("settings.animations")));return this.pathStartsWith?e.filter((e=>e.startsWith(this.pathStartsWith))).map((e=>e.replace(this.pathStartsWith,""))):e}getPossibleValues(e){const t=e.path;if(!t)return[];const n=this.getControl(t);if(!n)return[];const s=n.options.items?.map((e=>String(e.value)));return s||[]}getControl(e){return(0,Ee.AP)(this.context.element(),e)}updatePath(e,t,n){const s=(0,Me.Z)(this.internalValue);s[t][n].path=e,this.emit(s)}updateOperand(e,t,n){const s=(0,Me.Z)(this.internalValue);s[t][n].operand=e,this.emit(s)}updateValue(e,t,n){const s=(0,Me.Z)(this.internalValue);s[t][n].value=e,this.emit(s)}updateOrCondition(e,t){const n=(0,Me.Z)(this.internalValue);n[t]=e,this.emit(n)}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],Du.prototype,"value",void 0),(0,r.gn)([(0,l.fI)({default:"Condition"})],Du.prototype,"title",void 0),(0,r.gn)([(0,l.fI)({default:"Only Show Control When Condition Is Met"})],Du.prototype,"label",void 0),(0,r.gn)([(0,l.fI)()],Du.prototype,"pathStartsWith",void 0),(0,r.gn)([(0,l.tB)("context")],Du.prototype,"context",void 0),Du=(0,r.gn)([(0,l.wA)({components:{Repeater:Ud.Z}})],Du);const Eu=Du,Zu=Eu;var Tu=(0,Y.Z)(Zu,xu,Iu,!1,null,null,null);const Au=Tu.exports;var Bu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-unit-options"},[t("h2",{staticClass:"mb-2"},[e._v("Unit Options")]),t("h3",[e._v("Allowed types")]),t(Td.Z,{attrs:{label:"Types",value:e.value&&e.value.types,items:e.availableTypes,multiple:!0,"hide-details":""},on:{input:e.updateTypes}}),t("h3",{staticClass:"mb-1"},[e._v("Default Type")]),t("DropdownInput",{attrs:{label:"Default Type",items:e.value&&e.value.types||[],value:e.value&&e.value.defaultType},on:{input:e.updateDefaultType}})],1)},Ou=[],Ru=n(16795);let Mu=class extends s.ZP{constructor(){super(...arguments),this.control={options:{repeaterOptions:{titleTemplate:"Type",buttonName:"Add type"}}}}get internalValue(){return this.value||{}}get availableTypes(){return Ru.qc}updateTypes(e){const t=(0,Me.Z)(this.internalValue);this.emit({...t,types:e})}updateDefaultType(e){const t=(0,Me.Z)(this.internalValue);this.emit({...t,defaultType:e})}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],Mu.prototype,"value",void 0),(0,r.gn)([(0,l.tB)("context")],Mu.prototype,"context",void 0),Mu=(0,r.gn)([(0,l.wA)({components:{Repeater:Ud.Z,DropdownInput:Di.Z}})],Mu);const Fu=Mu,Nu=Fu;var Lu=(0,Y.Z)(Nu,Bu,Ou,!1,null,null,null);const $u=Lu.exports;var Wu=n(62231),Vu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-range-options"},[t("h3",{staticClass:"mb-2"},[e._v("Range Options")]),t("div",{staticClass:"d-flex align-end"},[t("div",{staticClass:"flex-grow-1 flex-column"},[e._v(" Step (fixed to 2 decimals) "),t("input",{class:e.inputClass,attrs:{type:"number"},domProps:{value:e.internalValue.step},on:{input:function(t){return e.updateStep(t.target.value)}}})]),t("div",{staticClass:"flex-grow-1 mx-1 flex-column"},[e._v(" Min (Integer) "),t("input",{class:e.inputClass,attrs:{type:"number"},domProps:{value:e.internalValue.min},on:{input:function(t){return e.updateMin(t.target.value)}}})]),t("div",{staticClass:"flex-grow-1 flex-column"},[e._v(" Max (Integer) "),t("input",{class:e.inputClass,attrs:{type:"number"},domProps:{value:e.internalValue.max},on:{input:function(t){return e.updateMax(t.target.value)}}})])])])},Hu=[];let Uu=class extends s.ZP{get internalValue(){return this.value||{min:void 0,max:void 0,step:void 0}}get inputClass(){return"d-flex breakdance-white-gray-outlined-input breakdance-simple-input breakdance-simple-input--text breakdance-simple-input--base"}updateStep(e){this.emit({...this.internalValue,step:e?(0,le.v)(e):void 0})}updateMin(e){this.emit({...this.internalValue,min:e?parseInt(e):void 0})}updateMax(e){this.emit({...this.internalValue,max:e?parseInt(e):void 0})}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],Uu.prototype,"value",void 0),(0,r.gn)([(0,l.tB)("context")],Uu.prototype,"context",void 0),Uu=(0,r.gn)([(0,l.wA)({components:{TextInput:cs.Z}})],Uu);const zu=Uu,Gu=zu;var Ku=(0,Y.Z)(Gu,Vu,Hu,!1,null,null,null);const ju=Ku.exports;var qu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-repeater-options"},[t("h3",{staticClass:"mb-2"},[e._v("Repeater Options")]),t("div",[e._v(" Title Template "),t("TextInput",{attrs:{value:e.internalValue.titleTemplate},on:{input:function(t){return e.update(t,"titleTemplate")}}}),e.controlSlugs.length?t("div",{staticClass:"element-studio-repeater-options-variables"},[e._v(" Available variables: "),e._l(e.controlSlugs,(function(n){return t("span",{staticClass:"element-studio-repeater-options-variable",on:{click:function(t){return e.appendVariableToTitle(n)}}},[t("span",[e._v("{")]),e._v(e._s(n)),t("span",[e._v("}")])])}))],2):e._e()],1),t("div",{staticClass:"my-2"},[e._v(" Default Title "),t("TextInput",{attrs:{value:e.internalValue.defaultTitle},on:{input:function(t){return e.update(t,"defaultTitle")}}}),e._v(" Used as a fallback when the title template is blank. ")],1),t("div",[e._v(" Button Name "),t("TextInput",{attrs:{value:e.internalValue.buttonName},on:{input:function(t){return e.update(t,"buttonName")}}}),e._v(' Defaults to "Add Item". ')],1),t("div",[t(Ad.Z,{staticClass:"mb-3",attrs:{label:"Enable gallery mode","hide-details":"","input-value":e.internalValue.galleryMode},on:{change:e.updateGalleryMode}}),e.internalValue.galleryMode?[t("h3",{staticClass:"mb-3"},[e._v("Gallery Media Path")]),t("DropdownInput",{attrs:{value:e.internalValue.galleryMediaPath,items:e.mediaControlSlugs},on:{input:function(t){return e.update(t,"galleryMediaPath")}}})]:e._e()],2)])},Xu=[];const Yu={titleTemplate:"",defaultTitle:"",buttonName:""};let Qu=class extends s.ZP{get internalValue(){return this.value||Yu}get controlSlugs(){return this.control.children.map((e=>e.slug))}get mediaControlSlugs(){return this.control.children.filter((e=>"wpmedia"===e.options.type)).map((e=>e.slug))}appendVariableToTitle(e){const t=this.internalValue.titleTemplate,n=t.includes(`{${e}}`);if(n)return;const s=`${t} {${e}}`.trim();this.update(s,"titleTemplate")}update(e,t){this.emit({...this.internalValue,[t]:e??""})}updateGalleryMode(e){this.emit({...this.internalValue,galleryMode:e})}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],Qu.prototype,"value",void 0),(0,r.gn)([(0,l.tB)("context")],Qu.prototype,"context",void 0),(0,r.gn)([(0,l.fI)()],Qu.prototype,"control",void 0),Qu=(0,r.gn)([(0,l.wA)({components:{DropdownInput:Di.Z,TextInput:cs.Z}})],Qu);const Ju=Qu,ep=Ju;var tp=(0,Y.Z)(ep,qu,Xu,!1,null,null,null);const np=tp.exports;var sp=n(84192),ap=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-dropdown-options"},[t("h2",{staticClass:"mb-2"},[e._v("Dropdown options")]),"dropdown"===e.control.options.type?[this.element.htmlTag.options.length>0?t("NiceButton",{on:{click:e.populateWithHtmlTagOptions}},[e._v("Populate with HTML Tag Options")]):e._e(),t(Ad.Z,{attrs:{"input-value":!!e.internalValue.populate,label:"Populate dropdown dynamically","hide-details":""},on:{change:e.updateEnablePopulate}}),e.internalValue.populate?[t(sp.Z,{staticClass:"my-3"}),t("h3",{staticClass:"mb-2"},[e._v("Populate from a Repeater's Input")]),e.internalValue.populate.fetchDataAction?t("div",[e._v(" Populating from server data. To use items instead, clear those fields below. ")]):e.repeaterPaths.length?t("div",[t(Bd.Z,{attrs:{label:"Path",items:e.repeaterPaths,value:e.internalValue.populate.path,"hide-details":"",clearable:""},on:{input:function(t){return e.updatePopulateValue("path",t)}}}),t(Bd.Z,{attrs:{label:"Label",items:e.possibleValues,value:e.internalValue.populate.text,"hide-details":"",clearable:""},on:{input:function(t){return e.updatePopulateValue("text",t)}}}),t(Bd.Z,{attrs:{label:"Value",items:e.possibleValues,value:e.internalValue.populate.value,"hide-details":"",clearable:""},on:{input:function(t){return e.updatePopulateValue("value",t)}}})],1):t("div",[t("h4",[e._v("No repeaters presenta")])]),t(sp.Z,{staticClass:"my-3"}),t("h3",{staticClass:"mb-2"},[e._v("Populate from server data")]),t(pi.Z,{attrs:{label:"Fetch data action route name",value:e.internalValue.populate.fetchDataAction,clearable:"","hide-details":""},on:{input:function(t){return e.updatePopulateValue("fetchDataAction",t)}}}),t(Bd.Z,{attrs:{label:"Fetch context path",items:e.controlPaths,value:e.internalValue.populate.fetchContextPath,clearable:"","hide-details":""},on:{input:function(t){return e.updatePopulateValue("fetchContextPath",t)}}}),t("h3",[e._v("Refetch data if a control's value changes (specify path)")]),t("Repeater",{attrs:{value:e.internalValue.populate.refetchPaths},on:{input:e.updateRefetchPaths},scopedSlots:e._u([{key:"default",fn:function({index:n}){return[t(Bd.Z,{staticClass:"mb-2",attrs:{items:e.controlPaths,value:e.internalValue.populate.refetchPaths[n],"hide-details":""},on:{input:function(t){return e.updateRefetchPath(n,t)}}})]}}],null,!1,3001308231)}),t(sp.Z,{staticClass:"my-3"}),t("ElementStudioConditionInput",{attrs:{title:"Filtering",label:"Show items in the dropdown only if a condition is met","path-starts-with":`${e.internalValue.populate.path}.`,value:e.internalValue.populate.condition},on:{input:e.updateCondition}})]:e._e()]:e._e(),e.internalValue.populate?e._e():[t("h3",{staticClass:"mb-2"},[e._v("Dropdown items")]),t("Repeater",{attrs:{path:e.path,value:e.dropdownItems,control:e.control},on:{input:e.updateDropdownItems},scopedSlots:e._u([{key:"default",fn:function({index:n}){return[e._v(" Label "),t("TextInput",{staticClass:"mb-2",attrs:{value:e.dropdownItems[n].text,testId:"element-studio-control-dropdown-label-input"},on:{input:function(t){return e.updateDropdownItem({...e.dropdownItems[n],text:t||""},n)}}}),e._v(" Value "),t("TextInput",{attrs:{value:e.dropdownItems[n].value,testId:"element-studio-control-dropdown-value-input"},on:{input:function(t){return e.updateDropdownItem({...e.dropdownItems[n],value:t||""},n)}}}),"button_bar"===e.control.options.type?t("div",{staticClass:"breakdance-dropdown-input d-flex mt-2"},[e.dropdownItems[n].icon?t("div",{staticClass:"mr-2 d-flex align-center"},[t("Icon",{attrs:{icon:e.dropdownItems[n].icon,size:"18"}})],1):e._e(),t("ElementStudioIconsAutocomplete",{attrs:{value:e.dropdownItems[n].icon},on:{input:function(t){return e.updateDropdownItem({...e.dropdownItems[n],icon:t},n)}}})],1):e._e()]}}],null,!1,280151685)})]],2)},ip=[],op=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Td.Z,{staticClass:"breakdance-dense-select breakdance-white-gray-outlined-input",attrs:{label:"Icon",dense:"",solo:"",flat:"",filled:"","hide-details":"",clearable:"",placeholder:"CloseIcon",items:e.iconNames,value:e.value},on:{input:function(t){return e.$emit("input",t)}}})},rp=[],lp=n(84929);let cp=class extends s.ZP{get iconNames(){return lp.iconNames}};(0,r.gn)([(0,l.fI)()],cp.prototype,"value",void 0),cp=(0,r.gn)([(0,l.wA)({})],cp);const dp=cp,up=dp;var pp=(0,Y.Z)(up,op,rp,!1,null,null,null);const hp=pp.exports,mp={path:"",text:"",value:"",condition:void 0,fetchDataAction:"",fetchContextPath:"",refetchPaths:[]};let gp=class extends s.ZP{get internalValue(){return this.value||{}}get repeaterPaths(){return this.context.getPathsToAllControls(["repeater"])}get controlPaths(){return this.context.getPathsToAllControls()}get possibleValues(){const e=this.internalValue?.populate?.path;if(!e)return[];const t=this.getControl(e);if(!t)return[];const n=t.children.map((e=>e.slug));return n||[]}getControl(e){return(0,Ee.AP)(this.element,e)}get populate(){return this.internalValue.populate||mp}get dropdownItems(){return this.control.options.items||[{value:"value",text:"Label"}]}get element(){return this.context.element()}updateDropdownItems(e){this.$emit("updateDropdownItems",e)}updateDropdownItem(e,t){this.$emit("updateDropdownItem",{newItem:e,index:t})}updateEnablePopulate(e){e?this.emit({populate:mp}):this.emit(void 0)}updateCondition(e){const t=(0,Me.Z)(this.populate);Array.isArray(e)&&!e.length?delete t.condition:t.condition=e,this.emit({populate:t})}updatePopulateValue(e,t){const n=(0,Me.Z)(this.populate);n[e]=t,this.emit({populate:n})}updateRefetchPaths(e){const t=(0,Me.Z)(this.populate);t.refetchPaths=e.map((e=>"string"===typeof e?e:"")),this.emit({populate:t})}updateRefetchPath(e,t){const n=(0,Me.Z)(this.populate);n.refetchPaths&&(n.refetchPaths[e]=t,this.emit({populate:n}))}populateWithHtmlTagOptions(){if(!this.element.htmlTag.options)return;const e=this.element.htmlTag.options.map((e=>({text:e,value:e})));this.updateDropdownItems(e)}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],gp.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],gp.prototype,"control",void 0),(0,r.gn)([(0,l.fI)()],gp.prototype,"path",void 0),(0,r.gn)([(0,l.tB)("context")],gp.prototype,"context",void 0),gp=(0,r.gn)([(0,l.wA)({components:{NiceButton:io.Z,ElementStudioIconsAutocomplete:hp,Icon:K.Z,DropdownInput:Di.Z,Dropdown:za.Z,ElementStudioConditionInput:Au,Repeater:Ud.Z,TextInput:cs.Z}})],gp);const vp=gp,fp=vp;var yp=(0,Y.Z)(fp,ap,ip,!1,null,null,null);const bp=yp.exports;var Pp=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-dropdown-options"},[t("h2",{staticClass:"mb-2"},[e._v("Breakpoint options")]),e._v(" Support Multiple "),t(Ad.Z,{staticClass:"mb-3 mt-2",attrs:{label:"Support Multiple","input-value":e.value&&!!e.value.multiple,"hide-details":""},on:{change:e.updateMultiple}}),e._v(" Enable Never "),t(Ad.Z,{staticClass:"mb-3 mt-2",attrs:{label:"Enable Never","input-value":e.value&&!!e.value.enableNever,"hide-details":""},on:{change:e.updateEnableNever}})],1)},_p=[];let Sp=class extends s.ZP{updateMultiple(e){const t={...this.value,multiple:e};this.emit(t)}updateEnableNever(e){const t={...this.value,enableNever:e};this.emit(t)}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],Sp.prototype,"value",void 0),Sp=(0,r.gn)([(0,l.wA)({components:{}})],Sp);const Cp=Sp,wp=Cp;var kp=(0,Y.Z)(wp,Pp,_p,!1,null,null,null);const xp=kp.exports;var Ip=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-variable-options"},[t("h3",[e._v("Variables")]),t(Ad.Z,{staticClass:"mb-3 mt-2",attrs:{label:"Enable variables","input-value":e.internalValue.enabled,"hide-details":""},on:{change:e.toggleEnabled}}),e.internalValue.enabled?[t("Repeater",{attrs:{path:e.path,value:e.variables,control:e.control},on:{input:e.updateVariableItems},scopedSlots:e._u([{key:"default",fn:function({index:n}){return[e._v(" Label "),t("TextInput",{staticClass:"mb-2",attrs:{value:e.variables[n].label,testId:"element-studio-control-variable-label-input"},on:{input:function(t){return e.updateVariableItem({...e.variables[n],label:t},n)}}}),e._v(" Value "),t("TextInput",{attrs:{value:e.variables[n].value,testId:"element-studio-control-variable-value-input"},on:{input:function(t){return e.updateVariableItem({...e.variables[n],value:t},n)}}})]}}],null,!1,98037988)}),t(Ad.Z,{attrs:{"input-value":!!e.internalValue.populate,label:"Populate variables based on a Repeater Input"},on:{change:e.updateEnablePopulate}}),e.internalValue.populate?t("div",[t("div",[t(Bd.Z,{attrs:{label:"Path",items:e.paths,value:e.internalValue.populate.path},on:{input:function(t){return e.updatePopulateValue("path",t)}}}),t(Bd.Z,{attrs:{label:"Label",items:e.possibleValues,value:e.internalValue.populate.text},on:{input:function(t){return e.updatePopulateValue("text",t)}}}),t(Bd.Z,{attrs:{label:"Value",items:e.possibleValues,value:e.internalValue.populate.value},on:{input:function(t){return e.updatePopulateValue("value",t)}}})],1),t("ElementStudioConditionInput",{attrs:{title:"Filtering",label:"Show items in the variable only if a condition is met","path-starts-with":`${e.internalValue.populate.path}.`,value:e.internalValue.populate.condition},on:{input:e.updateCondition}}),t(sp.Z)],1):e._e()]:e._e()],2)},Dp=[];const Ep={path:"",text:"",value:"",condition:void 0};let Zp=class extends s.ZP{constructor(){super(...arguments),this.enabled=!1}get internalValue(){return this.value||{}}get paths(){return this.context.getPathsToAllControls(["repeater"])}get possibleValues(){const e=this.internalValue?.populate?.path;if(!e)return[];const t=this.getControl(e);if(!t)return[];const n=t.children.map((e=>e.slug));return n||[]}getControl(e){return(0,Ee.AP)(this.element,e)}get populate(){return this.internalValue.populate||Ep}get variables(){return this.control.options.variableItems||[{value:"value",text:"Label"}]}get element(){return this.context.element()}updateVariableItems(e){this.$emit("updateVariableItems",e)}updateVariableItem(e,t){this.$emit("updateVariableItem",{newItem:e,index:t})}updateEnablePopulate(e){e?this.emit({populate:Ep}):this.emit({populate:void 0})}updateCondition(e){const t=(0,Me.Z)(this.populate);Array.isArray(e)&&!e.length?delete t.condition:t.condition=e,this.emit({populate:t})}updatePopulateValue(e,t){const n=(0,Me.Z)(this.populate);n[e]=t,this.emit({populate:n})}toggleEnabled(e){this.emit({enabled:e})}emit(e){this.$emit("input",{...this.internalValue,...e})}};(0,r.gn)([(0,l.fI)()],Zp.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],Zp.prototype,"control",void 0),(0,r.gn)([(0,l.fI)()],Zp.prototype,"path",void 0),(0,r.gn)([(0,l.tB)("context")],Zp.prototype,"context",void 0),Zp=(0,r.gn)([(0,l.wA)({components:{NiceButton:io.Z,ElementStudioIconsAutocomplete:hp,Icon:K.Z,ElementStudioConditionInput:Au,Repeater:Ud.Z,TextInput:cs.Z}})],Zp);const Tp=Zp,Ap=Tp;var Bp=(0,Y.Z)(Ap,Ip,Dp,!1,null,null,null);const Op=Bp.exports;var Rp=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-media-options"},[t("div",{staticClass:"mb-3"},[t("h2",{staticClass:"mb-2"},[e._v("WP Media Options")]),t(Ad.Z,{attrs:{label:"Enable gallery mode","input-value":e.internalValue.multiple,"hide-details":""},on:{change:e.updateMultiple}})],1),t(Ad.Z,{attrs:{label:"Allow only certain file types","input-value":e.fileTypesEnabled,"hide-details":""},on:{change:e.updateEnableFileTypes}}),e.fileTypesEnabled?t(Td.Z,{staticClass:"mt-2",attrs:{label:"Accepted File Types",value:e.internalValue.acceptedFileTypes,items:e.types,multiple:!0,hint:"All file types are allowed by default."},on:{input:e.updateType}}):e._e()],1)},Mp=[],Fp=n(665);const Np={acceptedFileTypes:void 0,multiple:!1};let Lp=class extends s.ZP{get fileTypesEnabled(){return Array.isArray(this.internalValue.acceptedFileTypes)}get types(){return Fp.n_.types.map((e=>e.value))}get internalValue(){return this.value||Np}updateType(e){this.emit({...this.internalValue,acceptedFileTypes:e})}updateMultiple(e){this.emit({...this.internalValue,multiple:e})}updateEnableFileTypes(e){e?this.updateType([]):this.updateType(void 0)}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],Lp.prototype,"value",void 0),Lp=(0,r.gn)([(0,l.wA)({components:{DropdownInput:Di.Z,Repeater:Ud.Z}})],Lp);const $p=Lp,Wp=$p;var Vp=(0,Y.Z)(Wp,Rp,Mp,!1,null,null,null);const Hp=Vp.exports;var Up=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-media-size-options"},[t("div",{staticClass:"mb-3"},[t("h3",{staticClass:"mb-2"},[e._v("Media Size Options")]),t(Bd.Z,{attrs:{label:"Image Path",value:e.internalValue.imagePropertyPath,items:e.paths,hint:"Will only show an image's available sizes. Use [] when inside a repeater.","persistent-hint":"",clearable:""},on:{input:e.updatePath}}),e.internalValue.imagePropertyPath?t(Ad.Z,{staticClass:"mb-3 mt-2",attrs:{"input-value":e.internalValue.disableSrcset,label:"Don't add srcset attribute to the Image object","persistent-hint":"","hide-details":""},on:{change:e.toggleSrcset}}):e._e()],1)])},zp=[];let Gp=class extends s.ZP{get internalValue(){return this.value||{}}get paths(){return this.context.getPathsToAllControls(["wpmedia"])}updatePath(e){this.emit({...this.internalValue,imagePropertyPath:e||""})}toggleSrcset(e){this.emit({...this.internalValue,disableSrcset:e})}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.tB)("context")],Gp.prototype,"context",void 0),(0,r.gn)([(0,l.fI)()],Gp.prototype,"value",void 0),Gp=(0,r.gn)([(0,l.wA)({components:{DropdownInput:Di.Z,Repeater:Ud.Z}})],Gp);const Kp=Gp,jp=Kp;var qp=(0,Y.Z)(jp,Up,zp,!1,null,null,null);const Xp=qp.exports;var Yp=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-icon-options"},[t("div",{staticClass:"mb-3"},[t("h3",{staticClass:"mb-2"},[e._v("Icon Options")]),t(Bd.Z,{attrs:{clearable:"",multiple:"",value:e.internalValue.suggestions,label:"Suggestions"},on:{input:e.updateSuggestions}})],1)])},Qp=[];let Jp=class extends s.ZP{get internalValue(){return this.value||{}}updateSuggestions(e){this.emit({...this.internalValue,suggestions:e})}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],Jp.prototype,"value",void 0),Jp=(0,r.gn)([(0,l.wA)({components:{DropdownInput:Di.Z,Repeater:Ud.Z}})],Jp);const eh=Jp,th=eh;var nh=(0,Y.Z)(th,Yp,Qp,!1,null,null,null);const sh=nh.exports;function ah(e,t){function n(e,n,s,a){let i="";return i="control"===a?`${t}.${n}_${s}.%%BREAKPOINT%%`:"complex"===a?`${t}.${n}.%%BREAKPOINT%%.${s}`:`${t}.${n}.${s}`,{location:`${e}-${s}`,cssProperty:`${n}-${s}`,affectedPropertyPath:i}}const s=[n("outside","margin","top","complex"),n("outside","margin","bottom","complex"),n("outside","margin","right","complex"),n("outside","margin","left","complex")],a=[n("inside","padding","top","complex"),n("inside","padding","bottom","complex"),n("inside","padding","right","complex"),n("inside","padding","left","complex")],i=[n("outside","margin","top","control"),n("outside","margin","bottom","control")],o=[n("outside","margin","right","control"),n("outside","margin","left","control")],r=[n("inside","padding","top","control"),n("inside","padding","bottom","control")],l=[n("inside","padding","right","control"),n("inside","padding","left","control")],c=[n("outside","margin","top","not_responsive"),n("outside","margin","bottom","not_responsive"),n("outside","margin","right","not_responsive"),n("outside","margin","left","not_responsive"),n("inside","padding","top","not_responsive"),n("inside","padding","bottom","not_responsive"),n("inside","padding","right","not_responsive"),n("inside","padding","left","not_responsive")];switch(e){case"spacing_all":return[...s,...a];case"spacing_all_y":return[...i,...r];case"spacing_all_x":return[...o,...l];case"spacing_margin_all":return s;case"spacing_margin_y":return i;case"spacing_margin_x":return o;case"spacing_padding_all":return a;case"spacing_padding_y":return r;case"spacing_padding_x":return l;case"spacing_all_not_responsive":return c}}var ih=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-post-chooser-options"},[t("div",{staticClass:"mb-3"},[t("h2",{staticClass:"mb-2"},[e._v("Post Chooser Options")]),t("div",{staticClass:"mt-2"},[t("h4",{staticClass:"mb-1"},[e._v("Post Type")]),t("TextInput",{attrs:{value:e.internalValue.postType},on:{input:function(t){return e.update("postType",t)}}})],1),t(Ad.Z,{attrs:{label:"Multiple","input-value":e.internalValue.multiple,"hide-details":""},on:{change:function(t){return e.update("multiple",t)}}}),t(Ad.Z,{attrs:{label:"Show Thumbnails","input-value":e.internalValue.showThumbnails,"hide-details":""},on:{change:function(t){return e.update("showThumbnails",t)}}})],1)])},oh=[];const rh={multiple:!1,showThumbnails:!1,postType:"post"};let lh=class extends s.ZP{get internalValue(){return this.value||rh}updateMultiple(e){this.emit({...this.internalValue,multiple:e})}update(e,t){this.emit({...this.internalValue,[e]:t??""})}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],lh.prototype,"value",void 0),lh=(0,r.gn)([(0,l.wA)({components:{TextInput:cs.Z,DropdownInput:Di.Z,Repeater:Ud.Z}})],lh);const ch=lh,dh=ch;var uh=(0,Y.Z)(dh,ih,oh,!1,null,null,null);const ph=uh.exports;var hh=n(93930),mh=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-media-options mb-3"},[t("h2",{staticClass:"mb-2"},[e._v("Video Options")]),t(Td.Z,{attrs:{label:"Providers",value:e.internalValue.providers,items:e.types,multiple:!0,hint:"All providers are allowed by default."},on:{input:e.updateProviders}})],1)},gh=[];const vh={providers:[]};let fh=class extends s.ZP{get types(){return $d.Ru.types.map((e=>e.value))}get internalValue(){return this.value||vh}updateProviders(e){this.emit({...this.internalValue,providers:e})}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],fh.prototype,"value",void 0),fh=(0,r.gn)([(0,l.wA)({components:{DropdownInput:Di.Z,Repeater:Ud.Z}})],fh);const yh=fh,bh=yh;var Ph=(0,Y.Z)(bh,mh,gh,!1,null,null,null);const _h=Ph.exports;var Sh=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-media-options mb-3"},[t("h3",{staticClass:"mb-2"},[e._v("Alert Box Options")]),t("DropdownInput",{staticClass:"mb-4",attrs:{placeholder:"Style",items:e.styles,value:e.internalValue.style},on:{input:e.updateStyle}}),t("TipTapWrapper",{attrs:{value:e.internalValue.content},on:{input:e.updateContent}})],1)},Ch=[],wh=n(46026);const kh={style:"default",content:""};let xh=class extends s.ZP{get internalValue(){return this.value||kh}get styles(){return $d.wu.types.map((e=>e.value))}updateStyle(e){this.emit({...this.internalValue,style:e})}updateContent(e){this.emit({...this.internalValue,content:e??""})}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],xh.prototype,"value",void 0),xh=(0,r.gn)([(0,l.wA)({components:{DropdownInput:Di.Z,TipTapWrapper:wh.Z}})],xh);const Ih=xh,Dh=Ih;var Eh=(0,Y.Z)(Dh,Sh,Ch,!1,null,null,null);const Zh=Eh.exports;var Th=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-focus-point-options mb-3"},[t("h2",{staticClass:"mb-2"},[e._v("Focus Point Options")]),t(Ad.Z,{staticClass:"mb-3",attrs:{label:"Enable Grid Mode","hide-details":"","input-value":e.internalValue.gridMode},on:{change:e.updateGridMode}}),t(Td.Z,{staticClass:"mb-2",attrs:{label:"Image Path",value:e.internalValue.imagePropertyPath,items:e.paths,"persistent-hint":"",hint:"Shows an image as background of this input",clearable:"",disabled:e.internalValue.gridMode},on:{input:e.updatePath}}),e.internalValue.gridMode?t("AlertBox",{attrs:{options:{type:"info",content:"Not available when grid mode is enabled."}}}):e._e()],1)},Ah=[];let Bh=class extends s.ZP{get internalValue(){return this.value||{}}get paths(){return this.context.getPathsToAllControls(["wpmedia"])}updatePath(e){this.emit({...this.internalValue,imagePropertyPath:e||""})}updateGridMode(e){this.emit({...this.internalValue,gridMode:e})}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.tB)("context")],Bh.prototype,"context",void 0),(0,r.gn)([(0,l.fI)()],Bh.prototype,"value",void 0),Bh=(0,r.gn)([(0,l.wA)({components:{AlertBox:Pc.Z,DropdownInput:Di.Z,Repeater:Ud.Z}})],Bh);const Oh=Bh,Rh=Oh;var Mh=(0,Y.Z)(Rh,Th,Ah,!1,null,null,null);const Fh=Mh.exports;var Nh=n(78143),Lh=n(31304),$h=n.n(Lh);async function Wh(e,t,n,s){return await(0,E.D)({action:"breakdance_save_preset",dataToPost:{directoryPath:t,filename:n,preset:(0,Nh.Tb)((0,Nh.HE)(s),e.section,(0,Pd.$_)(s))},decoder:Z._4})}function Vh(e,t){return`${e}\\${$h()(t)}`}var Hh=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio-hide-control-input"},[t(Ad.Z,{attrs:{"input-value":!!e.value,label:"Hide Control From Specific Elements","hide-details":""},on:{change:e.toggleControl}}),e.value?t(Bd.Z,{attrs:{label:"Elements",items:e.items,value:e.value,multiple:""},on:{input:e.updateValue}}):e._e()],1)},Uh=[];let zh=class extends s.ZP{get items(){return Object.keys(ft.PK.elements)}toggleControl(e){e?this.$emit("input",[]):this.$emit("remove")}updateValue(e){this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],zh.prototype,"value",void 0),(0,r.gn)([(0,l.tB)("context")],zh.prototype,"context",void 0),zh=(0,r.gn)([(0,l.wA)({})],zh);const Gh=zh,Kh=Gh;var jh=(0,Y.Z)(Kh,Hh,Uh,!1,null,null,null);const qh=jh.exports;let Xh=class extends s.ZP{constructor(){super(...arguments),this.codeHelpOpen=!1,this.showContentEditableCode=!1,this.showNewPresetDialog=!1,this.accordionState=[!1]}get canHaveMediaQueries(){return!!this.parentControl?.enableMediaQueries}get parentType(){return this.parentControl?.options.type}get keyToRerenderCodeHelp(){const e=(0,Ac.g)(this.value);return(0,Wu.X)(`${e}`)}get isPresetSection(){return!!this.presetSectionSlug}get presetSectionSlug(){return this.value.options.sectionOptions?.preset?.slug}get isSection(){return"section"===this.value.options.type}get isRepeater(){return(0,Ee.W5)(this.value.options.type)}get isParentARepeater(){return(0,Ee.W5)(this.parentType)}get controlAcceptsChildren(){return(0,Ee.v4)(this.value.options.type)}get isInContentTab(){return this.path.startsWith("contentSections")}get spacingBarPresetSlug(){if(this.isSection)return ie.Cn.find((e=>e===this.value.options?.sectionOptions?.preset?.slug))}get classList(){return{"element-studio-control-or-control-section":!0,"element-studio-control-section":!0,"element-studio-control":!this.controlAcceptsChildren}}get dynamicPropertyPath(){const e=this.context.element().dynamicPropertyPaths;if(!e)return!1;const t=e.find((e=>(0,ve.rg)(e.path)===this.twigPathWithoutRepeaterIndex));return t}get twigPathWithoutRepeaterIndex(){return(0,ve.rg)(`${this.twigParentPath}${this.isParentARepeater?"[]":""}.${this.value.slug}`)}get dynamicPathAcceptsItems(){return(0,ve.cS)()}get contentEditableHelperCode(){return`// Add to the control value's wrapper HTML to make it ContentEditable\n\n    ${this.twigPathForContentEditable}\n    `}get twigPathForContentEditable(){return this.isRepeater||this.isParentARepeater?`{{ dataContentEditablePropertyPath('${this.twigParentPath}['~ loop.index0 ~ '].your_control') }}`:`{{ dataContentEditablePropertyPath('${this.twigPathWithoutRepeaterIndex}') }}`}get datePickerOptions(){return Object.keys($d.Fl.props)}get elementStudioData(){return this.context.getElementStudioData()}async saveNewPreset(e){if(!this.isSection)return;const t=$h()(e.name),n=Vh(e.namespace,t);if(this.elementStudioData.presets.find((e=>e.slug===n)))return void(0,Pd.O6)(this.elementStudioData.saveLocations,e,"preset");const s=this.value;s.options.sectionOptions={...s.options.sectionOptions,preset:{slug:n}},(0,lo.zG)(await Wh({slug:n,section:s},e.directoryPath,t,n),(0,co.g_)((e=>{console.error(e),ye.Z.log.message("Failed to save element, check console")}),(()=>{const t=(0,Me.Z)(this.elementStudioData);t.presets.push({slug:n,directoryPath:e.directoryPath}),t.presetSections.push({slug:n,section:s}),this.context.updateElementStudioData(t),this.context.updateControl(this.parentPath,this.index,s)})))}toggleAccordion(e){s.ZP.set(this.accordionState,e,!this.accordionState[e])}handleDrag(e){this.context.replaceControls(`${this.path}.children`,e)}get canPaste(){return this.controlAcceptsChildren&&!this.isPresetSection&&c.kD.elementStudioClipboard.copiedControl}get canReplace(){if(!c.kD.elementStudioClipboard.copiedControl)return!1;const e=c.kD.elementStudioClipboard.copiedControl;return!this.isSection||"section"===e.options.type}handlePaste(){if(!this.controlAcceptsChildren)return;if(!c.kD.elementStudioClipboard.copiedControl)return;const e=c.kD.elementStudioClipboard.copiedControl;e&&this.context.pasteControl(`${this.path}.children`,e)}handleReplace(){if(!c.kD.elementStudioClipboard.copiedControl)return;const e=c.kD.elementStudioClipboard.copiedControl;e&&this.context.updateControl(this.parentPath,this.index,e)}handleMakePreset(){this.showNewPresetDialog=!0}get controlTypes(){const e=e=>e.charAt(0).toUpperCase()+e.slice(1),t=[];return $d.F4.sort().filter(this.removeDisallowedControlTypes).map((t=>({text:e(t),value:t}))).map((e=>this.isInContentTab&&t.includes(e.value)?{...e,disabled:!0}:e))}copy(){const e=(0,Me.Z)(this.value);c.kD.copyElementStudioControl(e)}get availablePresetSections(){return this.context.getPresetSections().map((e=>({text:e.slug,value:e.slug})))}updatePresetSectionSlug(e){const t=(0,Me.Z)(this.context.getPresetSection(e));void 0!==t&&(t.section.options.sectionOptions={...t.section.options.sectionOptions,type:"popout"},this.context.updateControl(this.parentPath,this.index,t.section),this.turnRelativePropPathsToWhitelistInFlatPropsIntoAbsolutePathsAndUpdateElement(t.section.options.sectionOptions,t.section.slug),this.turnRelativeDynamicPropPathsIntoAbsoluteAndUpdateElement(t.section.options.sectionOptions,t.section.slug))}turnRelativePropPathsToWhitelistInFlatPropsIntoAbsolutePathsAndUpdateElement(e,t){if(!e||!e.preset?.relativePropertyPathsToWhitelistInFlatProps)return;const n=t||(0,Nh.HE)(t);let s=(0,Me.Z)(this.context.element().propertyPathsToWhitelistInFlatProps);const a=e.preset.relativePropertyPathsToWhitelistInFlatProps.map((e=>`${this.twigParentPath}.${n}.${e}`)),i=e.preset.relativePropertyPathsToWhitelistInFlatProps.map((e=>`${this.twigParentPath}.${this.value.slug}.${e}`));s?(s=s.filter((e=>!a.includes(e)&&!i.includes(e))),s=[...s,...a]):s=a,(0,et.n)((()=>this.context.updateElementValue("propertyPathsToWhitelistInFlatProps",s)))}turnRelativeDynamicPropPathsIntoAbsoluteAndUpdateElement(e,t){if(!e||!e.preset?.relativeDynamicPropertyPaths)return;const n=t||(0,Nh.HE)(t);let s=(0,Me.Z)(this.context.element().dynamicPropertyPaths);const a=e.preset.relativeDynamicPropertyPaths.map((e=>({...e,path:`${this.twigParentPath}.${n}.${e.path}`}))),i=e.preset.relativeDynamicPropertyPaths.map((e=>({...e,path:`${this.twigParentPath}.${this.value.slug}.${e.path}`})));s?(s=s.filter((e=>!a.some((t=>t.path===e.path))&&!i.some((t=>t.path===e.path)))),s=[...s,...a]):s=a,(0,et.n)((()=>this.context.updateElementValue("dynamicPropertyPaths",s)))}removeDisallowedControlTypes(e){const t=["class","font_family","global_colors","message"];return!t.includes(e)}addControl(){this.context.addControl(this.path)}deleteControl(){this.context.deleteControl(this.parentPath,this.index)}updateControlType(e){const t=(0,Me.Z)(this.value);if(t.options.type=e,!this.isInContentTab){const n=["code","repeater","inline_repeater","spacing_complex","border_complex","gradient","icon","richtext","shadow","wpmedia","text","focus_point","url"];n.includes(e)?t.options.layout="vertical":t.options.layout="inline"}this.context.updateControl(this.parentPath,this.index,t)}updateVariableItems(e){const t=(0,Me.Z)(this.value);t.options.variableItems=e,this.context.updateControl(this.parentPath,this.index,t)}updateVariableItem({newItem:e,index:t}){const n=(0,Me.Z)(this.value);n.options.variableItems||(n.options.variableItems=[]),n.options.variableItems[t]=e,this.context.updateControl(this.parentPath,this.index,n)}updateDropdownItems(e){const t=(0,Me.Z)(this.value);t.options.items=e,this.context.updateControl(this.parentPath,this.index,t)}updateDropdownItem({newItem:e,index:t}){const n=(0,Me.Z)(this.value);n.options.items||(n.options.items=[]),n.options.items[t]=e,this.context.updateControl(this.parentPath,this.index,n)}updateOptions(e,t){const n=(0,Me.Z)(this.value),s=`options.${t}`;se()(n,s,e),this.context.updateControl(this.parentPath,this.index,n)}get availableDescendantElements(){return Object.values(c.PK.elements).filter((e=>!!e&&(!e.nestingRule.restrictedToBeADirectChildOf&&(0,Ze.V4)(e.nestingRule,this.context.element().nestingRule,this.context.element().slug)))).map((e=>e?.slug))}updateAddExtraElementsBySlug(e){const t=(0,Me.Z)(this.value);t.options.addRegisteredChildrenOptions={...t.options.addRegisteredChildrenOptions,addExtraElementsBySlug:e},this.context.updateControl(this.parentPath,this.index,t)}get autofocusSupported(){switch(this.value.options.type){case"text":return!0;case"video":return!0;default:return!1}}get codeTypes(){return["css","html","javascript","x-php"]}updateCodeType(e){const t=(0,Me.Z)(this.value);t.options.codeOptions={...t.options.codeOptions,language:e},this.context.updateControl(this.parentPath,this.index,t)}get shadowTypes(){return $d.bB.props.type.types.map((e=>e.value))}updateShadowType(e){const t=(0,Me.Z)(this.value);t.options.shadowOptions={...t.options.shadowOptions,type:e},this.context.updateControl(this.parentPath,this.index,t)}updateTextOptionsMultiline(e){const t=(0,Me.Z)(this.value);t.options.textOptions={...t.options.textOptions,multiline:e},this.context.updateControl(this.parentPath,this.index,t)}updateTextOptionsFormat(e){const t=(0,Me.Z)(this.value);t.options.textOptions={...t.options.textOptions,format:e},this.context.updateControl(this.parentPath,this.index,t)}updateButtonBarOptionsSize(e){const t=(0,Me.Z)(this.value);t.options.buttonBarOptions={...t.options.buttonBarOptions,size:e?"big":"small",layout:"default"},this.context.updateControl(this.parentPath,this.index,t)}updateButtonBarOptionsLayout(e){const t=(0,Me.Z)(this.value);t.options.buttonBarOptions={...t.options.buttonBarOptions,layout:e?"multiline":"default",size:"small"},this.context.updateControl(this.parentPath,this.index,t)}addPreset(){this.context.addPreset(this.path)}get controlLayouts(){return["inline","vertical"]}updateControlLayout(e){const t=(0,Me.Z)(this.value);t.options.layout=e,this.context.updateControl(this.parentPath,this.index,t)}updateKeywords(e){const t=(0,Me.Z)(this.value);t.keywords=null===e?void 0:e.split(","),this.context.updateControl(this.parentPath,this.index,t)}get keywordsValue(){return this.value.keywords?this.value.keywords.join(","):""}updatePlaceholder(e){const t=(0,Me.Z)(this.value);t.options.placeholder=e??void 0,this.context.updateControl(this.parentPath,this.index,t)}updateColorType(e){const t=(0,Me.Z)(this.value);t.options.colorOptions={...t.options.colorOptions,type:e},this.context.updateControl(this.parentPath,this.index,t)}updateConditions(e){const t=(0,Me.Z)(this.value);Array.isArray(e)&&!e.length?delete t.options.condition:t.options.condition=e,this.context.updateControl(this.parentPath,this.index,t)}updateHideForElements(e){const t=(0,Me.Z)(this.value);t.options.hideForElements=e,this.context.updateControl(this.parentPath,this.index,t)}deleteHideForElements(){const e=(0,Me.Z)(this.value);delete e.options.hideForElements,this.context.updateControl(this.parentPath,this.index,e)}get sectionLayouts(){return $d.Pk}updateSectionLayoutType(e="accordion"){const t=(0,Me.Z)(this.value);t.options.sectionOptions={...t.options.sectionOptions,type:e},this.context.updateControl(this.parentPath,this.index,t)}updateLabelAndSlugOnFocusOut(e){const t=e.target.value,n=(0,Me.Z)(this.value);n.label=t,n.slug=t.replace(/[^a-z0-9]+/gi,"_").toLowerCase(),/^\d/.test(n.slug)&&(n.slug=`slug_cant_start_with_number_${n.slug}`),this.context.updateControl(this.parentPath,this.index,n),this.updateElementPropertiesNotTiedToControl(n)}updateSlugOnFocusOut(e){const t=e.target.value?e.target.value:"",n=(0,Me.Z)(this.value);n.slug=t.replace(/[^a-z0-9]+/gi,"_").toLowerCase(),/^\d/.test(n.slug)&&(n.slug=`slug_cant_start_with_number_${n.slug}`),this.context.updateControl(this.parentPath,this.index,n),this.updateElementPropertiesNotTiedToControl(n)}updateControlBoolean(e,t){const n=(0,Me.Z)(this.value);n[t]=e,this.context.updateControl(this.parentPath,this.index,n)}updateDynamicPropertyPaths(e,t="string",n=!1){let s=(0,Me.Z)(this.context.element().dynamicPropertyPaths);s&&(s=s.filter((e=>e.path!==this.twigPathWithoutRepeaterIndex))),e&&(s||(s=[]),s.push({accepts:t,path:this.twigPathWithoutRepeaterIndex,...n&&{proOnly:n}})),this.context.updateElementValue("dynamicPropertyPaths",s)}isSpacingBarEnabled(){const e=this.context.element().spacingBars;if(!e||!e.length)return!1;if(!this.spacingBarPresetSlug)return!1;const t=ah(this.spacingBarPresetSlug,this.twigPathWithoutRepeaterIndex).map((e=>e.affectedPropertyPath)),n=e.find((e=>t.includes(e.affectedPropertyPath)));return!!n}updateSpacingBar(e){if(!this.spacingBarPresetSlug)return;let t=(0,Me.Z)(this.context.element().spacingBars);const n=ah(this.spacingBarPresetSlug,this.twigPathWithoutRepeaterIndex);if(e)t||(t=[]),t=[...t,...n];else if(t){const e=n.map((e=>e.affectedPropertyPath));t=t.filter((t=>!e.includes(t.affectedPropertyPath)))}this.context.updateElementValue("spacingBars",t)}updateElementPropertiesNotTiedToControl(e){(0,et.n)((()=>this.updateSpacingBar(!1))),(0,et.n)((()=>this.updateDynamicPropertyPaths(!1))),(0,et.n)((()=>this.updatePropertyPathsToWhitelistInFlatProps(!1))),(0,et.n)((()=>this.updatePropertyPathsToSsrElementWhenValueChanges(!1))),this.turnRelativePropPathsToWhitelistInFlatPropsIntoAbsolutePathsAndUpdateElement(e.options.sectionOptions,e.slug),this.turnRelativeDynamicPropPathsIntoAbsoluteAndUpdateElement(e.options.sectionOptions,e.slug)}get shouldControlValueBeAddedInAllBreakpoints(){const e=this.context.element().propertyPathsToWhitelistInFlatProps;return e&&e.includes(this.twigPathWithoutRepeaterIndex)}updatePropertyPathsToWhitelistInFlatProps(e){let t=(0,Me.Z)(this.context.element().propertyPathsToWhitelistInFlatProps);if(e)t||(t=[]),t.push(this.twigPathWithoutRepeaterIndex);else if(t){const e=t.findIndex((e=>e===this.twigPathWithoutRepeaterIndex));e>-1&&t.splice(e,1)}this.context.updateElementValue("propertyPathsToWhitelistInFlatProps",t)}get hasSsr(){return this.context.element().template.includes("%%SSR%%")}get shouldControlValueCauseSsr(){const e=this.context.element().propertyPathsToSsrElementWhenValueChanges;return e&&e.includes(this.twigPathWithoutRepeaterIndex)}updatePropertyPathsToSsrElementWhenValueChanges(e){let t=(0,Me.Z)(this.context.element().propertyPathsToSsrElementWhenValueChanges);e?(t||(t=[]),t.push(this.twigPathWithoutRepeaterIndex)):t&&(t=t.filter((e=>e!==this.twigPathWithoutRepeaterIndex))),this.context.updateElementValue("propertyPathsToSsrElementWhenValueChanges",t)}};(0,r.gn)([(0,l.fI)()],Xh.prototype,"path",void 0),(0,r.gn)([(0,l.fI)()],Xh.prototype,"parentPath",void 0),(0,r.gn)([(0,l.fI)()],Xh.prototype,"index",void 0),(0,r.gn)([(0,l.fI)()],Xh.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],Xh.prototype,"twigParentPath",void 0),(0,r.gn)([(0,l.fI)()],Xh.prototype,"parentControl",void 0),(0,r.gn)([(0,l.tB)("context")],Xh.prototype,"context",void 0),Xh=(0,r.gn)([(0,l.wA)({name:"ControlSectionOrControl",components:{ElementStudioHideControlInput:qh,ElementStudioSaveNewDialog:kd,ElementStudioFocusPointOptions:Fh,ElementStudioVideoOptions:_h,ElementStudioIconsAutocomplete:hp,IconButton:Ua.Z,InlineRepeater:hh.Z,ElementStudioBreakpointOptions:xp,Icon:K.Z,ElementStudioIconOptions:sh,ElementStudioMediaSizeOptions:Xp,ElementStudioMediaOptions:Hp,ElementStudioPostChooserOptions:ph,TextInput:cs.Z,Copyable:ru,ElementStudioDropdownOptions:bp,ElementStudioVariableOptions:Op,DropdownInput:Di.Z,ElementStudioRepeaterOptions:np,ElementStudioRangeOptions:ju,Dropdown:za.Z,CopyButton:Qd.Z,ShittyTextInput:Yd,Repeater:Ud.Z,ControlSectionOrControl:Xh,draggable:Vd(),Accordion:Hd.Z,TwigCodeHelper:ku,ElementStudioConditionInput:Au,ElementStudioUnitOptions:$u,ElementStudioAlertBoxOptions:Zh}})],Xh);const Yh=Xh,Qh=Yh;var Jh=(0,Y.Z)(Qh,Nd,Ld,!1,null,null,null);const em=Jh.exports;let tm=class extends s.ZP{get sectionName(){return`${this.section}Sections`}handleDrag(e){this.context.replaceControls(this.sectionName,e)}get canPaste(){return ft.kD.elementStudioClipboard.copiedControl}handlePaste(){if(!ft.kD.elementStudioClipboard.copiedControl)return;const e=ft.kD.elementStudioClipboard.copiedControl;e&&this.context.pasteControl(this.sectionName,e)}addSection(){this.context.addControl(this.sectionName,"section")}addPreset(){this.context.addPreset(this.sectionName)}};(0,r.gn)([(0,l.fI)()],tm.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],tm.prototype,"section",void 0),(0,r.gn)([(0,l.tB)("context")],tm.prototype,"context",void 0),tm=(0,r.gn)([(0,l.wA)({components:{ControlSectionOrControl:em,draggable:Vd()}})],tm);const nm=tm,sm=nm;var am=(0,Y.Z)(sm,Md,Fd,!1,null,null,null);const im=am.exports;var om=n(85216),rm=n(85256),lm=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e._v(" Dependencies "),t("Repeater",{attrs:{value:e.value||[],control:{options:{repeaterOptions:{titleTemplate:"{title}",defaultTitle:"Dependency"}}}},on:{input:function(t){return e.updateDependenciesRoot(t)}},scopedSlots:e._u([{key:"default",fn:function({index:n,value:s}){return[t(pi.Z,{attrs:{label:"Title",value:s.title},on:{input:function(t){return e.updateDependency(t,`[${n}].title`)}}}),t("Accordion",{attrs:{expanded:"scripts"===e.accordionState},on:{toggle:function(t){return e.toggleAccordion("scripts")}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"pa-4"},[e._v(" Scripts ("+e._s(s.scripts?s.scripts.length:0)+") ")])]},proxy:!0},{key:"content",fn:function(){return[t("Repeater",{attrs:{value:s.scripts,control:{options:{repeaterOptions:{titleTemplate:"URL to script"}}}},on:{input:function(t){return e.updateDependencies(t,`[${n}].scripts`)}},scopedSlots:e._u([{key:"default",fn:function({index:s,value:a}){return[t(Td.Z,{attrs:{placeholder:"Script",value:a,items:e.jsLocalDependencies},on:{input:function(t){return e.updateDependency(t,`[${n}].scripts[${s}]`)}}}),!a||e.dependencyIsNotLocal(a,e.jsLocalDependencies)?t("div",[t("div",a?[e._v("The dependency is a hardcoded value:")]:[e._v("Hardcode a value:")]),t("div",[e._v(" Remember to use "),t("pre",[e._v("%%BREAKDANCE_ELEMENTS_PLUGIN_URL%%")])]),t("ShittyTextInput",{attrs:{value:a},on:{input:function(t){return e.updateDependency(t,`[${n}].scripts[${s}]`)}}})],1):e._e(),t(os.Z,{attrs:{outlined:"",small:""},on:{click:e.getLocalDependenciesFilesFromWordpress}},[e._v(" Reload dependencies files ")])]}}],null,!0)})]},proxy:!0}],null,!0)}),t("Accordion",{attrs:{expanded:"inlineScripts"===e.accordionState},on:{toggle:function(t){return e.toggleAccordion("inlineScripts")}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"pa-4"},[e._v(" Inline Scripts ("+e._s(s.inlineScripts?s.inlineScripts.length:0)+") ")])]},proxy:!0},{key:"content",fn:function(){return[t("Repeater",{attrs:{value:s.inlineScripts,control:{options:{repeaterOptions:{titleTemplate:"JavaScript"}}}},on:{input:function(t){return e.updateDependencies(t,`[${n}].inlineScripts`)}},scopedSlots:e._u([{key:"default",fn:function({index:s,value:a}){return[t("div",{staticClass:"element-studio__execute-inline-script-dependencies"},[t(os.Z,{attrs:{small:"",outlined:""},on:{click:function(t){return e.executeInlineScript(`[${n}].inlineScripts[${s}]`)}}},[e._v(" Execute code ")])],1),t("CodeInput",{attrs:{value:a,language:"javascript","twig-variables":e.twigVariables,tags:e.tags},on:{input:function(t){return e.updateDependency(t||"",`[${n}].inlineScripts[${s}]`)}}})]}}],null,!0)})]},proxy:!0}],null,!0)}),t("Accordion",{attrs:{expanded:"styles"===e.accordionState},on:{toggle:function(t){return e.toggleAccordion("styles")}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"pa-4"},[e._v(" Styles ("+e._s(s.styles?s.styles.length:0)+") ")])]},proxy:!0},{key:"content",fn:function(){return[t("Repeater",{attrs:{value:s.styles,control:{options:{repeaterOptions:{titleTemplate:"URL to style"}}}},on:{input:function(t){return e.updateDependencies(t,`[${n}].styles`)}},scopedSlots:e._u([{key:"default",fn:function({index:s,value:a}){return[t(Td.Z,{attrs:{placeholder:"Style",value:a,items:e.cssLocalDependencies},on:{input:function(t){return e.updateDependency(t,`[${n}].styles[${s}]`)}}}),!a||e.dependencyIsNotLocal(a,e.cssLocalDependencies)?t("div",[t("div",a?[e._v("The dependency is a hardcoded value:")]:[e._v("Hardcode a value:")]),t("div",[e._v(" Remember to use "),t("pre",[e._v("%%BREAKDANCE_ELEMENTS_PLUGIN_URL%%")])]),t("ShittyTextInput",{attrs:{value:a},on:{input:function(t){return e.updateDependency(t,`[${n}].styles[${s}]`)}}})],1):e._e(),t(os.Z,{attrs:{outlined:"",small:""},on:{click:e.getLocalDependenciesFilesFromWordpress}},[e._v(" Reload dependencies files ")])]}}],null,!0)})]},proxy:!0}],null,!0)}),t("Accordion",{attrs:{expanded:"inlineStyles"===e.accordionState},on:{toggle:function(t){return e.toggleAccordion("inlineStyles")}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"pa-4"},[e._v(" Inline Styles ("+e._s(s.inlineStyles?s.inlineStyles.length:0)+") ")])]},proxy:!0},{key:"content",fn:function(){return[t("Repeater",{attrs:{path:"inlineStyles",value:s.inlineStyles,control:{options:{repeaterOptions:{titleTemplate:"CSS"}}}},on:{input:function(t){return e.updateDependencies(t,`[${n}].inlineStyles`)}},scopedSlots:e._u([{key:"default",fn:function({index:s,value:a}){return[t("CodeInput",{attrs:{value:a,language:"css","twig-variables":e.twigVariables,tags:e.tags},on:{input:function(t){return e.updateDependency(t||"",`[${n}].inlineStyles[${s}]`)}}})]}}],null,!0)})]},proxy:!0}],null,!0)}),t("div",{staticClass:"element-studio-dependencies-separator"}),t("Accordion",{attrs:{expanded:"builderCondition"===e.accordionState},on:{toggle:function(t){return e.toggleAccordion("builderCondition")}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"pa-4"},[e._v(" Builder Condition ("+e._s(s.builderCondition?"present":"empty")+") ")])]},proxy:!0},{key:"content",fn:function(){return[t("CodeInput",{attrs:{value:s.builderCondition,language:"javascript","twig-variables":e.twigVariables},on:{input:function(t){return e.updateDependency(t||"",`[${n}].builderCondition`)}}}),t("div",{class:{"element-studio-action-info":!0,"element-studio-action-info__open":e.conditionInfoOpen},on:{click:function(t){e.conditionInfoOpen=!e.conditionInfoOpen}}},[t("TextWithChevron",{attrs:{open:e.conditionInfoOpen}},[e._t("default",(function(){return[e._v("Decides if the dependencies are added to the builder")]}))],2),t("div",{staticClass:"mt-2"},[e._v("Can run Twig and JS code.")]),t("div",[e._v("When left empty the dependencies will always be added.")]),t("div",[e._v(" If any code is present and the result returns a "),t("code",[e._v("true")]),e._v(" value the dependencies will be added. ")]),t("div",[e._v(" If it returns "),t("code",[e._v("false")]),e._v(" no dependencies are added. ")])],1)]},proxy:!0}],null,!0)}),t("Accordion",{attrs:{expanded:"frontendCondition"===e.accordionState},on:{toggle:function(t){return e.toggleAccordion("frontendCondition")}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"pa-4"},[e._v(" Frontend Condition ("+e._s(s.frontendCondition?"present":"empty")+") ")])]},proxy:!0},{key:"content",fn:function(){return[t("CodeInput",{attrs:{value:s.frontendCondition,language:"x-php","twig-variables":e.twigVariables},on:{input:function(t){return e.updateDependency(t||"",`[${n}].frontendCondition`)}}}),t("div",{class:{"element-studio-action-info":!0,"element-studio-action-info__open":e.conditionInfoOpen},on:{click:function(t){e.conditionInfoOpen=!e.conditionInfoOpen}}},[t("TextWithChevron",{attrs:{open:e.conditionInfoOpen}},[e._t("default",(function(){return[e._v("Decides if the dependencies are added to the frontend")]}))],2),t("div",{staticClass:"mt-2"},[e._v("Can run Twig and PHP code.")]),t("div",[e._v("When left empty the dependencies will always be added.")]),t("div",[e._v(" If any code is present and the result returns a "),t("code",[e._v("true")]),e._v(" value the dependencies will be added. ")]),t("div",[e._v(" If it returns "),t("code",[e._v("false")]),e._v(" no dependencies are added. ")])],1)]},proxy:!0}],null,!0)})]}}])})],1)},cm=[],dm=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"d-flex align-center"},[t("Icon",{staticClass:"mr-2",attrs:{icon:"ChevronDownIcon",rotate:e.open?"90":void 0,size:"12"}}),t("b",[e._t("default")],2)],1)},um=[];let pm=class extends s.ZP{};(0,r.gn)([(0,l.fI)()],pm.prototype,"open",void 0),pm=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z}})],pm);const hm=pm,mm=hm;var gm=(0,Y.Z)(mm,dm,um,!1,null,null,null);const vm=gm.exports;var fm=n(36300);const ym=Z.G0([Z.i0("id"),Z.i0("parentId"),Z.i0("selector"),Z.i0("parent_selector"),Z.i0("postId"),Z.i0("ssr")]),bm=ym.types.map((({value:e})=>e));let Pm=class extends s.ZP{constructor(){super(...arguments),this.accordionState="",this.index=0,this.conditionInfoOpen=!1}get tags(){return bm}get twigVariables(){return this.context.getPathsToAllControls()}async mounted(){ft.PK.localDependenciesFiles.length||await this.getLocalDependenciesFilesFromWordpress()}async getLocalDependenciesFilesFromWordpress(){(0,V.pipe)(await(0,E.D)({action:"breakdance_get_local_dependency_files",decoder:Z.IX(T.xY),resultKey:"localDependencyFiles"}),(0,H.fold)((e=>e.forEach((e=>ye.Z.log.message(e.msg)))),(e=>{ft.PK.setLocalDependenciesFiles(e)})))}updateDependenciesRoot(e){this.context.updateDependency(e)}updateDependencies(e,t){const n=(0,Me.Z)(this.value)||[];se()(n,t,e.map((e=>"string"===typeof e?e:""))),this.context.updateDependency(n)}updateDependency(e,t){const n=(0,Me.Z)(this.value)||[];se()(n,t,e),this.context.updateDependency(n)}toggleAccordion(e){this.accordionState=this.accordionState===e?"":e}executeInlineScript(e){const t=b()(this.value,e);t&&(0,fm.Oz)((0,De.RY)(),{code:t,origin:"Executed inline script from Element Studio"})}dependencyIsNotLocal(e,t){return!t.find((t=>"value"in t&&t.value===e))}get jsLocalDependencies(){return this.localDependenciesAsVuetifySelectShape("js")}get cssLocalDependencies(){return this.localDependenciesAsVuetifySelectShape("css")}localDependenciesAsVuetifySelectShape(e){const t=[];return ft.PK.localDependenciesFiles.forEach((n=>{n.files[e].length&&(t.push({header:n.name}),n.files[e].forEach((e=>{t.push({text:e.name,value:e.url})})))})),t}};(0,r.gn)([(0,l.fI)()],Pm.prototype,"value",void 0),(0,r.gn)([(0,l.tB)("context")],Pm.prototype,"context",void 0),Pm=(0,r.gn)([(0,l.wA)({components:{TextInput:cs.Z,TextWithChevron:vm,CodeInput:om.Z,Accordion:Hd.Z,ShittyTextInput:Yd,Repeater:Ud.Z}})],Pm);const _m=Pm,Sm=_m;var Cm=(0,Y.Z)(Sm,lm,cm,!1,null,null,null);const wm=Cm.exports,km=e=>{const t=(0,Me.Z)(e),n=xm(t);return n.controls.settingsSections=[],n.cssTemplate=n.cssTemplate.split("\n{#%---")[0],n.dynamicPropertyPaths&&(n.dynamicPropertyPaths=n.dynamicPropertyPaths.filter((e=>!e.path.startsWith("settings.")))),n};function xm(e){const t=(0,Me.Z)(e);return(0,rm.f)(t.controls).forEach((e=>{t.controls[e]=t.controls[e].filter((e=>!e.options.isExternal))})),t}var Im=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("Accordion",{attrs:{expanded:e.accordionState===e.actionKey},on:{toggle:e.toggleAccordion},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"pa-4"},[e._v(" "+e._s(e.actionName)+" ("+e._s(e.value&&e.value[e.actionKey]?e.value[e.actionKey].length:0)+") ")])]},proxy:!0},{key:"content",fn:function(){return[t("b",[e._t("action-description")],2),t("Repeater",{attrs:{value:e.value[e.actionKey],control:{options:{repeaterOptions:{titleTemplate:"Script",buttonName:"Add script"}}},"default-new-value":{script:""}},on:{input:function(t){return e.updateActions(t)}},scopedSlots:e._u([{key:"default",fn:function({index:n,value:s}){return[t("CodeInput",{attrs:{language:"javascript",value:s.script,"twig-variables":e.twigVariables,tags:e.tags},on:{input:function(t){return e.updateAction(t||"",`${e.actionKey}[${n}].script`)}}}),t("div",{class:{"element-studio-action-info":!0,"element-studio-action-info__open":e.actionInfoOpen},on:{click:function(t){e.actionInfoOpen=!e.actionInfoOpen}}},[t("TextWithChevron",{attrs:{open:e.actionInfoOpen}},[e._t("default",(function(){return[e._v(" Available within the action's code: ")]}))],2),"onAfterDeletedElement"===e.actionKey?[t("div",{staticClass:"mt-3"},[e._v(" Tags: "),t("code",[e._v("%%PARENT_SELECTOR%%")]),e._v(" and "),t("code",[e._v("%%PARENT_ID%%")]),e._v(" are available. ")])]:[t("div",{staticClass:"mt-3"},[e._v(" You can use Twig to access the element properties. eg. "),t("code",[e._v("{ { design.background.color } }")]),e._v(". ")]),t("div",{staticClass:"mt-3"},[t("code",[e._v("%%SELECTOR%%, %%ID%%")]),e._v(" are also available. ")])]],2),e.withDependencies?t("Repeater",{attrs:{value:s.dependencies,control:{options:{repeaterOptions:{titleTemplate:"Dependency",buttonName:"Add dependency"}}}},on:{input:function(t){return e.updateDependencies(t,n)}},scopedSlots:e._u([{key:"default",fn:function({index:s,value:a}){return[t(Bd.Z,{attrs:{items:e.pathsToAllControls,value:a},on:{input:function(t){return e.updateDependency(t,`${e.actionKey}[${n}].dependencies[${s}]`)}}}),t("div",{class:{"element-studio-action-info":!0,"element-studio-action-info__open":e.dependencyInfoOpen},on:{click:function(t){e.dependencyInfoOpen=!e.dependencyInfoOpen}}},[t("TextWithChevron",{attrs:{open:e.dependencyInfoOpen}},[e._t("default",(function(){return[e._t("dependency-description-title")]}))],2),t("div",{staticClass:"mt-2"},[e._t("dependency-description")],2)],1)]}}],null,!0)}):e._e(),t(Ad.Z,{attrs:{"input-value":s.runForAllChildren,label:"Run for all children",hint:"beware that the Twig code running in the action will be with the child's data, including tags","persistent-hint":""},on:{change:function(t){return e.updateAction(t,`${e.actionKey}[${n}].runForAllChildren`)}}})]}}],null,!0)})]},proxy:!0}],null,!0)})],1)},Dm=[],Em=n(45021),Zm=n.n(Em);let Tm=class extends s.ZP{constructor(){super(...arguments),this.index=0,this.actionInfoOpen=!1,this.dependencyInfoOpen=!1}get actionName(){return Zm()(this.actionKey)}get tags(){return bm}get twigVariables(){return this.context.getPathsToAllControls()}toggleAccordion(){this.$emit("toggle",this.accordionState===this.actionKey?"":this.actionKey)}getValueOrDefault(e){let t=(0,Me.Z)(this.value);return t?t[e]||(t[e]=[{script:""}]):t={[e]:[{script:""}]},t}updateActions(e){const t=this.getValueOrDefault(this.actionKey);t[this.actionKey]=e,this.context.updateActions(t)}updateAction(e,t){const n=(0,Me.Z)(this.value);se()(n,t,e),this.context.updateActions(n)}updateDependencies(e,t){const n=this.getValueOrDefault(this.actionKey);let s=n[this.actionKey];s||(s=[]),s[t].dependencies=e.map((e=>"string"===typeof e?e:"")),n[this.actionKey]=s,this.context.updateActions(n)}get pathsToAllControls(){const e=this.context.element().controls;return[e.designSections.length?"design":null,e.contentSections.length?"content":null,...this.context.getPathsToAllControls([],[])].filter(Boolean)}updateDependency(e,t){const n=(0,Me.Z)(this.value);se()(n,t,e),this.context.updateActions(n)}};(0,r.gn)([(0,l.fI)()],Tm.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],Tm.prototype,"actionKey",void 0),(0,r.gn)([(0,l.fI)()],Tm.prototype,"accordionState",void 0),(0,r.gn)([(0,l.fI)({default:!0})],Tm.prototype,"withDependencies",void 0),(0,r.gn)([(0,l.tB)("context")],Tm.prototype,"context",void 0),Tm=(0,r.gn)([(0,l.wA)({components:{TextWithChevron:vm,CodeInput:om.Z,ShittyTextInput:Yd,Repeater:Ud.Z,Accordion:Hd.Z}})],Tm);const Am=Tm,Bm=Am;var Om=(0,Y.Z)(Bm,Im,Dm,!1,null,null,null);const Rm=Om.exports;var Mm=n(67389),Fm=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Repeater",{attrs:{value:e.value||[],control:{options:{repeaterOptions:{defaultNewValue:{name:"",template:""},defaultTitle:"HTML Attribute",titleTemplate:"{name}",buttonName:"Add new HTML attribute"}}}},on:{input:function(t){return e.updateAttributes(t)}},scopedSlots:e._u([{key:"default",fn:function({index:n,value:s}){return[t("b",[e._v("Attribute Name")]),t(pi.Z,{attrs:{value:s.name,rules:[e.htmlAttributeNameRule]},on:{input:function(t){return e.updateName(n,t)}}}),t("b",[e._v("Attribute Value")]),"template"in s?t("CodeInput",{attrs:{value:s.template,language:"html"},on:{input:function(t){return e.updateTemplateValue(n,t)}}}):"propertyPath"in s?t(pi.Z,{attrs:{value:s.template},on:{input:function(t){return e.updatePropertyPathValue(n,t)}}}):"rawValue"in s?t(pi.Z,{attrs:{value:s.template},on:{input:function(t){return e.updateRawValue(n,t)}}}):e._e()]}}])})},Nm=[];let Lm=class extends s.ZP{updateAttributes(e){this.$emit("input",e)}updateName(e,t){const n=(0,Me.Z)(this.value);!0===this.htmlAttributeNameRule(t)&&(n[e].name=t.trim(),this.$emit("input",n))}updateTemplateValue(e,t){const n=(0,Me.Z)(this.value);n[e].template=t??"",this.$emit("input",n)}updatePropertyPathValue(e,t){const n=(0,Me.Z)(this.value);n[e].propertyPath=t,this.$emit("input",n)}updateRawValue(e,t){const n=(0,Me.Z)(this.value);n[e].rawValue=t,this.$emit("input",n)}htmlAttributeNameRule(e){return bc.hB.validateHtmlAttributeName(e)}};(0,r.gn)([(0,l.fI)({default:()=>[]})],Lm.prototype,"value",void 0),(0,r.gn)([(0,l.tB)("context")],Lm.prototype,"context",void 0),Lm=(0,r.gn)([(0,l.wA)({components:{CodeInput:om.Z,Repeater:Ud.Z,Dropdown:za.Z,Accordion:Hd.Z,draggable:Vd()}})],Lm);const $m=Lm,Wm=$m;var Vm=(0,Y.Z)(Wm,Fm,Nm,!1,null,null,null);const Hm=Vm.exports;var Um=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Repeater",{attrs:{value:e.value||[],control:{options:{repeaterOptions:{titleTemplate:"Class .{name}",buttonName:"Add Class",defaultNewValue:{name:"my-class",template:"yes"}}}}},on:{input:function(t){return e.updateClasses(t)}},scopedSlots:e._u([{key:"default",fn:function({index:n,value:s}){return[t("b",[e._v("Class Name")]),t(pi.Z,{attrs:{value:s.name,rules:[e.htmlClassNameRule]},on:{input:function(t){return e.updateName(n,t)}}}),t("b",[e._v("Class Condition Twig Template")]),t("CodeInput",{attrs:{value:s.template,language:"html"},on:{input:function(t){return e.updateValue(n,t)}}}),t("div",{staticClass:"mt-2"},[e._v(" The template can run Twig code. Properties like design.something.whatever are available. If the template returns a blank string, the class will not be added. If the template returns anything, the class will be added. ")]),t("div",[e._v("(the returned value is trimmed for spaces and newlines)")])]}}])})},zm=[];let Gm=class extends s.ZP{updateClasses(e){this.$emit("input",e)}updateName(e,t){const n=(0,Me.Z)(this.value);!0===this.htmlClassNameRule(t)&&(n[e].name=t.trim(),this.$emit("input",n))}updateValue(e,t){const n=(0,Me.Z)(this.value);n[e].template=t??"",this.$emit("input",n)}htmlClassNameRule(e){return bc.hB.validateHtmlClassName(e)}};(0,r.gn)([(0,l.fI)({default:[]})],Gm.prototype,"value",void 0),(0,r.gn)([(0,l.tB)("context")],Gm.prototype,"context",void 0),Gm=(0,r.gn)([(0,l.wA)({components:{CodeInput:om.Z,Repeater:Ud.Z,Dropdown:za.Z,Accordion:Hd.Z,draggable:Vd()}})],Gm);const Km=Gm,jm=Km;var qm=(0,Y.Z)(jm,Um,zm,!1,null,null,null);const Xm=qm.exports;var Ym=n(6184),Qm=n(75617),Jm=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(ui.Z,[t(ki.ZB,[e._v(" Looks Good "),t("DropdownInput",{attrs:{items:e.dropdownItems,value:e.value.looksGood,clearable:""},on:{input:function(t){return e.updateValueForKey("looksGood",t)}}}),t("br"),e._v(" Options Are Good "),t("DropdownInput",{attrs:{items:e.dropdownItems,value:e.value.optionsGood,clearable:""},on:{input:function(t){return e.updateValueForKey("optionsGood",t)}}}),t("br"),e._v(" Options Work "),t("DropdownInput",{attrs:{items:e.dropdownItems,value:e.value.optionsWork,clearable:""},on:{input:function(t){return e.updateValueForKey("optionsWork",t)}}}),t("br"),e._v(" Dynamic Behavior Works "),t("DropdownInput",{attrs:{items:e.dropdownItems,value:e.value.dynamicBehaviorWorks,clearable:""},on:{input:function(t){return e.updateValueForKey("dynamicBehaviorWorks",t)}}}),t("br"),t("br"),t(Qm.Z,{staticStyle:{border:"1px solid var(--gray500)"},attrs:{filled:"",value:e.value.notes},on:{input:e.updateNotes}}),t("br")],1)],1)},eg=[];let tg=class extends s.ZP{get dropdownItems(){return["yes","no","unknown","sort of"]}updateValueForKey(e,t){const n=(0,Me.Z)(this.value);n[e]=t,this.emit(n)}updateNotes(e){const t=(0,Me.Z)(this.value);t.notes="string"===typeof e?e:"",this.emit(t)}emit(e){this.$emit("input",e)}};(0,r.gn)([(0,l.fI)()],tg.prototype,"value",void 0),tg=(0,r.gn)([(0,l.wA)({components:{DropdownInput:Di.Z}})],tg);const ng=tg,sg=ng;var ag=(0,Y.Z)(sg,Jm,eg,!1,null,null,null);const ig=ag.exports;var og=n(78),rg=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("InlineRepeater",{attrs:{value:e.value||[]},on:{input:function(t){return e.updateElementValue(t)}},scopedSlots:e._u([{key:"default",fn:function({index:n,value:s}){return[t(Bd.Z,{attrs:{value:s,hint:'To describe a repeater, use "[]". e.g: "content.list.my_repeater[].url"',rules:[e.pathRules],items:e.allPaths},on:{input:function(t){return e.updatePropertyPathByIndex(n,t)}}})]}}])})},lg=[];let cg=class extends s.ZP{updateElementValue(e){const t=e.map((e=>"string"===typeof e?e:""));this.$emit("input",t)}updatePropertyPathByIndex(e,t){const n=(0,Me.Z)(this.value);t&&this.pathRules(t)&&(n[e]=t.trim(),this.updateElementValue(n))}pathRules(e){return(0,Ee.qj)(e)}};(0,r.gn)([(0,l.fI)({default:()=>[]})],cg.prototype,"value",void 0),(0,r.gn)([(0,l.fI)({default:()=>[]})],cg.prototype,"allPaths",void 0),cg=(0,r.gn)([(0,l.wA)({components:{InlineRepeater:hh.Z,Repeater:Ud.Z,DropdownInput:Di.Z,CodeInput:om.Z,Dropdown:za.Z,Accordion:Hd.Z,draggable:Vd()}})],cg);const dg=cg,ug=dg;var pg=(0,Y.Z)(ug,rg,lg,!1,null,null,null);const hg=pg.exports;var mg=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("Accordion",{attrs:{expanded:"dynamicPropertyPaths"===e.accordionState},on:{toggle:function(t){return e.toggleAccordion("dynamicPropertyPaths")}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"pa-4"},[e._v("Dynamic Property Paths")])]},proxy:!0},{key:"content",fn:function(){return[t("ElementStudioDynPropPaths",{attrs:{value:e.value.dynamicPropertyPaths,"all-paths":e.allPaths},on:{input:function(t){return e.updateElementValuePropPath(t,"dynamicPropertyPaths")}}})]},proxy:!0}])}),t("Accordion",{attrs:{expanded:"propertyPathsToWhitelistInFlatProps"===e.accordionState},on:{toggle:function(t){return e.toggleAccordion("propertyPathsToWhitelistInFlatProps")}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"pa-4"},[e._v("Property paths to whitelist in flat props")])]},proxy:!0},{key:"content",fn:function(){return[t("ElementStudioPropertyPaths",{attrs:{value:e.value.propertyPathsToWhitelistInFlatProps,"all-paths":e.allPathsWithDesignAndContent},on:{input:function(t){return e.updateElementValuePropPath(t,"propertyPathsToWhitelistInFlatProps")}}})]},proxy:!0}])}),t("Accordion",{attrs:{expanded:"dynamic-prop-paths"===e.accordionState},on:{toggle:function(t){return e.toggleAccordion("dynamic-prop-paths")}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"pa-4"},[e._v(" Property paths to SSR the element when value changes ")])]},proxy:!0},{key:"content",fn:function(){return[t("ElementStudioPropertyPaths",{attrs:{value:e.value.propertyPathsToSsrElementWhenValueChanges,"all-paths":e.allPathsWithDesignAndContent},on:{input:function(t){return e.updateElementValuePropPath(t,"propertyPathsToSsrElementWhenValueChanges")}}})]},proxy:!0}])}),t("Accordion",{attrs:{expanded:"spacing-bars"===e.accordionState},on:{toggle:function(t){return e.toggleAccordion("spacing-bars")}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"pa-4"},[e._v("Spacing Bars")])]},proxy:!0},{key:"content",fn:function(){return[t("ElementStudioSpacingBars",{attrs:{value:e.value.spacingBars}})]},proxy:!0}])})],1)},gg=[],vg=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Repeater",{attrs:{value:e.value||[],control:{options:{repeaterOptions:{titleTemplate:"{path} - {accepts}",buttonName:"Add new Dynamic Property Path",defaultNewValue:{accepts:"string",path:""}}}}},on:{input:function(t){return e.updateElementValue(t)}},scopedSlots:e._u([{key:"default",fn:function({index:n,value:s}){return[t("b",[e._v("Dynamic Property Path")]),t(Bd.Z,{attrs:{value:s.path,hint:'To describe a repeater, use "[]". e.g: "content.list.my_repeater[].url"',rules:[e.pathRules],items:e.allPaths},on:{input:function(t){return e.updateDynamicPropertyPath(n,t)}}}),t("b",{staticClass:"d-block pt-2"},[e._v("Accepts:")]),t("DropdownInput",{attrs:{items:e.getDynamicPathAcceptsItems,value:s.accepts},on:{input:function(t){return e.updateValue(n,t)}}})]}}])})},fg=[];let yg=class extends s.ZP{updateElementValue(e){this.$emit("input",e)}updateDynamicPropertyPath(e,t){const n=(0,Me.Z)(this.value);this.pathRules(t)&&(n[e].path=t.trim(),this.updateElementValue(n))}pathRules(e){return(0,Ee.qj)(e)}get getDynamicPathAcceptsItems(){return(0,ve.cS)()}updateValue(e,t){const n=(0,Me.Z)(this.value);n[e].accepts=t,this.updateElementValue(n)}};(0,r.gn)([(0,l.fI)({default:()=>[]})],yg.prototype,"value",void 0),(0,r.gn)([(0,l.fI)({default:()=>[]})],yg.prototype,"allPaths",void 0),yg=(0,r.gn)([(0,l.wA)({components:{Repeater:Ud.Z,DropdownInput:Di.Z,CodeInput:om.Z,Dropdown:za.Z,Accordion:Hd.Z,draggable:Vd()}})],yg);const bg=yg,Pg=bg;var _g=(0,Y.Z)(Pg,vg,fg,!1,null,null,null);const Sg=_g.exports;var Cg=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Repeater",{attrs:{value:e.value||[],control:{options:{repeaterOptions:{titleTemplate:"Spacing bar",buttonName:"Add new spacing bar"}}}},on:{input:function(t){return e.updateSpaceBars(t)}},scopedSlots:e._u([{key:"default",fn:function({value:n,index:s}){return[t("ElementStudioSpacingBar",{attrs:{value:n},on:{input:function(t){return e.updateSpaceBar(t,s)}}})]}}])})},wg=[],kg=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"mt-4"},[e._v("Location")]),t("DropdownInput",{attrs:{items:e.cssProperties,value:e.newSpaceBar.cssProperty},on:{input:e.updateLocationAndProperty}}),t("div",{staticClass:"mt-4"},[e._v("Affected property path")]),t(Bd.Z,{attrs:{items:e.pathsToAllControls,placeholder:"design.spacing.%%BREAKPOINT%%.top"},model:{value:e.newSpaceBar.affectedPropertyPath,callback:function(t){e.$set(e.newSpaceBar,"affectedPropertyPath",t)},expression:"newSpaceBar.affectedPropertyPath"}}),t("NiceButton",{on:{click:e.saveNewSpaceBar}},[e._v("Save")])],1)},xg=[],Ig=n(16442);let Dg=class extends s.ZP{constructor(){super(...arguments),this.newSpaceBar=this.value||{}}get pathsToAllControls(){return this.context.getPathsToAllControls()}get propertiesLocationsKeyPair(){const e=T.g3.types.map((e=>e.value)),t=T.U$.types.map((e=>e.value));return t.reduce(((t,n,s)=>({...t,[n]:e[s]})),{})}get cssProperties(){return Object.keys(this.propertiesLocationsKeyPair)}updateLocationAndProperty(e){this.newSpaceBar.cssProperty=e,this.newSpaceBar.location=this.propertiesLocationsKeyPair[e]}saveNewSpaceBar(){(0,lo.zG)(T.pG.decode(this.newSpaceBar),(0,co.g_)((e=>{ye.Z.log.message("Error saving new space bar, please fill out all fields"),(0,Ig.H)(e)}),(()=>{this.$emit("input",this.newSpaceBar)})))}};(0,r.gn)([(0,l.fI)()],Dg.prototype,"value",void 0),(0,r.gn)([(0,l.tB)("context")],Dg.prototype,"context",void 0),Dg=(0,r.gn)([(0,l.wA)({components:{NiceButton:io.Z,DropdownInput:Di.Z}})],Dg);const Eg=Dg,Zg=Eg;var Tg=(0,Y.Z)(Zg,kg,xg,!1,null,null,null);const Ag=Tg.exports;let Bg=class extends s.ZP{updateSpaceBar(e,t){const n=(0,Me.Z)(this.value);n[t]=e,this.updateSpaceBars(n)}updateSpaceBars(e){this.context.updateElementValue("spacingBars",e)}};(0,r.gn)([(0,l.fI)({default:[]})],Bg.prototype,"value",void 0),(0,r.gn)([(0,l.tB)("context")],Bg.prototype,"context",void 0),Bg=(0,r.gn)([(0,l.wA)({components:{ElementStudioSpacingBar:Ag,NiceButton:io.Z,TextInput:cs.Z,InlineRepeater:hh.Z,Repeater:Ud.Z,DropdownInput:Di.Z,CodeInput:om.Z,Dropdown:za.Z,Accordion:Hd.Z,draggable:Vd()}})],Bg);const Og=Bg,Rg=Og;var Mg=(0,Y.Z)(Rg,Cg,wg,!1,null,null,null);const Fg=Mg.exports;let Ng=class extends s.ZP{constructor(){super(...arguments),this.accordionState=""}toggleAccordion(e){this.accordionState=this.accordionState===e?"":e}get allPathsWithDesignAndContent(){return[this.context.element().controls.designSections.length?"design":null,this.context.element().controls.contentSections.length?"content":null,...this.context.getPathsToAllControls([],[])].filter(Boolean)}get allPaths(){return this.context.getPathsToAllControls()}updateElementValuePropPath(e,t){this.context.updateElementValue(t,e)}};(0,r.gn)([(0,l.fI)()],Ng.prototype,"value",void 0),(0,r.gn)([(0,l.tB)("context")],Ng.prototype,"context",void 0),Ng=(0,r.gn)([(0,l.wA)({components:{ElementStudioSpacingBars:Fg,ElementStudioPropertyPaths:hg,ElementStudioDynPropPaths:Sg,Accordion:Hd.Z}})],Ng);const Lg=Ng,$g=Lg;var Wg=(0,Y.Z)($g,mg,gg,!1,null,null,null);const Vg=Wg.exports;var Hg=n(46368),Ug=n(66485),zg=n.n(Ug);function Gg(e){ft.PK.setTwigMacros(e),(0,me.J6)((0,me.GJ)(e),me.rf),ft.kD.forceUpdateEntireCanvas()}const Kg=_()(ge.w.registerAllStoreActions,500);let jg=class extends s.ZP{constructor(){super(...arguments),this.tab=(0,Bc.z)(`element-studio-tab-${this.type}`)||"content",this.actionsAccordionState="",this.nameHasChanged=!1,this.useLocalIcon=!!lp.iconNames.find((e=>e===this.element.uiIcon))||!this.element.uiIcon||!1,this.contextMenu=!1,this.showNewMacroDialog=!1,this.savedCssSelection="",this.elementStudioContext={replaceControls:(e,t)=>{const n=(0,Me.Z)(this.element);se()(n.controls,e,t),this.emit(n)},pasteControl:(e,t)=>{const n=(0,Me.Z)(this.element),s=b()(n.controls,e);s.push(t),se()(n.controls,e,s),this.emit(n)},addControl:(e,t="text")=>{const n=(0,Me.Z)(this.element),s={slug:"section"===t?"new_section":"new_control",label:"section"===t?"New Section":"New Control",keywords:[],options:{type:t},enableMediaQueries:!1,enableHover:!1,children:[]};(e.startsWith("contentSections")||"text"===t||"number"===t)&&(s.options.layout="vertical");const a=this.cleanElement.controls,i=b()(a,e);Array.isArray(i)?i.push(s):i.children.push(s),se()(a,e,i),n.controls=this.mergeElementControlsWithExternalControls(a),this.emit(n)},addPreset:e=>{const t=(0,Me.Z)(this.element),n=(0,Me.Z)(this.elementStudioContext.getPresetSection("EssentialElements\\typography"));if(!n)return;n.section.options.sectionOptions={...n.section.options.sectionOptions,type:"popout"};const s=this.cleanElement.controls,a=b()(s,e);Array.isArray(a)?a.push(n.section):a.children.push(n.section),se()(s,e,a),t.controls=this.mergeElementControlsWithExternalControls(s),this.emit(t)},deleteControl:(e,t)=>{const n=(0,Me.Z)(this.element),s=this.parentControls(e);Array.isArray(s)?s.splice(t,1):s.children.splice(t,1),se()(n.controls,e,s),this.emit(n)},updateControl:(e,t,n)=>{const s=(0,Me.Z)(this.element),a=this.parentControls(e);Array.isArray(a)?a.splice(t,1,n):a.children.splice(t,1,n),se()(s.controls,e,a),this.emit(s)},updateDependency:e=>{this.updateElementValue("dependencies",e)},updateActions:e=>{this.updateElementValue("actions",e),Kg()},getPresetSection:e=>this.available.presetSections.find((t=>t.slug===e)),getPresetSections:()=>this.available.presetSections,getPathsToAllControls:(e=[],t=["section"])=>{const n=(0,Pd.eH)(this.element.controls.contentSections,e,t,"content"),s=(0,Pd.eH)(this.element.controls.designSections,e,t,"design");return[...n,...s]},element:()=>this.element,updateElementValue:this.updateElementValue,getElementStudioData:()=>this.available,updateElementStudioData:e=>{this.update(e)}}}async mounted(){document.addEventListener("contextmenu",this.handleRightClickInCodeInput)}beforeDestroy(){document.removeEventListener("contextmenu",this.handleRightClickInCodeInput)}onElementSlugChange(){this.nameHasChanged=!0}handleRightClickInCodeInput(e){const t=window.getSelection()?.toString();!t||"css"!==this.tab&&"html"!==this.tab||(e.preventDefault(),this.contextMenu={x:e.clientX,y:e.clientY})}handleCreateMacro(){this.savedCssSelection=window.getSelection()?.toString()||"",this.showNewMacroDialog=!0}async saveNewMacro(e){if(!this.savedCssSelection)return;this.contextMenu=!1;const t=this.savedCssSelection?.toString(),n=(0,Nh.dZ)(e.namespace,e.name),s=(0,me.as)(t,{selector:"{{ selector }}",id:"{{ id }}",postId:"{{ postId }}"}).replace("macros.","_self."),a=`{% macro ${n}() %}\n\n${s} \n\n{% endmacro %}`,i=$h()(e.name),o=Vh(e.namespace,e.name);this.available.macros.find((e=>e.slug===o))?(0,Pd.O6)(this.available.saveLocations,e,"macro"):(0,lo.zG)(await(0,E.D)({action:"breakdance_save_macro",dataToPost:{directoryPath:e.directoryPath,filename:i,macro:a},decoder:Z._4}),(0,co.g_)((e=>{console.error(e),ye.Z.log.message("Failed to save element, check console")}),(()=>{const t=`{{ macros.${n}() }}`;ye.Z.log.message(`New macro created: ${t}. `),zg()(t);const s=(0,Me.Z)(this.available);s.macros.push({slug:o,directoryPath:e.directoryPath}),this.elementStudioContext.updateElementStudioData(s);const i=(0,Me.Z)(ft.PK.twigMacros);i.push({macro:a,slug:o}),Gg(i)})))}updateSlug(){if(!window.confirm("Changing the slug of an existing element will make it obsolete in all pages, everywhere. Continue anyway?"))return;const e=(0,Pd.kK)((0,Pd.$_)(this.element.slug),this.element.name);this.updateElementValue("slug",e)}updateUiOrder(e){const t=Number(e);Number.isNaN(t)?this.updateElementValue("order",0):this.updateElementValue("order",t)}updateUiIcon(e="SquareIcon"){this.updateElementValue("uiIcon",e)}updateUseLocalIcon(e){this.useLocalIcon=e,e||this.updateUiIcon("")}updateClassName(e){!0===this.htmlClassNameRule(e)&&this.updateElementValue("className",e||!1)}htmlClassNameRule(e){return!e||bc.hB.validateHtmlClassName(e)}isValidItemName(e){return(0,Pd.nQ)(e)}updateElementName(e){if(!0!==(0,Pd.nQ)(e))return;const t=(0,Me.Z)(this.element);t.name=e,this.emit(t)}updateElementValue(e,t){const n=(0,Me.Z)(this.element),s=(0,Pu.lX)(t);se()(n,e,s),this.emit(n)}emit(e){this.$emit("input",e)}updateTab(e){(0,Bc.r)(`element-studio-tab-${this.type}`,e),this.tab=e}mergeElementControlsWithExternalControls(e){const t=(0,Me.Z)(e);return(0,rm.f)(this.element.controls).forEach((e=>{this.element.controls[e].forEach((n=>{n.options.isExternal&&t[e].push(n)}))})),t}get showAdvancedFeatures(){return(0,Oc.y)()||ft.PK.isElementStudioPowerUser}get requiredPluginItems(){return T.ws.types.map((e=>e.value))}get tags(){return bm}get pathsToAllControls(){return this.elementStudioContext.getPathsToAllControls()}get nestingRuleTypeIsContainer(){return(0,Ze.ZC)(this.cleanElement.nestingRule.type).length>0||"container-restricted"===this.cleanElement.nestingRule.type}get cleanElement(){return km(this.element)}get elementCategories(){return ft.PK.builderElementCategories.map((e=>({text:e.label,value:e.slug})))}get badgeColors(){return Object.entries(Hg.Z).map((([e])=>{const t=e.replace(/brand_/g,"brand").replace(/_dark|_light|breakdance_/g,"");return{text:t,value:`var(--${t})`}}))}get elementType(){return T.iQ.types.map((e=>e.value))}get containerRestrictedElements(){return Object.values(ft.PK.elements).filter((e=>"container-restricted"===e?.nestingRule.type&&e?.slug!==ie.Cc)).map((e=>e?.slug))}get elementsThisElementIsAllowedToBeInsideOf(){return Object.values(ft.PK.elements).filter((e=>e&&(0,Ze.V4)(this.element.nestingRule,e.nestingRule,e.slug))).map((e=>e?.slug))}get allElementSlugs(){return Object.values(ft.PK.elements).map((e=>e?.slug))}get elementClass(){return`.${(0,Ee.MO)(this.element)}`}parentControls(e){return(0,Me.Z)(b()(this.element.controls,e))}update(e){this.$emit("update",e)}toggleActionAccordion(e){this.actionsAccordionState=e}get htmlTags(){return["section","div","span","p","h1","h2","h3","h4","h5","h6","footer","header","nav","aside","figure","figcaption","ul","ol","li","a","article","main","details","summary","img"].filter((e=>e!==this.cleanElement.htmlTag.default))}get defaultTag(){return[...this.htmlTags,this.cleanElement.htmlTag.default]}};(0,r.gn)([(0,l.fI)()],jg.prototype,"element",void 0),(0,r.gn)([(0,l.fI)({default:"primary"})],jg.prototype,"type",void 0),(0,r.gn)([(0,l.fI)()],jg.prototype,"available",void 0),(0,r.gn)([(0,l.RL)("element.name")],jg.prototype,"onElementSlugChange",null),(0,r.gn)([(0,l.DF)("context")],jg.prototype,"elementStudioContext",void 0),jg=(0,r.gn)([(0,l.wA)({components:{Dropdown:za.Z,ElementStudioSaveNewDialog:kd,TextInput:cs.Z,ElementStudioIconsAutocomplete:hp,ElementStudioManagePropertyPaths:Vg,ElementStudioPropertyPaths:hg,Accordion:Hd.Z,ElementIcon:og.Z,ToggleInput:Tc.Z,Icon:K.Z,ElementStudioAttributes:Hm,ElementStudioAdditionalClasses:Xm,ElementStudioDefaultElements:Mm.Z,CopyButton:Qd.Z,ElementStudioAction:Rm,ElementStudioDependencies:wm,ElementStudioControls:im,CodeInput:om.Z,ElementStudioDefaultProperties:Ym.Z,ElementStudioProjectManagement:ig}})],jg);const qg=jg,Xg=qg;var Yg=(0,Y.Z)(Xg,Od,Rd,!1,null,null,null);const Qg=Yg.exports,Jg={className:!1,uiIcon:!1,category:"other",badge:!1,htmlTag:{default:"div",options:[],pathToControl:!1},template:"Blank Element",attributes:!1,cssTemplate:"%%SELECTOR%% { }",defaultCss:" ",defaultProperties:!1,defaultChildren:!1,controls:{contentSections:[],designSections:[],settingsSections:[]},dependencies:!1,actions:!1,nestingRule:{type:"final"},spacingBars:!1,dynamicPropertyPaths:!1,settings:!1,addPanelRules:!1,experimental:!1,order:0,additionalClasses:!1,projectManagement:!1,propertyPathsToWhitelistInFlatProps:!1,propertyPathsToSsrElementWhenValueChanges:!1};let ev=class extends s.ZP{constructor(){super(...arguments),this.lastSavedElement=!1,this.currentlyEditingElement=!1,this.saveInProgress=!1,this.throttledUpdateElement=dt()(Ee.Cf,500),this.mode=(0,Bc.z)("element-studio-mode")||"split-horizontal"}get elementsSlug(){return this.value.elements.map((e=>e.slug))}updateCurrentlyEditingElement(e){this.currentlyEditingElement=(0,Me.Z)(e),!1===this.lastSavedElement&&(this.lastSavedElement=(0,Me.Z)(e))}updateAvailableElementsAndStore(e){const t=e.element.slug;this.lastSavedElement&&t!==this.lastSavedElement.element.slug&&(0,Pd.$_)(t)===(0,Pd.$_)(this.lastSavedElement.element.slug)&&this.deleteElementFromServer(this.lastSavedElement);const n=!!this.value.elements.find((e=>e.slug===t));if(!n&&e.directoryPath){const n=(0,Me.Z)(this.value);n.elements.push({slug:t,directoryPath:e.directoryPath}),this.$emit("input",n)}this.lastSavedElement=e}get hasUnsavedChanges(){return!(!this.currentlyEditingElement||!this.lastSavedElement)&&!Ur()(this.lastSavedElement.element,this.currentlyEditingElement.element)}updateData(e){this.$emit("input",e)}updateElement(e){if(!this.currentlyEditingElement||!this.lastSavedElement||!this.lastSavedElement.element)return;const t=e.slug!==this.lastSavedElement.element.slug;let n=this.currentlyEditingElement.directoryPath;t&&this.currentlyEditingElement.directoryPath&&(n=(0,Nh.Lg)({directoryPath:(0,Nh.HT)(this.currentlyEditingElement.directoryPath),elementName:this.currentlyEditingElement.element.name})),this.currentlyEditingElement={directoryPath:n,element:e,onlyForAdvancedUsers:this.currentlyEditingElement.onlyForAdvancedUsers},this.throttledUpdateElement(e)}deleteElementFromStore(e){const t=this.value.elements.findIndex((t=>t.slug===e));c.PK.deleteElement(e),-1!==t&&this.value.elements.splice(t,1)}deleteElement(){this.currentlyEditingElement&&this.deleteElementFromServer(this.currentlyEditingElement,(()=>{this.currentlyEditingElement=!1}))}async deleteElementFromServer(e,t=(()=>{})){e.element&&(0,V.pipe)(await(0,E.D)({action:"breakdance_delete_element",dataToPost:{directoryPath:e.directoryPath},decoder:Z.i0("success"),resultKey:"data"}),(0,H.fold)((()=>{ye.Z.log.message("Failed to delete element")}),(()=>{e.element?(this.deleteElementFromStore(e.element.slug),t()):ye.Z.log.message("Failed to delete element")})))}discardChanges(){this.lastSavedElement&&this.lastSavedElement.element&&this.updateElement(this.lastSavedElement.element),this.resetCurrentlyEditingElement()}resetCurrentlyEditingElement(){this.currentlyEditingElement=!1,this.lastSavedElement=!1,this.$emit("active",null)}switchMode(){switch(this.mode){case"split-vertical":this.mode="split-horizontal",this.$emit("width",750);break;case"split-horizontal":this.$emit("width",600),this.mode="normal";break;case"normal":this.$emit("width",600),this.mode="split-vertical";break}(0,Bc.r)("element-studio-mode",this.mode)}openElement(e){const t=(0,Me.Z)(c.PK.element(e)),n=this.value.elements.find((t=>t.slug===e));if(!n)return;const s=this.value.saveLocations.find((e=>n.directoryPath.startsWith(e.directoryPath))),a=!!s?.onlyForAdvancedUsers;this.updateCurrentlyEditingElement({element:t,directoryPath:n.directoryPath,onlyForAdvancedUsers:a}),this.$emit("active","element")}saveAs(e){if(!this.currentlyEditingElement)return;const{namespace:t,directoryPath:n,onlyForAdvancedUsers:s}=e,a=(0,Me.Z)(this.currentlyEditingElement.element);this.currentlyEditingElement.directoryPath!==n&&(a.slug=""),this.saveToServer(a,(0,Nh.Lg)({directoryPath:n,elementName:this.currentlyEditingElement.element.name}),t,!1,s)}saveNewItem(e){const t=(0,Pd.kK)(e.namespace,e.name);if(this.value.elements.find((e=>e.slug===t)))return void(0,Pd.O6)(this.value.saveLocations,e,"element");const n={...(0,Me.Z)(Jg),slug:t,name:e.name};this.saveToServer(n,(0,Nh.Lg)({directoryPath:e.directoryPath,elementName:e.name}),e.namespace,!1,e.onlyForAdvancedUsers),this.$emit("active","element")}saveOverride(e){this.currentlyEditingElement&&this.currentlyEditingElement.directoryPath&&this.saveToServer(this.currentlyEditingElement.element,this.currentlyEditingElement.directoryPath,(0,Pd.$_)(this.currentlyEditingElement.element.slug),e,this.currentlyEditingElement.onlyForAdvancedUsers)}async saveToServer(e,t,n,s=!1,a){this.saveInProgress=!0;const i=n||(0,Pd.$_)(e.slug),o=km(e),r=e.slug||(0,Pd.kK)(i,e.name);(0,V.pipe)(await(0,E.D)({action:"breakdance_save_element",dataToPost:{...(0,Nh.x)(o,i),directoryPath:t,bypassPsalm:s?"yes":"no"},decoder:Z._4}),(0,H.fold)((e=>{console.error(e),ye.Z.log.message("Failed to save element, check console")}),(()=>{const n={element:{...(0,Me.Z)(e),slug:r,name:e.name.split(" ").map((e=>e.charAt(0).toUpperCase()+e.substring(1))).join(" ")},directoryPath:t,onlyForAdvancedUsers:a};this.updateCurrentlyEditingElement(n),this.updateAvailableElementsAndStore(n),(0,Ee.Cf)(n.element)}))),this.saveInProgress=!1}};(0,r.gn)([(0,l.fI)()],ev.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],ev.prototype,"width",void 0),ev=(0,r.gn)([(0,l.wA)({components:{ElementStudioTabsAndPanels:Qg,ElementStudioWidthAdjustmentBar:hd,ElementStudioTopbar:Zd}})],ev);const tv=ev,nv=tv;var sv=(0,Y.Z)(nv,md,gd,!1,null,null,null);const av=sv.exports,iv=Z.dt({slug:Z.Z_,directoryPath:Z.Z_}),ov=Z.G0([Z.i0("element"),Z.i0("macro"),Z.i0("preset")]),rv=Z.dt({directoryPath:Z.Z_,namespace:Z.Z_,type:ov,label:Z.Z_,onlyForAdvancedUsers:Z.O7}),lv=Z.dt({slug:Z.Z_,section:$d.ur}),cv=Z.dt({elements:Z.IX(iv),macros:Z.IX(iv),presets:Z.IX(iv),saveLocations:Z.IX(rv),presetSections:Z.IX(lv)});var dv=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{"element-studio-wrapper":e.currentlyEditingMacro,"element-studio__hide-the-close-button":!e.currentlyEditingMacro,"element-studio__hide-the-switch-mode-button":!0}},[t("ElementStudioTopbar",{attrs:{"save-locations":e.value.saveLocations,"items-slug":e.macrosSlug,value:e.currentlyEditingMacro,itemType:"macro","item-name":e.currentMacroName,hasUnsavedChanges:e.hasUnsavedChanges,saveInProgress:e.saveInProgress},on:{open:e.openMacro,delete:e.deleteMacro,saveOverride:e.saveOverride,saveAs:e.saveAs,saveNew:e.saveNewItem,discardChanges:e.discardChanges,reset:e.resetCurrentlyEditingMacro}}),e.currentlyEditingMacro?t("div",{staticClass:"element-studio-content"},[t("div",{staticClass:"panel-100 vscroll-scroll"},[t("div",{staticClass:"element-studio-tabs-panel d-flex flex-column"},[t("div",{staticClass:"element-studio-tabs"},[t(Nr.Z,{attrs:{value:e.activeTab},on:{change:e.updateTab}},[t(Fr.Z,{attrs:{href:"#macro",title:"Macro"}},[t("Icon",{attrs:{icon:"PenIcon",size:"16"}})],1),t(Fr.Z,{attrs:{href:"#settings",title:"Settings"}},[t("Icon",{attrs:{icon:"GearIcon",size:"16"}})],1)],1)],1)]),t("div",{staticClass:"element-studio-tabs-items vscroll-scroll"},[t("CodeInput",{directives:[{name:"show",rawName:"v-show",value:"macro"===e.activeTab,expression:"activeTab === 'macro'"}],attrs:{value:e.currentlyEditingMacro.macroData.macro,language:"twig"},on:{input:e.updateMacroValue}}),"settings"===e.activeTab?t("div",{staticClass:"pa-4"},[t(pi.Z,{attrs:{value:e.currentMacroName,label:"Name",rules:[e.isValidItemName]},on:{input:e.updateMacroName}}),t("ToggleInput",{attrs:{value:e.autoRefresh},on:{input:e.updateAutoRefresh}}),t("label",{staticClass:"ml-2"},[e._v("Live preview changes")])],1):e._e()],1)])]):e._e()],1)},uv=[];let pv=class extends s.ZP{constructor(){super(...arguments),this.lastSavedMacro=!1,this.currentlyEditingMacro=!1,this.saveInProgress=!1,this.autoRefresh=!0,this.activeTab="macro",this.throttledUpdateElement=_()(this.updateMacroAndRecompileTwigTemplates,1e3)}get macrosSlug(){return this.value.macros.map((e=>e.slug))}isValidItemName(e){return(0,Pd.nQ)(e)}updateCurrentlyEditingMacro(e){this.currentlyEditingMacro=(0,Me.Z)(e),!1===this.lastSavedMacro&&(this.lastSavedMacro=(0,Me.Z)(e))}updateTab(e){this.activeTab=e}updateMacroName(e){this.currentlyEditingMacro&&(this.currentlyEditingMacro.macroData.slug=Vh((0,Pd.$_)(this.currentlyEditingMacro.macroData.slug),e))}updateAutoRefresh(e){this.autoRefresh=e,e&&this.currentlyEditingMacro&&this.updateMacroAndRecompileTwigTemplates(this.currentlyEditingMacro.macroData)}updateMacroAndRecompileTwigTemplates(e){const t=(0,Me.Z)(c.PK.twigMacros),n=t.findIndex((t=>t.slug===e.slug));if(-1===n){t.push(e);const n=(0,Me.Z)(this.value);n.macros.push(e),this.$emit("input",n)}else t[n].macro=e.macro;this.lastSavedMacro&&this.lastSavedMacro.directoryPath&&e.slug!==this.lastSavedMacro.macroData.slug&&e.directoryPath===this.lastSavedMacro.directoryPath&&this.deleteMacroFromServer(this.lastSavedMacro),this.autoRefresh&&Gg(t)}deleteMacroAndRecompileTwigTemplates(e){const t=(0,Me.Z)(c.PK.twigMacros),n=t.findIndex((t=>t.slug===e)),s=this.value.macros.findIndex((t=>t.slug===e));if(-1!==n&&t.splice(n,1),-1!==s){const e=(0,Me.Z)(this.value);e.macros.splice(s,1),this.$emit("input",e)}Gg(t)}get currentMacroName(){return this.currentlyEditingMacro?(0,Pd.iC)(this.currentlyEditingMacro.macroData.slug):""}get hasUnsavedChanges(){return!(!this.currentlyEditingMacro||!this.lastSavedMacro)&&!Ur()(this.lastSavedMacro.macroData,this.currentlyEditingMacro.macroData)}updateMacroValue(e){this.currentlyEditingMacro&&(this.currentlyEditingMacro.macroData.macro=e,this.throttledUpdateElement(this.currentlyEditingMacro.macroData))}deleteMacro(){this.currentlyEditingMacro&&this.deleteMacroFromServer(this.currentlyEditingMacro,(()=>{this.currentlyEditingMacro=!1}))}async deleteMacroFromServer(e,t=(()=>{})){(0,V.pipe)(await(0,E.D)({action:"breakdance_delete_macro",dataToPost:{directoryPath:e.directoryPath,filename:(0,Pd.iC)(e.macroData.slug)},decoder:Z.i0("success"),resultKey:"data"}),(0,H.fold)((()=>{ye.Z.log.message("Failed to delete element")}),(()=>{t(),this.deleteMacroAndRecompileTwigTemplates(e.macroData.slug)})))}discardChanges(){this.lastSavedMacro&&this.lastSavedMacro.macroData&&this.updateMacroAndRecompileTwigTemplates(this.lastSavedMacro.macroData),this.resetCurrentlyEditingMacro()}resetCurrentlyEditingMacro(){this.currentlyEditingMacro=!1,this.lastSavedMacro=!1,this.$emit("active",null)}openMacro(e){const t=(0,Me.Z)(this.value.macros.find((t=>t.slug===e)));if(!t)return;const n=c.PK.twigMacros.find((t=>t.slug===e))?.macro;if(!n)return;const s=this.value.saveLocations.find((e=>t.directoryPath.startsWith(e.directoryPath))),a=!!s?.onlyForAdvancedUsers;this.updateCurrentlyEditingMacro({macroData:{...t,macro:n},directoryPath:t.directoryPath,onlyForAdvancedUsers:a}),this.$emit("active","macro")}saveAs(e){if(!this.currentlyEditingMacro)return;const t=(0,Pd.iC)(this.currentlyEditingMacro.macroData.slug);this.saveToServer(this.currentlyEditingMacro.macroData.macro,e.directoryPath,t,Vh(e.namespace,t),e.onlyForAdvancedUsers)}saveNewItem(e){const t=(0,Nh.dZ)(e.namespace,e.name),n=$h()(e.name),s=Vh(e.namespace,e.name);this.value.macros.find((e=>e.slug===s))?(0,Pd.O6)(this.value.saveLocations,e,"macro"):(this.saveToServer(`{% macro ${t}() %}\n  {# Your code here #} \n{% endmacro %}`,e.directoryPath,n,s,e.onlyForAdvancedUsers),this.$emit("active","macro"))}saveOverride(){this.currentlyEditingMacro&&this.currentlyEditingMacro.directoryPath&&this.saveToServer(this.currentlyEditingMacro.macroData.macro,this.currentlyEditingMacro.directoryPath,(0,Pd.iC)(this.currentlyEditingMacro.macroData.slug),this.currentlyEditingMacro.macroData.slug,this.currentlyEditingMacro.onlyForAdvancedUsers)}async saveToServer(e,t,n,s,a){this.saveInProgress=!0,(0,V.pipe)(await(0,E.D)({action:"breakdance_save_macro",dataToPost:{directoryPath:t,filename:n,macro:e},decoder:Z._4}),(0,H.fold)((e=>{console.error(e),ye.Z.log.message("Failed to save element, check console")}),(()=>{const n={macroData:{macro:e,slug:s,directoryPath:t},directoryPath:t,onlyForAdvancedUsers:a};this.updateCurrentlyEditingMacro(n),this.updateMacroAndRecompileTwigTemplates(n.macroData),this.lastSavedMacro=n}))),this.saveInProgress=!1}};(0,r.gn)([(0,l.fI)()],pv.prototype,"value",void 0),pv=(0,r.gn)([(0,l.wA)({components:{ToggleInput:Tc.Z,TextInput:cs.Z,Icon:K.Z,CodeInput:om.Z,ElementStudioTabsAndPanels:Qg,ElementStudioWidthAdjustmentBar:hd,ElementStudioTopbar:Zd}})],pv);const hv=pv,mv=hv;var gv=(0,Y.Z)(mv,dv,uv,!1,null,null,null);const vv=gv.exports;var fv=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{"element-studio-wrapper":e.currentlyEditingPreset,"element-studio__hide-the-close-button":!e.currentlyEditingPreset,"element-studio__hide-the-switch-mode-button":!0}},[t("ElementStudioTopbar",{attrs:{"save-locations":e.value.saveLocations,"items-slug":e.presetsSlug,value:e.currentlyEditingPreset,itemType:"preset","item-name":e.currentPresetName,hasUnsavedChanges:e.hasUnsavedChanges,saveInProgress:e.saveInProgress},on:{open:e.openPreset,delete:e.deletePreset,saveOverride:e.saveOverride,saveAs:e.saveAs,saveNew:e.saveNewItem,discardChanges:e.discardChanges,reset:e.resetCurrentlyEditingPreset}}),e.currentlyEditingPreset?t("div",{staticClass:"element-studio-content"},[t("div",{staticClass:"panel-100 vscroll-scroll"},[t("div",{staticClass:"element-studio-tabs-panel d-flex flex-column"},[t("div",{staticClass:"element-studio-tabs"},[t(Nr.Z,{attrs:{value:e.activeTab},on:{change:e.updateTab}},[t(Fr.Z,{attrs:{href:"#preset",title:"Preset"}},[t("Icon",{attrs:{icon:"PenIcon",size:"16"}})],1),t(Fr.Z,{attrs:{href:"#code-help",title:"Code Help"}},[t("Icon",{attrs:{icon:"CodeIcon",size:"16"}})],1),t(Fr.Z,{attrs:{href:"#prop-paths",title:"Property Paths"}},[t("Icon",{attrs:{icon:"SlidersSimpleIcon",size:"16"}})],1),t(Fr.Z,{attrs:{href:"#settings",title:"Settings"}},[t("Icon",{attrs:{icon:"GearIcon",size:"16"}})],1)],1)],1)]),t("div",{staticClass:"element-studio-tabs-items vscroll-scroll"},[t("ControlSectionOrControl",{directives:[{name:"show",rawName:"v-show",value:"preset"===e.activeTab,expression:"activeTab === 'preset'"}],attrs:{value:e.currentPresetWithoutPresetSlug?e.currentPresetWithoutPresetSlug.presetData.preset.section:[],index:0,path:"control",parentPath:"presetSection",twigParentPath:""}}),t("div",{directives:[{name:"show",rawName:"v-show",value:"code-help"===e.activeTab,expression:"activeTab === 'code-help'"}]},[e._m(0),t("CodeInput",{attrs:{language:"twig",value:e.codeHelpValue,placeholder:e.codeHelpPlaceholder},on:{input:e.updateCodeHelp}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"prop-paths"===e.activeTab,expression:"activeTab === 'prop-paths'"}]},[t("Accordion",{attrs:{expanded:"relativePropertyPathsToWhitelistInFlatProps"===e.accordionState},on:{toggle:function(t){return e.toggleAccordion("relativePropertyPathsToWhitelistInFlatProps")}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"pa-4"},[e._v(" Relative Property Paths To Whitetlist In Flatprops ")])]},proxy:!0},{key:"content",fn:function(){return[t("ElementStudioPropertyPaths",{attrs:{value:e.presetRelativePropertyPathsToWhitelistInFlatProps,"all-paths":e.allPaths},on:{input:function(t){return e.updateElementValuePropPath(t,"relativePropertyPathsToWhitelistInFlatProps")}}})]},proxy:!0}],null,!1,3695337097)}),t("Accordion",{attrs:{expanded:"relativeDynamicPropertyPaths"===e.accordionState},on:{toggle:function(t){return e.toggleAccordion("relativeDynamicPropertyPaths")}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"pa-4"},[e._v("Relative Dynamic Property Paths")])]},proxy:!0},{key:"content",fn:function(){return[t("ElementStudioDynPropPaths",{attrs:{value:e.relativeDynamicPropertyPaths,"all-paths":e.allPaths},on:{input:function(t){return e.updateElementValuePropPath(t,"relativeDynamicPropertyPaths")}}})]},proxy:!0}],null,!1,1318537292)})],1),"settings"===e.activeTab?t("div",{staticClass:"pa-4"},[t(pi.Z,{attrs:{value:e.currentPresetName,label:"Name",rules:[e.isValidItemName]},on:{input:e.updatePresetSlug}}),t("ToggleInput",{attrs:{value:e.autoRefresh},on:{input:e.updateAutoRefresh}}),t("label",{staticClass:"ml-2"},[e._v("Live preview changes")])],1):e._e()],1)])]):e._e()],1)},yv=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"element-studio__presets-code-help"},[t("div",[t("b",[e._v("Code Help")])]),t("pre",[e._v("%%TWIG_PATH%%")]),e._v(" will be replaced with the correct path in the element. ")])}];let bv=class extends s.ZP{constructor(){super(...arguments),this.lastSavedPreset=!1,this.currentlyEditingPreset=!1,this.saveInProgress=!1,this.activeTab="preset",this.accordionState="",this.autoRefresh=!0,this.elementStudioContext=this.reactiveContext()}toggleAccordion(e){this.accordionState=this.accordionState===e?"":e}reactiveContext(){return{replaceControls:(e,t)=>{if(!this.currentlyEditingPreset)return;const n=(0,Me.Z)(this.currentlyEditingPreset),s=this.getCorrectPathForPresetFromContextPath(e);se()(n.presetData.preset,s,t),this.updateCurrentlyEditingPreset(n)},pasteControl:(e,t)=>{if(!this.currentlyEditingPreset)return;const n=(0,Me.Z)(this.currentlyEditingPreset),s=this.getCorrectPathForPresetFromContextPath(e),a=b()(n.presetData.preset,s);a.push(t),se()(n.presetData.preset,s,a),this.updateCurrentlyEditingPreset(n)},addControl:e=>{if(!this.currentlyEditingPreset)return;const t=(0,Me.Z)(this.currentlyEditingPreset),n=this.getCorrectPathForPresetFromContextPath(e),s=this.getParentControlOrControls(n);s&&(Array.isArray(s)?s.push((0,Pu._n)()):s.children.push((0,Pu._n)()),se()(t.presetData.preset,n,s),this.updateCurrentlyEditingPreset(t))},addPreset:e=>{if(!this.currentlyEditingPreset)return;const t=(0,Me.Z)(this.elementStudioContext.getPresetSection("EssentialElements\\typography"));if(!t)return;t.section.options.sectionOptions={...t.section.options.sectionOptions,type:"popout"};const n=(0,Me.Z)(this.currentlyEditingPreset),s=this.getCorrectPathForPresetFromContextPath(e),a=this.getParentControlOrControls(s);a&&(Array.isArray(a)?a.push(t.section):a.children.push(t.section),se()(n.presetData.preset,s,a),this.updateCurrentlyEditingPreset(n))},deleteControl:(e,t)=>{if(!this.currentlyEditingPreset)return;const n=(0,Me.Z)(this.currentlyEditingPreset),s=this.getCorrectPathForPresetFromContextPath(e),a=this.getParentControlOrControls(s);a&&(Array.isArray(a)?a.splice(t,1):a.children.splice(t,1),se()(n.presetData.preset,s,a),this.updateCurrentlyEditingPreset(n))},updateControl:(e,t,n)=>{if(!this.currentlyEditingPreset)return;const s=(0,Me.Z)(this.currentlyEditingPreset);if("presetSection"===e)s.presetData.preset.section=n;else{const a=this.getCorrectPathForPresetFromContextPath(e),i=this.getParentControlOrControls(a);if(!i)return;Array.isArray(i)?i.splice(t,1,n):i.children.splice(t,1,n),se()(s.presetData.preset,a,i)}this.updateCurrentlyEditingPreset(s)},getPresetSection:e=>this.value.presetSections.find((t=>t.slug===e)),getPresetSections:()=>this.value.presetSections,getPathsToAllControls:(e=[],t=["section"])=>{if(this.currentlyEditingPreset)return(0,Pd.eH)(this.currentlyEditingPreset.presetData.preset.section.children,e,t,"")},element:Ee.BQ,updateDependency:()=>{},updateActions:()=>{},updateElementValue:()=>{},getElementStudioData:()=>this.value,updateElementStudioData:e=>{this.$emit("input",e)}}}updateAutoRefresh(e){this.autoRefresh=e,e&&this.currentlyEditingPreset&&this.updateCurrentlyEditingPreset(this.currentlyEditingPreset)}getCorrectPathForPresetFromContextPath(e){return e.replace("control","section")}getParentControlOrControls(e){if(this.currentlyEditingPreset)return(0,Me.Z)(b()(this.currentlyEditingPreset.presetData.preset,e))}get codeHelpValue(){return this.currentlyEditingPreset&&this.currentlyEditingPreset.presetData.preset.section.options.sectionOptions?.preset?.codeHelp||""}get codeHelpPlaceholder(){if(!this.currentlyEditingPreset)return"";const e=(0,Nh.dZ)((0,Pd.$_)(this.currentlyEditingPreset.presetData.slug),this.currentPresetName);return`{{ macros.${e}(%%TWIG_PATH%%) }}`}updateCodeHelp(e){if(!this.currentlyEditingPreset)return;const t=(0,Me.Z)(this.currentlyEditingPreset);se()(t,"presetData.preset.section.options.sectionOptions.preset.codeHelp",e),this.updateCurrentlyEditingPreset(t)}get presetsSlug(){return this.value.presets.map((e=>e.slug))}get allPaths(){return this.reactiveContext().getPathsToAllControls([],[])}get presetRelativePropertyPathsToWhitelistInFlatProps(){return this.currentlyEditingPreset?this.currentlyEditingPreset.presetData.preset.section.options.sectionOptions?.preset?.relativePropertyPathsToWhitelistInFlatProps:[]}get relativeDynamicPropertyPaths(){return this.currentlyEditingPreset?this.currentlyEditingPreset.presetData.preset.section.options.sectionOptions?.preset?.relativeDynamicPropertyPaths:[]}updateElementValuePropPath(e,t){if(!this.currentlyEditingPreset)return;const n=(0,Me.Z)(this.currentlyEditingPreset);se()(n,`presetData.preset.section.options.sectionOptions.preset[${t}]`,e),this.currentlyEditingPreset=n}isValidItemName(e){return(0,Pd.nQ)(e)}updateCurrentlyEditingPreset(e){if(e.presetData.preset=this.getPresetWithRestoredSectionSlug(e.presetData.preset),this.currentlyEditingPreset=(0,Me.Z)(e),!1===this.lastSavedPreset&&(this.lastSavedPreset=(0,Me.Z)(e)),!this.autoRefresh)return;const t=Object.values(ft.PK.elements).map((e=>e?(e.controls.designSections=e.controls.designSections.map(this.updateSectionWithCurrentPresetSection),e.controls.contentSections=e.controls.contentSections.map(this.updateSectionWithCurrentPresetSection),e.controls.settingsSections=e.controls.settingsSections.map(this.updateSectionWithCurrentPresetSection),e):e)).filter((e=>void 0!==e));ft.PK.addElements(t)}get currentPresetWithoutPresetSlug(){if(!this.currentlyEditingPreset)return!1;const e=(0,Me.Z)(this.currentlyEditingPreset);return e.presetData.preset.section.options.sectionOptions?.preset?.slug&&(e.presetData.preset.section.options.sectionOptions.preset.slug=void 0),e}updateSectionWithCurrentPresetSection(e){if(e.options.sectionOptions?.preset?.slug&&this.currentlyEditingPreset&&e.options.sectionOptions.preset.slug===this.currentlyEditingPreset.presetData.slug)return(0,Me.Z)(this.currentlyEditingPreset.presetData.preset.section);if(e.children.length){const t=(0,Me.Z)(e);return t.children=t.children.map(this.updateSectionWithCurrentPresetSection),t}return e}filterOutCurrentSection(e,t){if(!e.options.sectionOptions?.preset?.slug||e.options.sectionOptions.preset.slug!==t){if(e.children.length){const n=(0,Me.Z)(e);return n.children=n.children.map((e=>this.filterOutCurrentSection(e,t))).filter((e=>!!e)),n}return e}}getPresetWithRestoredSectionSlug(e){return this.currentlyEditingPreset?(se()(e,"section.options.sectionOptions.preset.slug",this.currentlyEditingPreset.presetData.slug),e):e}updateTab(e){this.activeTab=e}updatePresetSlug(e){if(!this.currentlyEditingPreset)return;const t=(0,Me.Z)(this.currentlyEditingPreset);t.presetData.slug=Vh((0,Pd.$_)(this.currentlyEditingPreset.presetData.slug),e),this.updateCurrentlyEditingPreset(t)}updatePreset(e){const t=(0,Me.Z)(e),n=this.value.presets.findIndex((e=>e.slug===t.slug)),s=this.value.presetSections.findIndex((e=>e.slug===t.preset.slug)),a=(0,Me.Z)(this.value);-1===n&&-1===s?(a.presets.push(t),a.presetSections.push(t.preset)):(a.presets[n]=t,a.presetSections[s].section=t.preset.section),this.$emit("input",a),this.lastSavedPreset&&this.lastSavedPreset.directoryPath&&t.slug!==this.lastSavedPreset.presetData.slug&&t.directoryPath===this.lastSavedPreset.directoryPath&&this.deletePresetFromServer(this.lastSavedPreset)}deletePresetAndRecompileTwigTemplates(e){const t=(0,Pd.iC)(e),n=(0,Me.Z)(this.value.presetSections),s=n.findIndex((e=>e.slug===t)),a=this.value.presets.findIndex((t=>t.slug===e));if(-1!==s&&n.splice(s,1),-1!==a){const e=(0,Me.Z)(this.value);e.presets.splice(a,1),this.$emit("input",e)}if(!this.autoRefresh)return;const i=Object.values(ft.PK.elements).map((t=>t?(t.controls.designSections=t.controls.designSections.map((t=>this.filterOutCurrentSection(t,e))).filter((e=>!!e)),t.controls.contentSections=t.controls.contentSections.map((t=>this.filterOutCurrentSection(t,e))).filter((e=>!!e)),t.controls.settingsSections=t.controls.settingsSections.map((t=>this.filterOutCurrentSection(t,e))).filter((e=>!!e)),t):t)).filter((e=>void 0!==e));ft.PK.addElements(i)}get currentPresetName(){return this.currentlyEditingPreset?(0,Pd.iC)(this.currentlyEditingPreset.presetData.slug):""}get hasUnsavedChanges(){return!(!this.currentlyEditingPreset||!this.lastSavedPreset)&&!Ur()(this.lastSavedPreset.presetData,this.currentlyEditingPreset.presetData)}deletePreset(){this.currentlyEditingPreset&&this.deletePresetFromServer(this.currentlyEditingPreset,(()=>{this.currentlyEditingPreset=!1}))}async deletePresetFromServer(e,t=(()=>{})){(0,V.pipe)(await(0,E.D)({action:"breakdance_delete_preset",dataToPost:{directoryPath:e.directoryPath,filename:(0,Pd.iC)(e.presetData.slug)},decoder:Z.i0("success"),resultKey:"data"}),(0,H.fold)((()=>{ye.Z.log.message("Failed to delete element")}),(()=>{t(),this.deletePresetAndRecompileTwigTemplates(e.presetData.slug)})))}discardChanges(){this.lastSavedPreset&&this.lastSavedPreset.presetData&&(this.updateCurrentlyEditingPreset(this.lastSavedPreset),this.updatePreset(this.lastSavedPreset.presetData)),this.resetCurrentlyEditingPreset()}resetCurrentlyEditingPreset(){this.currentlyEditingPreset=!1,this.lastSavedPreset=!1,this.$emit("active",null)}openPreset(e){const t=(0,Me.Z)(this.value.presets.find((t=>t.slug===e)));if(!t)return;const n=this.value.presetSections.find((t=>t.slug===e));if(!n)return void ye.Z.log.message(`${e} couldn't be found`);const s=this.value.saveLocations.find((e=>t.directoryPath.startsWith(e.directoryPath))),a=!!s?.onlyForAdvancedUsers;this.updateCurrentlyEditingPreset({presetData:{...t,preset:n},directoryPath:t.directoryPath,onlyForAdvancedUsers:a}),this.$emit("active","preset")}saveAs(e){this.currentlyEditingPreset&&this.saveToServer(this.currentlyEditingPreset.presetData.preset,e.directoryPath,this.currentPresetName,Vh(e.namespace,this.currentPresetName),e.onlyForAdvancedUsers)}saveNewItem(e){const t=$h()(e.name),n=Vh(e.namespace,e.name);this.value.presets.find((e=>e.slug===n))?(0,Pd.O6)(this.value.saveLocations,e,"preset"):(this.saveToServer({slug:n,section:(0,Pu.tr)()},e.directoryPath,t,n,e.onlyForAdvancedUsers),this.$emit("active","preset"))}saveOverride(){this.currentlyEditingPreset&&this.currentlyEditingPreset.directoryPath&&this.saveToServer(this.currentlyEditingPreset.presetData.preset,this.currentlyEditingPreset.directoryPath,this.currentPresetName,this.currentlyEditingPreset.presetData.slug,this.currentlyEditingPreset.onlyForAdvancedUsers)}async saveToServer(e,t,n,s,a){this.saveInProgress=!0,(0,V.pipe)(await Wh(e,t,n,s),(0,H.fold)((e=>{console.error(e),ye.Z.log.message("Failed to save element, check console")}),(()=>{const n={presetData:{preset:(0,Me.Z)(e),slug:s,directoryPath:t},directoryPath:t,onlyForAdvancedUsers:a};this.updateCurrentlyEditingPreset(n),this.updatePreset(n.presetData),this.lastSavedPreset=n}))),this.saveInProgress=!1}};(0,r.gn)([(0,l.fI)()],bv.prototype,"value",void 0),(0,r.gn)([(0,l.DF)("context")],bv.prototype,"elementStudioContext",void 0),bv=(0,r.gn)([(0,l.wA)({components:{ToggleInput:Tc.Z,ElementStudioDynPropPaths:Sg,ElementStudioPropertyPaths:hg,Accordion:Hd.Z,ControlSectionOrControl:em,TextInput:cs.Z,Icon:K.Z,CodeInput:om.Z,ElementStudioTabsAndPanels:Qg,ElementStudioWidthAdjustmentBar:hd,ElementStudioTopbar:Zd}})],bv);const Pv=bv,_v=Pv;var Sv=(0,Y.Z)(_v,fv,yv,!1,null,null,null);const Cv=Sv.exports;let wv=class extends s.ZP{constructor(){super(...arguments),this.data={elements:[],macros:[],presets:[],saveLocations:[],presetSections:[]},this.width=600,this.activeItemType=null}async mounted(){(0,lo.zG)(await(0,E.D)({action:"breakdance_load_element_studio",decoder:cv}),(0,co.g_)((e=>e.forEach((e=>ye.Z.log.message(e.msg)))),(e=>{this.data=e})))}updateData(e){this.data=(0,Me.Z)(e)}updateActiveItemType(e){this.activeItemType=e}updateWidth(e){this.width=e}adjustWidth(e){this.width+=e}get styles(){return{width:`${this.width}px`}}get isProdEnv(){return!(0,Oc.y)()}};wv=(0,r.gn)([(0,l.wA)({components:{ElementStudioPresets:Cv,ElementStudioMacros:vv,ElementStudioElements:av,ElementStudioWidthAdjustmentBar:hd}})],wv);const kv=wv,xv=kv;var Iv=(0,Y.Z)(xv,Qc,Jc,!1,null,null,null);const Dv=Iv.exports;var Ev=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("AppLayoutBodyPanelArea",{attrs:{"panel-state":e.panelState,position:e.position}},[t("Add",{directives:[{name:"show",rawName:"v-show",value:"add"===e.panelState,expression:"panelState === 'add'"}]}),"selectors"===e.panelState?t("SelectorsPanel"):"presets"===e.panelState?t("PresetsPanel"):"structure"===e.panelState?t("StructurePanel"):e._e(),"elementproperties"===e.panelState?t("ElementPropertiesPanel",{key:e.activeElementId}):"ai"===e.panelState?t("AIPanel"):"history"===e.panelState?t("HistoryAndRevisionsPanel"):"globalSettings"===e.panelState?t("GlobalSettingsPanel"):e._e()],1)},Zv=[],Tv=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-element-properties-panel vscroll-wrap vscroll-scroll",attrs:{"data-test-id":"element-properties-panel"}},[e.elementIsActive?[t("Titlebar"),t("TabsAndControls")]:[t("BlankSidebarContent")]],2)},Av=[],Bv=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"properties-panel-titlebar"},[t("div",{staticClass:"properties-panel-titlebar-title truncate"},[e._v(" "+e._s(e.elementTitle)+" ")]),e._l(e.elementBadges,(function(e,n){return t("ElementBadge",{key:n,staticClass:"ml-1",attrs:{value:e}})})),t(xa.Z),t("IconButton",{staticClass:"properties-panel-duplicate-button",attrs:{icon:"DuplicateIcon",size:"16",small:!0},on:{click:e.duplicateElement}}),t("IconButton",{staticClass:"properties-panel-delete-button",attrs:{icon:"TrashIcon",size:"16",small:!0},on:{click:e.remove}})],2)},Ov=[],Rv=n(27517),Mv=n(13960);let Fv=class extends s.ZP{get elementTitle(){return c.kD.activeElement?c.PK.element(c.kD.activeElement.data.type).name:"No Active Element"}get elementBadges(){if(!c.kD.activeElement)return[];const e=c.PK.element(c.kD.activeElement.data.type),t=e.badge?[e.badge]:[];return e.settings&&e.settings.proOnly&&"free"===c.PK.subscriptionMode&&t.push((0,Mv.ur)()),t}duplicateElement(){c.kD.activeElementId&&c.Hb.duplicateElementAndActivateIt(c.kD.activeElementId)}remove(){null!==c.kD.activeElementId&&c.Hb.deleteElement({nodeId:c.kD.activeElementId})}};Fv=(0,r.gn)([(0,l.wA)({components:{Dropdown:za.Z,IconButton:Ua.Z,ElementBadge:Rv.Z}})],Fv);const Nv=Fv,Lv=Nv;var $v=(0,Y.Z)(Lv,Bv,Ov,!1,null,null,null);const Wv=$v.exports;var Vv=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"pa-7 d-flex align-center justify-center flex-column",staticStyle:{height:"100%"}},[e._m(0),t("StandardButton",{staticClass:"open-elements-toolbar-button",attrs:{size:"22",testId:"open-elements-toolbar-button"},on:{click:e.toggleAdd}},[e._v(" Add ")])],1)},Hv=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"blank-sidebar-text"},[t("p",[e._v(" Add an element to your page or click an existing element to edit it. ")])])}];let Uv=class extends s.ZP{toggleAdd(){(0,G._y)("add")}};Uv=(0,r.gn)([(0,l.wA)({components:{StandardButton:ea}})],Uv);const zv=Uv,Gv=zv;var Kv=(0,Y.Z)(Gv,Vv,Hv,!1,null,null,null);const jv=Kv.exports;var qv=n(99868),Xv=n(96878),Yv=n(47233),Qv=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vscroll-wrap vscroll-scroll"},[e.hasSearchParameters?e._e():t("DesignContentSettingsTabs",{attrs:{value:e.tab,controls:e.controls},on:{input:e.updateTab}}),t("div",{staticClass:"vscroll-scroll"},["design"===e.tab?t("ElementPresetChooser",{attrs:{element:e.element}}):e._e(),e.searchDisabled&&!e.isPresetsOverridesEnabled?t("p",{staticClass:"preset-selected-message"},[t("Icon",{attrs:{icon:"PaintbrushFineIcon",size:"24"}}),e._v(" A preset is currently selected for this element. ")],1):e.hasSearchParameters&&!e.noSearchResults?t(qv.Z,[""!==e.searchBoxState.query?t("div",{staticClass:"control-tree-search-term"},[t("span",[e._v('Search results for "'+e._s(e.searchBoxState.query)+'"')]),t("div",{staticClass:"control-tree-search-clear",on:{click:e.clearQuery}},[t("Icon",{attrs:{icon:"CloseIcon",size:"14"}})],1)]):e._e(),t("ControlsTree",{attrs:{controls:e.controlsFilteredBySearchParams.contentSections,path:"content",linear:!0}}),t("ControlsTree",{attrs:{controls:e.controlsFilteredBySearchParams.designSections,path:"design",linear:!0}}),t("ControlsTree",{attrs:{controls:e.controlsFilteredBySearchParams.settingsSections,path:"settings",linear:!0}})],1):e.hasSearchParameters&&e.noSearchResults?t(qv.Z,{staticClass:"d-flex justify-center align-center flex-column",attrs:{height:"100%"}},[t("SearchBoxEmptyState",{attrs:{label:"controls"},on:{input:e.clearQuery}})],1):t(Yv.Z,{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[e.hasContentControls?t(Xv.Z,{attrs:{value:"content",transition:!1,"reverse-transition":!1}},[t("ControlsTree",{attrs:{controls:e.contentSections,path:"content",forceFirstSectionOpen:!0}})],1):e._e(),e.hasDesignControls?t(Xv.Z,{attrs:{value:"design",transition:!1,"reverse-transition":!1}},[t("DesignTabContent",{attrs:{controls:e.designSections,path:"design"}})],1):e._e(),e.hasSettingsControls?t(Xv.Z,{attrs:{value:"settings",transition:!1,"reverse-transition":!1}},[t("ControlsTree",{attrs:{controls:e.settingsSections,path:"settings"}})],1):e._e()],1)],1),t("SearchBox",{attrs:{value:e.searchBoxState,location:"element","include-settings-toggle":!0,disabled:e.searchDisabled},on:{input:e.updateSearchBoxState}})],1)},Jv=[],ef=n(20951),tf=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"properties-panel-search-box-wrap",class:{"properties-panel-search-box-wrap--disabled":e.disabled}},[t("div",{staticClass:"properties-panel-search-box-inner-wrap"},[t("Icon",{staticClass:"properties-panel-search-icon",attrs:{icon:"SearchIcon",size:"13"}}),t("TextInput",{staticClass:"properties-panel-search-text-input",attrs:{value:e.value.query,placeholder:e.placeholder,"data-test-id":"elements-panel-search"},on:{input:e.editQuery}}),t("div",{staticClass:"properties-panel-search-actions"},[e.value.query?t("div",{staticClass:"properties-panel-search-extra-button",on:{click:e.clearQuery}},[t("Icon",{attrs:{icon:"CloseIcon",size:"12"}})],1):e._e(),t("SearchFilter",{staticClass:"properties-panel-search-modified",attrs:{value:e.value.modifiedOnly},on:{input:e.editModified}},[e._v("modified")]),e.includeSettingsToggle?t("SearchFilter",{staticClass:"properties-panel-search-settings-toggle",attrs:{value:e.value.includeSettings,title:"Include Settings"},on:{input:e.editSettings}},[t("Icon",{attrs:{icon:"GearIcon",size:"12"}}),t("Icon",{attrs:{icon:"PlusIcon",size:"10"}})],1):e._e()],1)],1)])},nf=[],sf=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{"properties-panel-search-extra-button":!0,"properties-panel-search-extra-button-on":this.value},on:{click:e.toggle}},[e._t("default")],2)},af=[];let of=class extends s.ZP{toggle(){this.$emit("input",!this.value)}};(0,r.gn)([(0,l.fI)()],of.prototype,"value",void 0),of=(0,r.gn)([l.wA],of);const rf=of,lf=rf;var cf=(0,Y.Z)(lf,sf,af,!1,null,null,null);const df=cf.exports;let uf=class extends s.ZP{emit(e){this.$emit("input",e)}editQuery(e){"string"===typeof e?this.emit({...this.value,query:e.trim().toLowerCase()}):this.emit({...this.value,query:""})}clearQuery(){this.emit({...this.value,query:"",modifiedOnly:!1})}editModified(e){this.emit({...this.value,modifiedOnly:e})}editSettings(e){this.emit({...this.value,includeSettings:e})}get placeholder(){return"Search"}};(0,r.gn)([(0,l.fI)()],uf.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],uf.prototype,"includeSettingsToggle",void 0),(0,r.gn)([(0,l.fI)()],uf.prototype,"disabled",void 0),(0,r.gn)([(0,l.fI)()],uf.prototype,"location",void 0),uf=(0,r.gn)([(0,l.wA)({components:{SearchFilter:df,TextInput:cs.Z,Icon:K.Z}})],uf);const pf=uf,hf=pf;var mf=(0,Y.Z)(hf,tf,nf,!1,null,null,null);const gf=mf.exports;var vf=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("TabsRow",[e.hasContentControls?t("Tab",{staticClass:"properties-panel-tab",attrs:{value:e.value,id:"content","data-test-id":"element-properties-tab-content"},on:{input:e.setTab},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Icon",{attrs:{icon:"PenIcon",size:"18"}})]},proxy:!0},{key:"contextmenu",fn:function(){return[t(La.Z,[t($a.Z,{attrs:{dense:""},on:{click:function(t){return e.resetToDefault("content")}}},[t(Wa.V9,[e._v("Reset Content")])],1)],1)]},proxy:!0}],null,!1,855652120)}):e._e(),e.hasDesignControls?t("Tab",{staticClass:"properties-panel-tab",attrs:{value:e.value,id:"design","data-test-id":"element-properties-tab-design"},on:{input:e.setTab},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Icon",{attrs:{icon:"PaletteIcon",size:"18"}})]},proxy:!0},{key:"contextmenu",fn:function(){return[t(La.Z,[t($a.Z,{attrs:{dense:""},on:{click:function(t){return e.resetToDefault("design")}}},[t(Wa.V9,[e._v("Reset Design")])],1)],1)]},proxy:!0}],null,!1,1825965438)}):e._e(),e.hasSettingsControls?t("Tab",{staticClass:"properties-panel-tab",attrs:{value:e.value,id:"settings","data-test-id":"element-properties-tab-settings"},on:{input:e.setTab},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Icon",{attrs:{icon:"GearIcon",size:"18"}})]},proxy:!0},{key:"contextmenu",fn:function(){return[t(La.Z,[t($a.Z,{attrs:{dense:""},on:{click:function(t){return e.resetToDefault("settings")}}},[t(Wa.V9,[e._v("Reset Settings")])],1)],1)]},proxy:!0}],null,!1,325617522)}):e._e()],1)},ff=[],yf=n(48403),bf=n.n(yf),Pf=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:e.classList,on:{click:function(t){return e.$emit("input",e.id)},contextmenu:e.openContextMenu}},[e.hasIconSlot?t("div",{staticClass:"breakdance-tab__icon"},[e._t("icon")],2):e._e(),e.hasIconSlot?e._e():t("div",{staticClass:"breakdance-tab__label"},[e._t("default")],2),e.hasContextMenuSlot?t("div",{staticClass:"breakdance-tab__context-menu"},[t("Dropdown",{attrs:{"position-x":e.contextMenuX,"position-y":e.contextMenuY,absolute:"","offset-y":""},model:{value:e.contextMenu,callback:function(t){e.contextMenu=t},expression:"contextMenu"}},[e._t("contextmenu")],2)],1):e._e()])},_f=[];let Sf=class extends s.ZP{constructor(){super(...arguments),this.contextMenu=!1,this.contextMenuX=0,this.contextMenuY=0}get classList(){return{"breakdance-tab":!0,[`breakdance-tab--id-${this.id}`]:!0,"breakdance-tab--active":this.value===this.id}}get hasContextMenuSlot(){return!!this.$slots.contextmenu}get hasIconSlot(){return!!this.$slots.icon}openContextMenu(e){this.hasContextMenuSlot&&(e.preventDefault(),this.contextMenu=!1,this.contextMenuX=e.clientX,this.contextMenuY=e.clientY,this.$nextTick((()=>{this.contextMenu=!0})))}};(0,r.gn)([(0,l.fI)()],Sf.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],Sf.prototype,"id",void 0),Sf=(0,r.gn)([(0,l.wA)({components:{Dropdown:za.Z}})],Sf);const Cf=Sf,wf=Cf;var kf=(0,Y.Z)(wf,Pf,_f,!1,null,null,null);const xf=kf.exports;var If=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-tabs-row"},[e._t("default")],2)},Df=[];let Ef=class extends s.ZP{};Ef=(0,r.gn)([(0,l.wA)({})],Ef);const Zf=Ef,Tf=Zf;var Af=(0,Y.Z)(Tf,If,Df,!1,null,null,null);const Bf=Af.exports;var Of=n(47256);let Rf=class extends s.ZP{setTab(e){this.$emit("input",e)}get hasContentControls(){return this.controls.contentSections.length>0}get hasDesignControls(){return this.controls.designSections.length>0}get hasSettingsControls(){return this.controls.settingsSections.length>0}resetToDefault(e){!1!==c.kD.activeElement&&Ff(c.kD.activeElement.id,e)}};(0,r.gn)([(0,l.fI)({default:"content"})],Rf.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],Rf.prototype,"controls",void 0),(0,r.gn)([(0,l.tB)("context")],Rf.prototype,"context",void 0),Rf=(0,r.gn)([(0,l.wA)({components:{TabsRow:Bf,Tab:xf,Icon:K.Z}})],Rf);const Mf=Rf;function Ff(e,t){const n=(0,N.DY)(c.Hb.document.tree,e);if(!n)return;const s=c.PK.element(n.data.type).defaultProperties,a=b()(s,t,Of.Bz);c.Hb.throttledPropertyChanged({elementId:n.id,path:t,value:(0,Me.Z)(a),meta:{snapshotLabel:`Reset ${(0,Ae.JC)(n.data.type)} ${bf()(t)}`}})}const Nf=Mf;var Lf=(0,Y.Z)(Nf,vf,ff,!1,null,null,null);const $f=Lf.exports;var Wf=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("ControlsTree",{attrs:{controls:e.controls,path:e.path}})],1)},Vf=[];let Hf=class extends s.ZP{};(0,r.gn)([(0,l.fI)()],Hf.prototype,"controls",void 0),(0,r.gn)([(0,l.fI)()],Hf.prototype,"path",void 0),Hf=(0,r.gn)([(0,l.wA)({components:{ControlsTree:ef["default"]}})],Hf);const Uf=Hf,zf=Uf;var Gf=(0,Y.Z)(zf,Wf,Vf,!1,null,null,null);const Kf=Gf.exports;var jf=n(78574);function qf(e,t,n,s){const a=new RegExp(n.trim().replace(" ","|"),"si"),i=(e,n)=>!(a&&!`${e.label}`.match(a)&&!`${e.slug}`.match(a)&&!`${e.keywords}`.match(a))&&!(t&&!(0,Of.Ed)(n,e,s));return{contentSections:Yf(e.contentSections,i,"content",t),designSections:Yf(e.designSections,i,"design",t),settingsSections:Yf(e.settingsSections,i,"settings",t)}}function Xf(e,t,n,s,a){const i=new RegExp(n.trim().replace(" ","|"),"si"),o=(e,n)=>!(i&&!`${e.label}`.match(i)&&!`${e.slug}`.match(i)&&!`${e.keywords}`.match(i))&&!(t&&!(0,Of.Ed)(n,e,s));return Yf(e,o,a,t)}function Yf(e,t,n,s){const a=(0,Me.Z)(e);return a.filter((e=>{const a=t(e,`${n}.${e.slug}`);return"section"===e.options.type?!(!a||s)||(e.children=Yf(e.children,t,`${n}.${e.slug}`,s),e.children.length>0):a}))}const Qf=(e,t)=>(e.forEach((e=>{t=Qf(e.children,t+("section"===e.options.type?0:1))})),t);var Jf=n(18759),ey=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"properties-panel-search-empty-state"},[t("svg",{staticClass:"properties-panel-search-empty-state-icon",attrs:{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"}},[t("path",{attrs:{d:"M90.667 34.388v-25a6.25 6.25 0 0 0-6.25-6.25h-75a6.25 6.25 0 0 0-6.25 6.25v68.75a6.25 6.25 0 0 0 6.25 6.25h25M3.167 21.888h87.5","stroke-width":"6.250005"}}),t("path",{attrs:{d:"M46.917 71.888a25 25 0 1 0 50 0 25 25 0 1 0-50 0ZM81.292 62.513l-18.75 18.75M62.542 62.513l18.75 18.75","stroke-width":"6.250005"}})])]),t("h5",[e._v("No "+e._s(e.label)+" found.")]),t(os.Z,{staticClass:"mt-4",attrs:{text:"",outlined:"",small:""},on:{click:e.clearSearch}},[e._v("Clear Search")])],1)},ty=[];let ny=class extends s.ZP{clearSearch(){this.$emit("input")}};(0,r.gn)([(0,l.fI)({default:"element"})],ny.prototype,"label",void 0),ny=(0,r.gn)([(0,l.wA)({components:{Dropdown:za.Z,IconButton:Ua.Z}})],ny);const sy=ny,ay=sy;var iy=(0,Y.Z)(ay,ey,ty,!1,null,null,null);const oy=iy.exports;var ry=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"element-preset-chooser"},[t("div",{staticClass:"element-preset-chooser__input"},[t(Td.Z,{staticClass:"breakdance-dense-select breakdance-white-gray-outlined-input",attrs:{items:e.presetItems,dense:"",solo:"",flat:"",filled:"",placeholder:"Choose Design Preset","no-data-text":"","hide-details":"",value:e.currentPreset},on:{input:e.selectPreset},scopedSlots:e._u([{key:"append-item",fn:function(){return[t($a.Z,{staticClass:"element-preset-chooser__create-button",class:{"element-preset-chooser__create-button--disabled":!e.canCreatePreset},attrs:{dense:"",link:""},on:{click:e.openSavePresetDialog}},[t(Wa.V9,[t("b",[e._v("Create preset from design")])])],1)]},proxy:!0},{key:"no-data",fn:function(){return[t("div")]},proxy:!0}])}),t("div",{staticClass:"element-preset-chooser__actions"},[e.currentPreset?t("div",{key:"detach",staticClass:"properties-panel-search-extra-button element-preset-chooser__detach",attrs:{"aria-label":"Detach Styles",title:"Detach Styles"},on:{click:function(t){return t.stopPropagation(),e.detach.apply(null,arguments)}}},[t("Icon",{attrs:{icon:"LinkSimpleSlashSolidIcon",size:"12"}})],1):e._e(),e.currentPreset||!e.isPresetValid?t("div",{key:"clear",staticClass:"properties-panel-search-extra-button element-preset-chooser__clear",attrs:{"aria-label":"Clear Styles"},on:{click:function(t){return t.stopPropagation(),e.clear.apply(null,arguments)}}},[t("Icon",{attrs:{icon:"CloseIcon",size:"12"}})],1):e._e()])],1),e.currentPreset?t("NiceButton",{staticClass:"element-preset-chooser__edit",attrs:{"aria-label":"Edit"},on:{click:e.edit}},[e._v(" Edit ")]):e._e()],1),e.isPresetValid?e._e():t("div",{staticClass:"element-preset-chooser-invalid"},[t("AlertBox",{attrs:{options:{style:"error",content:"The selected preset does not exist or has been deleted. Please select another preset."}}})],1),t("PresetDialog",{attrs:{open:e.savePresetDialog,"element-id":e.element.id},on:{close:e.closePresetDialog}})],1)},ly=[];let cy=class extends l.w3{constructor(){super(...arguments),this.savePresetDialog=!1}get elementName(){return c.PK.element(this.element.data.type).name}get availablePresets(){return c.cr.presets}get isPresetValid(){return!this.currentPreset||this.currentPreset&&this.presetItems.find((e=>e.value===this.currentPreset))}get isPresetsOverridesEnabled(){return c.PK.isExperimentEnabled("design-presets-overrides")}get presetItems(){const e=this.element.data.type;return this.availablePresets.filter((t=>t.availableForType===e)).map((e=>({text:e.name,value:e.id})))}get currentPreset(){return this.element.data.properties?.meta?.preset}get canCreatePreset(){return!!this.element.data.properties?.design}selectPreset(e){(0,$e.I8)(e,this.element.id,!this.isPresetsOverridesEnabled)}clear(){(0,$e.Tn)(this.element.id)}detach(){this.currentPreset&&((0,$e.WE)(this.currentPreset,this.element.id),(0,$e.Tn)(this.element.id))}edit(){c.kD.setActivePresetId(this.currentPreset),(0,G.oM)("presets")}openSavePresetDialog(){this.savePresetDialog=!0}closePresetDialog(){this.savePresetDialog=!1}};(0,r.gn)([(0,l.fI)()],cy.prototype,"element",void 0),cy=(0,r.gn)([(0,l.wA)({components:{NiceButton:io.Z,Icon:K.Z,DropdownInput:Di.Z,AlertBox:Pc.Z,PresetDialog:gs}})],cy);const dy=cy,uy=dy;var py=(0,Y.Z)(uy,ry,ly,!1,null,"6ca03713",null);const hy=py.exports;let my=class extends s.ZP{constructor(){super(...arguments),this.searchBoxState={modifiedOnly:!1,includeSettings:!1,query:""},this.editingElementControlsTreeContext=vy,this.searchString=""}get element(){return c.kD.activeElement}get elementId(){return c.kD.activeElementId}clearQuery(){this.updateSearchBoxState({modifiedOnly:!1,query:"",includeSettings:!1})}updateSearchBoxState(e){this.searchBoxState=e}get hasSearchParameters(){return this.searchBoxState.modifiedOnly||this.searchBoxState.query}get noSearchResults(){return Qf(this.controlsFilteredBySearchParams.contentSections,0)+Qf(this.controlsFilteredBySearchParams.designSections,0)+Qf(this.controlsFilteredBySearchParams.settingsSections,0)===0}get controlsFilteredBySearchParams(){const e=this.searchBoxState.includeSettings?{designSections:[],contentSections:[],settingsSections:this.controls.settingsSections}:{...this.controls,settingsSections:[]};return this.isPresetEnabled&&!this.isPresetsOverridesEnabled?{...e,designSections:[]}:qf(this.searchBoxState.modifiedOnly?this.controls:e,this.searchBoxState.modifiedOnly,this.searchBoxState.query,this.editingElementControlsTreeContext)}get controls(){const e=this.element.data.type,t=c.PK.element(e).controls;return(0,jf.Z)(t,c.PK.permission)}get isPresetEnabled(){return!!this.element&&(0,$e.CO)(this.element.id)}get searchDisabled(){return"design"===this.tab&&this.isPresetEnabled&&!this.isPresetsOverridesEnabled}get isPresetsOverridesEnabled(){return c.PK.isExperimentEnabled("design-presets-overrides")}get contentSections(){return this.controls.contentSections}get designSections(){return this.controls.designSections}get settingsSections(){return this.controls.settingsSections}get hasContentControls(){return this.controls.contentSections.length>0}get hasDesignControls(){return this.controls.designSections.length>0}get hasSettingsControls(){return this.controls.settingsSections.length>0}get tab(){return this.elementId&&c.kD.panelState.elementPropertiesPanelActiveTab[this.elementId]?c.kD.panelState.elementPropertiesPanelActiveTab[this.elementId]:this.hasContentControls?"content":this.hasDesignControls?"design":this.hasSettingsControls?"settings":""}updateTab(e){this.elementId&&c.kD.setPanelState({...c.kD.panelState,elementPropertiesPanelActiveTab:{...c.kD.panelState.elementPropertiesPanelActiveTab,[this.elementId]:e}})}};(0,r.gn)([(0,l.fI)()],my.prototype,"value",void 0),(0,r.gn)([(0,l.DF)("context")],my.prototype,"editingElementControlsTreeContext",void 0),my=(0,r.gn)([(0,l.wA)({components:{ElementPresetChooser:hy,DropdownInput:Di.Z,ControlsTree:ef["default"],SearchBox:gf,DesignContentSettingsTabs:$f,DesignTabContent:Kf,Icon:K.Z,SearchBoxEmptyState:oy}})],my);const gy=my,vy={dynamicProperty:e=>{if(!c.kD.activeElement)return!1;const t=c.PK.element(c.kD.activeElement.data.type).dynamicPropertyPaths;if(!t)return!1;const n=(0,ve.rg)(e).replace(`.${c.kD.currentBreakpoint.id}`,""),s=t.find((e=>(0,ve.rg)(e.path)===n));return!!s?.accepts&&s},getControlValue:e=>b()(c.kD.activeElement,`data.properties.${e}`),setControlValue(e,t,n,s){c.kD.activeElementId&&c.Hb.throttledPropertyChanged((0,Pu.TV)({elementId:c.kD.activeElementId,path:e,value:t},{control:n,controlsTree:this.getControls(e)||[]},s))},getControls:e=>{if(!c.kD.activeElement)return;const t=(0,Ee.zE)(e);return t?(0,Ee.nx)(c.PK.element(c.kD.activeElement.data.type),t.prefix):void 0},setAccordionState:(e,t)=>{c.kD.activeElementId&&(0,Jf.rg)(c.kD.activeElementId,e,t)},getAccordionState:e=>!!c.kD.activeElementId&&(0,Jf.co)(c.kD.activeElementId,e)},fy=gy;var yy=(0,Y.Z)(fy,Qv,Jv,!1,null,null,null);const by=yy.exports;let Py=class extends s.ZP{get elementIsActive(){return!!c.kD.activeElement}};Py=(0,r.gn)([(0,l.wA)({components:{Titlebar:Wv,TabsAndControls:by,BlankSidebarContent:jv}})],Py);const _y=Py,Sy=_y;var Cy=(0,Y.Z)(Sy,Tv,Av,!1,null,null,null);const wy=Cy.exports;var ky=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-add-panel"},[t("PanelHeader",{on:{close:e.close}},[e._v(" Add ")]),"success"===e.state?[t("div",{staticClass:"breakdance-add-panel__selection-wrapper"},[t("button",{staticClass:"breakdance-add-panel__panel-selection breakdance-add-panel__panel-selection--active"},[e._v(" Elements ")]),t("button",{staticClass:"breakdance-add-panel__panel-selection",on:{click:e.openDesignLibrary}},[e._v(" Library ")])]),t("ElementsList")]:"loading"===e.state?[t("div",{staticClass:"d-flex justify-center align-center",staticStyle:{height:"100%"}},[t(Mr.Z,{attrs:{indeterminate:"",size:100,color:"var(--gray300)"}})],1)]:[t("div",{staticClass:"d-flex justify-center align-center pa-4",staticStyle:{height:"100%","font-size":"var(--text-md)","font-weight":"500",color:"var(--gray700)"}},[e._v(" error: failed to load elements ")])]],2)},xy=[],Iy=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-add-panel__element-list"},[t("div",{staticClass:"breakdance-add-panel-search d-flex"},[e.isAddPanelOpen?t("SearchInput",{attrs:{tabindex:"0",placeholder:e.isElementStudioOpen?`Search ${e.elementsCount} elements`:"Search elements",value:e.searchString,autofocus:!0,"data-test-id":"breakdance-add-panel-search"},on:{input:e.handleSearch,keydown:[e.resetSelectedSearchItemIndex,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSelectedSearchItem.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.nextOrPreviousSelectedSearchElement.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.goToSelectedSearchElement("prev"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.goToSelectedSearchElement("next"))}]}}):e._e(),e.advancedSearchAvailable?[t(os.Z,{staticClass:"ml-2",attrs:{"x-small":"",text:"",outlined:e.hasSearchParams},on:{click:function(t){e.advancedSearchDialogOpen=!0}}},[e._v("advanced")]),t(mr.Z,{attrs:{width:"220"},model:{value:e.advancedSearchDialogOpen,callback:function(t){e.advancedSearchDialogOpen=t},expression:"advancedSearchDialogOpen"}},[t(ui.Z,[t(ki.ZB,[t("br"),t("h4",[e._v("Internal Element Project Management Tool")]),t(os.Z,{attrs:{small:""},on:{click:e.dumpSearchResults}},[e._v("dump search results")]),t("div",{staticClass:"d-flex align-center justify-space-between"},[e._v(" Has Dynamic Stuff "),t(Ic.Z,{model:{value:e.advancedSearchHasDynamicStuff,callback:function(t){e.advancedSearchHasDynamicStuff=t},expression:"advancedSearchHasDynamicStuff"}})],1),e._v(" Looks Good: "),t("DropdownInput",{attrs:{items:e.advancedSearchDropdownItems,clearable:""},model:{value:e.advancedSearchLooksGood,callback:function(t){e.advancedSearchLooksGood=t},expression:"advancedSearchLooksGood"}}),t("br"),e._v(" Options Good: "),t("DropdownInput",{attrs:{items:e.advancedSearchDropdownItems,clearable:""},model:{value:e.advancedSearchOptionsGood,callback:function(t){e.advancedSearchOptionsGood=t},expression:"advancedSearchOptionsGood"}}),t("br"),e._v(" Options Work: "),t("DropdownInput",{attrs:{items:e.advancedSearchDropdownItems,clearable:""},model:{value:e.advancedSearchOptionsWork,callback:function(t){e.advancedSearchOptionsWork=t},expression:"advancedSearchOptionsWork"}}),t("br"),e._v(" Dynamic Behavior Works: "),t("DropdownInput",{attrs:{items:e.advancedSearchDropdownItems,clearable:""},model:{value:e.advancedSearchDynamicBehaviorWorks,callback:function(t){e.advancedSearchDynamicBehaviorWorks=t},expression:"advancedSearchDynamicBehaviorWorks"}}),t("br")],1)],1)],1)]:e._e()],2),t("div",{staticClass:"breakdance-add-panel__item-wrapper"},[e.hasSearchParams?e._e():e._l(e.elementCategories,(function(n,s){return t("div",{key:s},[e.elementsInActiveCategory(n.slug).length?t("Accordion",{attrs:{expanded:e.openCategoriesIndex.includes(s)},on:{toggle:function(t){return e.chooseCategory(s)}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"breakdance-add-panel__item-title",attrs:{tabindex:"0","data-test-id":`elements-category-${n.label.replace(/ /g,"-").toLowerCase()}`},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.chooseCategory(s)}}},[e._v(" "+e._s(n.label)+" ")])]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"breakdance-add-panel__item-element-wrapper"},e._l(e.elementsInActiveCategory(n.slug),(function(e,n){return t("AddElement",{key:n,attrs:{element:e}})})),1)]},proxy:!0}],null,!0)}):e._e()],1)})),e.hasSearchParams?t("div",{staticClass:"breakdance-add-panel__item-element-wrapper breakdance-add-panel__item-element-wrapper--search"},[e.searchResultsCount?e._e():t("div",{staticClass:"breakdance-add-panel__no-results-for-search"},[e._v(" no results ")]),e._l(e.elementsForSearch,(function(n,s){return t("AddElement",{key:n.slug,attrs:{element:n,isSelected:e.selectedSearchElementIndex===s}})}))],2):e._e()],2)])},Dy=[],Ey=n(32855),Zy=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(os.Z,{on:{click:function(t){e.isOpen=!0}}},[e._v("Open Website Dialog")]),t(mr.Z,{model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[t(ui.Z,[t("h1",[e._v(" use the below HTML code on breakdance.com to display a list of elements. ")]),t("p",[e._v(" this is currently used at https://breakdance.com/features/elements ")]),t("div",{staticClass:"all-elements"},e._l(e.elementCategories,(function(n){return t("div",{key:n.categoryLabel,staticClass:"element-category-wrapper"},[t("div",{staticClass:"element-category"},[t("h3",{staticClass:"element-category-label"},[e._v(" "+e._s(n.categoryLabel)+" ")])]),t("div",{staticClass:"elements"},e._l(n.elements,(function(n){return t("div",{key:n.element,staticClass:"element"},[t("div",{staticClass:"element-title"},[e._v(" "+e._s(n.element)+" ")]),n.icon&&e.elementIconIsLocal(n.icon)?t("div",{staticClass:"element-icon"},[t("RawIcon",{attrs:{icon:n.icon}})],1):t("div",{staticClass:"element-icon",domProps:{innerHTML:e._s(n.icon)}})])})),0)])})),0)])],1)],1)},Ty=[],Ay=n(24192);let By=class extends s.ZP{constructor(){super(...arguments),this.isOpen=!1}elementIconIsLocal(e){return lp.iconNames.find((t=>t===e))}get elementCategories(){const e=Object.values(c.PK.elements);return c.PK.builderElementCategories.map((t=>({categoryLabel:t.label,elements:e.filter((e=>!0!==e.experimental)).filter((e=>!e.addPanelRules||!e.addPanelRules.alwaysHide)).filter((e=>e.category===t.slug)).map((e=>({element:e.name,icon:e.uiIcon}))).sort(((e,t)=>e.element.localeCompare(t.element)))}))).filter((e=>0!==e.elements.length))}};By=(0,r.gn)([(0,l.wA)({components:{RawIcon:Ay.Z}})],By);const Oy=By,Ry=Oy;var My=(0,Y.Z)(Ry,Zy,Ty,!1,null,null,null);const Fy=My.exports;let Ny=class extends s.ZP{constructor(){super(...arguments),this.openCategoriesIndex=[0,1],this.searchString="",this.selectedSearchElementIndex=0,this.advancedSearchAvailable=!1,this.advancedSearchDialogOpen=!1,this.advancedSearchHasDynamicStuff=!1,this.advancedSearchLooksGood=!1,this.advancedSearchOptionsGood=!1,this.advancedSearchOptionsWork=!1,this.advancedSearchDynamicBehaviorWorks=!1}addSelectedSearchItem(){const e=this.elementsForSearch[this.selectedSearchElementIndex]?.slug;e&&(0,Ee.Sl)(this.elementsForSearch[this.selectedSearchElementIndex])&&c.Hb.addElement({elementSlug:e})}get searchResultsCount(){return Object.keys(this.elementsForSearch).length}goToSelectedSearchElement(e="next"){let t="next"===e?this.selectedSearchElementIndex+1:this.selectedSearchElementIndex-1;t===this.searchResultsCount?t=0:-1===t&&(t=this.searchResultsCount-1),this.selectedSearchElementIndex=t,this.scrollToActive()}nextOrPreviousSelectedSearchElement(e){""!==this.searchString&&e.preventDefault(),this.goToSelectedSearchElement(e.shiftKey?"prev":"next")}handleSearch(e){this.searchString!==e&&document.querySelector(".breakdance-add-panel")?.scrollTo({top:0}),this.searchString=e}get isAddPanelOpen(){return"add"===this.panelContext?.state}resetSearchWhenPanelOpens(){this.isAddPanelOpen&&this.handleSearch("")}resetSelectedSearchItemIndex(e){const t=["Enter","Tab","ShiftLeft","ShiftRight","ArrowUp","ArrowDown"];t.includes(e.code)||(this.selectedSearchElementIndex=0)}get elementsCount(){return this.elements.length}chooseCategory(e){this.searchString="";const t=this.openCategoriesIndex.findIndex((t=>t===e));-1===t?this.openCategoriesIndex=[...this.openCategoriesIndex,e]:this.openCategoriesIndex.splice(t,1)}elementsInActiveCategory(e){return this.elements.filter((t=>t.category===e))}get elementCategories(){return c.PK.builderElementCategories}get elements(){return Object.values(c.PK.elements).filter((e=>!!c.kD.settings.showExperimentalElements||!0!==e.experimental)).filter((e=>!(0,Ee.GF)(e.addPanelRules,e.settings))).filter((e=>(0,Ee.Sl)(e))).sort(((e,t)=>e.order<t.order?-1:e.order>t.order?1:0))}get elementsForSearch(){const e=(0,Ee.tM)(this.elements,this.searchString),t=e.filter((e=>{const t=e.projectManagement?e.projectManagement:void 0;return!Object.values({looksGood:this.advancedSearchLooksGood?t?.looksGood==this.advancedSearchLooksGood:void 0,optionsGood:this.advancedSearchOptionsGood?t?.optionsGood==this.advancedSearchOptionsGood:void 0,optionsWork:this.advancedSearchOptionsWork?t?.optionsWork==this.advancedSearchOptionsWork:void 0,dynamicBehaviorWorks:this.advancedSearchDynamicBehaviorWorks?t?.dynamicBehaviorWorks==this.advancedSearchDynamicBehaviorWorks:void 0,hasDynamicStuff:this.advancedSearchHasDynamicStuff?e.dependencies||e.actions:void 0}).includes(!1)}));return t}scrollToActive(){(0,et.n)((()=>{document.querySelector(".breakdance-add-panel__element--selected")?.scrollIntoView({block:"center"})}))}dumpSearchResults(){console.log(this.elementsForSearch.map((e=>e.name)).join("\n"))}get advancedSearchDropdownItems(){return["yes","no","unknown","sort of"]}mounted(){Le.uq.register("a d v",(()=>this.advancedSearchAvailable=!0))}beforeDestroy(){Le.uq.unbind("a d v")}get hasSearchParams(){return!!(this.searchString||this.advancedSearchLooksGood||this.advancedSearchOptionsGood||this.advancedSearchOptionsWork||this.advancedSearchDynamicBehaviorWorks||this.advancedSearchHasDynamicStuff)}updateAdvancedSearchValue(e,t){this[e]=t}get isElementStudioOpen(){return c.kD.panelState.elementStudioOpen}};(0,r.gn)([(0,l.tB)({from:"panelContext",default:{}})],Ny.prototype,"panelContext",void 0),(0,r.gn)([(0,l.RL)("isAddPanelOpen")],Ny.prototype,"resetSearchWhenPanelOpens",null),Ny=(0,r.gn)([(0,l.wA)({components:{SearchInput:ao.Z,TextInput:cs.Z,Accordion:Hd.Z,AddElement:Ey.Z,DropdownInput:Di.Z,WebsiteDialog:Fy}})],Ny);const Ly=Ny,$y=Ly;var Wy=(0,Y.Z)($y,Iy,Dy,!1,null,null,null);const Vy=Wy.exports;var Hy,Uy=n(18236),zy=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(mr.Z,{attrs:{fullscreen:e.fullscreen,width:e.fullscreen?null:1140,"content-class":"design-library-dialog"},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[t("header",{staticClass:"design-library-header"},[t("TopBarSection",[t("IconButton",{attrs:{icon:"HouseIcon",size:"18",title:"Go home"},on:{click:e.goHome}})],1),t("TopBarSection",{attrs:{"border-left":!0,"border-right":!0}},[t("DesignProviderDropdown",{attrs:{providers:e.providers},model:{value:e.selectedProvider,callback:function(t){e.selectedProvider=t},expression:"selectedProvider"}})],1),t("TopBarSection",{staticClass:"design-library-breakpoint-chooser ml-auto mr-auto",attrs:{"border-left":!0,"border-right":!0}},[t("BreakpointsSelection",{model:{value:e.breakpoint,callback:function(t){e.breakpoint=t},expression:"breakpoint"}})],1),t("TopBarSection",{staticClass:"ml-auto pr-2",attrs:{"border-right":!0}},[t("NiceButton",{attrs:{disabled:!e.canImportAll,"left-icon":"ArrowDownToLine",loading:e.importingPage},on:{click:e.importAll}},[e._v(" Import Page ")])],1),t("TopBarSection",[t("IconButton",{attrs:{icon:e.fullscreen?"DownLeftAndUpRightToCenter":"UpRightAndDownLeftFromCenter",size:"18",title:"Make modal full screen"},on:{click:e.toggleFullscreen}}),e.selectedUrl?t("a",{attrs:{href:e.selectedUrl,target:"_blank"}},[t("IconButton",{attrs:{icon:"ShareFromSquareIcon",size:"18",title:"Visit site"}})],1):e._e()],1),t("TopBarSection",{attrs:{"border-left":!0}},[t("IconButton",{attrs:{icon:"CloseIcon",size:"18",title:"Close modal"},on:{click:e.close}})],1)],1),t("div",{staticClass:"design-library-contents"},[t("DesignLibrarySidebar",{attrs:{items:e.sidebarItems},on:{select:e.onPostSelected}}),t("div",{ref:"iframeWrapper",staticClass:"design-library-iframe-wrapper"},[e.previewLoaded?[e.reliesOnGlobalSettings?t("DesignLibraryGlobalSettings",{attrs:{"last-imported-from-url":e.library.globalSettingsLastImportedFromUrl,provider:e.selectedProvider}}):e._e(),e.reliesOnDesignPresets?t("DesignLibraryDesignPresets",{attrs:{"last-imported-from-url":e.library.designPresetsLastImportedFromUrl,provider:e.selectedProvider}}):e._e()]:e._e(),t("ProOnlyAlertBox",{attrs:{options:{feature:"design-library",content:"Soon, the Design Library will only be available in Breakdance Pro. For now, enjoy your free preview!"}}}),e.showPasswordForm?t("DesignLibraryPassword",{attrs:{provider:e.selectedProvider,compact:!0},on:{"password-validated":e.getAllProvidersAndReloadSelected}}):t("div",{staticClass:"design-library-iframe-inner-wrapper",style:e.iframeWrapperStyles},[e.selectedProvider&&e.iframeUrl?t("iframe",{ref:"iframe",staticClass:"design-library-iframe",style:e.iframeStyles,attrs:{src:e.iframeUrl},on:{load:e.onProviderLoaded}}):e._e()]),e.previewLoaded?t(Uy.Z,{attrs:{value:e.loading,absolute:""}},[t(Mr.Z,{attrs:{indeterminate:"",size:"64"}})],1):e._e(),!e.previewLoaded&&e.selectedProvider?t("DesignLibrarySkeleton"):e._e()],2)],1)])},Gy=[],Ky=n(65118),jy=n(75031),qy=function(){var e=this;e._self._c;return e._m(0)},Xy=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"design-library-skeleton-loader"},[t("span",{staticClass:"design-library-skeleton-header"},[t("span",{staticClass:"design-library-skeleton-line"}),t("span",{staticClass:"design-library-skeleton-line"}),t("span",{staticClass:"design-library-skeleton-line"})]),t("span",{staticClass:"design-library-skeleton-hero"},[t("span",{staticClass:"design-library-skeleton-line"}),t("span",{staticClass:"design-library-skeleton-line"})]),t("div",{staticClass:"design-library-skeleton-button"},[t("span",{staticClass:"design-library-skeleton-line"}),t("span",{staticClass:"design-library-skeleton-line"})])])}];let Yy=(0,l.wA)(Hy=class extends s.ZP{})||Hy;const Qy=Yy;var Jy=(0,Y.Z)(Qy,qy,Xy,!1,null,null,null);const eb=Jy.exports;var tb=n(98949),nb=n(33356),sb=n(12817),ab=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("aside",{staticClass:"design-library-sidebar"},[t("header",{staticClass:"design-library-sidebar-header"},[t("SearchInput",{attrs:{placeholder:"Search Pages",autofocus:!0},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),t(sb.Z,{attrs:{hoverable:"",activatable:"","open-on-click":"",items:e.treeItems,"open-all":!!e.searchQuery},on:{"update:active":function(t){return e.$emit("select",t)}},scopedSlots:e._u([{key:"prepend",fn:function({item:n,open:s}){return[n.children?t("Icon",{attrs:{icon:s?"FolderOpenIcon":"FolderIcon"}}):e._e()]}}])})],1)},ib=[],ob=n(74221);let rb=class extends s.ZP{constructor(){super(...arguments),this.searchQuery=""}get filteredItems(){const e=this.searchQuery;if(!e)return this.items;const t=new ob.Z(this.items,{keys:["name"],threshold:.2});return t.search(e.trim()).map((e=>e.item))}get treeItems(){const e=[],t=this.filteredItems.reduce(((t,n)=>(n.tags.length?n.tags.forEach((e=>{t[e]=t[e]||[],t[e].push(n)})):e.push(n),t)),Object.create(null)),n=Object.keys(t).map((e=>({id:e,name:e,children:t[e]})));return[...e,...n]}};(0,r.gn)([(0,l.fI)({default(){return[]}})],rb.prototype,"items",void 0),rb=(0,r.gn)([(0,l.wA)({components:{AlertBox:Pc.Z,SearchInput:ao.Z,Icon:K.Z}})],rb);const lb=rb,cb=lb;var db=(0,Y.Z)(cb,ab,ib,!1,null,null,null);const ub=db.exports;var pb=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"design-library-global-settings-warning"},[t("div",[t("div",{staticClass:"design-library-global-settings-warning-text"},[e.lastImportedFromUrl===e.provider?.url?[t("Icon",{staticClass:"design-library_success-icon",attrs:{icon:"CheckSquareIcon"}}),e._v(" You've already imported the global settings from this site. ")]:e.lastImportedFromUrl?[t("Icon",{staticClass:"design-library_warning-icon",attrs:{icon:"ExclamationMarkCircleIcon"}}),t("span",[e._v(" This design relies on global settings. It won't look the same unless you import them. ")])]:[t("div",[e._v(" This design relies on global settings. It won't look the same unless you import them. ")])]],2)]),t("NiceButton",{on:{click:e.toggleImportScreen}},[e._v(" Import Global Settings ")])],1),e.showImportScreen?t("div",{staticClass:"design-library-import-global-settings-panel"},[e.loading?t("div",[t("LoadingSpinner",{attrs:{color:"var(--gray500)",size:65}})],1):[t("span",[e._v(" Your existing global settings will be overwritten with the global settings from this library website. ")]),t("div",[t(os.Z,{staticClass:"mr-2",attrs:{text:""},on:{click:e.toggleImportScreen}},[e._v(" Cancel ")]),t(os.Z,{attrs:{dark:"",color:"blue"},on:{click:e.importSettings}},[e._v(" Confirm Overwrite & Import ")])],1)]],2):e._e()])},hb=[],mb=n(58720);let gb=class extends s.ZP{constructor(){super(...arguments),this.loading=!1,this.showImportScreen=!1}toggleImportScreen(){this.showImportScreen=!this.showImportScreen}async importSettings(){if(this.provider?.isLocal)return;this.loading=!0;const e=this.provider?.url,t=(0,lo.zG)(await(0,E.D)({action:"breakdance_get_external_global_settings",decoder:jy.az,friendlyName:`Global Settings for "${e}"`,dataToPost:{url:e}}),(0,co.g_)((()=>!1),(t=>(e&&ft.PK.setDesignLibrary({...ft.PK.designLibrary,globalSettingsLastImportedFromUrl:e}),t&&t.globalSettings))));this.loading=!1,this.showImportScreen=!1,!1!==t?(ft.cr.setGlobalSettings(t),ft.kD.setShouldPanelLoadFreshDataIntoStoreOnceOpened("globalSettings",!1),ye.Z.log.message(`Imported Global Settings from "${this.provider?.name||this.provider?.url}"`)):ye.Z.log.errorMessage(`Error importing Global Settings for "${this.provider?.name||this.provider?.url}"`)}};(0,r.gn)([(0,l.fI)({default:null})],gb.prototype,"provider",void 0),(0,r.gn)([(0,l.fI)({default:null})],gb.prototype,"lastImportedFromUrl",void 0),gb=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,NiceButton:io.Z,LoadingSpinner:mb.Z}})],gb);const vb=gb,fb=vb;var yb=(0,Y.Z)(fb,pb,hb,!1,null,null,null);const bb=yb.exports;var Pb=n(92260),_b=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Dropdown",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t("div",e._g({staticClass:"document-chooser"},n),[t("div",{staticClass:"document-chooser-text"},[t("h2",[e._v("Design Set")]),t("span",{staticClass:"ellipsis-text"},[e._v(" "+e._s(e.value&&e.value.name)+" ")])]),t("div",{staticClass:"document-chooser-dropdown-icon"},[t("Icon",{attrs:{size:"11",icon:"CaretDownIcon"}})],1)])]}}]),model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(ui.Z,{staticClass:"vscroll-scroll vscroll-wrap",attrs:{width:"300",height:"350"}},[t("div",{staticClass:"preview-content-chooser-dialog-search-form-wrapper"},[t(pi.Z,{staticClass:"preview-content-chooser-dialog-search-box breakdance-dense-input",attrs:{label:"Search...",clearable:"",solo:"",flat:"",dense:"","full-width":"","single-line":"","background-color":"var(--gray150)",autofocus:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(La.Z,{ref:"scrollable",staticClass:"vscroll-scroll",attrs:{dense:""}},[e._l(e.filteredProviders,(function(n,s){return[t($a.Z,{key:s,class:{"document-chooser-item-selected":e.value&&n.url===e.value.url},attrs:{link:""},on:{click:function(t){return e.chooseProvider(n)}}},[t(Wa.V9,{staticClass:"previewable-item-list-item"},[t("div",{staticClass:"previewable-item-label previewable-item-label-stop-text-from-overflowing"},[e._v(" "+e._s(n.name)+" ")]),n.type?t("div",{staticClass:"previewable-item-type"},[e._v(" "+e._s(e.formatType(n.type))+" ")]):e._e()])],1)]}))],2)],1)],1)},Sb=[];let Cb=class extends s.ZP{constructor(){super(...arguments),this.open=!1,this.search=""}onSearchChange(){const e=this.$refs.scrollable;this.$nextTick((()=>{e.$el.scrollTop=0}))}get filteredProviders(){return this.search?this.providers.filter((e=>e.name.toLowerCase().includes(this.search.toLowerCase()))):this.providers}formatType(e){return e.replace(/_/g," ")}chooseProvider(e){this.$emit("input",e),this.open=!1,(0,fr.K)("Design Library",{action:"modal_provider_selected",provider:e.name})}};(0,r.gn)([(0,l.fI)()],Cb.prototype,"value",void 0),(0,r.gn)([(0,l.fI)()],Cb.prototype,"providers",void 0),(0,r.gn)([(0,l.RL)("search")],Cb.prototype,"onSearchChange",null),Cb=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,Dropdown:za.Z,TopBarSection:ii}})],Cb);const wb=Cb,kb=wb;var xb=(0,Y.Z)(kb,_b,Sb,!1,null,null,null);const Ib=xb.exports;var Db=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"design-library-global-settings-warning"},[t("div",[t("div",{staticClass:"design-library-global-settings-warning-text"},[e.lastImportedFromUrl===e.provider?.url?[t("Icon",{staticClass:"design-library_success-icon",attrs:{icon:"CheckSquareIcon"}}),e._v(" You've already imported the Design Presets from this site. ")]:e.lastImportedFromUrl?[t("Icon",{staticClass:"design-library_warning-icon",attrs:{icon:"ExclamationMarkCircleIcon"}}),t("span",[e._v(" This design relies on Design Presets. It won't look the same unless you import them. ")])]:[t("div",[e._v(" This design relies on Design Presets. It won't look the same unless you import them. ")])]],2)]),t("NiceButton",{on:{click:e.toggleImportScreen}},[e._v(" Import Design Presets ")])],1),e.showImportScreen?t("div",{staticClass:"design-library-import-global-settings-panel"},[e.loading?t("div",[t("LoadingSpinner",{attrs:{color:"var(--gray500)",size:65}})],1):[t("span",[e._v(" Your existing Design Presets will be overwritten with the Presets from this library website. ")]),t("div",[t(os.Z,{staticClass:"mr-2",attrs:{text:""},on:{click:e.toggleImportScreen}},[e._v(" Cancel ")]),t(os.Z,{attrs:{dark:"",color:"blue"},on:{click:e.importSettings}},[e._v(" Confirm Overwrite & Import ")])],1)]],2):e._e()])},Eb=[],Zb=n(14018);let Tb=class extends s.ZP{constructor(){super(...arguments),this.loading=!1,this.showImportScreen=!1}toggleImportScreen(){this.showImportScreen=!this.showImportScreen}async importSettings(){if(this.provider?.isLocal)return;this.loading=!0;const e=this.provider?.url,t=(0,lo.zG)(await(0,E.D)({action:"breakdance_get_external_design_presets",decoder:Zb.p,friendlyName:`Design Presets for "${e}"`,dataToPost:{url:e}}),(0,co.g_)((()=>null),(t=>(e&&ft.PK.setDesignLibrary({...ft.PK.designLibrary,designPresetsLastImportedFromUrl:e}),t))));this.loading=!1,this.showImportScreen=!1,t?(ft.cr.setPresets(t),ft.kD.setShouldPanelLoadFreshDataIntoStoreOnceOpened("presets",!1),ye.Z.log.message(`Imported Design Presets from "${this.provider?.name||this.provider?.url}"`)):ye.Z.log.errorMessage(`Error importing Design Presets for "${this.provider?.name||this.provider?.url}"`)}};(0,r.gn)([(0,l.fI)({default:null})],Tb.prototype,"provider",void 0),(0,r.gn)([(0,l.fI)({default:null})],Tb.prototype,"lastImportedFromUrl",void 0),Tb=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,NiceButton:io.Z,LoadingSpinner:mb.Z}})],Tb);const Ab=Tb,Bb=Ab;var Ob=(0,Y.Z)(Bb,Db,Eb,!1,null,null,null);const Rb=Ob.exports;var Mb=n(80265);let Fb=class extends s.ZP{constructor(){super(...arguments),this.selectedProvider=null,this.selectedPostId=null,this.providerElements=[],this.reliesOnGlobalSettings=!1,this.reliesOnDesignPresets=!1,this.providerPosts=[],this.importingPage=!1,this.requiresPassword=!1,this.passwordValid=!0,this.breakpoint={id:Nt.Wp,label:"",minWidth:void 0,maxWidth:void 0,defaultPreviewWidth:Nt.kS},this.canvasSize={width:0,height:0},this.loading=!1,this.previewLoaded=!1,this.fullscreen=!1,this.loadingDesignSetData=!1}mounted(){ft.kD.hasFullAccess&&(Le.uq.register(sn.r.CMD_B,this.open),this.setSelectedProviderToLastUsedProvider())}beforeDestroy(){Le.uq.unbind(sn.r.CMD_B),this.unbindListeners()}get library(){return ft.PK.designLibrary}get providers(){return this.library.designProviders}get showPasswordForm(){return this.requiresPassword&&!this.passwordValid}setSelectedProviderToLastUsedProvider(){const e=(0,tb.f8)(),t=this.providers.find((t=>t.url===e));if(t)this.selectedProvider=t;else{const e=this.providers.find((e=>"This Website"===e.name));e&&(this.selectedProvider=e)}}get sidebarItems(){return this.providerPosts}get isOpen(){return ft.kD.panelState.designLibraryModalOpen}set isOpen(e){ft.kD.setDesignLibraryModalState(e)}get selectedPost(){return this.providerPosts.find((e=>e.id===this.selectedPostId))}get selectedUrl(){return this.selectedPost?.url||this.selectedProvider?.url}get iframeUrl(){if(!this.selectedUrl)return null;const e=new URL(this.selectedUrl);return e.searchParams.append("breakdance","design-library"),this.currentProviderPassword&&e.searchParams.set("password",this.currentProviderPassword),e.toString()}get previewWidth(){return this.breakpoint.id===Nt.Wp?"100%":this.breakpoint.defaultPreviewWidth}get minWidth(){return(0,Nt.GV)(ft.cr)}get iframeWrapperStyles(){return{width:"100%"===this.previewWidth?"100%":`${this.previewWidth}px`}}get iframeStyles(){const e=e=>{const t=Math.min(1,this.canvasSize.width/e);return{width:`${e}px`,transform:`scale(${t})`,height:this.canvasSize.height*(1/t)+"px"}};return"100%"===this.previewWidth?this.canvasSize.width<this.minWidth?e(this.minWidth):{width:"100%",minWidth:`${this.minWidth}px`}:e(this.previewWidth)}get canImportAll(){return this.providerElements.length}get currentProviderPassword(){const e=new URL(this.selectedProvider?.url||"");return e.searchParams.get("password")}onDialogOpen(){this.isOpen?this.modalOpened():this.unbindListeners()}onProviderChange(e,t){this.providerElements=[],this.selectedPostId=null,this.providerPosts=[],this.reliesOnGlobalSettings=!1,this.reliesOnDesignPresets=!1,this.getDesignSetData(),e.url!==t?.url&&(this.previewLoaded=!1)}modalOpened(){this.selectedProvider||(this.selectedProvider=this.providers[1]),(0,fr.K)("Design Library",{action:"modal_opened"}),this.calculateSizeAfterTransition(),window.addEventListener("message",this.handleIframeMessage,!1),window.addEventListener("resize",this.setCanvasSize)}unbindListeners(){window.removeEventListener("message",this.handleIframeMessage,!1),window.removeEventListener("resize",this.setCanvasSize)}calculateSizeAfterTransition(){const e=400;setTimeout((()=>this.setCanvasSize()),e)}setCanvasSize(){const e=this.$refs.iframeWrapper;if(!e)return;const{width:t,height:n}=e.getBoundingClientRect();this.canvasSize={width:t,height:n}}reloadIframe(){const e=this.$refs.iframe;e?(e.src+="",this.loading=!0):this.selectedProvider=this.providers[0]}goHome(){this.selectedPostId=null,this.reloadIframe()}toggleFullscreen(){this.fullscreen=!this.fullscreen,this.calculateSizeAfterTransition()}handleIframeMessage(e){if("string"!==typeof e.data)return;const[t,n]=e.data.split(/,(.*)/s);"breakdanceGetElements"===t&&this.getElements(n),"breakdanceImportElement"===t&&this.importElement(n),"breakdanceBeforeLeave"===t&&this.navigatedAway()}onPostSelected(e){const[t]=e;this.loading=!0,this.selectedPostId=t||null,this.reloadIframe(),(0,fr.K)("Design Library",{action:"modal_page_selected",provider:this.selectedProvider?.name,post_id:t})}onProviderLoaded(){this.previewLoaded=!0,this.loading=!1,this.setCanvasSize()}getElements(e){this.loading=!1;const t=(0,Ky.Z)(e,Z.IX(jy.NM));this.providerElements=(0,lo.zG)(t,(0,co.g_)((()=>[]),(e=>e)))}navigatedAway(){this.loading=!0}importElement(e){const t=(0,Ky.Z)(e,jy.NM),n=(0,lo.zG)(t,(0,co.g_)((()=>null),(e=>e)));n&&((0,fr.K)("Design Library",{action:"modal_import_element",provider:this.selectedProvider?.name,elementSlug:n.data.type}),this.insertElements([n]),this.close(),this.$nextTick((()=>{(0,nb.zE)()})))}insertElements(e){(0,tb.AE)(e),this.selectedProvider&&(0,tb.Hw)(this.selectedProvider.url)}importAll(){this.importingPage=!0,this.insertElements(this.providerElements),this.close(),this.importingPage=!1,this.$nextTick((()=>{(0,nb.zE)()}))}close(){ft.kD.setDesignLibraryModalState(!1)}open(){ft.kD.setDesignLibraryModalState(!0)}async getDesignSetData(){const e=this.selectedProvider?.url;this.loadingDesignSetData=!0,(0,lo.zG)(await(0,E.D)({action:this.selectedProvider?.isLocal?"breakdance_get_local_design_set":"breakdance_get_external_design_set",decoder:Pb.i2,friendlyName:"Design Set Data",dataToPost:{url:e}}),(0,co.g_)((()=>{this.providerPosts=[]}),(e=>{this.providerPosts=e.posts,this.requiresPassword=e.requiresPassword||!1,this.passwordValid=!!e.passwordValid,this.reliesOnGlobalSettings=e.reliesOnGlobalSettings,this.reliesOnDesignPresets=e.reliesOnDesignPresets}))),this.loadingDesignSetData=!1}async getAllProvidersAndReloadSelected(){await this.getUpdatedDesignProviders();const e=this.providers.find((e=>e.name===this.selectedProvider?.name));this.selectedProvider=e||this.providers[0]}async getUpdatedDesignProviders(){(0,lo.zG)(await(0,E.D)({action:"breakdance_get_design_library_data",decoder:Pb.Jd}),(0,co.g_)((()=>{}),(e=>{ft.PK.setDesignLibrary(e)})))}};(0,r.gn)([(0,l.RL)("isOpen")],Fb.prototype,"onDialogOpen",null),(0,r.gn)([(0,l.RL)("selectedProvider")],Fb.prototype,"onProviderChange",null),Fb=(0,r.gn)([(0,l.wA)({components:{ProOnlyAlertBox:_c.Z,IconButton:Ua.Z,NiceButton:io.Z,DesignLibrarySidebar:ub,DesignLibrarySkeleton:eb,TopBarSection:ii,TextInput:cs.Z,DropdownInput:Di.Z,BreakpointsSelection:Xa,DesignProviderDropdown:Ib,DesignLibraryPassword:Mb.Z,DesignLibraryGlobalSettings:bb,DesignLibraryDesignPresets:Rb}})],Fb);const Nb=Fb,Lb=Nb;var $b=(0,Y.Z)(Lb,zy,Gy,!1,null,null,null);const Wb=$b.exports;var Vb=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(qv.Z,{staticClass:"breakdance-panel-header d-flex align-center",attrs:{tile:""}},[t("div",{staticClass:"breakdance-panel-header-title"},[e._t("default")],2),t(xa.Z),e._t("right"),e.backInsteadOfClose?t("IconButton",{staticClass:"breakdance-panel-header-close-button",attrs:{icon:"ChevronDownIcon",rotate:"90",size:"12",small:""},on:{click:e.close}}):t("IconButton",{staticClass:"breakdance-panel-header-close-button",attrs:{icon:"CloseIcon",size:"16",small:""},on:{click:e.close}})],2)},Hb=[];let Ub=class extends l.w3{close(){this.$emit("close")}};(0,r.gn)([(0,l.fI)({default:!1})],Ub.prototype,"backInsteadOfClose",void 0),Ub=(0,r.gn)([(0,l.wA)({components:{IconButton:Ua.Z}})],Ub);const zb=Ub,Gb=zb;var Kb=(0,Y.Z)(Gb,Vb,Hb,!1,null,null,null);const jb=Kb.exports;let qb=class extends s.ZP{close(){(0,G.TO)("add")}openDesignLibrary(){ft.kD.setDesignLibraryModalState(!0)}get state(){return ft.PK.elementsLoadingState}};qb=(0,r.gn)([(0,l.wA)({components:{DesignLibraryModal:Wb,PanelHeader:jb,ElementsList:Vy}})],qb);const Xb=qb,Yb=Xb;var Qb=(0,Y.Z)(Yb,ky,xy,!1,null,null,null);const Jb=Qb.exports;var eP=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vscroll-wrap vscroll-scroll global-settings-panel"},[t("div",{staticClass:"vscroll-wrap vscroll-scroll"},[t("PanelHeader",{on:{close:e.close},scopedSlots:e._u([{key:"right",fn:function(){return[t("GlobalSettingsDropdownMenu")]},proxy:!0}])},[e._v(" Globals "),t("BrowseModeToggle",{attrs:{"panel-to-open":"globalSettings"}}),t("PanelHeaderButton",{attrs:{enabled:"history"===e.viewMode},on:{click:e.toggleViewMode}},[e._v("history")])],1),"controls"===e.viewMode?t("GlobalSettingsPanelControlsViewMode",{attrs:{"is-loading":e.isLoading}}):"history"===e.viewMode?t("GlobalSettingsPanelHistoryViewMode"):e._e()],1)])},tP=[],nP=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("PanelHeaderButton",{attrs:{enabled:e.isBrowseModeEnabled},on:{click:e.toggleBrowseMode}},[e._v("browse")])},sP=[],aP=n(89381),iP=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{"breakdance-panel-header-button":!0,"breakdance-panel-header-button--enabled":e.enabled},on:{click:function(t){return e.$emit("click")}}},[e._t("default")],2)},oP=[];let rP=class extends l.w3{};(0,r.gn)([(0,l.fI)({default:!0})],rP.prototype,"enabled",void 0),rP=(0,r.gn)([(0,l.wA)({components:{}})],rP);const lP=rP,cP=lP;var dP=(0,Y.Z)(cP,iP,oP,!1,null,null,null);const uP=dP.exports;let pP=class extends s.ZP{get isBrowseModeEnabled(){return"browse"===ft.kD.mode}toggleBrowseMode(){(0,aP.lD)(this.panelToOpen)}};(0,r.gn)([(0,l.fI)({default:"globalSettings"})],pP.prototype,"panelToOpen",void 0),pP=(0,r.gn)([(0,l.wA)({components:{PanelHeaderButton:uP}})],pP);const hP=pP,mP=hP;var gP=(0,Y.Z)(mP,nP,sP,!1,null,null,null);const vP=gP.exports;var fP=n(38433),yP=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vscroll-wrap vscroll-scroll"},[e.isLoading?t(fP.Z,{attrs:{"justify-center":"","align-center":""}},[t(Mr.Z,{attrs:{size:"64",indeterminate:"",color:"var(--gray300)"}})],1):[e.hasSearchParameters?e._e():t("div",{staticClass:"vscroll-scroll"},[t("ControlsTree",{attrs:{controls:e.controls,path:"settings"}})],1),e.hasSearchParameters&&!e.noSearchResults?t("div",{staticClass:"vscroll-scroll"},[""!==e.searchBoxState.query?t("div",{staticClass:"control-tree-search-term"},[t("span",[e._v('Search results for "'+e._s(e.searchBoxState.query)+'"')]),t("div",{staticClass:"control-tree-search-clear",on:{click:e.clearQuery}},[t("Icon",{attrs:{icon:"CloseIcon",size:"14"}})],1)]):e._e(),t("ControlsTree",{attrs:{controls:e.controlsFilteredBySearchParams,path:"settings",linear:!0}})],1):e.hasSearchParameters&&e.noSearchResults?t(qv.Z,{staticClass:"d-flex justify-center align-center flex-column",attrs:{height:"100%"}},[t("SearchBoxEmptyState",{attrs:{label:"settings"},on:{input:e.clearQuery}})],1):e._e(),t("SearchBox",{attrs:{value:e.searchBoxState,location:"settings"},on:{input:e.updateSearchBoxState}})]],2)},bP=[];let PP=class extends s.ZP{constructor(){super(...arguments),this.searchBoxState={modifiedOnly:!1,query:""},this.editingGlobalSettingsControlsTreeContext=SP}updateSearchBoxState(e){this.searchBoxState=e}clearQuery(){this.updateSearchBoxState({modifiedOnly:!1,query:""})}get controls(){return ft.PK.globalSettingsControlsAndTemplate.controls}get controlsFilteredBySearchParams(){return Xf(this.controls,this.searchBoxState.modifiedOnly,this.searchBoxState.query,this.editingGlobalSettingsControlsTreeContext,"settings")}get noSearchResults(){return 0===Qf(this.controlsFilteredBySearchParams,0)}get hasSearchParameters(){return this.searchBoxState.modifiedOnly||this.searchBoxState.query}};(0,r.gn)([(0,l.fI)({default:!1})],PP.prototype,"isLoading",void 0),(0,r.gn)([(0,l.DF)("context")],PP.prototype,"editingGlobalSettingsControlsTreeContext",void 0),PP=(0,r.gn)([(0,l.wA)({components:{ControlsTree:ef["default"],SearchBox:gf,Icon:K.Z,SearchBoxEmptyState:oy}})],PP);const _P=PP,SP={dynamicProperty:()=>!1,getControlValue:e=>b()(ft.cr.globalSettings,e),setControlValue(e,t,n,s){ft.cr.throttledGlobalSettingsPropertyChange((0,Pu.YO)({path:e,value:t},{control:n,controlsTree:this.getControls(e)||[]},s))},getControls:()=>ft.PK.globalSettingsControlsAndTemplate.controls,setAccordionState:(e,t)=>{(0,Jf.v)(e,t)},getAccordionState:e=>(0,Jf.uz)(e)},CP=_P;var wP=(0,Y.Z)(CP,yP,bP,!1,null,null,null);const kP=wP.exports;var xP=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vscroll-wrap vscroll-scroll"},[t("RevisionsList",{attrs:{"is-loading":e.isLoading,revisions:e.revisionUiItems},on:{revisionSelected:e.onRevisionSelected}})],1)},IP=[],DP=n(21516);const EP=Z.dt({id:Z.G0([Z.pk,Z.Z_]),date:Z.Z_,author:Z.G0([Z.Z_,Z.i0(!1)])}),ZP=Z.jV([EP,Z.dt({globalSettings:jy.az})]),TP=Z.IX(ZP),AP=Z.jV([EP,Z.dt({selectors:DP.Ng})]),BP=Z.IX(AP),OP=Z.jV([EP,Z.dt({presets:Zb.p})]),RP=Z.IX(OP),MP=Z.jV([EP,Z.dt({tree:Z.Z_})]),FP=Z.jV([EP,Z.dt({tree:jy.f2})]),NP=(Z.dt({revisions:Z.IX(FP)}),Z.G0([Z.dt({revisions:Z.IX(MP)}),Z.dt({unsupported:Z.Z_})]));async function LP(){return(0,lo.zG)(await(0,E.D)({action:"breakdance_retrieve_global_settings_revisions",decoder:TP}),(0,H.mapLeft)((()=>null)),co.i$)}var $P=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-revisions-list vscroll-wrap vscroll-scroll"},[e.isLoading?t(fP.Z,{attrs:{"justify-center":"","align-center":""}},[t(Mr.Z,{attrs:{size:"64",indeterminate:"",color:"var(--gray300)"}})],1):e.revisionsNotSupportedMessage?t("div",{staticClass:"breakdance-revisions-list__not-found"},[t("p",[e._v(e._s(e.revisionsNotSupportedMessage))])]):e.revisions.length?t("div",{staticClass:"breakdance-revisions-list__items"},e._l(e.revisions,(function(n,s){return t("RevisionItem",{key:n.revisionData.id,attrs:{revision:n.revisionData,selected:n.isSelected},on:{click:function(t){return e.onRevisionSelected(n,s)}}})})),1):t("div",{staticClass:"breakdance-revisions-list__not-found"},[t("h2",[e._v("No revisions found")]),t("p",[e._v("Save any changes to create a new revision")])])],1)},WP=[],VP=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"revisions-item",class:{"revisions-item--selected":e.selected},on:{click:function(t){return e.$emit("click",e.revision)}}},[t("span",{staticClass:"revisions-item__date"},[e._v(e._s(e.revision.date))]),e.revision.author?[t("span",[e._v(e._s(e.revision.author))])]:e._e()],2)},HP=[];let UP=class extends s.ZP{};(0,r.gn)([(0,l.fI)({default(){return{}}})],UP.prototype,"revision",void 0),(0,r.gn)([(0,l.fI)({default:!1})],UP.prototype,"selected",void 0),UP=(0,r.gn)([(0,l.wA)({})],UP);const zP=UP,GP=zP;var KP=(0,Y.Z)(GP,VP,HP,!1,null,null,null);const jP=KP.exports;let qP=class extends s.ZP{onRevisionSelected(e,t){this.$emit("revisionSelected",e,t)}};(0,r.gn)([(0,l.fI)({default:!1})],qP.prototype,"isLoading",void 0),(0,r.gn)([(0,l.fI)({default:[]})],qP.prototype,"revisions",void 0),(0,r.gn)([(0,l.fI)({default:null})],qP.prototype,"revisionsNotSupportedMessage",void 0),qP=(0,r.gn)([(0,l.wA)({components:{RevisionItem:jP}})],qP);const XP=qP,YP=XP;var QP=(0,Y.Z)(YP,$P,WP,!1,null,null,null);const JP=QP.exports;var e_=n(25886);let t_=class extends s.ZP{constructor(){super(...arguments),this.isLoading=!1,this.remoteRevisions=null,this.selectedIndex=null,this.unsubscribeFromStore=()=>{},this.currentUnsavedRevision=null}async beforeMount(){await this.loadRemoteRevisions(),ft.cr.settingsHasUnsavedChangesPresent&&(this.recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch(),-1===this.selectedIndex&&this.setCurrentStoreDataAsCurrentUnsavedRevisionIfDataIsNotEqualToMostRecentRemoteRevisionData()),this.recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch(),this.unsubscribeFromStore=this.$store.subscribe((e=>{const t=(0,e_.q$)(e);"global"===t&&"global/restoreGlobalSettingsRevision"!==e.type&&"global/setSelectors"!==e.type&&("global/setGlobalSettings"===e.type?this.currentUnsavedRevision=null:this.setCurrentStoreDataAsCurrentUnsavedRevisionIfDataIsNotEqualToMostRecentRemoteRevisionData(),this.recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch())}))}beforeDestroy(){this.unsubscribeFromStore()}async loadRemoteRevisions(){this.isLoading=!0,this.remoteRevisions=await LP(),this.selectedIndex=null,this.isLoading=!1}recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch(){this.selectedIndex=this.findSelectedIndexBasedOnStoreDataMatch()}findSelectedIndexBasedOnStoreDataMatch(){const e=(0,Me.Z)(ft.cr.globalSettings);return this.revisions.findIndex((t=>Ur()(t.globalSettings,e)))}setCurrentStoreDataAsCurrentUnsavedRevisionIfDataIsNotEqualToMostRecentRemoteRevisionData(){this.isCurrentStoreDataTheSameAsTheMostRecentRemoteRevisionData()?this.currentUnsavedRevision=null:this.setCurrentUnsavedRevisionFromCurrentStoreData()}isCurrentStoreDataTheSameAsTheMostRecentRemoteRevisionData(){if(null===this.remoteRevisions||0===this.remoteRevisions.length)return!1;const[e]=this.remoteRevisions,t=(0,Me.Z)(ft.cr.globalSettings);return Ur()(e.globalSettings,t)}setCurrentUnsavedRevisionFromCurrentStoreData(){this.currentUnsavedRevision={id:-1,author:!1,date:"Current",globalSettings:(0,Me.Z)(ft.cr.globalSettings)}}get revisionUiItems(){return this.revisions.map(((e,t)=>({isSelected:t===this.selectedIndex,revisionData:e})))}get revisions(){const e=this.remoteRevisions??[];return this.currentUnsavedRevision?[this.currentUnsavedRevision,...e]:e}onRevisionSelected(e,t){this.selectedIndex=t,oe.n.transaction((()=>ft.cr.restoreGlobalSettingsRevision(e.revisionData)),"Restore Global Settings From Revision")}get unsavedChangesPresent(){return ft.kD.unsavedChangesPresent}async updateRevisionsAfterSaving(){ft.kD.unsavedChangesPresent||(await this.loadRemoteRevisions(),this.currentUnsavedRevision=null,this.recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch())}};(0,r.gn)([(0,l.RL)("unsavedChangesPresent")],t_.prototype,"updateRevisionsAfterSaving",null),t_=(0,r.gn)([(0,l.wA)({components:{RevisionsList:JP}})],t_);const n_=t_,s_=n_;var a_=(0,Y.Z)(s_,xP,IP,!1,null,null,null);const i_=a_.exports;var o_=n(1073),r_=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("Dropdown",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t("IconButton",e._g({staticClass:"breakdance-panel-header-left-of-close-button",attrs:{size:"16",small:"",icon:"EllipsisStrokeIcon"}},n))]}}])},[t(La.Z,[t($a.Z,{attrs:{dense:""},on:{click:e.openImportDialog}},[t(Wa.V9,[e._v(" Import Global Settings ")])],1),t($a.Z,{attrs:{dense:""},on:{click:e.exportGlobalSettings}},[t(Wa.V9,[e._v(" Export Global Settings ")])],1)],1)],1),t("Dialog",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Import Global Settings ")]},proxy:!0},{key:"text",fn:function(){return[t("FileUpload",{attrs:{height:"300px",accept:".json",acceptsMultiple:!1},on:{input:e.handleFiles}},[e.canImport?[e._v(" file accepted ")]:[e._v(" drag global-settings.json here ")]],2)]},proxy:!0},{key:"actions",fn:function(){return[t(os.Z,{staticStyle:{"margin-right":"auto"},attrs:{text:""},on:{click:e.cancelImport}},[e._v("Cancel")]),t(os.Z,{attrs:{dark:"",color:"blue",disabled:!e.canImport},on:{click:e.importGlobalSettings}},[e._v("Import")])]},proxy:!0}]),model:{value:e.importDialogOpen,callback:function(t){e.importDialogOpen=t},expression:"importDialogOpen"}})],1)},l_=[];function c_(e,t,n="text/plain"){const s=new Blob([e],{type:n}),a=document.createElement("a");a.download=t,a.href=(window.webkitURL||window.URL).createObjectURL(s),a.dataset.downloadurl=[n,a.download,a.href].join(":"),a.click(),document.body.removeChild(a),URL.revokeObjectURL(a.href)}function d_(){const e=(0,Ac.g)(ft.cr.globalSettings);c_(e||"","global-settings.json")}var u_=n(88506);let p_=class extends l.w3{constructor(){super(...arguments),this.canImport=!1,this.importDialogOpen=!1,this.settingsToImport={}}exportGlobalSettings(){d_()}openImportDialog(){this.importDialogOpen=!0}cancelImport(){this.settingsToImport={},this.canImport=!1,this.importDialogOpen=!1}handleFiles(e){Array.from(e).forEach((e=>{const t=new FileReader;t.onloadend=async e=>{if(!e?.target)return;const t=e.target.result,n=(0,V.pipe)((0,u_.Z)(t),(0,H.fold)((()=>{}),(e=>e)));if(!("settings"in n))return ye.Z.log.errorMessage("Error importing Global Settings - the file is invalid or empty."),this.settingsToImport={},void(this.canImport=!1);(0,V.pipe)(n,Z.dt({settings:Z.IM(Z.Z_,Z._4)}).decode,(0,H.fold)((()=>{ye.Z.log.errorMessage("Error importing Global Settings - the file is invalid."),this.settingsToImport={},this.canImport=!1}),(e=>{this.settingsToImport=e,this.canImport=!0})))},t.readAsText(e)}))}importGlobalSettings(){"settings"in this.settingsToImport?(oe.n.transaction((()=>{c.cr.setGlobalSettings(this.settingsToImport)}),"Import Global Settings"),ye.Z.log.message("Global Settings imported."),this.settingsToImport={},this.canImport=!1,this.importDialogOpen=!1):ye.Z.log.errorMessage("No settings to import.")}};p_=(0,r.gn)([(0,l.wA)({components:{IconButton:Ua.Z,Dropdown:za.Z,Dialog:Jn.Z,FileUpload:nc.Z}})],p_);const h_=p_,m_=h_;var g_=(0,Y.Z)(m_,r_,l_,!1,null,null,null);const v_=g_.exports;let f_=class extends s.ZP{constructor(){super(...arguments),this.storedData=null,this.isStoringData=!1,this.isLoadingData=!1}get viewMode(){return ft.kD.panelState.globalSettingsPanelActiveViewMode}toggleViewMode(){ft.kD.setPanelState({...ft.kD.panelState,globalSettingsPanelActiveViewMode:"controls"===this.viewMode?"history":"controls"})}get isLoading(){return this.isStoringData||this.isLoadingData}async beforeMount(){ft.kD.panelState.shouldLoadFreshDataIntoStoreOnceOpened.globalSettings?(ft.kD.setPanelState({...ft.kD.panelState,globalSettingsPanelActiveViewMode:"controls"}),await this.loadSettings()):ft.kD.setShouldPanelLoadFreshDataIntoStoreOnceOpened("globalSettings",!0)}async storeSettings(){this.isStoringData=!0;const e=await(0,o_.T)();return this.storedData=(0,Me.Z)(ft.cr.globalSettings),this.isStoringData=!1,e}async loadSettings(){this.isLoadingData=!0;const e=await(0,o_._)();return this.storedData=(0,Me.Z)(ft.cr.globalSettings),this.isLoadingData=!1,e}get unsavedChangesPresent(){return ft.cr.settingsHasUnsavedChangesPresent}requestPanelClosingConfirmation(){ft.kD.requestClosingConfirmation({subject:"globalSettings",confirmationDefinition:{title:"You have unsaved changes to your Global Settings.",text:"Would you like to save or discard these changes?",type:"info"}})}handleUnsavedChangesPresentChange(e){e?this.requestPanelClosingConfirmation():ft.kD.noClosingConfirmationIsNeededFor("globalSettings")}get confirmationChosenOption(){return ft.kD.closingConfirmations.globalSettings?.chosenOption}async handleConfirmationChosenOptionChange(e){"discard"===e?(ft.kD.setClosingConfirmationIsDiscarding({subject:"globalSettings",isDiscarding:!0}),await this.loadSettings()?this.close():this.requestPanelClosingConfirmation()):"save"===e&&(ft.kD.setClosingConfirmationIsSaving({subject:"globalSettings",isSaving:!0}),await this.storeSettings()?this.close():this.requestPanelClosingConfirmation())}close(){(0,G.TO)("globalSettings")}};(0,r.gn)([(0,l.RL)("unsavedChangesPresent",{immediate:!0})],f_.prototype,"handleUnsavedChangesPresentChange",null),(0,r.gn)([(0,l.RL)("confirmationChosenOption",{immediate:!0})],f_.prototype,"handleConfirmationChosenOptionChange",null),f_=(0,r.gn)([(0,l.wA)({components:{GlobalSettingsPanelHistoryViewMode:i_,GlobalSettingsPanelControlsViewMode:kP,PanelHeaderButton:uP,BrowseModeToggle:vP,PanelHeader:jb,GlobalSettingsDropdownMenu:v_}})],f_);const y_=f_,b_=y_;var P_=(0,Y.Z)(b_,eP,tP,!1,null,null,null);const __=P_.exports;var S_=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vscroll-wrap vscroll-scroll selectors-panel"},[e.isLoadingData?t(fP.Z,{attrs:{row:"","justify-center":"","align-center":""}},[t(Mr.Z,{attrs:{size:"64",indeterminate:"",color:"var(--gray300)"}})],1):e._e(),e.activeSelector?t("EditSelector",{on:{close:e.close}}):e._e(),e.activeSelector||e.isLoadingData?e._e():t("ManageSelectors",{on:{close:e.close}})],1)},C_=[],w_=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vscroll-wrap vscroll-scroll"},[t("PanelHeader",{on:{close:function(t){return e.$emit("close")}}},[e._v("Selectors "),t("BrowseModeToggle",{attrs:{"panel-to-open":"selectors"}}),t("PanelHeaderButton",{attrs:{enabled:"history"===e.viewMode},on:{click:e.toggleViewMode}},[e._v("history")])],1),t("FreeModeAlertForSelectors",{staticClass:"ma-4"}),"controls"===e.viewMode?[t("AddSelector"),t("div",{staticClass:"vscroll-wrap vscroll-scroll breakdance-manage-selectors"},[t("SelectorsList",{attrs:{selectors:e.selectors,searchable:!0},on:{input:e.updateSelectors}})],1)]:"history"===e.viewMode?[t("SelectorsPanelHistoryViewMode")]:e._e()],2)},k_=[],x_=n(99346),I_=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"d-flex flex-row add-selector"},[t("TextInput",{staticClass:"flex-grow-1",attrs:{placeholder:".your.css > #selector-69::after"},model:{value:e.newSelectorName,callback:function(t){e.newSelectorName=t},expression:"newSelectorName"}}),t("NiceButton",{staticClass:"ml-1",attrs:{size:"small"},on:{click:e.addSelector}},[e._v(" Add ")])],1)},D_=[],E_=n(37982);let Z_=class extends s.ZP{constructor(){super(...arguments),this.newSelectorName=""}addSelector(){this.newSelectorName&&((0,V.pipe)((0,E_.DQ)(this.newSelectorName),(0,H.fold)((e=>e.forEach(ye.Z.log.message)),(e=>(0,E_.Fr)(e)))),this.newSelectorName="")}};Z_=(0,r.gn)([(0,l.wA)({components:{NiceButton:io.Z,TextInput:cs.Z}})],Z_);const T_=Z_,A_=T_;var B_=(0,Y.Z)(A_,I_,D_,!1,null,null,null);const O_=B_.exports;var R_=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vscroll-wrap vscroll-scroll"},[t("RevisionsList",{attrs:{"is-loading":e.isLoading,revisions:e.revisionUiItems},on:{revisionSelected:e.onRevisionSelected}})],1)},M_=[];async function F_(){return(0,lo.zG)(await(0,E.D)({action:"breakdance_retrieve_selectors_revisions",decoder:BP}),(0,H.mapLeft)((()=>null)),co.i$)}let N_=class extends s.ZP{constructor(){super(...arguments),this.isLoading=!1,this.remoteRevisions=null,this.selectedIndex=null,this.unsubscribeFromStore=()=>{},this.currentUnsavedRevision=null}async beforeMount(){await this.loadRemoteRevisions(),ft.cr.selectorsHasUnsavedChangesPresent&&(this.recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch(),-1===this.selectedIndex&&this.setCurrentStoreDataAsCurrentUnsavedRevisionIfDataIsNotEqualToMostRecentRemoteRevisionData()),this.recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch(),this.unsubscribeFromStore=this.$store.subscribe((e=>{const t=(0,e_.q$)(e);"global"===t&&"global/restoreSelectorsRevision"!==e.type&&"global/setGlobalSettings"!==e.type&&("global/setSelectors"===e.type?this.currentUnsavedRevision=null:this.setCurrentStoreDataAsCurrentUnsavedRevisionIfDataIsNotEqualToMostRecentRemoteRevisionData(),this.recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch())}))}beforeDestroy(){this.unsubscribeFromStore()}async loadRemoteRevisions(){this.isLoading=!0,this.remoteRevisions=await F_(),this.selectedIndex=null,this.isLoading=!1}recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch(){this.selectedIndex=this.findSelectedIndexBasedOnStoreDataMatch()}findSelectedIndexBasedOnStoreDataMatch(){const e=(0,Me.Z)(ft.cr.cssSelectors);return this.revisions.findIndex((t=>Ur()(t.selectors,e)))}setCurrentStoreDataAsCurrentUnsavedRevisionIfDataIsNotEqualToMostRecentRemoteRevisionData(){this.isCurrentStoreDataTheSameAsTheMostRecentRemoteRevisionData()?this.currentUnsavedRevision=null:this.setCurrentUnsavedRevisionFromCurrentStoreData()}isCurrentStoreDataTheSameAsTheMostRecentRemoteRevisionData(){if(null===this.remoteRevisions)return!1;const[e]=this.remoteRevisions,t=(0,Me.Z)(ft.cr.cssSelectors);return Ur()(e.selectors,t)}setCurrentUnsavedRevisionFromCurrentStoreData(){this.currentUnsavedRevision={id:-1,author:!1,date:"Current",selectors:(0,Me.Z)(ft.cr.cssSelectors)}}get revisionUiItems(){return this.revisions.map(((e,t)=>({isSelected:t===this.selectedIndex,revisionData:e})))}get revisions(){const e=this.remoteRevisions??[];return this.currentUnsavedRevision?[this.currentUnsavedRevision,...e]:e}onRevisionSelected(e,t){this.selectedIndex=t,oe.n.transaction((()=>ft.cr.restoreSelectorsRevision(e.revisionData)),"Restore Selectors From Revision")}get unsavedChangesPresent(){return ft.kD.unsavedChangesPresent}async updateRevisionsAfterSaving(){ft.kD.unsavedChangesPresent||(await this.loadRemoteRevisions(),this.currentUnsavedRevision=null,this.recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch())}};(0,r.gn)([(0,l.RL)("unsavedChangesPresent")],N_.prototype,"updateRevisionsAfterSaving",null),N_=(0,r.gn)([(0,l.wA)({components:{RevisionsList:JP}})],N_);const L_=N_,$_=L_;var W_=(0,Y.Z)($_,R_,M_,!1,null,null,null);const V_=W_.exports;var H_=n(21122);let U_=class extends s.ZP{get viewMode(){return c.kD.panelState.selectorsPanelPanelActiveViewMode}toggleViewMode(){c.kD.setPanelState({...c.kD.panelState,selectorsPanelPanelActiveViewMode:"controls"===this.viewMode?"history":"controls"})}get selectors(){return c.cr.cssSelectors}updateSelectors(e){c.cr.setSelectors((0,Me.Z)(e))}};U_=(0,r.gn)([(0,l.wA)({components:{FreeModeAlertForSelectors:H_.Z,AlertBox:Pc.Z,SelectorsPanelHistoryViewMode:V_,PanelHeaderButton:uP,BrowseModeToggle:vP,draggable:Vd(),SelectorsList:x_.Z,AddSelector:O_,PanelHeader:jb}})],U_);const z_=U_,G_=z_;var K_=(0,Y.Z)(G_,w_,k_,!1,null,null,null);const j_=K_.exports;var q_=n(43432),X_=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.activeSelector?t("div",{staticClass:"vscroll-wrap vscroll-scroll"},[t("PanelHeader",{attrs:{backInsteadOfClose:!0},on:{close:e.close}},[e._v(" Editing Selector ")]),t("FreeModeAlertForSelectors",{staticClass:"ma-4"}),t("div",{staticClass:"breakdance-selector-titlebar"},[t("div",{staticClass:"flex-grow-1 mr-2"},[e.editingClassOrClassHover?[t("div",{staticClass:"d-flex flex-row align-center flex-wrap mr-2"},[t("transition",{attrs:{name:"blink-on-change"}},[t("div",{key:e.activeSelector.name,staticClass:"selector-titlebar-classname mr-1 ml-n1"},[e._v(" "+e._s(e.activeSelector.name.replace(":hover",""))+" ")])]),t(os.Z,{class:["editing-class-hover-hover-button-always",e.editingClassHover?"editing-class-hover-hover-button-active":"editing-class-hover-hover-button"],attrs:{"x-small":"",depressed:""},on:{click:e.toggleHover}},[e._v(" :hover ")])],1)]:[t("div",{staticClass:"d-flex flex-column"},[t("TextInput",{attrs:{value:e.activeSelector.name},on:{input:e.tryToRenameActiveSelector}})],1)]],2),e.selectorIsHighlightable?t(q_.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t("IconButton",e._g({attrs:{icon:"SearchFileIcon",size:"16",active:e.highlight},on:{click:e.toggleHighlight}},n))]}}],null,!1,3251607670)},[t("span",[e._v(e._s(e.howManyOnPage)+" on page")])]):e._e(),t("IconButton",{attrs:{icon:"TrashIcon",size:"16"},on:{click:e.deleteSelector}})],1),""!==e.searchBoxState.query&&e.hasSearchParameters&&!e.noSearchResults?t("div",{staticClass:"control-tree-search-term control-tree-search-term-selector"},[t("span",[e._v('Search results for "'+e._s(e.searchBoxState.query)+'"')]),t("div",{staticClass:"control-tree-search-clear",on:{click:e.clearQuery}},[t("Icon",{attrs:{icon:"CloseIcon",size:"14"}})],1)]):e._e(),e.editingClassOrClassHover||!e.attemptingToRename||e.isAttemptedRenameValid?e._e():t("div",{staticClass:"edit-selector-invalid-name-error"},[e._v(" invalid selector name ")]),t("div",{staticClass:"edit-selector-border"}),e.hasSearchParameters?e._e():t("div",{staticClass:"vscroll-scroll"},[t("ControlsTree",{attrs:{controls:e.controls,path:"properties"}})],1),e.hasSearchParameters&&!e.noSearchResults?t("div",{staticClass:"vscroll-scroll"},[t("ControlsTree",{attrs:{controls:e.controlsFilteredBySearchParams,path:"properties",linear:!0}})],1):e.hasSearchParameters&&e.noSearchResults?t(qv.Z,{staticClass:"d-flex justify-center align-center flex-column",attrs:{height:"100%"}},[t("SearchBoxEmptyState",{attrs:{label:"selectors"},on:{input:e.clearQuery}})],1):e._e(),t("SearchBox",{attrs:{value:e.searchBoxState,location:"selector"},on:{input:e.updateSearchBoxState}})],1):e._e()},Y_=[],Q_=n(5598);let J_=class extends s.ZP{constructor(){super(...arguments),this.searchBoxState={modifiedOnly:!1,query:""},this.highlight=!1,this.attemptingToRename=!1,this.editingClassControlsTreeContext=nS}updateSearchBoxState(e){this.searchBoxState=e}clearQuery(){this.updateSearchBoxState({modifiedOnly:!1,query:""})}get hasSearchParameters(){return this.searchBoxState.modifiedOnly||this.searchBoxState.query}get controlsFilteredBySearchParams(){return Xf(this.controls,this.searchBoxState.modifiedOnly,this.searchBoxState.query,this.editingClassControlsTreeContext,"properties")}get noSearchResults(){return 0===Qf(this.controlsFilteredBySearchParams,0)}get howManyOnPage(){if(!c.kD.activeSelector)return 0;const e=this.editingClassHover?c.kD.activeSelector.name.replace(":hover",""):c.kD.activeSelector.name,t=window.Breakdance.canvas.document.querySelectorAll(e);return t.length}get editingClass(){return!!this.activeSelector&&"class"===this.activeSelector.type}get editingClassHover(){return!!this.activeSelector&&(!!this.activeSelector.name.endsWith(":hover")&&!!tS(this.activeSelector.name.replace(":hover","")))}get editingClassOrClassHover(){return this.editingClass||this.editingClassHover}get selectorIsHighlightable(){return!!c.kD.activeSelectorName&&!(c.kD.activeSelectorName.includes(":")&&!this.editingClassHover)}get controls(){return c.PK.selectorControls}get activeSelector(){return c.kD.activeSelector}toggleHighlight(){this.highlight?this.clearHighlight():this.setHighlight()}beforeDestroy(){this.clearHighlight()}setHighlight(){if(this.highlight=!0,!c.kD.activeSelector)return;const e=this.editingClassHover?c.kD.activeSelector.name.replace(":hover",""):c.kD.activeSelector.name;(0,Q_.BL)((0,De.RY)(),"breakdance-selector-highlight",`${e} {\n          outline: 10px dashed rgba(255,200,0) !important;\n          outline-offset: -5px;\n          animation-duration: 2000ms;\n          animation-iteration-count: infinite;\n        }\n        `)}clearHighlight(){this.highlight=!1,(0,Q_.BL)((0,De.RY)(),"breakdance-selector-highlight","")}deleteSelector(){if(!this.activeSelector)return;const e=this.activeSelector,t=c.cr.cssSelectors.findIndex((t=>t.name===e.name));if(-1!==t){const e=(0,Me.Z)(c.cr.cssSelectors);e.splice(t,1),c.cr.setSelectors(e)}}close(){this.backToAllSelectors()}get activeElementTitle(){return!!c.kD.activeElement&&c.PK.element(c.kD.activeElement.data.type).name}openElementProperties(){(0,G.oM)("elementproperties")}backToAllSelectors(){c.kD.setActiveSelectorName(null)}get isAttemptedRenameValid(){return!this.attemptingToRename||(0,E_._S)(this.attemptingToRename)}tryToRenameActiveSelector(e){if(!e)return;if(this.attemptingToRename=e,this.clearHighlight(),!(0,E_._S)(e))return;const t=c.cr.cssSelectors.findIndex((e=>e===this.activeSelector)),n=(0,Me.Z)(c.cr.cssSelectors);n[t]&&(n[t].name=e,c.cr.setSelectors(n),c.kD.setActiveSelectorName(e),this.attemptingToRename=!1)}toggleHover(){if(c.kD.activeSelector)if(this.editingClass){const e=c.kD.activeSelectorName+":hover",t=()=>c.cr.cssSelectors.find((t=>t.name===e));let n=t();if(n||((0,E_.Fr)({name:e,type:"custom",properties:{}}),n=t()),!n)return void ye.Z.log.message(`Unable to create or find a :hover selector for ${c.kD.activeSelectorName}`);c.kD.setActiveSelectorName(n.name),(0,G.oM)("selectors")}else if(this.editingClassHover&&this.activeSelector){const e=tS(this.activeSelector.name.replace(":hover",""));e&&(c.kD.setActiveSelectorName(e.name),(0,G.oM)("selectors"))}}};(0,r.gn)([(0,l.DF)("context")],J_.prototype,"editingClassControlsTreeContext",void 0),J_=(0,r.gn)([(0,l.wA)({components:{FreeModeAlertForSelectors:H_.Z,AlertBox:Pc.Z,ControlsTree:ef["default"],SearchBox:gf,IconButton:Ua.Z,PanelHeader:jb,TextInput:cs.Z,SearchBoxEmptyState:oy,Icon:K.Z}})],J_);const eS=J_,tS=e=>c.cr.cssSelectors.find((t=>t.name===e)),nS={dynamicProperty:()=>!1,getControls:()=>c.PK.selectorControls,getControlValue:e=>b()(c.kD.activeSelector,`${e}`,void 0),setControlValue(e,t,n,s){c.kD.activeSelector&&c.cr.throttledSelectorPropertyChange((0,Pu.V5)({selector:c.kD.activeSelector,path:e,value:t},{control:n,controlsTree:this.getControls(e)||[]},s))},setAccordionState:(e,t)=>{const n=c.kD.activeSelector&&c.kD.activeSelector.name;n&&(0,Jf.MK)(n,e,t)},getAccordionState:e=>{const t=c.kD.activeSelector&&c.kD.activeSelector.name;return!!t&&(0,Jf.jv)(t,e)}},sS=eS;var aS=(0,Y.Z)(sS,X_,Y_,!1,null,null,null);const iS=aS.exports;let oS=class extends s.ZP{constructor(){super(...arguments),this.isLoadingData=!1,this.isStoringData=!1}get activeSelector(){return c.kD.activeSelector}async beforeMount(){c.kD.panelState.shouldLoadFreshDataIntoStoreOnceOpened.selectors?(c.kD.setPanelState({...c.kD.panelState,selectorsPanelPanelActiveViewMode:"controls"}),await this.load()):c.kD.setShouldPanelLoadFreshDataIntoStoreOnceOpened("selectors",!0)}async load(){this.isLoadingData=!0;const e=await(0,E_.c3)();return this.isLoadingData=!1,e}async save(){this.isStoringData=!0;const e=await(0,E_.zF)();return this.isStoringData=!1,e}requestPanelClosingConfirmation(){c.kD.requestClosingConfirmation({subject:"selectors",confirmationDefinition:{title:"You have unsaved changes to your Selectors.",text:"Would you like to save or discard these changes?",type:"info"}})}get unsavedChangesPresent(){return c.cr.selectorsHasUnsavedChangesPresent}handleUnsavedChangesPresentChange(e){e?this.requestPanelClosingConfirmation():c.kD.noClosingConfirmationIsNeededFor("selectors")}get confirmationChosenOption(){return c.kD.closingConfirmations.selectors?.chosenOption}async handleConfirmationChosenOptionChange(e){"discard"===e?(c.kD.setClosingConfirmationIsDiscarding({subject:"globalSettings",isDiscarding:!0}),await this.load()?this.close():this.requestPanelClosingConfirmation()):"save"===e&&(c.kD.setClosingConfirmationIsSaving({subject:"globalSettings",isSaving:!0}),await this.save()?this.close():this.requestPanelClosingConfirmation())}get isLoading(){return this.isLoadingData||this.isStoringData}close(){(0,G.TO)("selectors")}};(0,r.gn)([(0,l.RL)("unsavedChangesPresent",{immediate:!0})],oS.prototype,"handleUnsavedChangesPresentChange",null),(0,r.gn)([(0,l.RL)("confirmationChosenOption",{immediate:!0})],oS.prototype,"handleConfirmationChosenOptionChange",null),oS=(0,r.gn)([(0,l.wA)({components:{EditSelector:iS,ManageSelectors:j_}})],oS);const rS=oS,lS=rS;var cS=(0,Y.Z)(lS,S_,C_,!1,null,null,null);const dS=cS.exports;var uS=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-structure-panel vscroll-wrap vscroll-scroll"},[t("PanelHeader",{ref:"panelHeader",on:{close:e.close},scopedSlots:e._u([{key:"right",fn:function(){return[e.rootElement.children.length?t("button",{staticClass:"breakdance-structure-panel__toggle-button mr-2",on:{click:e.toggleNodes}},[1===e.toggleStage?[e._v("Expand")]:e._e(),[0,2].includes(e.toggleStage)?[e._v("Collapse")]:e._e()],2):e._e(),t("StructurePanelDropdownMenu")]},proxy:!0}])},[e._v(" Structure ")]),t("div",{class:e.classList,on:{contextmenu:e.onContextMenu}},[t("div",{staticClass:"structure-node root-node",attrs:{"data-element-id":e.ROOT_ELEMENT_ID},on:{mousedown:e.dragStart}},[t("div",{staticClass:"structure-node-title-wrapper"},[t("div",{staticClass:"structure-node-title",staticStyle:{"margin-left":"-16px",display:"none"}},[e._v(" Root Node ")]),t("div",{staticClass:"top-half",attrs:{"data-element-id":e.ROOT_ELEMENT_ID,"data-depth":-1}}),t("div",{staticClass:"bottom-half",attrs:{"data-element-id":e.ROOT_ELEMENT_ID,"data-depth":-1}})]),e.rootElement.children.length>0?t("ChildStructureNodes",{attrs:{nodes:e.rootElement.children,depth:0}}):t("div",{staticClass:"structure-panel-empty-state"},[t("h5",[e._v("No Elements")]),t("p",[e._v("Add an element to your page and it will show up here.")]),t("StandardButton",{staticClass:"open-elements-toolbar-button ml-auto mr-auto",attrs:{size:"22",testId:"open-elements-toolbar-button"},on:{click:e.toggleAdd}},[e._v(" Add ")])],1)],1)]),t("StructureContextMenu")],1)},pS=[];function hS(){return{overTopHalf:!1,overBottomHalf:!1,overIndex:!1,overNodeId:!1,overNodeParentId:!1,overSelf:!1,overNestDeeper:!1,overNestShallower:!1}}function mS(e,t){const n=document.elementsFromPoint(e,t).filter(gS("structure-node")).sort(vS).reverse().pop();if(n){const e=n.dataset.elementId;if(e)return parseInt(e)}return!1}const gS=e=>t=>!!t.classList.contains(e),vS=(e,t)=>parseInt(e.dataset.depth)>parseInt(t.dataset.depth)?-1:parseInt(t.dataset.depth)>parseInt(e.dataset.depth)?1:0,fS=(e,t)=>{const n=e.filter(gS(t));return n.length>0&&parseInt(n[0].dataset.elementId)},yS=(e,t,n)=>{const s=document.elementsFromPoint(e,t),a=hS();if(a.overNestDeeper=fS(s,"nest-deeper"),a.overNestShallower=fS(s,"nest-shallower"),a.overTopHalf=fS(s,"top-half"),a.overBottomHalf=fS(s,"bottom-half"),a.overSelf=!1!==fS(s,"breakdance--currently-dragging"),a.overBottomHalf?a.overNodeId=a.overBottomHalf:a.overTopHalf&&(a.overNodeId=a.overTopHalf),a.overNodeId){const e=(0,N.Lf)(n,a.overNodeId),t=(0,N.E)(n,a.overNodeId);!1!==t&&!1!==e&&(a.overIndex=t,a.overNodeParentId=e.id)}return a};var bS=n(98992);function PS(e,t,n){let s=!1;const a=(0,N.DY)(t,n);if(!a)return!1;if(e.overSelf){if(e.overSelf){if(ES(n,t)&&e.overNestShallower===n){let e=!1;s=kS(n,t),s&&(e=s.parentId);while(e){if((0,Ze.xJ)(t,a,e))break;if(!s||(0,Ze.xJ)(t,a,s.parentId)||!ES(e,t))break;{const n=(0,N.Lf)(t,e);e=!!n&&n.id,e&&(s=wS(e,t))}}}ZS(n,t)&&e.overNestDeeper===n&&(s=xS(n,t))}}else if(e.overTopHalf){s=_S(e.overTopHalf,t),n===IS(e.overTopHalf,t)&&(s=!1);const i=IS(e.overTopHalf,t);s&&i&&(0,Ze.xJ)(t,a,i)&&(s=wS(i,t))}else if(e.overBottomHalf&&(0===DS(e.overBottomHalf,t)||(0,bS.nx)(e.overBottomHalf))){if(s=SS(e.overBottomHalf,t),s&&(0,Ze.xJ)(t,a,s.parentId)){const n=(0,N.E)(t,a.id),i=(0,N.Lf)(t,a.id);!1!==n&&!1!==i&&s&&e.overIndex&&s.parentId===i.id&&n<e.overIndex&&(s.index=s.index-1)}else s&&!(0,Ze.xJ)(t,a,s.parentId)&&(s=CS(e.overBottomHalf));if(s&&!(0,Ze.xJ)(t,a,s.parentId)&&ES(e.overBottomHalf,t)){let n=!1;if(e.overBottomHalf){const s=(0,N.Lf)(t,e.overBottomHalf);n=!!s&&s.id}while(n){s=SS(n,t);const e=(0,N.Lf)(t,a.id);if(s&&e&&s.parentId===e.id){const e=(0,N.E)(t,a.id),i=(0,N.E)(t,n);e<i&&(s.index=s.index-1)}if(s)if(!(0,Ze.xJ)(t,a,s.parentId)&&ES(n,t)){const e=(0,N.Lf)(t,n);n=!!e&&e.id}else n=!1;else n=!1}}}else e.overBottomHalf&&DS(e.overBottomHalf,t)>0&&(s=CS(e.overBottomHalf));if(!s)return!1;const i=(0,Ze.xJ)(t,a,s.parentId);return!!i&&s}function _S(e,t){const n=(0,N.E)(t,e),s=(0,N.Lf)(t,e);return!1!==n&&!1!==s&&{parentId:s.id,index:n}}function SS(e,t){const n=(0,N.E)(t,e),s=(0,N.Lf)(t,e);return!1!==n&&!1!==s&&{parentId:s.id,index:n+1}}function CS(e){return{parentId:e,index:0}}function wS(e,t){const n=DS(e,t);return!1!==n&&{parentId:e,index:n}}function kS(e,t){const n=(0,N.Lf)(t,e);return!!n&&SS(n.id,t)}function xS(e,t){const n=IS(e,t);return!!n&&wS(n,t)}function IS(e,t){const n=(0,N.E)(t,e),s=(0,N.Lf)(t,e);return!1!==n&&!1!==s&&(!(n<1)&&s.children[n-1].id)}function DS(e,t){const n=(0,N.DY)(t,e);return!!n&&n.children.length}function ES(e,t){const n=(0,N.E)(t,e),s=(0,N.Lf)(t,e);if(!1===n||!1===s)return;const a=DS(s.id,t);return a?1===a||n===a-1:void 0}function ZS(e,t){const n=(0,N.E)(t,e);if(!1!==n)return n>0}var TS=n(58897),AS=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Dropdown",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t("IconButton",e._g({staticClass:"breakdance-panel-header-left-of-close-button",attrs:{size:"16",small:"",icon:"EllipsisStrokeIcon"}},n))]}}])},[t(La.Z,[t($a.Z,{attrs:{dense:""},on:{click:e.copy}},[t(Wa.V9,[e._v(" Copy All Elements ")])],1),t($a.Z,{attrs:{dense:""},on:{click:e.paste}},[t(Wa.V9,[e._v(" Paste Elements ")])],1)],1)],1)},BS=[];let OS=class extends l.w3{copy(){(0,$n.wp)(c.Hb.document.tree.root.children.map((e=>e.id)))}async paste(){const e=(await(0,$n.ij)())?.element;Array.isArray(e)?(0,tb.AE)(e,"pasting"):e?(0,$n.HR)(null,e):alert("nothing to paste")}};OS=(0,r.gn)([(0,l.wA)({components:{IconButton:Ua.Z,Dropdown:za.Z}})],OS);const RS=OS,MS=RS;var FS=(0,Y.Z)(MS,AS,BS,!1,null,null,null);const NS=FS.exports;let LS=class extends l.w3{constructor(){super(...arguments),this.mouseDragStatus={...hS()},this.forceGrabbingCursor=!1,this.firstDragMovement=!0,this.draggedNodeId=!1,this.lastSubmittedDrag=!1,this.didMoveElement=!1,this.unsubscribeFromActivateElementMutation=null,this.easyEvent=new Se.hF,this.delayedExpandNodeTimeout=null,this.toggleStage=2}close(){(0,G.TO)("structure")}get classList(){return{"structure-panel-content-wrapper":!0,"is-draggable":this.hasPermission,"drag-in-progress":c.kD.isCanvasElementBeingDragged,"force-grabbing-cursor":this.forceGrabbingCursor}}beforeCreate(){this.$options.components.ChildStructureNodes=n(62080).Z}get activeElementId(){return c.kD.activeElementId}mounted(){this.expandToShowActiveElementWatch(),this.unsubscribeFromActivateElementMutation=this.$store.subscribe((({type:e})=>{"ui/activateElementMutation"===e&&this.expandToShowActiveElementWatch()}))}expandToShowActiveElementWatch(){if(this.activeElementId){const e=(0,bS.FM)(c.Hb.document.tree,this.activeElementId);e&&c.kD.setStructurePanelNodesExpandedState({...c.kD.structurePanelNodesExpandedState,...e}),this.$nextTick((()=>{if(!this.$el||!this.panelHeader)return;const e=this.$el.querySelector(`[data-element-id="${this.activeElementId}"] .structure-node-title-wrapper`);e&&(0,G.aQ)(this.$el,this.panelHeader.$el,e)}))}}get rootElement(){return c.Hb.document.tree.root}get hasPermission(){return c.kD.hasFullAccess}onContextMenu(e){if(!this.hasPermission)return;e.preventDefault(),e.stopPropagation();const t=mS(e.clientX,e.clientY)||void 0;t&&c.kD.activateElement(t),c.kD.setOnStructurePanelRightClickMenuState({elementId:t,position:{x:e.clientX,y:e.clientY}})}dragStart(e){if(0!==e.button)return;if(!this.hasPermission)return;const t=mS(e.clientX,e.clientY);t&&(c.kD.activateElement(t),this.draggedNodeId=t,this.easyEvent.on("mousemove",this.dragging),this.easyEvent.on("mouseup",this.dragEnd),this.forceGrabbingCursor=!0,this.didMoveElement=!1,oe.n.startTransaction())}async dragging(e){if((0,Se.Pm)(e))return;if(e.preventDefault(),e.stopPropagation(),!this.draggedNodeId)return;let t=null;if(this.firstDragMovement){const e=(0,N.E)(c.Hb.document.tree,this.draggedNodeId),n=(0,N.Lf)(c.Hb.document.tree,this.draggedNodeId);if(!1===e||!1===n)return;c.kD.setCanvasElementDraggedId(this.draggedNodeId),t={draggedElementId:this.draggedNodeId,droppedOnElementId:n.id,index:e},this.firstDragMovement=!1}else{this.mouseDragStatus=yS(e.clientX,e.clientY,c.Hb.document.tree),this.ifMouseIsOverACollapsedNodeForLongEnoughThenWeShouldExpandIt(e);const n=PS(this.mouseDragStatus,c.Hb.document.tree,this.draggedNodeId);n&&(t={draggedElementId:this.draggedNodeId,droppedOnElementId:n.parentId,index:n.index})}if(t){const e=(0,N.DY)(c.Hb.document.tree,t.droppedOnElementId),n=(0,bS.sF)(t.droppedOnElementId)||0===e?.children.length;if(n){const e=await c.Hb.moveElement({...t,wrapWithTransaction:!1});this.didMoveElement=this.didMoveElement||e,c.kD.setStructurePanelNodesExpandedState({...c.kD.structurePanelNodesExpandedState,[t.droppedOnElementId.toString()]:!0}),this.lastSubmittedDrag=t}}}async dragEnd(e){if(e.preventDefault(),e.stopPropagation(),this.easyEvent.removeAll(),this.lastSubmittedDrag){const e=await c.Hb.moveElement({...this.lastSubmittedDrag,wrapWithTransaction:!1});this.didMoveElement=this.didMoveElement||e}if(!1!==this.draggedNodeId&&this.didMoveElement){const e=(0,N.DY)(c.Hb.document.tree,this.draggedNodeId);oe.n.endTransaction(`Move ${(0,Ae.JC)(e?.data.type)}`)}else oe.n.cancelTransactionIfItIsStillInProgress();c.kD.endCanvasElementDrag(),this.lastSubmittedDrag=!1,this.mouseDragStatus={...hS()},this.firstDragMovement=!0,this.draggedNodeId=!1,this.forceGrabbingCursor=!1,this.didMoveElement=!1}ifMouseIsOverACollapsedNodeForLongEnoughThenWeShouldExpandIt(e){this.mouseDragStatus.overNodeId&&this.delayedExpandNode(this.mouseDragStatus.overNodeId,e)}delayedExpandNode(e,t){this.delayedExpandNodeTimeout&&clearTimeout(this.delayedExpandNodeTimeout),this.delayedExpandNodeTimeout=setTimeout((()=>{if(this.delayedExpandNodeTimeout=null,e===this.mouseDragStatus.overNodeId){const n=(0,Me.Z)(c.kD.structurePanelNodesExpandedState);n[e]=!0,c.kD.setStructurePanelNodesExpandedState(n),this.dragging(t)}}),500)}get ROOT_ELEMENT_ID(){return N.uB}collapseAllNodes(){c.kD.setStructurePanelNodesExpandedState((0,bS.u3)(c.Hb.document.tree,!1))}expandAllNodes(){c.kD.setStructurePanelNodesExpandedState((0,bS.u3)(c.Hb.document.tree,!0))}collapseAllNodesExcept(e){const t=(0,bS.u3)(c.Hb.document.tree,!1),n=(0,bS.FM)(c.Hb.document.tree,e);c.kD.setStructurePanelNodesExpandedState({...t,...n})}toggleNodes(){if(0===this.toggleStage)this.toggleStage=1,this.collapseAllNodes();else if(1===this.toggleStage)this.expandAllNodes(),this.toggleStage=2;else if(c.kD.activeElementId){const e=(0,N.Lf)(c.Hb.document.tree,c.kD.activeElementId);if(e&&e?.id===N.uB)return this.collapseAllNodes(),void(this.toggleStage=1);this.collapseAllNodesExcept(c.kD.activeElementId),this.toggleStage=0}else this.collapseAllNodes(),this.toggleStage=1}beforeDestroy(){this.unsubscribeFromActivateElementMutation&&this.unsubscribeFromActivateElementMutation()}toggleAdd(){(0,G._y)("add")}};(0,r.gn)([(0,l.Rl)()],LS.prototype,"panelHeader",void 0),LS=(0,r.gn)([(0,l.wA)({components:{StructureContextMenu:TS.Z,PanelHeader:jb,StandardButton:ea,IconButton:Ua.Z,Dropdown:za.Z,StructurePanelDropdownMenu:NS}})],LS);const $S=LS,WS=$S;var VS=(0,Y.Z)(WS,uS,pS,!1,null,null,null);const HS=VS.exports;var US=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-history-and-revisions-panel vscroll-wrap vscroll-scroll"},[t("PanelHeader",{ref:"panelHeader",staticClass:"breakdance-history-and-revisions-panel__header",on:{close:e.close}},[e._v(" History ")]),e.disableRevisions?e._e():t("TabsRow",[t("Tab",{attrs:{value:e.tab,id:"history"},on:{input:function(t){e.tab=t}}},[e._v(" History ")]),t("Tab",{attrs:{value:e.tab,id:"revisions"},on:{input:function(t){e.tab=t}}},[e._v(" Revisions ")])],1),"history"===e.tab?t("History",{on:{scrollToActiveEl:e.scrollToActiveElement}}):"revisions"===e.tab?t("Revisions"):e._e()],1)},zS=[],GS=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"snapshots-list"},e._l(e.snapshots,(function(n,s){return t("SnapshotItem",{key:e.snapshots.length-1-s,attrs:{"data-snapshot-index":e.snapshots.length-1-s,snapshot:n,selected:e.currentIndex===e.snapshots.length-1-s},on:{click:function(t){return e.onSnapshotSelected(e.snapshots.length-1-s)}}})})),1)},KS=[],jS=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"snapshots-item",class:{"snapshots-item--selected":e.selected},attrs:{"data-test-id":"snapshots-item"},on:{click:function(t){return e.$emit("click",e.snapshot)}}},[t("span",{staticClass:"snapshots-item__title"},[e._v(e._s(e.snapshot.title))])])},qS=[];let XS=class extends l.w3{};(0,r.gn)([(0,l.fI)({default(){return{}}})],XS.prototype,"snapshot",void 0),(0,r.gn)([(0,l.fI)({default:!1})],XS.prototype,"selected",void 0),XS=(0,r.gn)([(0,l.wA)({})],XS);const YS=XS,QS=YS;var JS=(0,Y.Z)(QS,jS,qS,!1,null,null,null);const eC=JS.exports;let tC=class extends l.w3{onSnapshotSelected(e){ft.GD.setCurrentSnapshotIndex(e),oe.n.setStoreFromCurrentSnapshot()}close(){(0,G.TO)("history")}get snapshots(){return[...ft.GD.snapshots].reverse()}get currentIndex(){return ft.GD.index}handleCurrentIndexChange(){this.scrollToActiveSnapshotElement()}scrollToActiveSnapshotElement(){l.w3.nextTick((()=>{const e=this.$el.querySelector(`[data-snapshot-index="${this.currentIndex}"]`);e&&this.$emit("scrollToActiveEl",e)}))}};(0,r.gn)([(0,l.RL)("currentIndex",{immediate:!0})],tC.prototype,"handleCurrentIndexChange",null),tC=(0,r.gn)([(0,l.wA)({components:{PanelHeader:jb,SnapshotItem:eC}})],tC);const nC=tC,sC=nC;var aC=(0,Y.Z)(sC,GS,KS,!1,null,null,null);const iC=aC.exports;var oC=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"revisions-panel"},[t("RevisionsList",{attrs:{"is-loading":e.loading,revisions:e.revisionUiItems,"revisions-not-supported-message":e.revisionsNotSupportedMessage},on:{revisionSelected:e.onRevisionSelected}})],1)},rC=[];let lC=class extends s.ZP{constructor(){super(...arguments),this.loading=!1,this.selectedRevisionIndex=0,this.unsubscribeFromStore=()=>{},this.revisionsNotSupportedMessage=null}get revisionUiItems(){return this.revisions.map(((e,t)=>({revisionData:e,isSelected:this.selectedRevisionIndex===t})))}async mounted(){this.loading=!0;const e=await this.fetchRemoteRevisions();this.loading=!1,e&&(ft.kD.setRevisionsData({revisions:e,currentUnsavedRevision:this.getCurrentUnsavedRevision(e)}),this.setActiveRevision(),this.unsubscribeFromStore=this.$store.subscribe((e=>{const t=(0,e_.q$)(e);"document"===t&&"document/loadRevision"!==e.type&&(ft.kD.setRevisionsData({revisions:ft.kD.revisionsData.revisions,currentUnsavedRevision:this.getCurrentUnsavedRevision(ft.kD.revisionsData.revisions)}),this.setActiveRevision())})))}destroyed(){this.unsubscribeFromStore()}get revisions(){return ft.kD.revisionsData.currentUnsavedRevision?[ft.kD.revisionsData.currentUnsavedRevision,...ft.kD.revisionsData.revisions]:ft.kD.revisionsData.revisions}get currentTree(){return(0,N.n$)(ft.Hb.document.tree)}get unsavedChangesPresent(){return ft.kD.unsavedChangesPresent}async updateRevisionsAfterSaving(){if(!ft.kD.unsavedChangesPresent){const e=await this.fetchRemoteRevisions();e&&ft.kD.setRevisionsData({revisions:e,currentUnsavedRevision:null}),this.setActiveRevision()}}setActiveRevision(){const e=this.getActiveRevisionIndex(ft.kD.revisionsData.revisions);-1!==e?(this.selectedRevisionIndex=ft.kD.revisionsData.currentUnsavedRevision?e+1:e,this.scrollToActiveRevision("smooth")):(this.selectedRevisionIndex=0,this.scrollToActiveRevision("auto"))}getActiveRevisionIndex(e){return e.findIndex((e=>(0,N.sm)(e.tree,this.currentTree)))}getCurrentUnsavedRevision(e){const t=this.getActiveRevisionIndex(e);if(-1===t)return{id:-1,author:!1,date:"Current",tree:this.currentTree};const n=0===t&&ft.kD.revisionsData.currentUnsavedRevision&&(0,N.sm)(e[t].tree,ft.kD.revisionsData.currentUnsavedRevision?.tree);return n?null:ft.kD.revisionsData.currentUnsavedRevision}async fetchRemoteRevisions(){return(0,V.pipe)(await(0,E.D)({action:"breakdance_retrieve_revisions",decoder:NP,dataToPost:{id:ft.Hb.document.documentMeta.id}}),(0,H.fold)((e=>((0,Ta.UE)(e),null)),(e=>"unsupported"in e?(this.revisionsNotSupportedMessage=e.unsupported,null):e.revisions.map((e=>{const t=(0,Ky.Z)(e.tree,jy.f2),n=(0,V.pipe)(t,(0,H.fold)((()=>null),(e=>e)));return{...e,tree:n}})).filter((e=>null!==e.tree)))))}onRevisionSelected(e,t){const n=this.revisions.find((t=>t.id===e.revisionData.id));n&&(this.selectedRevisionIndex=t,ft.kD.activateElement(null),ft.kD.setInterfaceState("loading"),ft.Hb.loadRevision(n),ft.kD.setInterfaceState("normal"))}scrollToActiveRevision(e){(0,et.n)((()=>document.querySelector(".revisions-panel .revisions-item--selected")?.scrollIntoView({behavior:e,block:"center"})))}};(0,r.gn)([(0,l.RL)("unsavedChangesPresent")],lC.prototype,"updateRevisionsAfterSaving",null),lC=(0,r.gn)([(0,l.wA)({components:{RevisionsList:JP,RevisionItem:jP,PanelHeader:jb}})],lC);const cC=lC,dC=cC;var uC=(0,Y.Z)(dC,oC,rC,!1,null,null,null);const pC=uC.exports;let hC=class extends s.ZP{constructor(){super(...arguments),this.tab="history"}close(){(0,G.TO)("history")}scrollToActiveElement(e){(0,G.aQ)(this.$el,this.panelHeader.$el,e)}};(0,r.gn)([(0,l.fI)({default:!1})],hC.prototype,"disableRevisions",void 0),(0,r.gn)([(0,l.Rl)()],hC.prototype,"panelHeader",void 0),hC=(0,r.gn)([(0,l.wA)({components:{Revisions:pC,History:iC,PanelHeader:jb,TabsRow:Bf,Tab:xf}})],hC);const mC=hC,gC=mC;var vC=(0,Y.Z)(gC,US,zS,!1,null,null,null);const fC=vC.exports;var yC=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:e.classList},[e._t("default")],2)},bC=[];let PC=class extends s.ZP{get classList(){return"closed"===this.panelState?{}:{width288:!0,"vscroll-wrap":!0,borderOnLeft:"right"===this.position,borderOnRight:"left"===this.position,"breakdance-app-left-area":"left"===this.position,"breakdance-app-right-area":"right"===this.position}}};(0,r.gn)([(0,l.fI)()],PC.prototype,"position",void 0),(0,r.gn)([(0,l.fI)()],PC.prototype,"panelState",void 0),PC=(0,r.gn)([l.wA],PC);const _C=PC,SC=_C;var CC=(0,Y.Z)(SC,yC,bC,!1,null,null,null);const wC=CC.exports;var kC=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vscroll-wrap vscroll-scroll presets-panel"},[e.isLoadingData?t(fP.Z,{attrs:{row:"","justify-center":"","align-center":""}},[t(Mr.Z,{attrs:{size:"64",indeterminate:"",color:"var(--gray300)"}})],1):e.activePreset?t("EditPreset",{on:{close:e.close}}):e.activePreset?e._e():t("ManagePresets",{on:{close:e.close}})],1)},xC=[],IC=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vscroll-wrap vscroll-scroll"},[t("PanelHeader",{on:{close:function(t){return e.$emit("close")}}},[e._v(" Design Presets "),e.isHistoryEnabled?t("BrowseModeToggle",{attrs:{"panel-to-open":"presets"}}):e._e(),e.isHistoryEnabled?t("PanelHeaderButton",{attrs:{enabled:"history"===e.viewMode},on:{click:e.toggleViewMode}},[e._v(" history ")]):e._e()],1),t("FreeModeAlertForPresets",{staticClass:"ma-4"}),"controls"===e.viewMode?[e.isAddPresetEnabled?t("AddPreset"):e._e(),e.isImportExportEnabled?t("ImportExportPresets"):e._e(),t("div",{staticClass:"vscroll-wrap vscroll-scroll breakdance-manage-presets"},[t("PresetsList",{attrs:{presets:e.presets,searchable:!0},on:{input:e.updatePresets}})],1)]:"history"===e.viewMode?[t("PresetsPanelHistoryViewMode")]:e._e()],2)},DC=[],EC=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vscroll-wrap vscroll-scroll"},[t("div",{staticClass:"vscroll-scroll presets-list"},[e.presets.length?e._l(e.presetsByElement,(function(n,s){return t("div",{key:s,staticClass:"presets-list-group breakdance-repeater-draggable"},[t("h4",{staticClass:"presets-list-title"},[e._v(e._s(e.getElementName(s)))]),e._l(n,(function(n,s){return t("div",{key:s,staticClass:"breakdance-repeater-item"},[t("RepeaterItemAccordion",{attrs:{"can-edit":!0,"can-drag":!1,"no-duplicate":!0},on:{"title:click":function(t){return e.editPreset(n)},editItem:function(t){return e.editPreset(n)},deleteItem:function(t){return e.deletePreset(n)}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"breakdance-repeater-item-title-text"},[e._v(" "+e._s(n.name)+" ")])]},proxy:!0}],null,!0)})],1)}))],2)})):t("p",{staticClass:"manage-presets"},[e._v("You don't have any presets yet.")])],2),e.searchable?t("div",{staticClass:"properties-panel-search-box-wrap properties-panel-search-box-wrap-presets"},[t("Icon",{staticClass:"properties-panel-search-icon",attrs:{icon:"SearchIcon",size:"13"}}),t("TextInput",{attrs:{placeholder:"Search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1):e._e()])},ZC=[],TC=n(14049);let AC=class extends s.ZP{constructor(){super(...arguments),this.dragOptions={animation:200,handle:".breakdance-repeater-item-handler",filter:".breakdance-repeater-item--ignore-drag",ghostClass:"breakdance-repeater-item--ghost",forceFallback:!0},this.searchString=""}get presetsByElement(){const e={};return this.filteredPresets.forEach((t=>{e[t.availableForType]||(e[t.availableForType]=[]),e[t.availableForType].push(t)})),Object.keys(e).forEach((t=>{e[t].sort(((e,t)=>e.name<t.name?-1:t.name<e.name?1:0))})),e}get filteredPresets(){if(this.searchString){const e=this.searchString?.toLowerCase()??"";return this.presets.filter((t=>t.name.toLowerCase().includes(e)))}return this.presets}deletePreset(e){const t=this.presets.findIndex((t=>t.id===e.id)),n=(0,Me.Z)(this.presets);n.splice(t,1),this.$emit("input",n)}handleDrag(e){this.$emit("input",(0,Me.Z)(e))}editPreset(e){c.kD.setActivePresetId(e.id),(0,G.oM)("presets")}getElementName(e){return c.PK.element(e).name}};(0,r.gn)([(0,l.fI)()],AC.prototype,"searchable",void 0),(0,r.gn)([(0,l.fI)()],AC.prototype,"presets",void 0),AC=(0,r.gn)([(0,l.wA)({components:{RepeaterItemAccordion:TC.Z,draggable:Vd(),TextInput:cs.Z,Icon:K.Z}})],AC);const BC=AC,OC=BC;var RC=(0,Y.Z)(OC,EC,ZC,!1,null,null,null);const MC=RC.exports;var FC=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"add-preset"},[t("TextInput",{attrs:{placeholder:"Name"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addPreset.apply(null,arguments)}},model:{value:e.newPresetName,callback:function(t){e.newPresetName=t},expression:"newPresetName"}}),t(Td.Z,{staticClass:"breakdance-dense-select breakdance-white-gray-outlined-input",attrs:{placeholder:"Element",items:e.elementsItems,dense:"",solo:"",flat:"",filled:"","hide-details":"","no-data-text":"No presets available"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addPreset.apply(null,arguments)}},model:{value:e.newPresetType,callback:function(t){e.newPresetType=t},expression:"newPresetType"}}),t("NiceButton",{attrs:{size:"small"},on:{click:e.addPreset}},[e._v(" Add ")])],1)},NC=[];let LC=class extends s.ZP{constructor(){super(...arguments),this.newPresetName="",this.newPresetType=""}get elements(){return c.PK.elements}get elementsItems(){return Object.values(this.elements).filter((e=>void 0!==e)).filter((e=>!(0,Ee.GF)(e.addPanelRules,e.settings))).map((e=>({text:e.name,value:e?.slug})))}addPreset(){if(!this.newPresetName||!this.newPresetType)return;const e=(0,$e.Lr)(this.newPresetName,this.newPresetType);(0,$e.xk)(e),this.newPresetName="",this.newPresetType=""}};LC=(0,r.gn)([(0,l.wA)({components:{DropdownInput:Di.Z,NiceButton:io.Z,TextInput:cs.Z}})],LC);const $C=LC,WC=$C;var VC=(0,Y.Z)(WC,FC,NC,!1,null,null,null);const HC=VC.exports;var UC=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vscroll-wrap vscroll-scroll"},[t("RevisionsList",{attrs:{"is-loading":e.isLoading,revisions:e.revisionUiItems},on:{revisionSelected:e.onRevisionSelected}})],1)},zC=[];async function GC(){return(0,lo.zG)(await(0,E.D)({action:"breakdance_retrieve_presets_revisions",decoder:RP}),(0,H.mapLeft)((()=>null)),co.i$)}let KC=class extends s.ZP{constructor(){super(...arguments),this.isLoading=!1,this.remoteRevisions=null,this.selectedIndex=null,this.unsubscribeFromStore=()=>{},this.currentUnsavedRevision=null}async beforeMount(){await this.loadRemoteRevisions(),ft.cr.presetsHasUnsavedChangesPresent&&(this.recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch(),-1===this.selectedIndex&&this.setCurrentStoreDataAsCurrentUnsavedRevisionIfDataIsNotEqualToMostRecentRemoteRevisionData()),this.recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch(),this.unsubscribeFromStore=this.$store.subscribe((e=>{const t=(0,e_.q$)(e);"global"===t&&"global/restorePresetsRevision"!==e.type&&"global/setGlobalSettings"!==e.type&&("global/setPresets"===e.type?this.currentUnsavedRevision=null:this.setCurrentStoreDataAsCurrentUnsavedRevisionIfDataIsNotEqualToMostRecentRemoteRevisionData(),this.recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch())}))}beforeDestroy(){this.unsubscribeFromStore()}async loadRemoteRevisions(){this.isLoading=!0,this.remoteRevisions=await GC(),this.selectedIndex=null,this.isLoading=!1}recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch(){this.selectedIndex=this.findSelectedIndexBasedOnStoreDataMatch()}findSelectedIndexBasedOnStoreDataMatch(){const e=(0,Me.Z)(ft.cr.presets);return this.revisions.findIndex((t=>Ur()(t.presets,e)))}setCurrentStoreDataAsCurrentUnsavedRevisionIfDataIsNotEqualToMostRecentRemoteRevisionData(){this.isCurrentStoreDataTheSameAsTheMostRecentRemoteRevisionData()?this.currentUnsavedRevision=null:this.setCurrentUnsavedRevisionFromCurrentStoreData()}isCurrentStoreDataTheSameAsTheMostRecentRemoteRevisionData(){if(null===this.remoteRevisions)return!1;const[e]=this.remoteRevisions,t=(0,Me.Z)(ft.cr.presets);return Ur()(e.presets,t)}setCurrentUnsavedRevisionFromCurrentStoreData(){this.currentUnsavedRevision={id:-1,author:!1,date:"Current",presets:(0,Me.Z)(ft.cr.presets)}}get revisionUiItems(){return this.revisions.map(((e,t)=>({isSelected:t===this.selectedIndex,revisionData:e})))}get revisions(){const e=this.remoteRevisions??[];return this.currentUnsavedRevision?[this.currentUnsavedRevision,...e]:e}onRevisionSelected(e,t){this.selectedIndex=t,oe.n.transaction((()=>ft.cr.restorePresetsRevision(e.revisionData)),"Restore Presets From Revision")}get unsavedChangesPresent(){return ft.kD.unsavedChangesPresent}async updateRevisionsAfterSaving(){ft.kD.unsavedChangesPresent||(await this.loadRemoteRevisions(),this.currentUnsavedRevision=null,this.recalculateSelectedIndexBasedOnStoreAndRevisionDataObjectsMatch())}};(0,r.gn)([(0,l.RL)("unsavedChangesPresent")],KC.prototype,"updateRevisionsAfterSaving",null),KC=(0,r.gn)([(0,l.wA)({components:{RevisionsList:JP}})],KC);const jC=KC,qC=jC;var XC=(0,Y.Z)(qC,UC,zC,!1,null,null,null);const YC=XC.exports;var QC=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"manage-presets-import-export"},[t("div",[t("NiceButton",{attrs:{"left-icon":"UploadFileIcon",expanded:!0},on:{click:e.openFileUpload}},[e._v(" Import ")]),t("input",{ref:"fileUpload",staticStyle:{display:"none"},attrs:{type:"file",accept:"application/json"},on:{change:e.importPresets}})],1),t("NiceButton",{attrs:{"left-icon":"DownloadFileIcon",small:"",expanded:!0},on:{click:e.exportPresets}},[e._v(" Export ")])],1)},JC=[],ew=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ProOnlyAlertBox",{attrs:{options:{feature:"presets",content:"Design Presets are only available in Breakdance Pro. They won't work on the frontend."}}})},tw=[];let nw=class extends s.ZP{};nw=(0,r.gn)([(0,l.wA)({components:{ProOnlyAlertBox:_c.Z}})],nw);const sw=nw,aw=sw;var iw=(0,Y.Z)(aw,ew,tw,!1,null,null,null);const ow=iw.exports;let rw=class extends s.ZP{openFileUpload(){const e=this.$refs.fileUpload;e.click()}importPresets(e){const t=e.target,n=t.files&&t.files[0];if(!n)return;const s=new FileReader;s.onload=()=>{const e=s.result,t=(0,V.pipe)((0,Ky.Z)(e,Zb.p),(0,H.fold)((()=>null),(e=>e)));if(null===t)return void ye.Z.log.errorMessage("The file you selected is not a valid Breakdance Presets file.");if(!t.length)return void ye.Z.log.message("The file you selected does not contain any presets.");const n=t.map((e=>e.id)),a=c.cr.presets.filter((e=>!n.includes(e.id)));c.cr.setPresets([...a,...t])},s.readAsText(n),e.target.value=""}exportPresets(){const e=`breakdance-presets-${(0,ds.z)()}.json`,t=(0,V.pipe)((0,F.J)(c.cr.presets),(0,H.fold)((()=>""),(e=>e))),n=document.createElement("a"),s=new Blob([t],{type:"application/json"});n.setAttribute("href",window.URL.createObjectURL(s)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}};rw=(0,r.gn)([(0,l.wA)({components:{FreeModeAlertForPresets:ow,AlertBox:Pc.Z,PresetsPanelHistoryViewMode:YC,PanelHeaderButton:uP,BrowseModeToggle:vP,draggable:Vd(),PresetsList:MC,AddPreset:HC,PanelHeader:jb,IconButton:Ua.Z,NiceButton:io.Z}})],rw);const lw=rw,cw=lw;var dw=(0,Y.Z)(cw,QC,JC,!1,null,null,null);const uw=dw.exports;let pw=class extends s.ZP{get viewMode(){return c.kD.panelState.presetsPanelActiveViewMode}toggleViewMode(){c.kD.setPanelState({...c.kD.panelState,presetsPanelActiveViewMode:"controls"===this.viewMode?"history":"controls"})}get presets(){return c.cr.presets}get isHistoryEnabled(){return c.PK.isExperimentEnabled("design-presets-history")}get isAddPresetEnabled(){return c.PK.isExperimentEnabled("design-presets-add")}get isImportExportEnabled(){return c.PK.isExperimentEnabled("design-presets-import-export")}updatePresets(e){c.cr.setPresets((0,Me.Z)(e))}};pw=(0,r.gn)([(0,l.wA)({components:{FreeModeAlertForPresets:ow,AlertBox:Pc.Z,PresetsPanelHistoryViewMode:YC,PanelHeaderButton:uP,BrowseModeToggle:vP,draggable:Vd(),PresetsList:MC,AddPreset:HC,PanelHeader:jb,ImportExportPresets:uw}})],pw);const hw=pw,mw=hw;var gw=(0,Y.Z)(mw,IC,DC,!1,null,null,null);const vw=gw.exports;var fw=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.activePreset?t("div",{staticClass:"vscroll-wrap vscroll-scroll"},[t("PanelHeader",{attrs:{backInsteadOfClose:!0},on:{close:e.close}},[e._v(" Editing Preset ")]),t("div",{staticClass:"breakdance-preset-content"},[t("div",{staticClass:"breakdance-preset-element-name truncate"},[t("span",{staticClass:"breakdance-preset-element-name__icon"},[e.element?.uiIcon?t("ElementIcon",{attrs:{icon:e.element.uiIcon,size:"14"}}):e._e()],1),t("span",{staticClass:"truncate"},[e._v(e._s(e.element?.name))])]),t("div",{staticClass:"breakdance-preset-titlebar"},[t("div",{staticClass:"flex-grow-1 mr-2"},[t("div",{staticClass:"d-flex flex-column"},[t("TextInput",{attrs:{value:e.activePreset.name,placeholder:"Preset Name"},on:{input:e.tryToRenameActivePreset}})],1)]),t("IconButton",{attrs:{icon:"TrashIcon",size:"16"},on:{click:e.deletePreset}})],1)]),""!==e.searchBoxState.query&&e.hasSearchParameters&&!e.noSearchResults?t("div",{staticClass:"control-tree-search-term control-tree-search-term-preset"},[t("span",[e._v('Search results for "'+e._s(e.searchBoxState.query)+'"')]),t("div",{staticClass:"control-tree-search-clear",on:{click:e.clearQuery}},[t("Icon",{attrs:{icon:"CloseIcon",size:"14"}})],1)]):e._e(),t("div",{staticClass:"edit-preset-border"}),e.isActiveElementRelatedToActivePreset||e.skipTypeCheckForActiveElement?[e.hasSearchParameters?e._e():t("div",{staticClass:"vscroll-scroll"},[t("ControlsTree",{attrs:{controls:e.controls,path:"design"}})],1),e.hasSearchParameters&&!e.noSearchResults?t("div",{staticClass:"vscroll-scroll"},[t("ControlsTree",{attrs:{controls:e.controlsFilteredBySearchParams,path:"design",linear:!0}})],1):e.hasSearchParameters&&e.noSearchResults?t(qv.Z,{staticClass:"d-flex justify-center align-center flex-column",attrs:{height:"100%"}},[t("SearchBoxEmptyState",{attrs:{label:"presets"},on:{input:e.clearQuery}})],1):e._e(),t("SearchBox",{attrs:{value:e.searchBoxState,location:"preset"},on:{input:e.updateSearchBoxState}})]:t("div",{staticClass:"breakdance-preset-content"},[t("AlertBox",{staticClass:"mb-4",attrs:{options:{style:"info",content:`To edit, please select ${e.determineArticle(e.element?.name)}\n      <b>${e.element?.name}</b> with this preset applied to it`}}}),t("NiceButton",{attrs:{expanded:!0},on:{click:function(t){e.skipTypeCheckForActiveElement=!0}}},[e._v(" Edit Anyway ")])],1)],2):e._e()},yw=[];let bw=class extends s.ZP{constructor(){super(...arguments),this.searchBoxState={modifiedOnly:!1,query:""},this.skipTypeCheckForActiveElement=!1,this.attemptingToRename=!1,this.editingPresetControlsTreeContext={dynamicProperty:()=>!1,getControls:()=>this.controls,getControlValue:e=>b()(c.kD.activePreset,`${e}`,void 0),setControlValue(e,t,n,s){if(!c.kD.activePreset)return;const a=(0,N.aL)(c.Hb.document.tree,c.kD.activePreset.id);c.cr.throttledPresetPropertyChange((0,Pu._Z)({preset:c.kD.activePreset,path:e,value:t},{control:n,controlsTree:this.getControls(e)||[]},s)),a.forEach((n=>{ge.w.run.onPropertyChange({elementId:n.id,path:e,value:(0,Me.Z)(t),previousValue:"",transactionKey:void 0})}))},setAccordionState:(e,t)=>{const n=c.kD.activePreset&&c.kD.activePreset.id;n&&(0,Jf.Q)(n,e,t)},getAccordionState:e=>{const t=c.kD.activePreset&&c.kD.activePreset.id;return!!t&&(0,Jf.WX)(t,e)}}}updateSearchBoxState(e){this.searchBoxState=e}clearQuery(){this.updateSearchBoxState({modifiedOnly:!1,query:""})}get isActiveElementRelatedToActivePreset(){return this.activeElement&&this.activeElement.data.type===this.activePreset?.availableForType&&this.activeElement.data.properties.meta.preset===this.activePreset?.id}get activeElement(){return c.kD.activeElement}get activeElementId(){return c.kD.activeElementId}get hasSearchParameters(){return this.searchBoxState.modifiedOnly||this.searchBoxState.query}get controlsFilteredBySearchParams(){return Xf(this.controls,this.searchBoxState.modifiedOnly,this.searchBoxState.query,this.editingPresetControlsTreeContext,"design")}get noSearchResults(){return 0===Qf(this.controlsFilteredBySearchParams,0)}get element(){return this.activePreset?c.PK.element(this.activePreset.availableForType):null}get controls(){const e=this.element?.controls.designSections??[];return(0,$e.mJ)(e)}get activePreset(){return c.kD.activePreset}deletePreset(){if(!this.activePreset)return;const e=this.activePreset,t=c.cr.presets.findIndex((t=>t.id===e.id));if(-1!==t){const e=(0,Me.Z)(c.cr.presets);e.splice(t,1),c.cr.setPresets(e)}}close(){this.backToAllPresets()}backToAllPresets(){c.kD.setActivePresetId(null)}tryToRenameActivePreset(e){if(!e)return;this.attemptingToRename=e;const t=c.cr.presets.findIndex((e=>e.id===this.activePreset?.id)),n=(0,Me.Z)(c.cr.presets);n[t]&&(n[t].name=e,c.cr.setPresets(n),this.attemptingToRename=!1)}determineArticle(e){if(!e)return"a";const t=e[0].toLowerCase();return["a","e","i","o","u"].includes(t)?"an":"a"}};(0,r.gn)([(0,l.DF)("context")],bw.prototype,"editingPresetControlsTreeContext",void 0),bw=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,ElementIcon:og.Z,FreeModeAlertForPresets:ow,AlertBox:Pc.Z,ControlsTree:ef["default"],SearchBox:gf,IconButton:Ua.Z,PanelHeader:jb,TextInput:cs.Z,SearchBoxEmptyState:oy,NiceButton:io.Z}})],bw);const Pw=bw,_w=Pw;var Sw=(0,Y.Z)(_w,fw,yw,!1,null,null,null);const Cw=Sw.exports;let ww=class extends s.ZP{constructor(){super(...arguments),this.isLoadingData=!1,this.isStoringData=!1}get activePreset(){return c.kD.activePreset}async beforeMount(){c.kD.panelState.shouldLoadFreshDataIntoStoreOnceOpened.presets?(c.kD.setPanelState({...c.kD.panelState,presetsPanelActiveViewMode:"controls"}),await this.load()):c.kD.setShouldPanelLoadFreshDataIntoStoreOnceOpened("presets",!0)}async load(){this.isLoadingData=!0;const e=await(0,$e.wQ)();return this.isLoadingData=!1,e}async save(){this.isStoringData=!0;const e=await(0,$e.rE)();return this.isStoringData=!1,e}requestPanelClosingConfirmation(){c.kD.requestClosingConfirmation({subject:"presets",confirmationDefinition:{title:"You have unsaved changes to your Presets.",text:"Would you like to save or discard these changes?",type:"info"}})}get unsavedChangesPresent(){return c.cr.presetsHasUnsavedChangesPresent}handleUnsavedChangesPresentChange(e){e?this.requestPanelClosingConfirmation():c.kD.noClosingConfirmationIsNeededFor("presets")}get confirmationChosenOption(){return c.kD.closingConfirmations.presets?.chosenOption}async handleConfirmationChosenOptionChange(e){"discard"===e?(c.kD.setClosingConfirmationIsDiscarding({subject:"globalSettings",isDiscarding:!0}),await this.load()?this.close():this.requestPanelClosingConfirmation()):"save"===e&&(c.kD.setClosingConfirmationIsSaving({subject:"globalSettings",isSaving:!0}),await this.save()?this.close():this.requestPanelClosingConfirmation())}get isLoading(){return this.isLoadingData||this.isStoringData}close(){(0,G.TO)("presets")}};(0,r.gn)([(0,l.RL)("unsavedChangesPresent",{immediate:!0})],ww.prototype,"handleUnsavedChangesPresentChange",null),(0,r.gn)([(0,l.RL)("confirmationChosenOption",{immediate:!0})],ww.prototype,"handleConfirmationChosenOptionChange",null),ww=(0,r.gn)([(0,l.wA)({components:{EditPreset:Cw,ManagePresets:vw}})],ww);const kw=ww,xw=kw;var Iw=(0,Y.Z)(xw,kC,xC,!1,null,null,null);const Dw=Iw.exports;var Ew=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ai-panel vscroll-wrap vscroll-scroll"},[t("PanelHeader",{ref:"panelHeader",on:{close:e.close}},[e._v(" AI Assistant ")]),e.canViewTabs?t("TabsRow",{staticClass:"ai-panel-tabs",attrs:{"fixed-tabs":""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("Tab",{attrs:{value:e.tab,id:"write"},on:{input:function(t){e.tab=t}}},[t("Icon",{attrs:{icon:"PenIcon",size:"18"}})],1),t("Tab",{attrs:{value:e.tab,id:"settings"},on:{input:function(t){e.tab=t}}},[t("Icon",{attrs:{icon:"GearIcon",size:"18"}})],1)],1):e._e(),t("div",{staticClass:"ai-panel-content vscroll-wrap vscroll-scroll"},[e.loadingSettings?t(Mr.Z,{staticClass:"d-block mx-auto my-4",attrs:{size:"48",indeterminate:"",color:"var(--indigo600)"}}):e.pluginNotInstalled?t("AIPluginNotInstalled"):e.settings.isApiKeySet?[e.element||"write"!==e.tab?"write"===e.tab?t("AIWriter",{attrs:{title:`Rewrite ${e.friendlyName}`,prompt:e.prompt,loading:e.rewriteInProgress,disabled:e.isAIDisabled,"element-name":e.elementConfig?.name,"locked-fields":e.lockedFields},on:{rewrite:e.rewrite,updatePrompt:e.updatePrompt}}):"images"===e.tab?t("AIUnsplash"):"settings"===e.tab?t("AISettings",{attrs:{settings:e.settings.prompt,loading:e.savingSettings},on:{input:e.updateSettings}}):e._e():t("AINoElementSelected")]:t("AINoApiKey")],2)],1)},Zw=[],Tw=n(48549),Aw=n(76491),Bw=n(45335),Ow=n(74959),Rw=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ai-unsplash"},[t("h3",{staticClass:"ai-panel__title"},[e._v("Unsplash")]),t("div",[t("p",[e._v(" Fetch images from Unsplash to use in your content, they are automatically added to Image elements in the selected section. ")]),t("label",[e._v("Keywords")]),t("div",{staticClass:"ai-images-search-input"},[t("TextInput",{on:{blur:e.talkToUnsplash},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),t(os.Z,{staticClass:"ai-images-preview-btn",attrs:{small:"",text:"",color:"primary"},on:{click:e.talkToUnsplash}},[e._v(" Preview ")])],1),t("div",{staticClass:"my-2"},[t("label",[e._v("Orientation")]),t("ButtonBarInput",{staticClass:"mb-3",attrs:{items:[{text:"Landscape",value:"landscape"},{text:"Portrait",value:"portrait"},{text:"Squarish",value:"squarish"}]},model:{value:e.orientation,callback:function(t){e.orientation=t},expression:"orientation"}})],1),t(Ad.Z,{attrs:{label:"Fill Empty Images Only","hide-details":""},model:{value:e.fillEmptyImagesOnly,callback:function(t){e.fillEmptyImagesOnly=t},expression:"fillEmptyImagesOnly"}}),e.images.length?t("div",{staticClass:"mt-2"},[t("h4",[e._v("Preview")]),t("div",{staticClass:"ai-images-preview"},e._l(e.images,(function(e){return t("a",{key:e.id,attrs:{href:e.urls.full,target:"_blank"}},[t("img",{attrs:{src:e.urls.small,alt:""}})])})),0)]):e._e(),t("NiceButton",{staticClass:"ai-button",attrs:{loading:e.loading,size:"huge",disabled:0===e.imagesFields.length},on:{click:e.fetchImages}},[0===e.imagesFields.length?[e._v(" No images found in this section ")]:[e._v(" Import Images From Unsplash ")]],2)],1)])},Mw=[];let Fw=class extends l.w3{constructor(){super(...arguments),this.images=[],this.loading=!1,this.fillEmptyImagesOnly=!1,this.keywords="",this.orientation=null}get imagesFields(){return c.kD.activeElement?(0,Bw.ho)(c.kD.activeElement):[]}async fetchImages(){if(this.keywords)if(0!==this.imagesFields.length){if(this.loading=!0,await this.talkToUnsplash(),!this.images.length)return ye.Z.log.errorMessage("No images found. Please try again with different keywords."),void(this.loading=!1);(0,Bw.hh)(this.imagesFields,this.images,this.fillEmptyImagesOnly),this.loading=!1,this.keywords="",this.images=[]}else ye.Z.log.errorMessage("No images to complete. Please add an image to the section first.");else ye.Z.log.errorMessage("Please enter a keyword to fetch images.")}async talkToUnsplash(){this.images=await(0,Aw.Ig)([this.keywords],this.imagesFields.length,this.orientation)}};Fw=(0,r.gn)([(0,l.wA)({components:{TextInput:cs.Z,NumberInput:Ei.Z,IconButton:Ua.Z,NiceButton:io.Z,ButtonBarInput:Zc.Z,TopBarSection:ii}})],Fw);const Nw=Fw,Lw=Nw;var $w=(0,Y.Z)(Lw,Rw,Mw,!1,null,null,null);const Ww=$w.exports;var Vw=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ai-business"},[t("h3",{staticClass:"ai-panel__title"},[e._v("Tell us about your business")]),t("div",{staticClass:"ai-business-form mb-5"},[t("div",{staticClass:"ai-business-field"},[t("label",{staticClass:"ai-business-field__label",attrs:{for:""}},[e._v("Business Name")]),t("TextInput",{attrs:{value:e.settings.businessName},on:{input:function(t){return e.updateField("businessName",t)}}})],1),t("div",{staticClass:"ai-business-field"},[t("label",{staticClass:"ai-business-field__label",attrs:{for:""}},[e._v(" Qualifiers (optional) ")]),t("TextInput",{attrs:{value:e.settings.qualifiers},on:{input:function(t){return e.updateField("qualifiers",t)}}})],1),t("div",{staticClass:"ai-business-field"},[t("label",{staticClass:"ai-business-field__label",attrs:{for:""}},[e._v(" Describe Your Business ")]),t("TextInput",{attrs:{value:e.settings.businessDescription,multiline:!0},on:{input:function(t){return e.updateField("businessDescription",t)}}})],1),t("div",{staticClass:"ai-business-field"},[t("label",{staticClass:"ai-business-field__label",attrs:{for:""}},[e._v(" Macros ")]),t("Repeater",{attrs:{value:e.settings.presets,control:{options:{repeaterOptions:{titleTemplate:"{name}",defaultTitle:"Macro",buttonName:"Add Macro"}}}},on:{input:e.updatePresets},scopedSlots:e._u([{key:"default",fn:function({index:n}){return[t("div",{staticClass:"ai-business-field"},[t("label",{staticClass:"ai-business-field__label",attrs:{for:""}},[e._v(" Name ")]),t("TextInput",{on:{input:function(t){return e.updatePreset("name",t,n)}},model:{value:e.settings.presets[n].name,callback:function(t){e.$set(e.settings.presets[n],"name",t)},expression:"settings.presets[repeaterIndex].name"}})],1),t("div",{staticClass:"ai-business-field"},[t("label",{staticClass:"ai-business-field__label",attrs:{for:""}},[e._v(" Prompt ")]),t("TextInput",{attrs:{placeholder:"Example:\nShorten the following text",multiline:!0,"variable-options":{enabled:!0},"variable-items":[{text:"Field's Value",value:"text"}]},on:{input:function(t){return e.updatePreset("prompt",t,n)}},model:{value:e.settings.presets[n].prompt,callback:function(t){e.$set(e.settings.presets[n],"prompt",t)},expression:"settings.presets[repeaterIndex].prompt"}})],1)]}}])})],1)])])},Hw=[];let Uw=class extends l.w3{updateField(e,t){const n=(0,Me.Z)(this.settings);n[e]=t,this.$emit("input",n)}updatePresets(e){const t=(0,Me.Z)(this.settings);t.presets=e,this.$emit("input",t)}updatePreset(e,t,n){const s=(0,Me.Z)(this.settings),a=s.presets||[];a[n][e]=t,s.presets=a,this.$emit("input",s)}};(0,r.gn)([(0,l.fI)()],Uw.prototype,"settings",void 0),(0,r.gn)([(0,l.fI)()],Uw.prototype,"loading",void 0),Uw=(0,r.gn)([(0,l.wA)({components:{TextInput:cs.Z,NumberInput:Ei.Z,IconButton:Ua.Z,TopBarSection:ii,NiceButton:io.Z,DropdownInput:Di.Z,Repeater:Ud.Z}})],Uw);const zw=Uw,Gw=zw;var Kw=(0,Y.Z)(Gw,Vw,Hw,!1,null,null,null);const jw=Kw.exports;var qw=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ai-writer"},[t("h3",{staticClass:"ai-panel__title"},[e._v(e._s(e.title))]),t("div",{staticClass:"ai-writer-field mb-4"},[t("label",{staticClass:"ai-writer-field__label",attrs:{for:""}},[e._v("Describe This Section")]),t("TextInput",{attrs:{value:e.prompt.sectionDescription,multiline:!0},on:{input:function(t){return e.updateField("sectionDescription",t)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?t.ctrlKey||t.shiftKey||t.altKey?null:(t.preventDefault(),e.$emit("rewrite")):null}}}),t(q_.Z,{attrs:{"max-width":"236",bottom:""},scopedSlots:e._u([{key:"activator",fn:function({attrs:n,on:s}){return[t("span",{staticClass:"d-block text-right"},[t("span",e._g(e._b({staticClass:"ai-writer-tooltip"},"span",n,!1),s),[t("Icon",{attrs:{icon:"CircleInfoIcon",size:"14"}}),e._v(" See examples ")],1)])]}}])},[t("div",[e._v(" Examples: "),t("ul",[t("li",[e._v("Homepage hero section")]),t("li",[e._v("Call to action section on services page")]),t("li",[e._v("Section showing testimonials")])])])])],1),t("div",{staticClass:"ai-writer-field mb-4"},[t("label",{staticClass:"ai-writer-field__label",attrs:{for:""}},[e._v("Qualifiers (optional)")]),t("TextInput",{attrs:{value:e.prompt.qualifiers},on:{input:function(t){return e.updateField("qualifiers",t)}}}),t(q_.Z,{attrs:{"max-width":"236",bottom:""},scopedSlots:e._u([{key:"activator",fn:function({attrs:n,on:s}){return[t("span",{staticClass:"d-block text-right"},[t("span",e._g(e._b({staticClass:"ai-writer-tooltip"},"span",n,!1),s),[t("Icon",{attrs:{icon:"CircleInfoIcon",size:"14"}}),e._v(" See examples ")],1)])]}}])},[t("div",[e._v(" Examples: "),t("ul",[t("li",[e._v("Be funny")]),t("li",[e._v("Write it like snoop dogg")]),t("li",[e._v("Be very concise")]),t("li",[e._v("Be verbose")]),t("li",[e._v("Mention apples, oranges, and bananas")])])])])],1),t("div",{staticClass:"ai-writer-field ai-writer-field--row"},[t("label",{staticClass:"ai-writer-field__label",attrs:{for:""}},[e._v("Temperature")]),t("NumberInput",{attrs:{value:e.prompt.temperature,"range-options":{min:0,max:1,step:.1}},on:{input:e.updateTemperature}})],1),e.disabled?t("AlertBox",{staticClass:"mt-5",attrs:{options:{style:"warning",content:`The <b>${e.elementName}</b> element does not support AI writing.`}}}):e._e(),e.lockedFields.length?t("div",{staticClass:"ai-writer-warning"},[t("div",{on:{click:function(t){e.viewWarning=!e.viewWarning}}},[t("AlertBox",{attrs:{options:{style:"warning",content:"Some fields are locked and will not be updated by AI. <b class='cursor-pointer'>Click to view.</b>"}}})],1),e.viewWarning?t("ul",{staticClass:"ai-write-warning-list"},e._l(e.lockedFields,(function(n){return t("li",[e._v(" "+e._s(n.field.label)+" Field in "),t("b",{staticClass:"cursor-pointer",on:{click:function(t){return e.activateElement(n.nodeId)}}},[e._v(" "+e._s(e.isActiveElement(n.nodeId)?"This":n.nodeName)+" Element ")])])})),0):e._e()]):e._e(),t("NiceButton",{staticClass:"ai-writer-button",attrs:{loading:e.loading,leftIcon:"SparklesIcon",color:"indigo",size:"huge",disabled:e.disabled},on:{click:function(t){return e.$emit("rewrite")}}},[e._v(" Rewrite With AI ")])],1)},Xw=[];let Yw=class extends l.w3{constructor(){super(...arguments),this.viewWarning=!1}updateField(e,t){const n=(0,Me.Z)(this.prompt);se()(n,e,t),this.$emit("updatePrompt",n)}updateTemperature(e){const t=Math.max(0,Math.min(1,e));this.updateField("temperature",t)}isActiveElement(e){return ft.kD.activeElementId===e}activateElement(e){ft.kD.activateElement(e)}};(0,r.gn)([(0,l.fI)()],Yw.prototype,"prompt",void 0),(0,r.gn)([(0,l.fI)()],Yw.prototype,"title",void 0),(0,r.gn)([(0,l.fI)({default:!1})],Yw.prototype,"loading",void 0),(0,r.gn)([(0,l.fI)({default:!1})],Yw.prototype,"disabled",void 0),(0,r.gn)([(0,l.fI)({default:""})],Yw.prototype,"elementName",void 0),(0,r.gn)([(0,l.fI)({default(){return[]}})],Yw.prototype,"lockedFields",void 0),Yw=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,TextInput:cs.Z,NiceButton:io.Z,NumberInput:Ei.Z,ToggleInput:Tc.Z,AlertBox:Pc.Z}})],Yw);const Qw=Yw,Jw=Qw;var ek=(0,Y.Z)(Jw,qw,Xw,!1,null,null,null);const tk=ek.exports;var nk=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ai-panel-message"},[t("Icon",{staticClass:"ai-panel-message__icon",attrs:{size:"60",icon:"RobotIcon"}}),t(ki.EB,{staticClass:"ai-panel-message__title"},[e._v(" Welcome to Breakdance AI ")]),t("p",[e._v("Rewrite your content with the power of AI.")]),t("p",[e._v(" Breakdance uses OpenAI's GPT-3.5 to rewrite your content. Please install the Breakdance AI plugin to use this feature. ")]),t("NiceButton",{attrs:{size:"huge",color:"indigo"},on:{click:e.goToPluginPage}},[e._v(" Install now ")])],1)},sk=[];let ak=class extends l.w3{goToPluginPage(){window.open("https://breakdance.com/ai","_blank")}};ak=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,NiceButton:io.Z}})],ak);const ik=ak,ok=ik;var rk=(0,Y.Z)(ok,nk,sk,!1,null,null,null);const lk=rk.exports;var ck=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ai-panel-message"},[t("Icon",{staticClass:"ai-panel-message__icon",attrs:{size:"60",icon:"RobotIcon"}}),t(ki.EB,{staticClass:"ai-panel-message__title"},[e._v(" Set up your OpenAI API key ")]),t("p",[e._v(" You need to set up your OpenAI API key before you can use the AI assistant. ")]),e._m(0)],1)},dk=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[t("a",{attrs:{href:"wp-admin/admin.php?page=breakdance_settings&tab=ai",target:"_blank",rel:"noopener noreferrer"}},[e._v(" Click here to set up your API key ")])])}];let uk=class extends l.w3{};uk=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,NiceButton:io.Z}})],uk);const pk=uk,hk=pk;var mk=(0,Y.Z)(hk,ck,dk,!1,null,null,null);const gk=mk.exports;var vk=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ai-panel-message"},[t("Icon",{staticClass:"ai-panel-message__icon",attrs:{size:"60",icon:"RobotIcon"}}),t(ki.EB,{staticClass:"ai-panel-message__title"},[e._v(" Select an element first ")]),t("p",[e._v("Click on an element in the editor to rewrite it with AI.")])],1)},fk=[];let yk=class extends l.w3{};yk=(0,r.gn)([(0,l.wA)({components:{Icon:K.Z,NiceButton:io.Z}})],yk);const bk=yk,Pk=bk;var _k=(0,Y.Z)(Pk,vk,fk,!1,null,null,null);const Sk=_k.exports;let Ck=class extends l.w3{constructor(){super(...arguments),this.rewriteInProgress=!1,this.savingSettings=!1,this.loadingSettings=!1,this.pluginNotInstalled=!1,this.activeTab="content",this.tab="write",this.maxRetries=3,this.retries=0}get element(){return c.kD.activeElement||null}get elementConfig(){return this.element?c.PK.element(this.element.data.type):null}get isAIDisabled(){return this.elementConfig?.settings&&this.elementConfig?.settings.disableAI}get settings(){return c.cr.aiSettings}get prompt(){return{sectionDescription:this.elementDescription,qualifiers:this.qualifiers,temperature:this.temperature,lockedFields:this.lockedFieldsPaths,locale:this.settings.locale,unsplash:{enabled:!1,fillEmptyImagesOnly:!1,keywords:""}}}get friendlyName(){return this.element?(0,Bw.w2)(this.element):"Section"}get elementDescription(){return this.element?(0,Bw.EJ)(this.element):""}get qualifiers(){return this.element?(0,Bw.zX)(this.element):""}get temperature(){return this.element?(0,Bw.Wh)(this.element):1}get canViewTabs(){return this.settings.isApiKeySet&&!this.pluginNotInstalled}get unsavedChangesPresent(){return c.cr.aiSettingsHasUnsavedChangesPresent}get lockedFieldsPaths(){return this.element?(0,Bw.nS)(this.element):[]}get lockedFields(){return this.element?(0,Bw.LX)(this.element).filter((e=>e.field.locked)):[]}async fetchAndUpdateImages(e){if(!this.element)return;const t=(0,Bw.ho)(this.element),{enabled:n,fillEmptyImagesOnly:s}=this.prompt.unsplash;if(!n)return;if(!e)return void this.log("Failed to get Unsplash keywords from OpenAI API.");const a=await(0,Aw.Ig)(e,t.length);(0,Bw.hh)(t,a,s)}async syncRewrite(e,t){const n=(0,V.pipe)(await(0,Aw.Tk)(e),(0,H.fold)((()=>null),(e=>e)));if(!n)throw new Error("No response was returned from OpenAI API.");const s=(0,Bw.wi)(n,t);if(!s.elements.length)throw new Error("No elements were returned from OpenAI API.");(0,Bw.gU)(s.elements),await this.fetchAndUpdateImages(s.unsplash_keywords)}async streamRewrite(e,t){await(0,Aw.ho)(e,"json",this.temperature);const n=(0,Aw.m3)();let s="";return new Promise(((e,a)=>{n.onmessage=async i=>{if("[DONE]"===i.data){n.close();try{const n=(0,Tw.K)(s),a=(0,Bw.wi)(n,t);(0,Bw.gU)(a.elements),console.log("%cOutput","color: green;"),console.log(n),e(s)}catch(o){a(o)}}else{if(s+=(0,Aw.y8)(i.data),s=(0,Aw.J4)(s),!s)return;try{const e=(0,Aw.n7)(s),n=(0,Tw.K)(e),a=(0,Bw.wi)(n,t);(0,Bw.gU)(a.elements)}catch(o){console.debug(s),console.debug(o)}}},n.onerror=e=>{n.close(),a(e.data)}}))}async rewrite(){if(this.rewriteInProgress)return;if(!this.element)return;const e=(0,Bw.LX)(this.element),t=(0,Ow.ee)(e),n=(0,Ow.r1)(t,this.prompt,this.settings.prompt);if(this.rewriteInProgress=!0,(0,Bw.JA)(this.element,this.prompt),console.log("%cInput","color: #2196F3;"),console.log({fields:e,prompt:n}),!e.length)return this.log("This element is empty, please add some content first."),void(this.rewriteInProgress=!1);try{this.settings.isStreamingEnabled?await this.streamRewrite(n,e):await this.syncRewrite(n,e)}catch(s){await this.retry(s)}this.rewriteInProgress=!1}async retry(e){this.rewriteInProgress=!1,this.retries<this.maxRetries?(console.log(`%cRetrying ${this.retries+1} of ${this.maxRetries}`,"color: #2196F3;"),this.retries++,await this.rewrite()):(this.retries=0,console.log("Max retries reached, giving up."),this.handleError(e))}handleError(e){(0,Bw.Qm)(e)}updateSettings(e){const t=(0,Me.Z)(this.settings);t.prompt=e,c.cr.setAiSettings(t)}async savePromptSettings(){this.savingSettings=!0;const e=await(0,Aw.yV)();return this.savingSettings=!1,e}async loadSettings(){this.loadingSettings=!0;const e=await(0,Aw.I8)();return e?(this.loadingSettings=!1,this.pluginNotInstalled=!1,!0):(c.kD.noClosingConfirmationIsNeededFor("ai"),this.pluginNotInstalled=!0,this.loadingSettings=!1,!1)}updatePrompt(e){this.element&&c.Hb.unthrottledPropertyChanged({elementId:this.element.id,path:"meta.promptInfo",meta:{snapshotLabel:`Updated prompt info for element #${this.element.id}`},value:e})}requestPanelClosingConfirmation(){c.kD.requestClosingConfirmation({subject:"ai",confirmationDefinition:{title:"You have unsaved changes to your AI Settings.",text:"Would you like to save or discard these changes?",type:"info"}})}handleUnsavedChangesPresentChange(e){e?this.requestPanelClosingConfirmation():c.kD.noClosingConfirmationIsNeededFor("ai")}get confirmationChosenOption(){return c.kD.closingConfirmations.ai?.chosenOption}async handleConfirmationChosenOptionChange(e){"discard"===e?(c.kD.setClosingConfirmationIsDiscarding({subject:"ai",isDiscarding:!0}),await this.loadSettings()?this.close():this.requestPanelClosingConfirmation()):"save"===e&&(c.kD.setClosingConfirmationIsSaving({subject:"ai",isSaving:!0}),await this.savePromptSettings()?this.close():this.requestPanelClosingConfirmation())}close(){(0,G.TO)("ai")}log(e){ye.Z.log.errorMessage(e)}async beforeMount(){c.kD.panelState.shouldLoadFreshDataIntoStoreOnceOpened.ai?await this.loadSettings():c.kD.setShouldPanelLoadFreshDataIntoStoreOnceOpened("ai",!0)}};(0,r.gn)([(0,l.RL)("unsavedChangesPresent",{immediate:!0})],Ck.prototype,"handleUnsavedChangesPresentChange",null),(0,r.gn)([(0,l.RL)("confirmationChosenOption",{immediate:!0})],Ck.prototype,"handleConfirmationChosenOptionChange",null),Ck=(0,r.gn)([(0,l.wA)({components:{Tab:xf,Icon:K.Z,TabsRow:Bf,NiceButton:io.Z,PanelHeader:jb,AIWriter:tk,AIUnsplash:Ww,AISettings:jw,AINoApiKey:gk,AIPluginNotInstalled:lk,AINoElementSelected:Sk}})],Ck);const wk=Ck,kk=wk;var xk=(0,Y.Z)(kk,Ew,Zw,!1,null,null,null);const Ik=xk.exports;let Dk=class extends s.ZP{constructor(){super(...arguments),this.reactivePanelContext={state:this.panelState,position:this.position},this.panelContext=this.reactivePanelContext}get activeElementId(){return c.kD.activeElementId}updatePanelContext(){this.reactivePanelContext.state=this.panelState}};(0,r.gn)([(0,l.fI)()],Dk.prototype,"position",void 0),(0,r.gn)([(0,l.fI)()],Dk.prototype,"panelState",void 0),(0,r.gn)([(0,l.RL)("panelState")],Dk.prototype,"updatePanelContext",null),(0,r.gn)([(0,l.DF)("panelContext")],Dk.prototype,"panelContext",void 0),Dk=(0,r.gn)([(0,l.wA)({components:{PresetsPanel:Dw,AppLayoutBodyPanelArea:wC,HistoryAndRevisionsPanel:fC,StructurePanel:HS,ElementPropertiesPanel:wy,Add:Jb,GlobalSettingsPanel:__,SelectorsPanel:dS,AIPanel:Ik}})],Dk);const Ek=Dk,Zk=Ek;var Tk=(0,Y.Z)(Zk,Ev,Zv,!1,null,null,null);const Ak=Tk.exports;var Bk=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breakdance-app-wrapper"},[t("div",{staticClass:"breakdance-top-bar-wrapper"},[e._t("topbar")],2),t("div",{staticClass:"breakdance-app-body-wrapper"},[e._t("body")],2)])},Ok=[];let Rk=class extends s.ZP{};Rk=(0,r.gn)([l.wA],Rk);const Mk=Rk,Fk=Mk;var Nk=(0,Y.Z)(Fk,Bk,Ok,!1,null,null,null);const Lk=Nk.exports;var $k=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",e._l(e.closingConfirmations,(function(n,s){return t("ConfirmDialog",{key:s,attrs:{type:n.type,"save-is-enabled":!n.chosenOption,"save-is-in-progress":n.isSaving,"discard-is-enabled":!n.chosenOption,"discard-is-in-progress":n.isDiscarding,"has-cancel":n.hasCancel,"has-discard":n.hasDiscard,"action-text":n.actionText,show:n.show},on:{discard:function(t){return e.markClosingConfirmationAs(s,"discard")},save:function(t){return e.markClosingConfirmationAs(s,"save")},cancel:function(t){return e.hideClosingConfirmation(s)},"click:outside":function(t){return e.hideClosingConfirmation(s)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(n.title)+" ")]},proxy:!0},{key:"text",fn:function(){return[e._v(e._s(n.text))]},proxy:!0}],null,!0)})})),1)},Wk=[];let Vk=class extends l.w3{get closingConfirmations(){return Object.fromEntries(Object.entries(ft.kD.closingConfirmations).filter((([,e])=>e&&e.show)))}markClosingConfirmationAs(e,t){ft.kD.chooseOptionForClosingConfirmation({subject:e,chosenOption:t})}hideClosingConfirmation(e){ft.kD.hideClosingConfirmation(e)}};Vk=(0,r.gn)([(0,l.wA)({components:{ConfirmDialog:nl}})],Vk);const Hk=Vk,Uk=Hk;var zk=(0,Y.Z)(Uk,$k,Wk,!1,null,null,null);const Gk=zk.exports;var Kk=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Dialog",{attrs:{value:!0,persistent:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" This post can't be edited directly. ")]},proxy:!0},{key:"text",fn:function(){return[e.templateName?[t("p",[e._v(" This post is rendered with "+e._s(e.templateIsFallback?"Breakdance's internal":"the")+' "'),t("em",[e._v(e._s(e.decodedTemplateName))]),e._v('" template. ')])]:[t("p",[e._v(" This post is rendered with a "+e._s(e.templateIsFallback?"Breakdance's internal":"")+" template. ")])],e.templateIsFallback?t("p",[e._v("Please create your own template.")]):t("p",[e._v(" The template does not contain a "),t("em",[e._v("Template Content Area")]),e._v(" element. Therefore, the posts it applies to are not editable in Breakdance. ")])]},proxy:!0},{key:"actions",fn:function(){return[e.templateIsFallback&&e.templatesPageUrl?t(os.Z,{attrs:{text:"",href:e.templatesPageUrl}},[e._v("Templates page")]):e.templateIsFallback?e._e():t(os.Z,{attrs:{text:"",href:e.templateUrl}},[e._v("Edit Template")]),t(os.Z,{attrs:{dark:"",color:"blue",href:e.backToAdmin}},[e._v(" Go back ")])]},proxy:!0}])})},jk=[];let qk=class extends s.ZP{get decodedTemplateName(){const e=document.createElement("textarea");return e.innerHTML=this.templateName,e.value}get templateUrl(){return(0,fi.UH)(this.templateId)}get backToAdmin(){return ft.PK.documentSpecificNeededUrls?ft.PK.documentSpecificNeededUrls.backToWordPressUrl??"":""}};(0,r.gn)([(0,l.fI)()],qk.prototype,"templateName",void 0),(0,r.gn)([(0,l.fI)()],qk.prototype,"templateId",void 0),(0,r.gn)([(0,l.fI)()],qk.prototype,"templateIsFallback",void 0),(0,r.gn)([(0,l.fI)()],qk.prototype,"templatesPageUrl",void 0),qk=(0,r.gn)([(0,l.wA)({components:{Dialog:Jn.Z}})],qk);const Xk=qk,Yk=Xk;var Qk=(0,Y.Z)(Yk,Kk,jk,!1,null,null,null);const Jk=Qk.exports;var ex=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Dialog",{attrs:{value:!0,persistent:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Invalid post ")]},proxy:!0},{key:"text",fn:function(){return["post_does_not_exist"===e.invalidPostData.errorType?t("div",[e._v(" The requested post doesn't exist. It may have been deleted, or maybe you used an outdated URL. ")]):e._e(),"post_is_in_trash"===e.invalidPostData.errorType?t("div",[e._v(" You can't edit this item because it is in the Trash. Please restore it and try again. ")]):e._e(),"post_type_is_banned"===e.invalidPostData.errorType?t("div",[e.invalidPostData.postType?[e._v(" Posts with post type "),t("b",[e._v('"'+e._s(e.invalidPostData.postType)+'"')]),e._v(" can't be edited with Breakdance directly. Please use a "),t("b",[e._v("Breakdance Template")]),e._v(" instead. ")]:[e._v(" The requested post can't be edited with Breakdance. ")]],2):e._e(),"post_type_is_restricted"===e.invalidPostData.errorType?t("div",[e._v(" You don't have enough permissions to edit "),t("b",[e._v('"'+e._s(e.invalidPostData.postType)+'"')]),e._v(" post type. ")]):e._e()]},proxy:!0},{key:"actions",fn:function(){return[t(os.Z,{attrs:{dark:"",color:"blue",href:e.invalidPostData.backToAdminUrl}},[e._v(" Back to WordPress admin ")])]},proxy:!0}])})},tx=[];let nx=class extends s.ZP{get invalidPostData(){return ft.PK.invalidPostData}};nx=(0,r.gn)([(0,l.wA)({components:{Dialog:Jn.Z}})],nx);const sx=nx,ax=sx;var ix=(0,Y.Z)(ax,ex,tx,!1,null,null,null);const ox=ix.exports;var rx=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Dialog",{attrs:{value:e.showDialog,width:500,closeable:!1},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"subtitle-top",fn:function(){return[e._v("Welcome to Breakdance")]},proxy:!0},{key:"title",fn:function(){return[e._v(" Do you want to start with a template?")]},proxy:!0},{key:"text",fn:function(){return[t("p",[e._v(" Templates save you hours of work. Each template is crafted by a pro and is fully customizable. ")])]},proxy:!0},{key:"actions",fn:function(){return[t(os.Z,{staticStyle:{"margin-right":"auto"},attrs:{color:"blue"},on:{click:e.openDesignLibrary}},[e._v(" Open Design Library ")]),t(os.Z,{attrs:{outlined:"",text:""},on:{click:e.closeForever}},[e._v("No, thanks")])]},proxy:!0}])})},lx=[];let cx=class extends s.ZP{constructor(){super(...arguments),this.isOpen=ft.PK.neededData?.isBuilderFirstTimeVisit??!1}get showDialog(){return this.isTreeEmpty&&this.isOpen}get isTreeEmpty(){return 0===ft.Hb.document.tree.root.children.length}closeForever(){this.isOpen=!1,(0,E.D)({action:"breakdance_save_arbitrary",dataToPost:{key:"onboarding_builder_fist_time_visit",data:"true"},decoder:Z._4})}openDesignLibrary(){(0,Le.of)("CMD_B"),this.closeForever()}};cx=(0,r.gn)([(0,l.wA)({components:{Dialog:Jn.Z}})],cx);const dx=cx,ux=dx;var px=(0,Y.Z)(ux,rx,lx,!1,null,null,null);const hx=px.exports;var mx=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("button",{staticClass:"preview-mode-close-button",on:{click:e.togglePreviewMode}},[e._v(" Close Preview ")])},gx=[];let vx=class extends l.w3{togglePreviewMode(){c.kD.togglePreviewMode()}get isPreviewMode(){return c.kD.isPreviewMode}onIsPreviewModeChange(){if(this.isPreviewMode){const e=new Event("breakdance_play_animations",{bubbles:!0});window.Breakdance.canvas.document.dispatchEvent(e)}}};(0,r.gn)([(0,l.RL)("isPreviewMode",{immediate:!0})],vx.prototype,"onIsPreviewModeChange",null),vx=(0,r.gn)([l.wA],vx);const fx=vx,yx=fx;var bx=(0,Y.Z)(yx,mx,gx,!1,null,null,null);const Px=bx.exports;let _x=class extends s.ZP{constructor(){super(...arguments),this.showTemplateDialog=!1}mounted(){c.kD.hasFullAccess&&(0,sn.c)().register()}beforeDestroy(){(0,sn.c)().unbind(),(0,$n.uV)().unbind()}get classList(){return{[`has-permission:${this.permission}`]:!0}}get isPreviewMode(){return c.kD.isPreviewMode}get preferencesModalOpen(){return c.kD.panelState.preferencesModalOpen}get elementStudioOpen(){return c.kD.panelState.elementStudioOpen}updatePreferencesModal(e){c.kD.setPreferencesModalOpen(e)}get keyboardShortcutsHelpModalOpen(){return c.kD.panelState.keyboardShortcutsHelpModalOpen}updateKeyboardShortcutsHelpModal(e){c.kD.setKeyboardShortcutHelpModalOpen(e)}get activeElementId(){return c.kD.activeElementId}get leftSidebarPanelState(){return c.kD.panelState.leftSidebarPanel}get rightSidebarPanelState(){return c.kD.panelState.rightSidebarPanel}get permission(){return c.PK.permission?.slug}onIframeLoaded(){requestIdleCallback((()=>{(0,fi.gn)()})),this.isRenderedWithTemplate&&!this.containsTemplateContentArea&&(this.showTemplateDialog=!0),(0,$n.uV)().register()}get showInvalidPostDialog(){return!!c.PK.invalidPostData}get isRenderedWithTemplate(){return null!==window.Breakdance?.canvas?.document?.querySelector("[data-rendered-with-template]")}getTemplateAttribute(e){if(!this.isRenderedWithTemplate)return null;const t=window.Breakdance?.canvas?.document?.querySelector("[data-rendered-with-template]");return t?.getAttribute(e)}get templateName(){return this.getTemplateAttribute("data-template-name")??""}get templateId(){const e=this.getTemplateAttribute("data-template-id");return e?parseInt(e):null}get isTemplateFallback(){return"true"===this.getTemplateAttribute("data-template-is-fallback")}get templatesPageUrl(){return this.getTemplateAttribute("data-template-page-url")}get containsTemplateContentArea(){return null!==window.Breakdance?.canvas?.document?.querySelector(".bde-themeless-template-content-area")}};_x=(0,r.gn)([(0,l.wA)({components:{PreviewModeCloseButton:Px,FirstTimeVisit:hx,DesignLibraryModal:Wb,InvalidPostDialog:ox,TemplateDialog:Jk,ClosingConfirmations:Gk,IframeCanvas:ka,BuilderTopBar:Rr,PreferencesModal:Uc,ElementStudio:Dv,KeyboardShortcutsHelpModal:Yc,SidebarPanels:Ak,ConfirmDialog:nl,AppLayout:Lk}})],_x);const Sx=_x,Cx=Sx;var wx=(0,Y.Z)(Cx,h,m,!1,null,null,null);const kx=wx.exports;var xx=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("h1",[e._v("Unrecoverable Errors")]),e._l(e.errors,(function(n,s){return t("div",{key:s,staticClass:"unrecoverable-errors"},[e._v(" "+e._s(n)+" ")])}))],2)},Ix=[];let Dx=class extends s.ZP{get errors(){return c.kD.unrecoverableErrorMessages}};Dx=(0,r.gn)([l.wA],Dx);const Ex=Dx,Zx=Ex;var Tx=(0,Y.Z)(Zx,xx,Ix,!1,null,null,null);const Ax=Tx.exports;var Bx=n(90878);let Ox=class extends s.ZP{constructor(){super(...arguments),this.broadcastChannel=null}async beforeMount(){if("builder"===window.Breakdance.initialMode){const e=await(0,fi.Dl)(window.Breakdance.initialDocumentToLoadId);(0,fi.PX)(e)}this.broadcastChannel=(0,Bx.a)()}beforeDestroy(){this.broadcastChannel&&this.broadcastChannel.close()}get interfaceState(){return c.kD.interfaceState}get errorsPresent(){return c.kD.unrecoverableErrorMessages.length}get currentDocumentMetaId(){return c.Hb.document.documentMeta.id}handleCurrentDocumentChange(e){const t=["Breakdance"];e!==e_.VY&&t.push(c.Hb.document.documentMeta.titleLabel),window.document.title=t.join(" | ")}get unsavedChangesPresent(){return c.kD.unsavedChangesPresent}handleUnsavedChangesPresentChange(e){e?this.requestClosingConfirmation():this.removeClosingConfirmation()}requestClosingConfirmation(){c.kD.requestClosingConfirmation({subject:"builder",confirmationDefinition:{title:"You must save your changes first",actionText:"Save and continue",type:"warning",hasCancel:!0,hasDiscard:!1}})}removeClosingConfirmation(){c.kD.noClosingConfirmationIsNeededFor("builder")}get confirmationChosenOption(){return c.kD.closingConfirmations.builder?.chosenOption}async handleConfirmationChosenOptionChange(e){"discard"===e?(this.removeClosingConfirmation(),(0,aP.w7)()):"save"===e&&(c.kD.setClosingConfirmationIsSaving({subject:"builder",isSaving:!0}),(0,V.pipe)(await Aa(),(0,H.fold)((()=>{c.kD.setClosingConfirmationIsSaving({subject:"builder",isSaving:!1})}),(()=>{this.removeClosingConfirmation(),(0,aP.w7)()}))))}};(0,r.gn)([(0,l.RL)("currentDocumentMetaId",{immediate:!0})],Ox.prototype,"handleCurrentDocumentChange",null),(0,r.gn)([(0,l.RL)("unsavedChangesPresent",{immediate:!0})],Ox.prototype,"handleUnsavedChangesPresentChange",null),(0,r.gn)([(0,l.RL)("confirmationChosenOption",{immediate:!0})],Ox.prototype,"handleConfirmationChosenOptionChange",null),Ox=(0,r.gn)([(0,l.wA)({components:{BuilderLayout:kx,Loading:pa.Z,UnrecoverableErrors:Ax}})],Ox);const Rx=Ox,Mx=Rx;var Fx=(0,Y.Z)(Mx,u,p,!1,null,null,null);const Nx=Fx.exports;var Lx=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",["normal"===e.interfaceState?t("AppLayout",{scopedSlots:e._u([{key:"topbar",fn:function(){return[t("TopBar",[t("TopBarSection",[t("div",{staticClass:"browse-mode-address-bar"},[t("h2",[e._v("Viewing Page")]),t("a",{staticClass:"ellipsis-text breakdance-browse-mode__url-to-display",attrs:{title:e.iframeUrlToDisplay,href:e.iframeUrlToDisplay,target:"_blank"}},[e._v(" "+e._s(e.iframeUrlToDisplay)+" ")])])]),t(xa.Z),t("TopBarSection",{attrs:{"border-left":"true","border-right":"true"}},[t("BreakpointsSelection",{model:{value:e.currentBreakpoint,callback:function(t){e.currentBreakpoint=t},expression:"currentBreakpoint"}})],1),t(xa.Z),t("UndoRedo"),t("TopBarSection",{attrs:{"border-left":"true"}},[t("Dropdown",{staticClass:"open-settings-toolbar-button",attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t("IconButton",e._g({attrs:{active:e.isAnyBrowseModeSupportedPanelOpen,size:"18",icon:"EllipsisStrokeIcon"}},n))]}}],null,!1,2694485179)},[t(La.Z,[t($a.Z,{attrs:{dense:""},on:{click:e.toggleGlobalSettingsPanel}},[t(Wa.V9,[e._v(" Global Settings ")])],1),t($a.Z,{attrs:{dense:""},on:{click:e.toggleSelectorsPanel}},[t(Wa.V9,[e._v(" Selectors ")])],1),t($a.Z,{attrs:{dense:""},on:{click:e.togglePresetsPanel}},[t(Wa.V9,[e._v(" Design Presets ")])],1),t($a.Z,{attrs:{dense:""},on:{click:e.toggleHistoryAndRevisionsPanel}},[t(Wa.V9,[e._v(" History ")])],1)],1)],1)],1),t("TopBarSection",{attrs:{borderLeft:!0}},[t("BrowseModeSave")],1),t("TopBarSection",{attrs:{"border-left":"true"}},[t("IconButton",{attrs:{icon:"ArrowLeftIcon",size:"18"},on:{click:e.exitBrowseMode}})],1)],1)]},proxy:!0},{key:"body",fn:function(){return[t("ClosingConfirmations"),t("BrowseModeSidebarPanels",{attrs:{"panel-state":e.leftSidebarPanelState,position:"left"}}),t("IframeWrapper",{attrs:{"iframe-state":e.iframeState,"iframe-url":e.iframeUrl,"iframe-preview-width":e.iframePreviewWidth,"current-breakpoint":e.currentBreakpoint,"iframe-exited":!1,"iframe-id":e.iframeID,"min-width":e.iframeMinWidth},on:{iframeLoaded:e.handleIframeLoaded,previewWidthChange:e.handlePreviewWidthChange,previewWidthChangeWithAdjustmentBar:e.handlePreviewWidthChangeWithAdjustmentBar,resetPreviewWidth:e.handleResetPreviewWidth}}),t("BrowseModeSidebarPanels",{attrs:{"panel-state":e.rightSidebarPanelState,position:"right"}})]},proxy:!0}],null,!1,4123666753)}):"loading"===e.interfaceState?t("Loading"):e._e()],1)},$x=[],Wx=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("AppLayoutBodyPanelArea",{attrs:{"panel-state":e.panelState,position:e.position}},["globalSettings"===e.panelState?t("GlobalSettingsPanel"):e._e(),"selectors"===e.panelState?t("SelectorsPanel"):e._e(),"history"===e.panelState?t("HistoryAndRevisionsPanel",{attrs:{"disable-revisions":!0}}):e._e(),"presets"===e.panelState?t("PresetsPanel"):e._e()],1)},Vx=[];let Hx=class extends s.ZP{};(0,r.gn)([(0,l.fI)()],Hx.prototype,"position",void 0),(0,r.gn)([(0,l.fI)()],Hx.prototype,"panelState",void 0),Hx=(0,r.gn)([(0,l.wA)({components:{HistoryAndRevisionsPanel:fC,AppLayoutBodyPanelArea:wC,GlobalSettingsPanel:__,SelectorsPanel:dS,PresetsPanel:Dw}})],Hx);const Ux=Hx,zx=Ux;var Gx=(0,Y.Z)(zx,Wx,Vx,!1,null,null,null);const Kx=Gx.exports;var jx=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("StandardButton",{staticStyle:{"margin-left":"3px","margin-right":"3px"},attrs:{loading:e.saveInProgress,minWidth:"80"},on:{click:e.save}},[e._v(" Save ")])},qx=[];let Xx=class extends s.ZP{constructor(){super(...arguments),this.saveInProgress=!1}get unsavedChangesPresent(){return c.kD.unsavedChangesPresent}async save(){this.saveInProgress=!0,await(0,o_.T)(),await(0,E_.zF)(),this.saveInProgress=!1}mounted(){Le.uq.register(sn.r.CMD_S,this.save)}beforeDestroy(){Le.uq.unbind(sn.r.CMD_S)}};Xx=(0,r.gn)([(0,l.wA)({components:{StandardButton:ea}})],Xx);const Yx=Xx,Qx=Yx;var Jx=(0,Y.Z)(Qx,jx,qx,!1,null,null,null);const eI=Jx.exports;let tI=class extends s.ZP{constructor(){super(...arguments),this.iframeID="breakdance-browser-iframe",this.iframeDocument=null,this.broadcastChannel=null}async beforeMount(){if("browse"===window.Breakdance.initialMode){const e=await(0,fi.x2)();(0,fi.Oc)(e,{returnUrl:window.Breakdance.returnUrl,browseModeOpenUrl:window.Breakdance.browseModeOpenUrl})}this.broadcastChannel=(0,Bx.a)()}get interfaceState(){return c.kD.interfaceState}mounted(){this.warnIfUnsavedFunction=(0,Ba.$)((()=>c.cr.settingsHasUnsavedChangesPresent||c.cr.selectorsHasUnsavedChangesPresent))}beforeDestroy(){(0,Ba.e)(this.warnIfUnsavedFunction),this.broadcastChannel&&this.broadcastChannel.close()}handleIframeLoaded(e){if(!e)throw this.iframeDocument=null,"Unable to proceed  iframe element is missing";this.iframeDocument=(0,aP.RL)(e)}handlePreviewWidthChange(e){c.kD.changePreviewWidthMutation(e)}handlePreviewWidthChangeWithAdjustmentBar(e){c.kD.changePreviewWidthWithAdjustmentBar(e)}handleResetPreviewWidth(){c.kD.selectBaseBreakpoint()}get iframeUrl(){return c.Sr.iframeUrl}get iframeState(){return c.Sr.iframeState}get iframeDocumentTitleToDisplay(){return c.Sr.iframeDocumentTitleToDisplay}get iframeUrlToDisplay(){return c.Sr.iframeUrlToDisplay}get iframePreviewWidth(){return c.kD.canvasPreviewWidth}get iframeMinWidth(){return(0,Nt.GV)(c.cr)}get leftSidebarPanelState(){return c.kD.panelState.leftSidebarPanel}get rightSidebarPanelState(){return c.kD.panelState.rightSidebarPanel}get globalSettings(){return c.cr.globalSettings}get selectors(){return c.cr.cssSelectors}get presets(){return c.cr.presets}get isAnyBrowseModeSupportedPanelOpen(){return(0,G.O_)("globalSettings")||(0,G.O_)("selectors")||(0,G.O_)("history")}get currentBreakpoint(){return c.kD.currentBreakpoint}set currentBreakpoint(e){c.kD.changeBreakpoint(e)}exitBrowseMode(){(0,aP.os)()}toggleGlobalSettingsPanel(){(0,G._y)("globalSettings")}toggleSelectorsPanel(){(0,G._y)("selectors")}togglePresetsPanel(){(0,G._y)("presets")}toggleHistoryAndRevisionsPanel(){(0,G.oM)("history")}handleCurrentDocumentChange(){(0,aP.r1)()}onGlobalSettingsChanged(){this.iframeDocument&&(0,Bs.TK)(this.iframeDocument)}onSelectorsChanged(){this.iframeDocument&&(0,Bs.Bs)(this.iframeDocument)}onPresetsChanged(){this.iframeDocument&&(0,Bs.aL)(this.iframeDocument)}};(0,r.gn)([(0,l.RL)("iframeDocumentTitleToDisplay",{immediate:!0})],tI.prototype,"handleCurrentDocumentChange",null),(0,r.gn)([(0,l.RL)("globalSettings",{deep:!0,immediate:!0})],tI.prototype,"onGlobalSettingsChanged",null),(0,r.gn)([(0,l.RL)("selectors",{deep:!0,immediate:!0})],tI.prototype,"onSelectorsChanged",null),(0,r.gn)([(0,l.RL)("presets",{deep:!0,immediate:!0})],tI.prototype,"onPresetsChanged",null),tI=(0,r.gn)([(0,l.wA)({components:{UndoRedo:di,BrowseModeSave:eI,BrowseModeSidebarPanels:Kx,BreakpointsSelection:Xa,Icon:K.Z,StandardButton:ea,IframeWrapper:Pa,TopBarSection:ii,AppLayoutBodyPanelArea:wC,TopBar:hr,AppLayout:Lk,IconButton:Ua.Z,ClosingConfirmations:Gk,Dropdown:za.Z,Loading:pa.Z}})],tI);const nI=tI,sI=nI;var aI=(0,Y.Z)(sI,Lx,$x,!1,null,null,null);const iI=aI.exports;let oI=class extends s.ZP{beforeMount(){c.kD.setMode(window.Breakdance.initialMode)}mounted(){(0,fr.K)("Builder Loaded",{subscriptionMode:window.Breakdance.subscriptionMode,builderMode:window.Breakdance.initialMode,theme:c.kD.settings.theme,url:location.href,title:document.title,viewport:{width:window.innerWidth,height:window.innerHeight}})}get isBrowseModeEnabled(){return"browse"===c.kD.mode}get useDarkMode(){return"dark"===c.kD.settings.theme}get classList(){return{"breakdance-dark-mode":this.useDarkMode,"breakdance-preview-mode":this.isPreviewMode}}get isPreviewMode(){return c.kD.isPreviewMode}darkModeWatcher(e){this.$vuetify.theme.dark=e}};(0,r.gn)([(0,l.RL)("useDarkMode",{immediate:!0})],oI.prototype,"darkModeWatcher",null),oI=(0,r.gn)([(0,l.wA)({components:{BrowseMode:iI,Builder:Nx,Notifications:d.Z}})],oI);const rI=oI,lI=rI;var cI=(0,Y.Z)(lI,i,o,!1,null,null,null);const dI=cI.exports;var uI=n(74604);s.ZP.config.productionTip=!1,s.ZP.config.ignoredElements=["lite-vimeo","lite-youtube"],s.ZP.directive("permission",uI.Z),new s.ZP({store:c.ZP,vuetify:ta.Z,render:e=>e(dI)}).$mount("#app")},67132:(e,t,n)=>{n.d(t,{Qu:()=>r,kt:()=>c,rf:()=>l});var s=n(98851),a=n(48262),i=n(9665),o=(n(39664),n(65669));async function r(e){return await(0,s.D)({action:"breakdance_manage_templates_save",dataToPost:{id:e.id,title:e.title,postType:e.postType,settings:(0,o.J)(e.settings)},decoder:a.t0,resultKey:"data",friendlyName:"Save template"})}async function l(e){return await(0,s.D)({action:"breakdance_manage_templates_load_data",dataToPost:{post_type:e},decoder:a.YL,resultKey:"data",friendlyName:"Get templates data"})}async function c(){return await(0,s.D)({action:"breakdance_manage_global_blocks",decoder:i.GF,resultKey:"data",friendlyName:"Get global blocks data"})}},47187:(e,t,n)=>{n.d(t,{aA:()=>i});n(23128);var s=n(18446),a=n.n(s);function i(e,t,n){const s=e.find((e=>a()(e.settings,t)));return!s||confirm(`You already have a ${n} with the same settings called "${s.title}". Continue anyway?`)}},48262:(e,t,n)=>{n.d(t,{YL:()=>v,t0:()=>h});var s=n(99697),a=n(47902),i=n(32521),o=n(47245);const r=i.jV([i.dt({slug:i.Z_,label:i.Z_}),i.r$({defaultPriority:i.pk})]),l=(i.IX(i.dt({text:i.Z_,value:i.pk})),i.IX(i.dt({label:i.Z_,types:i.IX(r)}))),c=i.r$({parentId:i.pk,type:i.Z_,ruleGroups:i.IX(s.ZQ),triggers:s.Gc,priority:i.pk,disabled:i.O7,fallback:i.O7,onlyShowOnce:i.O7,avoidMultiple:i.O7,limitPageLoad:i.G0([i.pk,i.lB]),limitSession:i.G0([i.pk,i.lB]),limitForever:i.G0([i.pk,i.lB])}),d=i.G0([i.i0("breakdance_template"),i.i0("breakdance_popup"),i.i0("breakdance_header"),i.i0("breakdance_footer"),i.i0("breakdance_block"),i.i0("breakdance_acf_block")]),u=i.dt({id:i.pk,title:i.Z_,editInBreakdanceLink:i.Z_,postType:d,status:i.G0([i.i0("publish"),i.i0("trash"),i.S1])}),p=i.jV([u,i.dt({settings:i.G0([c,i.lB])})]),h=i.jV([u,i.dt({settings:c})]),m=i.dt({text:i.Z_,value:i.Z_,proOnly:i.G0([i.S1,i.O7])}),g=i.dt({conditions:i.IX(s.dV),dynamicFields:i.IX(a.pG),templateTypeCategories:l,popupTriggers:i.G0([i.lB,i.IX(m)])}),v=i.dt({templates:i.IX(p),templatesManagementData:g,isWooCommerceActive:i.O7,environment:o.Pt})},88667:(e,t,n)=>{n.d(t,{lU:()=>l,vZ:()=>r,zM:()=>c});var s=n(32521),a=n(32874);const i=s.dt({fileName:s.Z_,fileUrl:s.Z_,format:s.G0([s.i0("woff"),s.i0("woff2")])}),o=s.dt({id:s.Z_,files:s.IX(i),weight:s.pk,style:s.G0([s.i0("normal"),s.i0("italic")])}),r=s.dt({id:s.Z_,family:s.Z_,cssUrl:s.Z_,hasExternalCssUrl:s.O7,cssName:s.Z_,fallbackString:s.G0([s.Z_,s.S1]),faces:s.IX(o)}),l=s.IX(s.dt({fontId:s.Z_,cssUrl:s.Z_,fontRegistrationData:a.d})),c=s.dt({fileUrl:s.Z_,fileName:s.Z_})},92260:(e,t,n)=>{n.d(t,{Jd:()=>o,Kn:()=>c,i2:()=>l});var s=n(32521);const a=s.dt({thumbnailUrl:s.G0([s.Z_,s.S1])}),i=s.dt({name:s.Z_,url:s.Z_,type:s.G0([s.i0("complete_site"),s.i0("sections"),s.i0("ui_kit"),s.S1]),isLocal:s.G0([s.O7,s.S1]),meta:s.G0([s.S1,a])}),o=s.dt({designProviders:s.IX(i),globalSettingsLastImportedFromUrl:s.G0([s.Z_,s.lB]),designPresetsLastImportedFromUrl:s.G0([s.Z_,s.lB]),fullSiteLastImportedFromUrl:s.G0([s.Z_,s.lB])}),r=s.dt({id:s.pk,name:s.Z_,url:s.Z_,tags:s.IX(s.Z_)}),l=s.dt({enabled:s.O7,reliesOnGlobalSettings:s.G0([s.O7,s.S1]),reliesOnDesignPresets:s.G0([s.O7,s.S1]),name:s.Z_,requiresPassword:s.G0([s.O7,s.S1]),passwordValid:s.G0([s.O7,s.S1]),posts:s.IX(r)}),c=s.dt({url:s.Z_,id:s.pk})},63842:(e,t,n)=>{n.d(t,{D:()=>v,My:()=>F,U$:()=>C,Ve:()=>R,_t:()=>B,g3:()=>S,iQ:()=>P,pG:()=>k,ws:()=>I,xY:()=>y,xd:()=>M});var s=n(32521),a=n(89754),i=n(78454);const o=s.iG(s.dt({contentSections:s.IX(a.ur),designSections:s.IX(a.ur),settingsSections:s.IX(a.ur)})),r=s.dt({name:s.Z_,template:s.Z_}),l=s.dt({name:s.Z_,propertyPath:s.Z_}),c=s.dt({name:s.Z_,rawValue:s.Z_}),d=s.G0([r,l,c]),u=s.IX(d),p=s.dt({name:s.Z_,template:s.Z_}),h=s.IX(p),m=s._4,g=s.jV([s.dt({script:s.Z_}),s.r$({dependencies:s.IX(s.Z_),runForAllChildren:s.O7})]),v=(s.dt({actionData:g,elements:s.IX(s.Z_)}),s.r$({title:s.Z_,scripts:s.IX(s.Z_),inlineScripts:s.IX(s.Z_),styles:s.IX(s.Z_),inlineStyles:s.IX(s.Z_),builderCondition:s.Z_,frontendCondition:s.Z_,googleFonts:s.IX(s.Z_)})),f=s.IX(s.dt({name:s.Z_,url:s.Z_})),y=s.dt({name:s.Z_,files:s.dt({js:f,css:f})}),b=s.r$({onPropertyChange:s.IX(g),onAfterDeletedElement:s.IX(g),onMovedElement:s.IX(g),onMountedElement:s.IX(g),onCreatedElement:s.IX(g),onBeforeDeletingElement:s.IX(g),onActivatedElement:s.IX(g)}),P=s.G0([s.i0("root"),s.i0("final"),s.i0("final-link"),s.i0("container"),s.i0("container-restricted"),s.i0("container-link"),s.i0("container-excluding-self"),s.i0("section"),s.i0("final-that-is-allowed-inside-root"),s.i0("popup")]),_=s.jV([s.dt({type:P}),s.r$({restrictedToBeADirectChildOf:s.IX(s.Z_),restrictedToBeADescendantOf:s.IX(s.Z_),notAllowedWhenNodeTypeIsPresentInTree:s.IX(s.Z_)})]),S=s.G0([s.i0("inside-top"),s.i0("inside-left"),s.i0("inside-right"),s.i0("inside-bottom"),s.i0("outside-top"),s.i0("outside-right"),s.i0("outside-left"),s.i0("outside-bottom")]),C=s.G0([s.i0("padding-top"),s.i0("padding-left"),s.i0("padding-right"),s.i0("padding-bottom"),s.i0("margin-top"),s.i0("margin-right"),s.i0("margin-left"),s.i0("margin-bottom")]),w=s.G0([s.i0(!1),s.IX(s.Z_)]),k=s.dt({location:S,cssProperty:C,affectedPropertyPath:s.Z_}),x=s.sH("ChildElement",(()=>s.jV([s.dt({slug:s.Z_}),s.r$({defaultProperties:m,children:s.IX(x)})]))),I=s.G0([s.i0("WooCommerce"),s.i0("ACF"),s.i0("MetaBox"),s.i0("ACF"),s.i0("FacetWP"),s.i0("WP Grid Builder")]),D=s.G0([s.r$({dependsOnGlobalScripts:s.O7,bypassPointerEvents:s.O7,sharePropsWithSSRChildren:s.O7,requiredPlugins:s.IX(I),disableAI:s.O7,proOnly:s.O7}),s.i0(!1)]),E=s.G0([s.i0(!1),s.r$({alwaysHide:s.O7,allowedPostTypes:s.IX(s.Z_)})]),Z=s.G0([s.i0("yes"),s.i0("no"),s.i0("unknown"),s.i0("sort of")]),T=s.r$({looksGood:Z,optionsGood:Z,optionsWork:Z,dynamicBehaviorWorks:Z,notes:s.Z_}),A=s.dt({backgroundColor:s.G0([s.Z_,s.lB]),textColor:s.G0([s.Z_,s.lB]),label:s.Z_}),B=s.iG(s.dt({name:s.Z_,className:s.G0([s.Z_,s.i0(!1)]),uiIcon:s.G0([s.Z_,s.i0(!1)]),slug:s.Z_,category:s.Z_,badge:s.G0([A,s.i0(!1)]),htmlTag:s.dt({default:s.Z_,options:s.IX(s.Z_),pathToControl:s.G0([s.i0(!1),s.Z_])}),template:s.Z_,additionalClasses:s.G0([h,s.i0(!1)]),attributes:s.G0([u,s.i0(!1)]),cssTemplate:s.Z_,defaultCss:s.Z_,defaultProperties:s.G0([m,s.i0(!1)]),defaultChildren:s.G0([s.IX(x),s.i0(!1)]),controls:o,dependencies:s.G0([s.IX(v),s.i0(!1)]),actions:s.G0([b,s.i0(!1)]),nestingRule:_,spacingBars:s.G0([s.i0(!1),s.IX(k)]),dynamicPropertyPaths:s.G0([s.i0(!1),s.IX(i.G)]),settings:D,addPanelRules:E,experimental:s.O7,order:s.pk,projectManagement:s.G0([s.i0(!1),T]),propertyPathsToWhitelistInFlatProps:w,propertyPathsToSsrElementWhenValueChanges:w})),O=(s.IX(B),s.dt({slug:s.Z_,label:s.Z_})),R=s.IX(O),M=s.r$({attributes:s.IX(d),dependencies:s.IX(v),actions:b}),F=s.IX(s.dt({macro:s.Z_,slug:s.Z_}))},47245:(e,t,n)=>{n.d(t,{Pt:()=>I,Ux:()=>Z,d0:()=>T});var s=n(32521),a=n(47902),i=n(63842),o=n(75031),r=n(32874),l=n(9294),c=n(94328),d=n(23777),u=n(21516),p=n(83714),h=n(38537),m=n(99697),g=n(3749),v=n(14018),f=n(97313),y=n(14010),b=n(665),P=n(92260),_=n(85256);const S=s.G0([s.i0("post_does_not_exist"),s.i0("post_type_is_banned"),s.i0("post_type_is_restricted"),s.i0("post_is_in_trash")]),C=s.dt({errorType:S,postType:s.G0([s.S1,s.Z_]),backToAdminUrl:s.Z_}),w=["free","pro"],k=(0,_.$)(w),x=s.dt({enabled:s.O7}),I=s.G0([s.i0("local"),s.i0("production")]),D=s.dt({environment:I,elementPresets:v.p,neededData:p.i,builderElements:s.IX(i._t),elementsExternalAttrsDepsAndActions:i.xd,builderElementCategories:i.Ve,preferences:g.p,dynamicFields:a.UN,conditions:m.bn,fonts:r.s,globalSettingsControlsAndTemplate:l.D,globalSettings:o.az,plugins:c.m,availableDocuments:h.gu,selectors:u.Ho,availableMediaSizes:s.IX(b.wP),availablePermissions:s.IX(y.E),availableWordpressPlugins:s.IX(i.ws),permission:y.E,builtinBreakpoints:s.IX(f.g),twigMacros:i.My,twigMacrosHash:s.Z_,designLibrary:P.Jd,subscriptionMode:k,experiments:s.IX(s.Z_),ai:x}),E=s.jV([s.dt({document:h.fA,documentSpecificNeededUrls:p.s,templatePreview:d.jz}),D]),Z=s.G0([C,E]),T=D},21516:(e,t,n)=>{n.d(t,{Ho:()=>c,Ng:()=>l});var s=n(75031),a=n(32521),i=n(89754);const o=a.Z_,r=a.dt({name:o,type:a.G0([a.i0("class"),a.i0("custom")]),properties:s.az}),l=a.IX(r),c=a.iG(a.dt({template:a.Z_,controls:a.IX(i.ur),selectors:l}))},23777:(e,t,n)=>{n.d(t,{NC:()=>o,jz:()=>r});var s=n(32521);const a=s.dt({field:s.Z_,index:s.pk}),i=s.jV([s.dt({label:s.Z_,url:s.Z_,type:s.Z_,repeater:s.G0([a,s.lB,s.S1])}),s.r$({id:s.G0([s.Z_,s.pk])})]),o=s.IX(i),r=s.dt({previewableItems:s.G0([o,s.i0(!1)]),lastPreviewedItem:s.G0([i,s.i0(!1)])})},65118:(e,t,n)=>{n.d(t,{Z:()=>r});var s=n(45974),a=n(88506),i=n(30902),o=n(16442);function r(e,t){return(0,i.pipe)(e,a.Z,(0,s.map)((0,i.flow)(t.decode,(0,s.mapLeft)(o.H))),s.flatten)}},56888:(e,t,n)=>{function s(e){try{return JSON.parse(e)}catch(t){return void console.error("Failed to decode JSON string",t)}}n.d(t,{B:()=>s})},43981:(e,t,n)=>{n.d(t,{Z:()=>s});const s="form.breakdance-unbrowsable,\nform.breakdance-unbrowsable input,\nform.breakdance-unbrowsable select,\nform.breakdance-unbrowsable button,\na.breakdance-unbrowsable,\narea.breakdance-unbrowsable {\n    cursor: not-allowed !important;\n}"}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,(()=>{var e=[];n.O=(t,s,a,i)=>{if(!s){var o=1/0;for(d=0;d<e.length;d++){for(var[s,a,i]=e[d],r=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](s[l])))?s.splice(l--,1):(r=!1,i<o&&(o=i));if(r){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,a,i]}})(),(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{n.j=143})(),(()=>{var e={143:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var a,i,[o,r,l]=s,c=0;if(o.some((t=>0!==e[t]))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(l)var d=l(n)}for(t&&t(s);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},s=globalThis["webpackChunkbuilder"]=globalThis["webpackChunkbuilder"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=n.O(void 0,[998,64],(()=>n(60188)));s=n.O(s)})();
//# sourceMappingURL=app.6ce7d7aa.js.map