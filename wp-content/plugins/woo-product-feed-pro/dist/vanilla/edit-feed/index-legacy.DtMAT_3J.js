System.register(["../../common/style-legacy.DAJgtavs.js","./style.scss-legacy.D_J376pW.js"],function(e,r){"use strict";return{setters:[null,null],execute:function(){!function(e,r,t){const{__:o,_x:n,sprintf:a}=e.wp.i18n;t(function(){const r=()=>new URLSearchParams(window.location.search).get("tab")||"general",n=(e,r)=>{t(".woosea-admin-notice").remove();const n=`\n        <div class="notice notice-${r} is-dismissible woosea-admin-notice">\n          <p>${e}</p>\n          <button type="button" class="notice-dismiss">\n            <span class="screen-reader-text">${o("Dismiss this notice.","woo-product-feed-pro")}</span>\n          </button>\n        </div>\n      `;t(".adt-edit-feed-form").prepend(n),t(".woosea-admin-notice .notice-dismiss").on("click",function(){t(this).closest(".woosea-admin-notice").fadeOut(300,function(){t(this).remove()})})};t(".adt-edit-feed-form").on("submit",function(c){const i=r();if("general"===i){if(!((e=!1)=>{if(!t("#projectname").length)return!0;const r=t("#projectname").val(),s="string"==typeof r?r:"";return/^[a-zA-Z0-9-_.àèìòùÀÈÌÒÙáéíóúýÁÉÍÓÚÝâêîôûÂÊÎÔÛãñõÃÑÕäëïöüÿÄËÏÖÜŸçÇßØøÅåÆæœ ]*$/.test(s)?s.length<3?(e&&n(a(o("Sorry, your project name needs to be at least %d characters long.","woo-product-feed-pro"),3),"error"),!1):!(s.length>30&&(e&&n(a(o("Sorry, your project name cannot be over %d characters long.","woo-product-feed-pro"),30),"error"),1)):(e&&n(o("Sorry, only letters, numbers, whitespaces, -, . and _ are allowed for the projectname","woo-product-feed-pro"),"error"),!1)})(!0))return c.preventDefault(),!1}else if("conversion_analytics"===i&&s()&&!(()=>{const a=r();if(s()&&"conversion_analytics"===a){let r=!0,a=[];return t.ajax({url:e.ajaxurl,type:"POST",async:!1,data:{action:"check_temp_feed_required_fields",nonce:e.adtObj.adtNonce},success:function(e){!1===e.success&&(r=!1,e.data&&e.data.errors&&Array.isArray(e.data.errors)&&e.data.errors.forEach(e=>{a.push(e)}))},error:function(){r=!1,a.push(o("Could not validate feed configuration. Please try again.","woo-product-feed-pro"))}}),r||n(a.join("<br>"),"error"),r}return!0})())return c.preventDefault(),window.scrollTo(0,0),!1;if(t("#rulevalue").length){const e=t("#rulevalue").val(),r="string"==typeof e?e:"",s=1,i=200;if(r.length<s)return n(o("Sorry, rule value minimum length is 1 character","woo-product-feed-pro"),"error"),c.preventDefault(),!1;if(r.length>i)return n(a(o("Sorry, rule value cannot be over %d characters long.","woo-product-feed-pro"),i),"error"),c.preventDefault(),!1}return!0});const s=()=>!new URLSearchParams(window.location.search).has("id");let c=!1;s()&&(t(".adt-edit-feed-form").on("submit",function(){c=!0}),t(".woo-product-feed-pro-nav-tab-wrapper .nav-tab").on("click",function(){const e=t(this).attr("href");e&&(e=>{if(!e)return!1;if(!e.startsWith("http"))return!1;try{const r=new URL(window.location.href),t=new URL(e);return r.searchParams.get("page"),"adt-edit-feed"===t.searchParams.get("page")}catch(r){return!1}})(e)&&(c=!0,setTimeout(()=>{c=!1},100))}),t(window).on("beforeunload",function(e){if(!c){const r=o("Leaving this page will result in losing your feed configuration. Are you sure you want to leave?","woo-product-feed-pro");return e.returnValue=r,r}}))})}(window,document,jQuery)}}});
